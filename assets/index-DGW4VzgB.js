var _C=Object.defineProperty;var yC=(e,t,n)=>t in e?_C(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Tt=(e,t,n)=>yC(e,typeof t!="symbol"?t+"":t,n);function vC(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in e)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(e,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var xC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function N_(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Cb={exports:{}},Yf={},Ab={exports:{}},It={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ru=Symbol.for("react.element"),wC=Symbol.for("react.portal"),bC=Symbol.for("react.fragment"),TC=Symbol.for("react.strict_mode"),EC=Symbol.for("react.profiler"),SC=Symbol.for("react.provider"),kC=Symbol.for("react.context"),PC=Symbol.for("react.forward_ref"),IC=Symbol.for("react.suspense"),CC=Symbol.for("react.memo"),AC=Symbol.for("react.lazy"),v0=Symbol.iterator;function RC(e){return e===null||typeof e!="object"?null:(e=v0&&e[v0]||e["@@iterator"],typeof e=="function"?e:null)}var Rb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Nb=Object.assign,Lb={};function al(e,t,n){this.props=e,this.context=t,this.refs=Lb,this.updater=n||Rb}al.prototype.isReactComponent={};al.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};al.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Mb(){}Mb.prototype=al.prototype;function L_(e,t,n){this.props=e,this.context=t,this.refs=Lb,this.updater=n||Rb}var M_=L_.prototype=new Mb;M_.constructor=L_;Nb(M_,al.prototype);M_.isPureReactComponent=!0;var x0=Array.isArray,Db=Object.prototype.hasOwnProperty,D_={current:null},Ob={key:!0,ref:!0,__self:!0,__source:!0};function jb(e,t,n){var i,r={},s=null,o=null;if(t!=null)for(i in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)Db.call(t,i)&&!Ob.hasOwnProperty(i)&&(r[i]=t[i]);var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){for(var c=Array(l),h=0;h<l;h++)c[h]=arguments[h+2];r.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps,l)r[i]===void 0&&(r[i]=l[i]);return{$$typeof:Ru,type:e,key:s,ref:o,props:r,_owner:D_.current}}function NC(e,t){return{$$typeof:Ru,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function O_(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ru}function LC(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var w0=/\/+/g;function Jp(e,t){return typeof e=="object"&&e!==null&&e.key!=null?LC(""+e.key):t.toString(36)}function Ed(e,t,n,i,r){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Ru:case wC:o=!0}}if(o)return o=e,r=r(o),e=i===""?"."+Jp(o,0):i,x0(r)?(n="",e!=null&&(n=e.replace(w0,"$&/")+"/"),Ed(r,t,n,"",function(h){return h})):r!=null&&(O_(r)&&(r=NC(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(w0,"$&/")+"/")+e)),t.push(r)),1;if(o=0,i=i===""?".":i+":",x0(e))for(var l=0;l<e.length;l++){s=e[l];var c=i+Jp(s,l);o+=Ed(s,t,n,c,r)}else if(c=RC(e),typeof c=="function")for(e=c.call(e),l=0;!(s=e.next()).done;)s=s.value,c=i+Jp(s,l++),o+=Ed(s,t,n,c,r);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Vh(e,t,n){if(e==null)return e;var i=[],r=0;return Ed(e,i,"","",function(s){return t.call(n,s,r++)}),i}function MC(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var cn={current:null},Sd={transition:null},DC={ReactCurrentDispatcher:cn,ReactCurrentBatchConfig:Sd,ReactCurrentOwner:D_};function Vb(){throw Error("act(...) is not supported in production builds of React.")}It.Children={map:Vh,forEach:function(e,t,n){Vh(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Vh(e,function(){t++}),t},toArray:function(e){return Vh(e,function(t){return t})||[]},only:function(e){if(!O_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};It.Component=al;It.Fragment=bC;It.Profiler=EC;It.PureComponent=L_;It.StrictMode=TC;It.Suspense=IC;It.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DC;It.act=Vb;It.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=Nb({},e.props),r=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=D_.current),t.key!==void 0&&(r=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Db.call(t,c)&&!Ob.hasOwnProperty(c)&&(i[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];i.children=l}return{$$typeof:Ru,type:e.type,key:r,ref:s,props:i,_owner:o}};It.createContext=function(e){return e={$$typeof:kC,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:SC,_context:e},e.Consumer=e};It.createElement=jb;It.createFactory=function(e){var t=jb.bind(null,e);return t.type=e,t};It.createRef=function(){return{current:null}};It.forwardRef=function(e){return{$$typeof:PC,render:e}};It.isValidElement=O_;It.lazy=function(e){return{$$typeof:AC,_payload:{_status:-1,_result:e},_init:MC}};It.memo=function(e,t){return{$$typeof:CC,type:e,compare:t===void 0?null:t}};It.startTransition=function(e){var t=Sd.transition;Sd.transition={};try{e()}finally{Sd.transition=t}};It.unstable_act=Vb;It.useCallback=function(e,t){return cn.current.useCallback(e,t)};It.useContext=function(e){return cn.current.useContext(e)};It.useDebugValue=function(){};It.useDeferredValue=function(e){return cn.current.useDeferredValue(e)};It.useEffect=function(e,t){return cn.current.useEffect(e,t)};It.useId=function(){return cn.current.useId()};It.useImperativeHandle=function(e,t,n){return cn.current.useImperativeHandle(e,t,n)};It.useInsertionEffect=function(e,t){return cn.current.useInsertionEffect(e,t)};It.useLayoutEffect=function(e,t){return cn.current.useLayoutEffect(e,t)};It.useMemo=function(e,t){return cn.current.useMemo(e,t)};It.useReducer=function(e,t,n){return cn.current.useReducer(e,t,n)};It.useRef=function(e){return cn.current.useRef(e)};It.useState=function(e){return cn.current.useState(e)};It.useSyncExternalStore=function(e,t,n){return cn.current.useSyncExternalStore(e,t,n)};It.useTransition=function(){return cn.current.useTransition()};It.version="18.3.1";Ab.exports=It;var $=Ab.exports;const Nu=N_($),OC=vC({__proto__:null,default:Nu},[$]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jC=$,VC=Symbol.for("react.element"),FC=Symbol.for("react.fragment"),zC=Object.prototype.hasOwnProperty,BC=jC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,UC={key:!0,ref:!0,__self:!0,__source:!0};function Fb(e,t,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(i in t)zC.call(t,i)&&!UC.hasOwnProperty(i)&&(r[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)r[i]===void 0&&(r[i]=t[i]);return{$$typeof:VC,type:e,key:s,ref:o,props:r,_owner:BC.current}}Yf.Fragment=FC;Yf.jsx=Fb;Yf.jsxs=Fb;Cb.exports=Yf;var m=Cb.exports,zb={exports:{}},Rn={},Bb={exports:{}},Ub={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(K,st){var X=K.length;K.push(st);t:for(;0<X;){var lt=X-1>>>1,ut=K[lt];if(0<r(ut,st))K[lt]=st,K[X]=ut,X=lt;else break t}}function n(K){return K.length===0?null:K[0]}function i(K){if(K.length===0)return null;var st=K[0],X=K.pop();if(X!==st){K[0]=X;t:for(var lt=0,ut=K.length,wt=ut>>>1;lt<wt;){var St=2*(lt+1)-1,_t=K[St],ct=St+1,ke=K[ct];if(0>r(_t,X))ct<ut&&0>r(ke,_t)?(K[lt]=ke,K[ct]=X,lt=ct):(K[lt]=_t,K[St]=X,lt=St);else if(ct<ut&&0>r(ke,X))K[lt]=ke,K[ct]=X,lt=ct;else break t}}return st}function r(K,st){var X=K.sortIndex-st.sortIndex;return X!==0?X:K.id-st.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],h=[],p=1,g=null,y=3,x=!1,T=!1,S=!1,k=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(K){for(var st=n(h);st!==null;){if(st.callback===null)i(h);else if(st.startTime<=K)i(h),st.sortIndex=st.expirationTime,t(c,st);else break;st=n(h)}}function V(K){if(S=!1,R(K),!T)if(n(c)!==null)T=!0,Et(B);else{var st=n(h);st!==null&&bt(V,st.startTime-K)}}function B(K,st){T=!1,S&&(S=!1,P(b),b=-1),x=!0;var X=y;try{for(R(st),g=n(c);g!==null&&(!(g.expirationTime>st)||K&&!O());){var lt=g.callback;if(typeof lt=="function"){g.callback=null,y=g.priorityLevel;var ut=lt(g.expirationTime<=st);st=e.unstable_now(),typeof ut=="function"?g.callback=ut:g===n(c)&&i(c),R(st)}else i(c);g=n(c)}if(g!==null)var wt=!0;else{var St=n(h);St!==null&&bt(V,St.startTime-st),wt=!1}return wt}finally{g=null,y=X,x=!1}}var H=!1,N=null,b=-1,A=5,D=-1;function O(){return!(e.unstable_now()-D<A)}function z(){if(N!==null){var K=e.unstable_now();D=K;var st=!0;try{st=N(!0,K)}finally{st?j():(H=!1,N=null)}}else H=!1}var j;if(typeof I=="function")j=function(){I(z)};else if(typeof MessageChannel<"u"){var Rt=new MessageChannel,Vt=Rt.port2;Rt.port1.onmessage=z,j=function(){Vt.postMessage(null)}}else j=function(){k(z,0)};function Et(K){N=K,H||(H=!0,j())}function bt(K,st){b=k(function(){K(e.unstable_now())},st)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(K){K.callback=null},e.unstable_continueExecution=function(){T||x||(T=!0,Et(B))},e.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<K?Math.floor(1e3/K):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(K){switch(y){case 1:case 2:case 3:var st=3;break;default:st=y}var X=y;y=st;try{return K()}finally{y=X}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(K,st){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var X=y;y=K;try{return st()}finally{y=X}},e.unstable_scheduleCallback=function(K,st,X){var lt=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?lt+X:lt):X=lt,K){case 1:var ut=-1;break;case 2:ut=250;break;case 5:ut=1073741823;break;case 4:ut=1e4;break;default:ut=5e3}return ut=X+ut,K={id:p++,callback:st,priorityLevel:K,startTime:X,expirationTime:ut,sortIndex:-1},X>lt?(K.sortIndex=X,t(h,K),n(c)===null&&K===n(h)&&(S?(P(b),b=-1):S=!0,bt(V,X-lt))):(K.sortIndex=ut,t(c,K),T||x||(T=!0,Et(B))),K},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(K){var st=y;return function(){var X=y;y=st;try{return K.apply(this,arguments)}finally{y=X}}}})(Ub);Bb.exports=Ub;var HC=Bb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WC=$,An=HC;function J(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Hb=new Set,Yc={};function So(e,t){Ba(e,t),Ba(e+"Capture",t)}function Ba(e,t){for(Yc[e]=t,e=0;e<t.length;e++)Hb.add(t[e])}var pr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jm=Object.prototype.hasOwnProperty,$C=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,b0={},T0={};function qC(e){return Jm.call(T0,e)?!0:Jm.call(b0,e)?!1:$C.test(e)?T0[e]=!0:(b0[e]=!0,!1)}function GC(e,t,n,i){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function KC(e,t,n,i){if(t===null||typeof t>"u"||GC(e,t,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function un(e,t,n,i,r,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var He={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){He[e]=new un(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];He[t]=new un(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){He[e]=new un(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){He[e]=new un(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){He[e]=new un(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){He[e]=new un(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){He[e]=new un(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){He[e]=new un(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){He[e]=new un(e,5,!1,e.toLowerCase(),null,!1,!1)});var j_=/[\-:]([a-z])/g;function V_(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(j_,V_);He[t]=new un(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(j_,V_);He[t]=new un(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(j_,V_);He[t]=new un(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){He[e]=new un(e,1,!1,e.toLowerCase(),null,!1,!1)});He.xlinkHref=new un("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){He[e]=new un(e,1,!1,e.toLowerCase(),null,!0,!0)});function F_(e,t,n,i){var r=He.hasOwnProperty(t)?He[t]:null;(r!==null?r.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(KC(t,n,r,i)&&(n=null),i||r===null?qC(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=n===null?r.type===3?!1:"":n:(t=r.attributeName,i=r.attributeNamespace,n===null?e.removeAttribute(t):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}var br=WC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fh=Symbol.for("react.element"),_a=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),z_=Symbol.for("react.strict_mode"),tg=Symbol.for("react.profiler"),Wb=Symbol.for("react.provider"),$b=Symbol.for("react.context"),B_=Symbol.for("react.forward_ref"),eg=Symbol.for("react.suspense"),ng=Symbol.for("react.suspense_list"),U_=Symbol.for("react.memo"),Fr=Symbol.for("react.lazy"),qb=Symbol.for("react.offscreen"),E0=Symbol.iterator;function Jl(e){return e===null||typeof e!="object"?null:(e=E0&&e[E0]||e["@@iterator"],typeof e=="function"?e:null)}var ae=Object.assign,tm;function pc(e){if(tm===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);tm=t&&t[1]||""}return`
`+tm+e}var em=!1;function nm(e,t){if(!e||em)return"";em=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(h){var i=h}Reflect.construct(e,[],t)}else{try{t.call()}catch(h){i=h}e.call(t.prototype)}else{try{throw Error()}catch(h){i=h}e()}}catch(h){if(h&&i&&typeof h.stack=="string"){for(var r=h.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,l=s.length-1;1<=o&&0<=l&&r[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(r[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||r[o]!==s[l]){var c=`
`+r[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{em=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?pc(e):""}function ZC(e){switch(e.tag){case 5:return pc(e.type);case 16:return pc("Lazy");case 13:return pc("Suspense");case 19:return pc("SuspenseList");case 0:case 2:case 15:return e=nm(e.type,!1),e;case 11:return e=nm(e.type.render,!1),e;case 1:return e=nm(e.type,!0),e;default:return""}}function ig(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ya:return"Fragment";case _a:return"Portal";case tg:return"Profiler";case z_:return"StrictMode";case eg:return"Suspense";case ng:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case $b:return(e.displayName||"Context")+".Consumer";case Wb:return(e._context.displayName||"Context")+".Provider";case B_:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case U_:return t=e.displayName||null,t!==null?t:ig(e.type)||"Memo";case Fr:t=e._payload,e=e._init;try{return ig(e(t))}catch{}}return null}function QC(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ig(t);case 8:return t===z_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function fs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Gb(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function YC(e){var t=Gb(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function zh(e){e._valueTracker||(e._valueTracker=YC(e))}function Kb(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=Gb(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function Kd(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function rg(e,t){var n=t.checked;return ae({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function S0(e,t){var n=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;n=fs(t.value!=null?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Zb(e,t){t=t.checked,t!=null&&F_(e,"checked",t,!1)}function sg(e,t){Zb(e,t);var n=fs(t.value),i=t.type;if(n!=null)i==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?og(e,t.type,n):t.hasOwnProperty("defaultValue")&&og(e,t.type,fs(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function k0(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function og(e,t,n){(t!=="number"||Kd(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var mc=Array.isArray;function Aa(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+fs(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,i&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function ag(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(J(91));return ae({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function P0(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(J(92));if(mc(n)){if(1<n.length)throw Error(J(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:fs(n)}}function Qb(e,t){var n=fs(t.value),i=fs(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),i!=null&&(e.defaultValue=""+i)}function I0(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Yb(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lg(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Yb(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Bh,Xb=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,i,r){MSApp.execUnsafeLocalFunction(function(){return e(t,n,i,r)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Bh=Bh||document.createElement("div"),Bh.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Bh.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Xc(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ic={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},XC=["Webkit","ms","Moz","O"];Object.keys(Ic).forEach(function(e){XC.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ic[t]=Ic[e]})});function Jb(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ic.hasOwnProperty(e)&&Ic[e]?(""+t).trim():t+"px"}function tT(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=Jb(n,t[n],i);n==="float"&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}var JC=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cg(e,t){if(t){if(JC[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(J(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(J(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(J(61))}if(t.style!=null&&typeof t.style!="object")throw Error(J(62))}}function ug(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hg=null;function H_(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var dg=null,Ra=null,Na=null;function C0(e){if(e=Du(e)){if(typeof dg!="function")throw Error(J(280));var t=e.stateNode;t&&(t=np(t),dg(e.stateNode,e.type,t))}}function eT(e){Ra?Na?Na.push(e):Na=[e]:Ra=e}function nT(){if(Ra){var e=Ra,t=Na;if(Na=Ra=null,C0(e),t)for(e=0;e<t.length;e++)C0(t[e])}}function iT(e,t){return e(t)}function rT(){}var im=!1;function sT(e,t,n){if(im)return e(t,n);im=!0;try{return iT(e,t,n)}finally{im=!1,(Ra!==null||Na!==null)&&(rT(),nT())}}function Jc(e,t){var n=e.stateNode;if(n===null)return null;var i=np(n);if(i===null)return null;n=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break t;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(J(231,t,typeof n));return n}var fg=!1;if(pr)try{var tc={};Object.defineProperty(tc,"passive",{get:function(){fg=!0}}),window.addEventListener("test",tc,tc),window.removeEventListener("test",tc,tc)}catch{fg=!1}function tA(e,t,n,i,r,s,o,l,c){var h=Array.prototype.slice.call(arguments,3);try{t.apply(n,h)}catch(p){this.onError(p)}}var Cc=!1,Zd=null,Qd=!1,pg=null,eA={onError:function(e){Cc=!0,Zd=e}};function nA(e,t,n,i,r,s,o,l,c){Cc=!1,Zd=null,tA.apply(eA,arguments)}function iA(e,t,n,i,r,s,o,l,c){if(nA.apply(this,arguments),Cc){if(Cc){var h=Zd;Cc=!1,Zd=null}else throw Error(J(198));Qd||(Qd=!0,pg=h)}}function ko(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function oT(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function A0(e){if(ko(e)!==e)throw Error(J(188))}function rA(e){var t=e.alternate;if(!t){if(t=ko(e),t===null)throw Error(J(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return A0(r),e;if(s===i)return A0(r),t;s=s.sibling}throw Error(J(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,l=r.child;l;){if(l===n){o=!0,n=r,i=s;break}if(l===i){o=!0,i=r,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,i=r;break}if(l===i){o=!0,i=s,n=r;break}l=l.sibling}if(!o)throw Error(J(189))}}if(n.alternate!==i)throw Error(J(190))}if(n.tag!==3)throw Error(J(188));return n.stateNode.current===n?e:t}function aT(e){return e=rA(e),e!==null?lT(e):null}function lT(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=lT(e);if(t!==null)return t;e=e.sibling}return null}var cT=An.unstable_scheduleCallback,R0=An.unstable_cancelCallback,sA=An.unstable_shouldYield,oA=An.unstable_requestPaint,ge=An.unstable_now,aA=An.unstable_getCurrentPriorityLevel,W_=An.unstable_ImmediatePriority,uT=An.unstable_UserBlockingPriority,Yd=An.unstable_NormalPriority,lA=An.unstable_LowPriority,hT=An.unstable_IdlePriority,Xf=null,Ni=null;function cA(e){if(Ni&&typeof Ni.onCommitFiberRoot=="function")try{Ni.onCommitFiberRoot(Xf,e,void 0,(e.current.flags&128)===128)}catch{}}var di=Math.clz32?Math.clz32:dA,uA=Math.log,hA=Math.LN2;function dA(e){return e>>>=0,e===0?32:31-(uA(e)/hA|0)|0}var Uh=64,Hh=4194304;function gc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Xd(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,r=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~r;l!==0?i=gc(l):(s&=o,s!==0&&(i=gc(s)))}else o=n&~r,o!==0?i=gc(o):s!==0&&(i=gc(s));if(i===0)return 0;if(t!==0&&t!==i&&!(t&r)&&(r=i&-i,s=t&-t,r>=s||r===16&&(s&4194240)!==0))return t;if(i&4&&(i|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)n=31-di(t),r=1<<n,i|=e[n],t&=~r;return i}function fA(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pA(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-di(s),l=1<<o,c=r[o];c===-1?(!(l&n)||l&i)&&(r[o]=fA(l,t)):c<=t&&(e.expiredLanes|=l),s&=~l}}function mg(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function dT(){var e=Uh;return Uh<<=1,!(Uh&4194240)&&(Uh=64),e}function rm(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Lu(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-di(t),e[t]=n}function mA(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-di(n),s=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~s}}function $_(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-di(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var Ut=0;function fT(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var pT,q_,mT,gT,_T,gg=!1,Wh=[],ts=null,es=null,ns=null,tu=new Map,eu=new Map,Ur=[],gA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function N0(e,t){switch(e){case"focusin":case"focusout":ts=null;break;case"dragenter":case"dragleave":es=null;break;case"mouseover":case"mouseout":ns=null;break;case"pointerover":case"pointerout":tu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":eu.delete(t.pointerId)}}function ec(e,t,n,i,r,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},t!==null&&(t=Du(t),t!==null&&q_(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function _A(e,t,n,i,r){switch(t){case"focusin":return ts=ec(ts,e,t,n,i,r),!0;case"dragenter":return es=ec(es,e,t,n,i,r),!0;case"mouseover":return ns=ec(ns,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return tu.set(s,ec(tu.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,eu.set(s,ec(eu.get(s)||null,e,t,n,i,r)),!0}return!1}function yT(e){var t=Js(e.target);if(t!==null){var n=ko(t);if(n!==null){if(t=n.tag,t===13){if(t=oT(n),t!==null){e.blockedOn=t,_T(e.priority,function(){mT(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function kd(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=_g(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);hg=i,n.target.dispatchEvent(i),hg=null}else return t=Du(n),t!==null&&q_(t),e.blockedOn=n,!1;t.shift()}return!0}function L0(e,t,n){kd(e)&&n.delete(t)}function yA(){gg=!1,ts!==null&&kd(ts)&&(ts=null),es!==null&&kd(es)&&(es=null),ns!==null&&kd(ns)&&(ns=null),tu.forEach(L0),eu.forEach(L0)}function nc(e,t){e.blockedOn===t&&(e.blockedOn=null,gg||(gg=!0,An.unstable_scheduleCallback(An.unstable_NormalPriority,yA)))}function nu(e){function t(r){return nc(r,e)}if(0<Wh.length){nc(Wh[0],e);for(var n=1;n<Wh.length;n++){var i=Wh[n];i.blockedOn===e&&(i.blockedOn=null)}}for(ts!==null&&nc(ts,e),es!==null&&nc(es,e),ns!==null&&nc(ns,e),tu.forEach(t),eu.forEach(t),n=0;n<Ur.length;n++)i=Ur[n],i.blockedOn===e&&(i.blockedOn=null);for(;0<Ur.length&&(n=Ur[0],n.blockedOn===null);)yT(n),n.blockedOn===null&&Ur.shift()}var La=br.ReactCurrentBatchConfig,Jd=!0;function vA(e,t,n,i){var r=Ut,s=La.transition;La.transition=null;try{Ut=1,G_(e,t,n,i)}finally{Ut=r,La.transition=s}}function xA(e,t,n,i){var r=Ut,s=La.transition;La.transition=null;try{Ut=4,G_(e,t,n,i)}finally{Ut=r,La.transition=s}}function G_(e,t,n,i){if(Jd){var r=_g(e,t,n,i);if(r===null)pm(e,t,i,tf,n),N0(e,i);else if(_A(r,e,t,n,i))i.stopPropagation();else if(N0(e,i),t&4&&-1<gA.indexOf(e)){for(;r!==null;){var s=Du(r);if(s!==null&&pT(s),s=_g(e,t,n,i),s===null&&pm(e,t,i,tf,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else pm(e,t,i,null,n)}}var tf=null;function _g(e,t,n,i){if(tf=null,e=H_(i),e=Js(e),e!==null)if(t=ko(e),t===null)e=null;else if(n=t.tag,n===13){if(e=oT(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return tf=e,null}function vT(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(aA()){case W_:return 1;case uT:return 4;case Yd:case lA:return 16;case hT:return 536870912;default:return 16}default:return 16}}var Zr=null,K_=null,Pd=null;function xT(){if(Pd)return Pd;var e,t=K_,n=t.length,i,r="value"in Zr?Zr.value:Zr.textContent,s=r.length;for(e=0;e<n&&t[e]===r[e];e++);var o=n-e;for(i=1;i<=o&&t[n-i]===r[s-i];i++);return Pd=r.slice(e,1<i?1-i:void 0)}function Id(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function $h(){return!0}function M0(){return!1}function Nn(e){function t(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?$h:M0,this.isPropagationStopped=M0,this}return ae(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=$h)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=$h)},persist:function(){},isPersistent:$h}),t}var ll={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Z_=Nn(ll),Mu=ae({},ll,{view:0,detail:0}),wA=Nn(Mu),sm,om,ic,Jf=ae({},Mu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Q_,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ic&&(ic&&e.type==="mousemove"?(sm=e.screenX-ic.screenX,om=e.screenY-ic.screenY):om=sm=0,ic=e),sm)},movementY:function(e){return"movementY"in e?e.movementY:om}}),D0=Nn(Jf),bA=ae({},Jf,{dataTransfer:0}),TA=Nn(bA),EA=ae({},Mu,{relatedTarget:0}),am=Nn(EA),SA=ae({},ll,{animationName:0,elapsedTime:0,pseudoElement:0}),kA=Nn(SA),PA=ae({},ll,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),IA=Nn(PA),CA=ae({},ll,{data:0}),O0=Nn(CA),AA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},RA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},NA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function LA(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=NA[e])?!!t[e]:!1}function Q_(){return LA}var MA=ae({},Mu,{key:function(e){if(e.key){var t=AA[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Id(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?RA[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Q_,charCode:function(e){return e.type==="keypress"?Id(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Id(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),DA=Nn(MA),OA=ae({},Jf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),j0=Nn(OA),jA=ae({},Mu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Q_}),VA=Nn(jA),FA=ae({},ll,{propertyName:0,elapsedTime:0,pseudoElement:0}),zA=Nn(FA),BA=ae({},Jf,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),UA=Nn(BA),HA=[9,13,27,32],Y_=pr&&"CompositionEvent"in window,Ac=null;pr&&"documentMode"in document&&(Ac=document.documentMode);var WA=pr&&"TextEvent"in window&&!Ac,wT=pr&&(!Y_||Ac&&8<Ac&&11>=Ac),V0=" ",F0=!1;function bT(e,t){switch(e){case"keyup":return HA.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function TT(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var va=!1;function $A(e,t){switch(e){case"compositionend":return TT(t);case"keypress":return t.which!==32?null:(F0=!0,V0);case"textInput":return e=t.data,e===V0&&F0?null:e;default:return null}}function qA(e,t){if(va)return e==="compositionend"||!Y_&&bT(e,t)?(e=xT(),Pd=K_=Zr=null,va=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return wT&&t.locale!=="ko"?null:t.data;default:return null}}var GA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function z0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!GA[e.type]:t==="textarea"}function ET(e,t,n,i){eT(i),t=ef(t,"onChange"),0<t.length&&(n=new Z_("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Rc=null,iu=null;function KA(e){DT(e,0)}function tp(e){var t=ba(e);if(Kb(t))return e}function ZA(e,t){if(e==="change")return t}var ST=!1;if(pr){var lm;if(pr){var cm="oninput"in document;if(!cm){var B0=document.createElement("div");B0.setAttribute("oninput","return;"),cm=typeof B0.oninput=="function"}lm=cm}else lm=!1;ST=lm&&(!document.documentMode||9<document.documentMode)}function U0(){Rc&&(Rc.detachEvent("onpropertychange",kT),iu=Rc=null)}function kT(e){if(e.propertyName==="value"&&tp(iu)){var t=[];ET(t,iu,e,H_(e)),sT(KA,t)}}function QA(e,t,n){e==="focusin"?(U0(),Rc=t,iu=n,Rc.attachEvent("onpropertychange",kT)):e==="focusout"&&U0()}function YA(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return tp(iu)}function XA(e,t){if(e==="click")return tp(t)}function JA(e,t){if(e==="input"||e==="change")return tp(t)}function t2(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var gi=typeof Object.is=="function"?Object.is:t2;function ru(e,t){if(gi(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Jm.call(t,r)||!gi(e[r],t[r]))return!1}return!0}function H0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function W0(e,t){var n=H0(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=H0(n)}}function PT(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?PT(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function IT(){for(var e=window,t=Kd();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Kd(e.document)}return t}function X_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function e2(e){var t=IT(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&PT(n.ownerDocument.documentElement,n)){if(i!==null&&X_(n)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!e.extend&&s>i&&(r=i,i=s,s=r),r=W0(n,s);var o=W0(n,i);r&&o&&(e.rangeCount!==1||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(r.node,r.offset),e.removeAllRanges(),s>i?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var n2=pr&&"documentMode"in document&&11>=document.documentMode,xa=null,yg=null,Nc=null,vg=!1;function $0(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;vg||xa==null||xa!==Kd(i)||(i=xa,"selectionStart"in i&&X_(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Nc&&ru(Nc,i)||(Nc=i,i=ef(yg,"onSelect"),0<i.length&&(t=new Z_("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=xa)))}function qh(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wa={animationend:qh("Animation","AnimationEnd"),animationiteration:qh("Animation","AnimationIteration"),animationstart:qh("Animation","AnimationStart"),transitionend:qh("Transition","TransitionEnd")},um={},CT={};pr&&(CT=document.createElement("div").style,"AnimationEvent"in window||(delete wa.animationend.animation,delete wa.animationiteration.animation,delete wa.animationstart.animation),"TransitionEvent"in window||delete wa.transitionend.transition);function ep(e){if(um[e])return um[e];if(!wa[e])return e;var t=wa[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in CT)return um[e]=t[n];return e}var AT=ep("animationend"),RT=ep("animationiteration"),NT=ep("animationstart"),LT=ep("transitionend"),MT=new Map,q0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xs(e,t){MT.set(e,t),So(t,[e])}for(var hm=0;hm<q0.length;hm++){var dm=q0[hm],i2=dm.toLowerCase(),r2=dm[0].toUpperCase()+dm.slice(1);xs(i2,"on"+r2)}xs(AT,"onAnimationEnd");xs(RT,"onAnimationIteration");xs(NT,"onAnimationStart");xs("dblclick","onDoubleClick");xs("focusin","onFocus");xs("focusout","onBlur");xs(LT,"onTransitionEnd");Ba("onMouseEnter",["mouseout","mouseover"]);Ba("onMouseLeave",["mouseout","mouseover"]);Ba("onPointerEnter",["pointerout","pointerover"]);Ba("onPointerLeave",["pointerout","pointerover"]);So("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));So("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));So("onBeforeInput",["compositionend","keypress","textInput","paste"]);So("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));So("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));So("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _c="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),s2=new Set("cancel close invalid load scroll toggle".split(" ").concat(_c));function G0(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,iA(i,t,void 0,e),e.currentTarget=null}function DT(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;t:{var s=void 0;if(t)for(var o=i.length-1;0<=o;o--){var l=i[o],c=l.instance,h=l.currentTarget;if(l=l.listener,c!==s&&r.isPropagationStopped())break t;G0(r,l,h),s=c}else for(o=0;o<i.length;o++){if(l=i[o],c=l.instance,h=l.currentTarget,l=l.listener,c!==s&&r.isPropagationStopped())break t;G0(r,l,h),s=c}}}if(Qd)throw e=pg,Qd=!1,pg=null,e}function Zt(e,t){var n=t[Eg];n===void 0&&(n=t[Eg]=new Set);var i=e+"__bubble";n.has(i)||(OT(t,e,2,!1),n.add(i))}function fm(e,t,n){var i=0;t&&(i|=4),OT(n,e,i,t)}var Gh="_reactListening"+Math.random().toString(36).slice(2);function su(e){if(!e[Gh]){e[Gh]=!0,Hb.forEach(function(n){n!=="selectionchange"&&(s2.has(n)||fm(n,!1,e),fm(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Gh]||(t[Gh]=!0,fm("selectionchange",!1,t))}}function OT(e,t,n,i){switch(vT(t)){case 1:var r=vA;break;case 4:r=xA;break;default:r=G_}n=r.bind(null,t,n,e),r=void 0,!fg||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),i?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function pm(e,t,n,i,r){var s=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var l=i.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;o=o.return}for(;l!==null;){if(o=Js(l),o===null)return;if(c=o.tag,c===5||c===6){i=s=o;continue t}l=l.parentNode}}i=i.return}sT(function(){var h=s,p=H_(n),g=[];t:{var y=MT.get(e);if(y!==void 0){var x=Z_,T=e;switch(e){case"keypress":if(Id(n)===0)break t;case"keydown":case"keyup":x=DA;break;case"focusin":T="focus",x=am;break;case"focusout":T="blur",x=am;break;case"beforeblur":case"afterblur":x=am;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=D0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=TA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=VA;break;case AT:case RT:case NT:x=kA;break;case LT:x=zA;break;case"scroll":x=wA;break;case"wheel":x=UA;break;case"copy":case"cut":case"paste":x=IA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=j0}var S=(t&4)!==0,k=!S&&e==="scroll",P=S?y!==null?y+"Capture":null:y;S=[];for(var I=h,R;I!==null;){R=I;var V=R.stateNode;if(R.tag===5&&V!==null&&(R=V,P!==null&&(V=Jc(I,P),V!=null&&S.push(ou(I,V,R)))),k)break;I=I.return}0<S.length&&(y=new x(y,T,null,n,p),g.push({event:y,listeners:S}))}}if(!(t&7)){t:{if(y=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",y&&n!==hg&&(T=n.relatedTarget||n.fromElement)&&(Js(T)||T[mr]))break t;if((x||y)&&(y=p.window===p?p:(y=p.ownerDocument)?y.defaultView||y.parentWindow:window,x?(T=n.relatedTarget||n.toElement,x=h,T=T?Js(T):null,T!==null&&(k=ko(T),T!==k||T.tag!==5&&T.tag!==6)&&(T=null)):(x=null,T=h),x!==T)){if(S=D0,V="onMouseLeave",P="onMouseEnter",I="mouse",(e==="pointerout"||e==="pointerover")&&(S=j0,V="onPointerLeave",P="onPointerEnter",I="pointer"),k=x==null?y:ba(x),R=T==null?y:ba(T),y=new S(V,I+"leave",x,n,p),y.target=k,y.relatedTarget=R,V=null,Js(p)===h&&(S=new S(P,I+"enter",T,n,p),S.target=R,S.relatedTarget=k,V=S),k=V,x&&T)e:{for(S=x,P=T,I=0,R=S;R;R=da(R))I++;for(R=0,V=P;V;V=da(V))R++;for(;0<I-R;)S=da(S),I--;for(;0<R-I;)P=da(P),R--;for(;I--;){if(S===P||P!==null&&S===P.alternate)break e;S=da(S),P=da(P)}S=null}else S=null;x!==null&&K0(g,y,x,S,!1),T!==null&&k!==null&&K0(g,k,T,S,!0)}}t:{if(y=h?ba(h):window,x=y.nodeName&&y.nodeName.toLowerCase(),x==="select"||x==="input"&&y.type==="file")var B=ZA;else if(z0(y))if(ST)B=JA;else{B=YA;var H=QA}else(x=y.nodeName)&&x.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(B=XA);if(B&&(B=B(e,h))){ET(g,B,n,p);break t}H&&H(e,y,h),e==="focusout"&&(H=y._wrapperState)&&H.controlled&&y.type==="number"&&og(y,"number",y.value)}switch(H=h?ba(h):window,e){case"focusin":(z0(H)||H.contentEditable==="true")&&(xa=H,yg=h,Nc=null);break;case"focusout":Nc=yg=xa=null;break;case"mousedown":vg=!0;break;case"contextmenu":case"mouseup":case"dragend":vg=!1,$0(g,n,p);break;case"selectionchange":if(n2)break;case"keydown":case"keyup":$0(g,n,p)}var N;if(Y_)t:{switch(e){case"compositionstart":var b="onCompositionStart";break t;case"compositionend":b="onCompositionEnd";break t;case"compositionupdate":b="onCompositionUpdate";break t}b=void 0}else va?bT(e,n)&&(b="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(wT&&n.locale!=="ko"&&(va||b!=="onCompositionStart"?b==="onCompositionEnd"&&va&&(N=xT()):(Zr=p,K_="value"in Zr?Zr.value:Zr.textContent,va=!0)),H=ef(h,b),0<H.length&&(b=new O0(b,e,null,n,p),g.push({event:b,listeners:H}),N?b.data=N:(N=TT(n),N!==null&&(b.data=N)))),(N=WA?$A(e,n):qA(e,n))&&(h=ef(h,"onBeforeInput"),0<h.length&&(p=new O0("onBeforeInput","beforeinput",null,n,p),g.push({event:p,listeners:h}),p.data=N))}DT(g,t)})}function ou(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ef(e,t){for(var n=t+"Capture",i=[];e!==null;){var r=e,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Jc(e,n),s!=null&&i.unshift(ou(e,s,r)),s=Jc(e,t),s!=null&&i.push(ou(e,s,r))),e=e.return}return i}function da(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function K0(e,t,n,i,r){for(var s=t._reactName,o=[];n!==null&&n!==i;){var l=n,c=l.alternate,h=l.stateNode;if(c!==null&&c===i)break;l.tag===5&&h!==null&&(l=h,r?(c=Jc(n,s),c!=null&&o.unshift(ou(n,c,l))):r||(c=Jc(n,s),c!=null&&o.push(ou(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var o2=/\r\n?/g,a2=/\u0000|\uFFFD/g;function Z0(e){return(typeof e=="string"?e:""+e).replace(o2,`
`).replace(a2,"")}function Kh(e,t,n){if(t=Z0(t),Z0(e)!==t&&n)throw Error(J(425))}function nf(){}var xg=null,wg=null;function bg(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Tg=typeof setTimeout=="function"?setTimeout:void 0,l2=typeof clearTimeout=="function"?clearTimeout:void 0,Q0=typeof Promise=="function"?Promise:void 0,c2=typeof queueMicrotask=="function"?queueMicrotask:typeof Q0<"u"?function(e){return Q0.resolve(null).then(e).catch(u2)}:Tg;function u2(e){setTimeout(function(){throw e})}function mm(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){e.removeChild(r),nu(t);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);nu(t)}function is(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Y0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var cl=Math.random().toString(36).slice(2),Ai="__reactFiber$"+cl,au="__reactProps$"+cl,mr="__reactContainer$"+cl,Eg="__reactEvents$"+cl,h2="__reactListeners$"+cl,d2="__reactHandles$"+cl;function Js(e){var t=e[Ai];if(t)return t;for(var n=e.parentNode;n;){if(t=n[mr]||n[Ai]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Y0(e);e!==null;){if(n=e[Ai])return n;e=Y0(e)}return t}e=n,n=e.parentNode}return null}function Du(e){return e=e[Ai]||e[mr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ba(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(J(33))}function np(e){return e[au]||null}var Sg=[],Ta=-1;function ws(e){return{current:e}}function Xt(e){0>Ta||(e.current=Sg[Ta],Sg[Ta]=null,Ta--)}function Gt(e,t){Ta++,Sg[Ta]=e.current,e.current=t}var ps={},Je=ws(ps),yn=ws(!1),ho=ps;function Ua(e,t){var n=e.type.contextTypes;if(!n)return ps;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=t[s];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function vn(e){return e=e.childContextTypes,e!=null}function rf(){Xt(yn),Xt(Je)}function X0(e,t,n){if(Je.current!==ps)throw Error(J(168));Gt(Je,t),Gt(yn,n)}function jT(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in t))throw Error(J(108,QC(e)||"Unknown",r));return ae({},n,i)}function sf(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ps,ho=Je.current,Gt(Je,e),Gt(yn,yn.current),!0}function J0(e,t,n){var i=e.stateNode;if(!i)throw Error(J(169));n?(e=jT(e,t,ho),i.__reactInternalMemoizedMergedChildContext=e,Xt(yn),Xt(Je),Gt(Je,e)):Xt(yn),Gt(yn,n)}var nr=null,ip=!1,gm=!1;function VT(e){nr===null?nr=[e]:nr.push(e)}function f2(e){ip=!0,VT(e)}function bs(){if(!gm&&nr!==null){gm=!0;var e=0,t=Ut;try{var n=nr;for(Ut=1;e<n.length;e++){var i=n[e];do i=i(!0);while(i!==null)}nr=null,ip=!1}catch(r){throw nr!==null&&(nr=nr.slice(e+1)),cT(W_,bs),r}finally{Ut=t,gm=!1}}return null}var Ea=[],Sa=0,of=null,af=0,Hn=[],Wn=0,fo=null,sr=1,or="";function Gs(e,t){Ea[Sa++]=af,Ea[Sa++]=of,of=e,af=t}function FT(e,t,n){Hn[Wn++]=sr,Hn[Wn++]=or,Hn[Wn++]=fo,fo=e;var i=sr;e=or;var r=32-di(i)-1;i&=~(1<<r),n+=1;var s=32-di(t)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,sr=1<<32-di(t)+r|n<<r|i,or=s+e}else sr=1<<s|n<<r|i,or=e}function J_(e){e.return!==null&&(Gs(e,1),FT(e,1,0))}function ty(e){for(;e===of;)of=Ea[--Sa],Ea[Sa]=null,af=Ea[--Sa],Ea[Sa]=null;for(;e===fo;)fo=Hn[--Wn],Hn[Wn]=null,or=Hn[--Wn],Hn[Wn]=null,sr=Hn[--Wn],Hn[Wn]=null}var Cn=null,kn=null,ee=!1,li=null;function zT(e,t){var n=$n(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function tx(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Cn=e,kn=is(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Cn=e,kn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=fo!==null?{id:sr,overflow:or}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=$n(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Cn=e,kn=null,!0):!1;default:return!1}}function kg(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Pg(e){if(ee){var t=kn;if(t){var n=t;if(!tx(e,t)){if(kg(e))throw Error(J(418));t=is(n.nextSibling);var i=Cn;t&&tx(e,t)?zT(i,n):(e.flags=e.flags&-4097|2,ee=!1,Cn=e)}}else{if(kg(e))throw Error(J(418));e.flags=e.flags&-4097|2,ee=!1,Cn=e}}}function ex(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Cn=e}function Zh(e){if(e!==Cn)return!1;if(!ee)return ex(e),ee=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!bg(e.type,e.memoizedProps)),t&&(t=kn)){if(kg(e))throw BT(),Error(J(418));for(;t;)zT(e,t),t=is(t.nextSibling)}if(ex(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(J(317));t:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){kn=is(e.nextSibling);break t}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}kn=null}}else kn=Cn?is(e.stateNode.nextSibling):null;return!0}function BT(){for(var e=kn;e;)e=is(e.nextSibling)}function Ha(){kn=Cn=null,ee=!1}function ey(e){li===null?li=[e]:li.push(e)}var p2=br.ReactCurrentBatchConfig;function rc(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(J(309));var i=n.stateNode}if(!i)throw Error(J(147,e));var r=i,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var l=r.refs;o===null?delete l[s]:l[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(J(284));if(!n._owner)throw Error(J(290,e))}return e}function Qh(e,t){throw e=Object.prototype.toString.call(t),Error(J(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function nx(e){var t=e._init;return t(e._payload)}function UT(e){function t(P,I){if(e){var R=P.deletions;R===null?(P.deletions=[I],P.flags|=16):R.push(I)}}function n(P,I){if(!e)return null;for(;I!==null;)t(P,I),I=I.sibling;return null}function i(P,I){for(P=new Map;I!==null;)I.key!==null?P.set(I.key,I):P.set(I.index,I),I=I.sibling;return P}function r(P,I){return P=as(P,I),P.index=0,P.sibling=null,P}function s(P,I,R){return P.index=R,e?(R=P.alternate,R!==null?(R=R.index,R<I?(P.flags|=2,I):R):(P.flags|=2,I)):(P.flags|=1048576,I)}function o(P){return e&&P.alternate===null&&(P.flags|=2),P}function l(P,I,R,V){return I===null||I.tag!==6?(I=Tm(R,P.mode,V),I.return=P,I):(I=r(I,R),I.return=P,I)}function c(P,I,R,V){var B=R.type;return B===ya?p(P,I,R.props.children,V,R.key):I!==null&&(I.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===Fr&&nx(B)===I.type)?(V=r(I,R.props),V.ref=rc(P,I,R),V.return=P,V):(V=Dd(R.type,R.key,R.props,null,P.mode,V),V.ref=rc(P,I,R),V.return=P,V)}function h(P,I,R,V){return I===null||I.tag!==4||I.stateNode.containerInfo!==R.containerInfo||I.stateNode.implementation!==R.implementation?(I=Em(R,P.mode,V),I.return=P,I):(I=r(I,R.children||[]),I.return=P,I)}function p(P,I,R,V,B){return I===null||I.tag!==7?(I=ao(R,P.mode,V,B),I.return=P,I):(I=r(I,R),I.return=P,I)}function g(P,I,R){if(typeof I=="string"&&I!==""||typeof I=="number")return I=Tm(""+I,P.mode,R),I.return=P,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Fh:return R=Dd(I.type,I.key,I.props,null,P.mode,R),R.ref=rc(P,null,I),R.return=P,R;case _a:return I=Em(I,P.mode,R),I.return=P,I;case Fr:var V=I._init;return g(P,V(I._payload),R)}if(mc(I)||Jl(I))return I=ao(I,P.mode,R,null),I.return=P,I;Qh(P,I)}return null}function y(P,I,R,V){var B=I!==null?I.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return B!==null?null:l(P,I,""+R,V);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Fh:return R.key===B?c(P,I,R,V):null;case _a:return R.key===B?h(P,I,R,V):null;case Fr:return B=R._init,y(P,I,B(R._payload),V)}if(mc(R)||Jl(R))return B!==null?null:p(P,I,R,V,null);Qh(P,R)}return null}function x(P,I,R,V,B){if(typeof V=="string"&&V!==""||typeof V=="number")return P=P.get(R)||null,l(I,P,""+V,B);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Fh:return P=P.get(V.key===null?R:V.key)||null,c(I,P,V,B);case _a:return P=P.get(V.key===null?R:V.key)||null,h(I,P,V,B);case Fr:var H=V._init;return x(P,I,R,H(V._payload),B)}if(mc(V)||Jl(V))return P=P.get(R)||null,p(I,P,V,B,null);Qh(I,V)}return null}function T(P,I,R,V){for(var B=null,H=null,N=I,b=I=0,A=null;N!==null&&b<R.length;b++){N.index>b?(A=N,N=null):A=N.sibling;var D=y(P,N,R[b],V);if(D===null){N===null&&(N=A);break}e&&N&&D.alternate===null&&t(P,N),I=s(D,I,b),H===null?B=D:H.sibling=D,H=D,N=A}if(b===R.length)return n(P,N),ee&&Gs(P,b),B;if(N===null){for(;b<R.length;b++)N=g(P,R[b],V),N!==null&&(I=s(N,I,b),H===null?B=N:H.sibling=N,H=N);return ee&&Gs(P,b),B}for(N=i(P,N);b<R.length;b++)A=x(N,P,b,R[b],V),A!==null&&(e&&A.alternate!==null&&N.delete(A.key===null?b:A.key),I=s(A,I,b),H===null?B=A:H.sibling=A,H=A);return e&&N.forEach(function(O){return t(P,O)}),ee&&Gs(P,b),B}function S(P,I,R,V){var B=Jl(R);if(typeof B!="function")throw Error(J(150));if(R=B.call(R),R==null)throw Error(J(151));for(var H=B=null,N=I,b=I=0,A=null,D=R.next();N!==null&&!D.done;b++,D=R.next()){N.index>b?(A=N,N=null):A=N.sibling;var O=y(P,N,D.value,V);if(O===null){N===null&&(N=A);break}e&&N&&O.alternate===null&&t(P,N),I=s(O,I,b),H===null?B=O:H.sibling=O,H=O,N=A}if(D.done)return n(P,N),ee&&Gs(P,b),B;if(N===null){for(;!D.done;b++,D=R.next())D=g(P,D.value,V),D!==null&&(I=s(D,I,b),H===null?B=D:H.sibling=D,H=D);return ee&&Gs(P,b),B}for(N=i(P,N);!D.done;b++,D=R.next())D=x(N,P,b,D.value,V),D!==null&&(e&&D.alternate!==null&&N.delete(D.key===null?b:D.key),I=s(D,I,b),H===null?B=D:H.sibling=D,H=D);return e&&N.forEach(function(z){return t(P,z)}),ee&&Gs(P,b),B}function k(P,I,R,V){if(typeof R=="object"&&R!==null&&R.type===ya&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case Fh:t:{for(var B=R.key,H=I;H!==null;){if(H.key===B){if(B=R.type,B===ya){if(H.tag===7){n(P,H.sibling),I=r(H,R.props.children),I.return=P,P=I;break t}}else if(H.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===Fr&&nx(B)===H.type){n(P,H.sibling),I=r(H,R.props),I.ref=rc(P,H,R),I.return=P,P=I;break t}n(P,H);break}else t(P,H);H=H.sibling}R.type===ya?(I=ao(R.props.children,P.mode,V,R.key),I.return=P,P=I):(V=Dd(R.type,R.key,R.props,null,P.mode,V),V.ref=rc(P,I,R),V.return=P,P=V)}return o(P);case _a:t:{for(H=R.key;I!==null;){if(I.key===H)if(I.tag===4&&I.stateNode.containerInfo===R.containerInfo&&I.stateNode.implementation===R.implementation){n(P,I.sibling),I=r(I,R.children||[]),I.return=P,P=I;break t}else{n(P,I);break}else t(P,I);I=I.sibling}I=Em(R,P.mode,V),I.return=P,P=I}return o(P);case Fr:return H=R._init,k(P,I,H(R._payload),V)}if(mc(R))return T(P,I,R,V);if(Jl(R))return S(P,I,R,V);Qh(P,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,I!==null&&I.tag===6?(n(P,I.sibling),I=r(I,R),I.return=P,P=I):(n(P,I),I=Tm(R,P.mode,V),I.return=P,P=I),o(P)):n(P,I)}return k}var Wa=UT(!0),HT=UT(!1),lf=ws(null),cf=null,ka=null,ny=null;function iy(){ny=ka=cf=null}function ry(e){var t=lf.current;Xt(lf),e._currentValue=t}function Ig(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Ma(e,t){cf=e,ny=ka=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(_n=!0),e.firstContext=null)}function Qn(e){var t=e._currentValue;if(ny!==e)if(e={context:e,memoizedValue:t,next:null},ka===null){if(cf===null)throw Error(J(308));ka=e,cf.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var to=null;function sy(e){to===null?to=[e]:to.push(e)}function WT(e,t,n,i){var r=t.interleaved;return r===null?(n.next=n,sy(t)):(n.next=r.next,r.next=n),t.interleaved=n,gr(e,i)}function gr(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var zr=!1;function oy(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $T(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function hr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function rs(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,jt&2){var r=i.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),i.pending=t,gr(e,n)}return r=i.interleaved,r===null?(t.next=t,sy(i)):(t.next=r.next,r.next=t),i.interleaved=t,gr(e,n)}function Cd(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,$_(e,n)}}function ix(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=t:s=s.next=t}else r=s=t;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function uf(e,t,n,i){var r=e.updateQueue;zr=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var c=l,h=c.next;c.next=null,o===null?s=h:o.next=h,o=c;var p=e.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==o&&(l===null?p.firstBaseUpdate=h:l.next=h,p.lastBaseUpdate=c))}if(s!==null){var g=r.baseState;o=0,p=h=c=null,l=s;do{var y=l.lane,x=l.eventTime;if((i&y)===y){p!==null&&(p=p.next={eventTime:x,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});t:{var T=e,S=l;switch(y=t,x=n,S.tag){case 1:if(T=S.payload,typeof T=="function"){g=T.call(x,g,y);break t}g=T;break t;case 3:T.flags=T.flags&-65537|128;case 0:if(T=S.payload,y=typeof T=="function"?T.call(x,g,y):T,y==null)break t;g=ae({},g,y);break t;case 2:zr=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,y=r.effects,y===null?r.effects=[l]:y.push(l))}else x={eventTime:x,lane:y,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(h=p=x,c=g):p=p.next=x,o|=y;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;y=l,l=y.next,y.next=null,r.lastBaseUpdate=y,r.shared.pending=null}}while(!0);if(p===null&&(c=g),r.baseState=c,r.firstBaseUpdate=h,r.lastBaseUpdate=p,t=r.shared.interleaved,t!==null){r=t;do o|=r.lane,r=r.next;while(r!==t)}else s===null&&(r.shared.lanes=0);mo|=o,e.lanes=o,e.memoizedState=g}}function rx(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(J(191,r));r.call(i)}}}var Ou={},Li=ws(Ou),lu=ws(Ou),cu=ws(Ou);function eo(e){if(e===Ou)throw Error(J(174));return e}function ay(e,t){switch(Gt(cu,t),Gt(lu,e),Gt(Li,Ou),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:lg(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=lg(t,e)}Xt(Li),Gt(Li,t)}function $a(){Xt(Li),Xt(lu),Xt(cu)}function qT(e){eo(cu.current);var t=eo(Li.current),n=lg(t,e.type);t!==n&&(Gt(lu,e),Gt(Li,n))}function ly(e){lu.current===e&&(Xt(Li),Xt(lu))}var se=ws(0);function hf(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var _m=[];function cy(){for(var e=0;e<_m.length;e++)_m[e]._workInProgressVersionPrimary=null;_m.length=0}var Ad=br.ReactCurrentDispatcher,ym=br.ReactCurrentBatchConfig,po=0,oe=null,Pe=null,Me=null,df=!1,Lc=!1,uu=0,m2=0;function $e(){throw Error(J(321))}function uy(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!gi(e[n],t[n]))return!1;return!0}function hy(e,t,n,i,r,s){if(po=s,oe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ad.current=e===null||e.memoizedState===null?v2:x2,e=n(i,r),Lc){s=0;do{if(Lc=!1,uu=0,25<=s)throw Error(J(301));s+=1,Me=Pe=null,t.updateQueue=null,Ad.current=w2,e=n(i,r)}while(Lc)}if(Ad.current=ff,t=Pe!==null&&Pe.next!==null,po=0,Me=Pe=oe=null,df=!1,t)throw Error(J(300));return e}function dy(){var e=uu!==0;return uu=0,e}function Pi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Me===null?oe.memoizedState=Me=e:Me=Me.next=e,Me}function Yn(){if(Pe===null){var e=oe.alternate;e=e!==null?e.memoizedState:null}else e=Pe.next;var t=Me===null?oe.memoizedState:Me.next;if(t!==null)Me=t,Pe=e;else{if(e===null)throw Error(J(310));Pe=e,e={memoizedState:Pe.memoizedState,baseState:Pe.baseState,baseQueue:Pe.baseQueue,queue:Pe.queue,next:null},Me===null?oe.memoizedState=Me=e:Me=Me.next=e}return Me}function hu(e,t){return typeof t=="function"?t(e):t}function vm(e){var t=Yn(),n=t.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=e;var i=Pe,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var l=o=null,c=null,h=s;do{var p=h.lane;if((po&p)===p)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),i=h.hasEagerState?h.eagerState:e(i,h.action);else{var g={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(l=c=g,o=i):c=c.next=g,oe.lanes|=p,mo|=p}h=h.next}while(h!==null&&h!==s);c===null?o=i:c.next=l,gi(i,t.memoizedState)||(_n=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=c,n.lastRenderedState=i}if(e=n.interleaved,e!==null){r=e;do s=r.lane,oe.lanes|=s,mo|=s,r=r.next;while(r!==e)}else r===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function xm(e){var t=Yn(),n=t.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,s=t.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=e(s,o.action),o=o.next;while(o!==r);gi(s,t.memoizedState)||(_n=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function GT(){}function KT(e,t){var n=oe,i=Yn(),r=t(),s=!gi(i.memoizedState,r);if(s&&(i.memoizedState=r,_n=!0),i=i.queue,fy(YT.bind(null,n,i,e),[e]),i.getSnapshot!==t||s||Me!==null&&Me.memoizedState.tag&1){if(n.flags|=2048,du(9,QT.bind(null,n,i,r,t),void 0,null),De===null)throw Error(J(349));po&30||ZT(n,t,r)}return r}function ZT(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=oe.updateQueue,t===null?(t={lastEffect:null,stores:null},oe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function QT(e,t,n,i){t.value=n,t.getSnapshot=i,XT(t)&&JT(e)}function YT(e,t,n){return n(function(){XT(t)&&JT(e)})}function XT(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!gi(e,n)}catch{return!0}}function JT(e){var t=gr(e,1);t!==null&&fi(t,e,1,-1)}function sx(e){var t=Pi();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hu,lastRenderedState:e},t.queue=e,e=e.dispatch=y2.bind(null,oe,e),[t.memoizedState,e]}function du(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},t=oe.updateQueue,t===null?(t={lastEffect:null,stores:null},oe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e)),e}function tE(){return Yn().memoizedState}function Rd(e,t,n,i){var r=Pi();oe.flags|=e,r.memoizedState=du(1|t,n,void 0,i===void 0?null:i)}function rp(e,t,n,i){var r=Yn();i=i===void 0?null:i;var s=void 0;if(Pe!==null){var o=Pe.memoizedState;if(s=o.destroy,i!==null&&uy(i,o.deps)){r.memoizedState=du(t,n,s,i);return}}oe.flags|=e,r.memoizedState=du(1|t,n,s,i)}function ox(e,t){return Rd(8390656,8,e,t)}function fy(e,t){return rp(2048,8,e,t)}function eE(e,t){return rp(4,2,e,t)}function nE(e,t){return rp(4,4,e,t)}function iE(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function rE(e,t,n){return n=n!=null?n.concat([e]):null,rp(4,4,iE.bind(null,t,e),n)}function py(){}function sE(e,t){var n=Yn();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&uy(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function oE(e,t){var n=Yn();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&uy(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function aE(e,t,n){return po&21?(gi(n,t)||(n=dT(),oe.lanes|=n,mo|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,_n=!0),e.memoizedState=n)}function g2(e,t){var n=Ut;Ut=n!==0&&4>n?n:4,e(!0);var i=ym.transition;ym.transition={};try{e(!1),t()}finally{Ut=n,ym.transition=i}}function lE(){return Yn().memoizedState}function _2(e,t,n){var i=os(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},cE(e))uE(t,n);else if(n=WT(e,t,n,i),n!==null){var r=an();fi(n,e,i,r),hE(n,t,i)}}function y2(e,t,n){var i=os(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(cE(e))uE(t,r);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,l=s(o,n);if(r.hasEagerState=!0,r.eagerState=l,gi(l,o)){var c=t.interleaved;c===null?(r.next=r,sy(t)):(r.next=c.next,c.next=r),t.interleaved=r;return}}catch{}finally{}n=WT(e,t,r,i),n!==null&&(r=an(),fi(n,e,i,r),hE(n,t,i))}}function cE(e){var t=e.alternate;return e===oe||t!==null&&t===oe}function uE(e,t){Lc=df=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function hE(e,t,n){if(n&4194240){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,$_(e,n)}}var ff={readContext:Qn,useCallback:$e,useContext:$e,useEffect:$e,useImperativeHandle:$e,useInsertionEffect:$e,useLayoutEffect:$e,useMemo:$e,useReducer:$e,useRef:$e,useState:$e,useDebugValue:$e,useDeferredValue:$e,useTransition:$e,useMutableSource:$e,useSyncExternalStore:$e,useId:$e,unstable_isNewReconciler:!1},v2={readContext:Qn,useCallback:function(e,t){return Pi().memoizedState=[e,t===void 0?null:t],e},useContext:Qn,useEffect:ox,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Rd(4194308,4,iE.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Rd(4194308,4,e,t)},useInsertionEffect:function(e,t){return Rd(4,2,e,t)},useMemo:function(e,t){var n=Pi();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=Pi();return t=n!==void 0?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=_2.bind(null,oe,e),[i.memoizedState,e]},useRef:function(e){var t=Pi();return e={current:e},t.memoizedState=e},useState:sx,useDebugValue:py,useDeferredValue:function(e){return Pi().memoizedState=e},useTransition:function(){var e=sx(!1),t=e[0];return e=g2.bind(null,e[1]),Pi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=oe,r=Pi();if(ee){if(n===void 0)throw Error(J(407));n=n()}else{if(n=t(),De===null)throw Error(J(349));po&30||ZT(i,t,n)}r.memoizedState=n;var s={value:n,getSnapshot:t};return r.queue=s,ox(YT.bind(null,i,s,e),[e]),i.flags|=2048,du(9,QT.bind(null,i,s,n,t),void 0,null),n},useId:function(){var e=Pi(),t=De.identifierPrefix;if(ee){var n=or,i=sr;n=(i&~(1<<32-di(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=uu++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=m2++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},x2={readContext:Qn,useCallback:sE,useContext:Qn,useEffect:fy,useImperativeHandle:rE,useInsertionEffect:eE,useLayoutEffect:nE,useMemo:oE,useReducer:vm,useRef:tE,useState:function(){return vm(hu)},useDebugValue:py,useDeferredValue:function(e){var t=Yn();return aE(t,Pe.memoizedState,e)},useTransition:function(){var e=vm(hu)[0],t=Yn().memoizedState;return[e,t]},useMutableSource:GT,useSyncExternalStore:KT,useId:lE,unstable_isNewReconciler:!1},w2={readContext:Qn,useCallback:sE,useContext:Qn,useEffect:fy,useImperativeHandle:rE,useInsertionEffect:eE,useLayoutEffect:nE,useMemo:oE,useReducer:xm,useRef:tE,useState:function(){return xm(hu)},useDebugValue:py,useDeferredValue:function(e){var t=Yn();return Pe===null?t.memoizedState=e:aE(t,Pe.memoizedState,e)},useTransition:function(){var e=xm(hu)[0],t=Yn().memoizedState;return[e,t]},useMutableSource:GT,useSyncExternalStore:KT,useId:lE,unstable_isNewReconciler:!1};function oi(e,t){if(e&&e.defaultProps){t=ae({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Cg(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:ae({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var sp={isMounted:function(e){return(e=e._reactInternals)?ko(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=an(),r=os(e),s=hr(i,r);s.payload=t,n!=null&&(s.callback=n),t=rs(e,s,r),t!==null&&(fi(t,e,r,i),Cd(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=an(),r=os(e),s=hr(i,r);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=rs(e,s,r),t!==null&&(fi(t,e,r,i),Cd(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=an(),i=os(e),r=hr(n,i);r.tag=2,t!=null&&(r.callback=t),t=rs(e,r,i),t!==null&&(fi(t,e,i,n),Cd(t,e,i))}};function ax(e,t,n,i,r,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,s,o):t.prototype&&t.prototype.isPureReactComponent?!ru(n,i)||!ru(r,s):!0}function dE(e,t,n){var i=!1,r=ps,s=t.contextType;return typeof s=="object"&&s!==null?s=Qn(s):(r=vn(t)?ho:Je.current,i=t.contextTypes,s=(i=i!=null)?Ua(e,r):ps),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=sp,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=s),t}function lx(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&sp.enqueueReplaceState(t,t.state,null)}function Ag(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},oy(e);var s=t.contextType;typeof s=="object"&&s!==null?r.context=Qn(s):(s=vn(t)?ho:Je.current,r.context=Ua(e,s)),r.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Cg(e,t,s,n),r.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(t=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),t!==r.state&&sp.enqueueReplaceState(r,r.state,null),uf(e,n,r,i),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308)}function qa(e,t){try{var n="",i=t;do n+=ZC(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:r,digest:null}}function wm(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Rg(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var b2=typeof WeakMap=="function"?WeakMap:Map;function fE(e,t,n){n=hr(-1,n),n.tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){mf||(mf=!0,Bg=i),Rg(e,t)},n}function pE(e,t,n){n=hr(-1,n),n.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){Rg(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Rg(e,t),typeof i!="function"&&(ss===null?ss=new Set([this]):ss.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function cx(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new b2;var r=new Set;i.set(t,r)}else r=i.get(t),r===void 0&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=O2.bind(null,e,t,n),t.then(e,e))}function ux(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function hx(e,t,n,i,r){return e.mode&1?(e.flags|=65536,e.lanes=r,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=hr(-1,1),t.tag=2,rs(n,t,1))),n.lanes|=1),e)}var T2=br.ReactCurrentOwner,_n=!1;function on(e,t,n,i){t.child=e===null?HT(t,null,n,i):Wa(t,e.child,n,i)}function dx(e,t,n,i,r){n=n.render;var s=t.ref;return Ma(t,r),i=hy(e,t,n,i,s,r),n=dy(),e!==null&&!_n?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,_r(e,t,r)):(ee&&n&&J_(t),t.flags|=1,on(e,t,i,r),t.child)}function fx(e,t,n,i,r){if(e===null){var s=n.type;return typeof s=="function"&&!by(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,mE(e,t,s,i,r)):(e=Dd(n.type,null,i,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ru,n(o,i)&&e.ref===t.ref)return _r(e,t,r)}return t.flags|=1,e=as(s,i),e.ref=t.ref,e.return=t,t.child=e}function mE(e,t,n,i,r){if(e!==null){var s=e.memoizedProps;if(ru(s,i)&&e.ref===t.ref)if(_n=!1,t.pendingProps=i=s,(e.lanes&r)!==0)e.flags&131072&&(_n=!0);else return t.lanes=e.lanes,_r(e,t,r)}return Ng(e,t,n,i,r)}function gE(e,t,n){var i=t.pendingProps,r=i.children,s=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Gt(Ia,En),En|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Gt(Ia,En),En|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,Gt(Ia,En),En|=i}else s!==null?(i=s.baseLanes|n,t.memoizedState=null):i=n,Gt(Ia,En),En|=i;return on(e,t,r,n),t.child}function _E(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ng(e,t,n,i,r){var s=vn(n)?ho:Je.current;return s=Ua(t,s),Ma(t,r),n=hy(e,t,n,i,s,r),i=dy(),e!==null&&!_n?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,_r(e,t,r)):(ee&&i&&J_(t),t.flags|=1,on(e,t,n,r),t.child)}function px(e,t,n,i,r){if(vn(n)){var s=!0;sf(t)}else s=!1;if(Ma(t,r),t.stateNode===null)Nd(e,t),dE(t,n,i),Ag(t,n,i,r),i=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=Qn(h):(h=vn(n)?ho:Je.current,h=Ua(t,h));var p=n.getDerivedStateFromProps,g=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";g||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==i||c!==h)&&lx(t,o,i,h),zr=!1;var y=t.memoizedState;o.state=y,uf(t,i,o,r),c=t.memoizedState,l!==i||y!==c||yn.current||zr?(typeof p=="function"&&(Cg(t,n,p,i),c=t.memoizedState),(l=zr||ax(t,n,l,i,y,c,h))?(g||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=c),o.props=i,o.state=c,o.context=h,i=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,$T(e,t),l=t.memoizedProps,h=t.type===t.elementType?l:oi(t.type,l),o.props=h,g=t.pendingProps,y=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Qn(c):(c=vn(n)?ho:Je.current,c=Ua(t,c));var x=n.getDerivedStateFromProps;(p=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==g||y!==c)&&lx(t,o,i,c),zr=!1,y=t.memoizedState,o.state=y,uf(t,i,o,r);var T=t.memoizedState;l!==g||y!==T||yn.current||zr?(typeof x=="function"&&(Cg(t,n,x,i),T=t.memoizedState),(h=zr||ax(t,n,h,i,y,T,c)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,T,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,T,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=T),o.props=i,o.state=T,o.context=c,i=h):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),i=!1)}return Lg(e,t,n,i,s,r)}function Lg(e,t,n,i,r,s){_E(e,t);var o=(t.flags&128)!==0;if(!i&&!o)return r&&J0(t,n,!1),_r(e,t,s);i=t.stateNode,T2.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&o?(t.child=Wa(t,e.child,null,s),t.child=Wa(t,null,l,s)):on(e,t,l,s),t.memoizedState=i.state,r&&J0(t,n,!0),t.child}function yE(e){var t=e.stateNode;t.pendingContext?X0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&X0(e,t.context,!1),ay(e,t.containerInfo)}function mx(e,t,n,i,r){return Ha(),ey(r),t.flags|=256,on(e,t,n,i),t.child}var Mg={dehydrated:null,treeContext:null,retryLane:0};function Dg(e){return{baseLanes:e,cachePool:null,transitions:null}}function vE(e,t,n){var i=t.pendingProps,r=se.current,s=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(r&2)!==0),l?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(r|=1),Gt(se,r&1),e===null)return Pg(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=i.children,e=i.fallback,s?(i=t.mode,s=t.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=lp(o,i,0,null),e=ao(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Dg(n),t.memoizedState=Mg,e):my(t,o));if(r=e.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return E2(e,t,o,i,l,r,n);if(s){s=i.fallback,o=t.mode,r=e.child,l=r.sibling;var c={mode:"hidden",children:i.children};return!(o&1)&&t.child!==r?(i=t.child,i.childLanes=0,i.pendingProps=c,t.deletions=null):(i=as(r,c),i.subtreeFlags=r.subtreeFlags&14680064),l!==null?s=as(l,s):(s=ao(s,o,n,null),s.flags|=2),s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,o=e.child.memoizedState,o=o===null?Dg(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=Mg,i}return s=e.child,e=s.sibling,i=as(s,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=n),i.return=t,i.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function my(e,t){return t=lp({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Yh(e,t,n,i){return i!==null&&ey(i),Wa(t,e.child,null,n),e=my(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function E2(e,t,n,i,r,s,o){if(n)return t.flags&256?(t.flags&=-257,i=wm(Error(J(422))),Yh(e,t,o,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=i.fallback,r=t.mode,i=lp({mode:"visible",children:i.children},r,0,null),s=ao(s,r,o,null),s.flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,t.mode&1&&Wa(t,e.child,null,o),t.child.memoizedState=Dg(o),t.memoizedState=Mg,s);if(!(t.mode&1))return Yh(e,t,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var l=i.dgst;return i=l,s=Error(J(419)),i=wm(s,i,void 0),Yh(e,t,o,i)}if(l=(o&e.childLanes)!==0,_n||l){if(i=De,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,gr(e,r),fi(i,e,r,-1))}return wy(),i=wm(Error(J(421))),Yh(e,t,o,i)}return r.data==="$?"?(t.flags|=128,t.child=e.child,t=j2.bind(null,e),r._reactRetry=t,null):(e=s.treeContext,kn=is(r.nextSibling),Cn=t,ee=!0,li=null,e!==null&&(Hn[Wn++]=sr,Hn[Wn++]=or,Hn[Wn++]=fo,sr=e.id,or=e.overflow,fo=t),t=my(t,i.children),t.flags|=4096,t)}function gx(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),Ig(e.return,t,n)}function bm(e,t,n,i,r){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function xE(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(on(e,t,i.children,n),i=se.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&gx(e,n,t);else if(e.tag===19)gx(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Gt(se,i),!(t.mode&1))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&hf(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),bm(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&hf(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}bm(t,!0,n,null,s);break;case"together":bm(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Nd(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function _r(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),mo|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(J(153));if(t.child!==null){for(e=t.child,n=as(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=as(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function S2(e,t,n){switch(t.tag){case 3:yE(t),Ha();break;case 5:qT(t);break;case 1:vn(t.type)&&sf(t);break;case 4:ay(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;Gt(lf,i._currentValue),i._currentValue=r;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(Gt(se,se.current&1),t.flags|=128,null):n&t.child.childLanes?vE(e,t,n):(Gt(se,se.current&1),e=_r(e,t,n),e!==null?e.sibling:null);Gt(se,se.current&1);break;case 19:if(i=(n&t.childLanes)!==0,e.flags&128){if(i)return xE(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Gt(se,se.current),i)break;return null;case 22:case 23:return t.lanes=0,gE(e,t,n)}return _r(e,t,n)}var wE,Og,bE,TE;wE=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Og=function(){};bE=function(e,t,n,i){var r=e.memoizedProps;if(r!==i){e=t.stateNode,eo(Li.current);var s=null;switch(n){case"input":r=rg(e,r),i=rg(e,i),s=[];break;case"select":r=ae({},r,{value:void 0}),i=ae({},i,{value:void 0}),s=[];break;case"textarea":r=ag(e,r),i=ag(e,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=nf)}cg(n,i);var o;n=null;for(h in r)if(!i.hasOwnProperty(h)&&r.hasOwnProperty(h)&&r[h]!=null)if(h==="style"){var l=r[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Yc.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in i){var c=i[h];if(l=r!=null?r[h]:void 0,i.hasOwnProperty(h)&&c!==l&&(c!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(h,n)),n=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Yc.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&Zt("scroll",e),s||l===c||(s=[])):(s=s||[]).push(h,c))}n&&(s=s||[]).push("style",n);var h=s;(t.updateQueue=h)&&(t.flags|=4)}};TE=function(e,t,n,i){n!==i&&(t.flags|=4)};function sc(e,t){if(!ee)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function qe(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function k2(e,t,n){var i=t.pendingProps;switch(ty(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qe(t),null;case 1:return vn(t.type)&&rf(),qe(t),null;case 3:return i=t.stateNode,$a(),Xt(yn),Xt(Je),cy(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Zh(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,li!==null&&(Wg(li),li=null))),Og(e,t),qe(t),null;case 5:ly(t);var r=eo(cu.current);if(n=t.type,e!==null&&t.stateNode!=null)bE(e,t,n,i,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(J(166));return qe(t),null}if(e=eo(Li.current),Zh(t)){i=t.stateNode,n=t.type;var s=t.memoizedProps;switch(i[Ai]=t,i[au]=s,e=(t.mode&1)!==0,n){case"dialog":Zt("cancel",i),Zt("close",i);break;case"iframe":case"object":case"embed":Zt("load",i);break;case"video":case"audio":for(r=0;r<_c.length;r++)Zt(_c[r],i);break;case"source":Zt("error",i);break;case"img":case"image":case"link":Zt("error",i),Zt("load",i);break;case"details":Zt("toggle",i);break;case"input":S0(i,s),Zt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Zt("invalid",i);break;case"textarea":P0(i,s),Zt("invalid",i)}cg(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?i.textContent!==l&&(s.suppressHydrationWarning!==!0&&Kh(i.textContent,l,e),r=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Kh(i.textContent,l,e),r=["children",""+l]):Yc.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Zt("scroll",i)}switch(n){case"input":zh(i),k0(i,s,!0);break;case"textarea":zh(i),I0(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=nf)}i=r,t.updateQueue=i,i!==null&&(t.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Yb(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=o.createElement(n,{is:i.is}):(e=o.createElement(n),n==="select"&&(o=e,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):e=o.createElementNS(e,n),e[Ai]=t,e[au]=i,wE(e,t,!1,!1),t.stateNode=e;t:{switch(o=ug(n,i),n){case"dialog":Zt("cancel",e),Zt("close",e),r=i;break;case"iframe":case"object":case"embed":Zt("load",e),r=i;break;case"video":case"audio":for(r=0;r<_c.length;r++)Zt(_c[r],e);r=i;break;case"source":Zt("error",e),r=i;break;case"img":case"image":case"link":Zt("error",e),Zt("load",e),r=i;break;case"details":Zt("toggle",e),r=i;break;case"input":S0(e,i),r=rg(e,i),Zt("invalid",e);break;case"option":r=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},r=ae({},i,{value:void 0}),Zt("invalid",e);break;case"textarea":P0(e,i),r=ag(e,i),Zt("invalid",e);break;default:r=i}cg(n,r),l=r;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?tT(e,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Xb(e,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Xc(e,c):typeof c=="number"&&Xc(e,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Yc.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Zt("scroll",e):c!=null&&F_(e,s,c,o))}switch(n){case"input":zh(e),k0(e,i,!1);break;case"textarea":zh(e),I0(e);break;case"option":i.value!=null&&e.setAttribute("value",""+fs(i.value));break;case"select":e.multiple=!!i.multiple,s=i.value,s!=null?Aa(e,!!i.multiple,s,!1):i.defaultValue!=null&&Aa(e,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(e.onclick=nf)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break t;case"img":i=!0;break t;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return qe(t),null;case 6:if(e&&t.stateNode!=null)TE(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(J(166));if(n=eo(cu.current),eo(Li.current),Zh(t)){if(i=t.stateNode,n=t.memoizedProps,i[Ai]=t,(s=i.nodeValue!==n)&&(e=Cn,e!==null))switch(e.tag){case 3:Kh(i.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Kh(i.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Ai]=t,t.stateNode=i}return qe(t),null;case 13:if(Xt(se),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ee&&kn!==null&&t.mode&1&&!(t.flags&128))BT(),Ha(),t.flags|=98560,s=!1;else if(s=Zh(t),i!==null&&i.dehydrated!==null){if(e===null){if(!s)throw Error(J(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(J(317));s[Ai]=t}else Ha(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;qe(t),s=!1}else li!==null&&(Wg(li),li=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||se.current&1?Ce===0&&(Ce=3):wy())),t.updateQueue!==null&&(t.flags|=4),qe(t),null);case 4:return $a(),Og(e,t),e===null&&su(t.stateNode.containerInfo),qe(t),null;case 10:return ry(t.type._context),qe(t),null;case 17:return vn(t.type)&&rf(),qe(t),null;case 19:if(Xt(se),s=t.memoizedState,s===null)return qe(t),null;if(i=(t.flags&128)!==0,o=s.rendering,o===null)if(i)sc(s,!1);else{if(Ce!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=hf(e),o!==null){for(t.flags|=128,sc(s,!1),i=o.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;n!==null;)s=n,e=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Gt(se,se.current&1|2),t.child}e=e.sibling}s.tail!==null&&ge()>Ga&&(t.flags|=128,i=!0,sc(s,!1),t.lanes=4194304)}else{if(!i)if(e=hf(o),e!==null){if(t.flags|=128,i=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),sc(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ee)return qe(t),null}else 2*ge()-s.renderingStartTime>Ga&&n!==1073741824&&(t.flags|=128,i=!0,sc(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=ge(),t.sibling=null,n=se.current,Gt(se,i?n&1|2:n&1),t):(qe(t),null);case 22:case 23:return xy(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?En&1073741824&&(qe(t),t.subtreeFlags&6&&(t.flags|=8192)):qe(t),null;case 24:return null;case 25:return null}throw Error(J(156,t.tag))}function P2(e,t){switch(ty(t),t.tag){case 1:return vn(t.type)&&rf(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return $a(),Xt(yn),Xt(Je),cy(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ly(t),null;case 13:if(Xt(se),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(J(340));Ha()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Xt(se),null;case 4:return $a(),null;case 10:return ry(t.type._context),null;case 22:case 23:return xy(),null;case 24:return null;default:return null}}var Xh=!1,Qe=!1,I2=typeof WeakSet=="function"?WeakSet:Set,it=null;function Pa(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){ue(e,t,i)}else n.current=null}function jg(e,t,n){try{n()}catch(i){ue(e,t,i)}}var _x=!1;function C2(e,t){if(xg=Jd,e=IT(),X_(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else t:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break t}var o=0,l=-1,c=-1,h=0,p=0,g=e,y=null;e:for(;;){for(var x;g!==n||r!==0&&g.nodeType!==3||(l=o+r),g!==s||i!==0&&g.nodeType!==3||(c=o+i),g.nodeType===3&&(o+=g.nodeValue.length),(x=g.firstChild)!==null;)y=g,g=x;for(;;){if(g===e)break e;if(y===n&&++h===r&&(l=o),y===s&&++p===i&&(c=o),(x=g.nextSibling)!==null)break;g=y,y=g.parentNode}g=x}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(wg={focusedElem:e,selectionRange:n},Jd=!1,it=t;it!==null;)if(t=it,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,it=e;else for(;it!==null;){t=it;try{var T=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var S=T.memoizedProps,k=T.memoizedState,P=t.stateNode,I=P.getSnapshotBeforeUpdate(t.elementType===t.type?S:oi(t.type,S),k);P.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var R=t.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(V){ue(t,t.return,V)}if(e=t.sibling,e!==null){e.return=t.return,it=e;break}it=t.return}return T=_x,_x=!1,T}function Mc(e,t,n){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&e)===e){var s=r.destroy;r.destroy=void 0,s!==void 0&&jg(t,n,s)}r=r.next}while(r!==i)}}function op(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function Vg(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function EE(e){var t=e.alternate;t!==null&&(e.alternate=null,EE(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ai],delete t[au],delete t[Eg],delete t[h2],delete t[d2])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function SE(e){return e.tag===5||e.tag===3||e.tag===4}function yx(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||SE(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Fg(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=nf));else if(i!==4&&(e=e.child,e!==null))for(Fg(e,t,n),e=e.sibling;e!==null;)Fg(e,t,n),e=e.sibling}function zg(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(zg(e,t,n),e=e.sibling;e!==null;)zg(e,t,n),e=e.sibling}var Ve=null,ai=!1;function Dr(e,t,n){for(n=n.child;n!==null;)kE(e,t,n),n=n.sibling}function kE(e,t,n){if(Ni&&typeof Ni.onCommitFiberUnmount=="function")try{Ni.onCommitFiberUnmount(Xf,n)}catch{}switch(n.tag){case 5:Qe||Pa(n,t);case 6:var i=Ve,r=ai;Ve=null,Dr(e,t,n),Ve=i,ai=r,Ve!==null&&(ai?(e=Ve,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ve.removeChild(n.stateNode));break;case 18:Ve!==null&&(ai?(e=Ve,n=n.stateNode,e.nodeType===8?mm(e.parentNode,n):e.nodeType===1&&mm(e,n),nu(e)):mm(Ve,n.stateNode));break;case 4:i=Ve,r=ai,Ve=n.stateNode.containerInfo,ai=!0,Dr(e,t,n),Ve=i,ai=r;break;case 0:case 11:case 14:case 15:if(!Qe&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&jg(n,t,o),r=r.next}while(r!==i)}Dr(e,t,n);break;case 1:if(!Qe&&(Pa(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(l){ue(n,t,l)}Dr(e,t,n);break;case 21:Dr(e,t,n);break;case 22:n.mode&1?(Qe=(i=Qe)||n.memoizedState!==null,Dr(e,t,n),Qe=i):Dr(e,t,n);break;default:Dr(e,t,n)}}function vx(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new I2),t.forEach(function(i){var r=V2.bind(null,e,i);n.has(i)||(n.add(i),i.then(r,r))})}}function si(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=e,o=t,l=o;t:for(;l!==null;){switch(l.tag){case 5:Ve=l.stateNode,ai=!1;break t;case 3:Ve=l.stateNode.containerInfo,ai=!0;break t;case 4:Ve=l.stateNode.containerInfo,ai=!0;break t}l=l.return}if(Ve===null)throw Error(J(160));kE(s,o,r),Ve=null,ai=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(h){ue(r,t,h)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)PE(t,e),t=t.sibling}function PE(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(si(t,e),Ei(e),i&4){try{Mc(3,e,e.return),op(3,e)}catch(S){ue(e,e.return,S)}try{Mc(5,e,e.return)}catch(S){ue(e,e.return,S)}}break;case 1:si(t,e),Ei(e),i&512&&n!==null&&Pa(n,n.return);break;case 5:if(si(t,e),Ei(e),i&512&&n!==null&&Pa(n,n.return),e.flags&32){var r=e.stateNode;try{Xc(r,"")}catch(S){ue(e,e.return,S)}}if(i&4&&(r=e.stateNode,r!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Zb(r,s),ug(l,o);var h=ug(l,s);for(o=0;o<c.length;o+=2){var p=c[o],g=c[o+1];p==="style"?tT(r,g):p==="dangerouslySetInnerHTML"?Xb(r,g):p==="children"?Xc(r,g):F_(r,p,g,h)}switch(l){case"input":sg(r,s);break;case"textarea":Qb(r,s);break;case"select":var y=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var x=s.value;x!=null?Aa(r,!!s.multiple,x,!1):y!==!!s.multiple&&(s.defaultValue!=null?Aa(r,!!s.multiple,s.defaultValue,!0):Aa(r,!!s.multiple,s.multiple?[]:"",!1))}r[au]=s}catch(S){ue(e,e.return,S)}}break;case 6:if(si(t,e),Ei(e),i&4){if(e.stateNode===null)throw Error(J(162));r=e.stateNode,s=e.memoizedProps;try{r.nodeValue=s}catch(S){ue(e,e.return,S)}}break;case 3:if(si(t,e),Ei(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{nu(t.containerInfo)}catch(S){ue(e,e.return,S)}break;case 4:si(t,e),Ei(e);break;case 13:si(t,e),Ei(e),r=e.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(yy=ge())),i&4&&vx(e);break;case 22:if(p=n!==null&&n.memoizedState!==null,e.mode&1?(Qe=(h=Qe)||p,si(t,e),Qe=h):si(t,e),Ei(e),i&8192){if(h=e.memoizedState!==null,(e.stateNode.isHidden=h)&&!p&&e.mode&1)for(it=e,p=e.child;p!==null;){for(g=it=p;it!==null;){switch(y=it,x=y.child,y.tag){case 0:case 11:case 14:case 15:Mc(4,y,y.return);break;case 1:Pa(y,y.return);var T=y.stateNode;if(typeof T.componentWillUnmount=="function"){i=y,n=y.return;try{t=i,T.props=t.memoizedProps,T.state=t.memoizedState,T.componentWillUnmount()}catch(S){ue(i,n,S)}}break;case 5:Pa(y,y.return);break;case 22:if(y.memoizedState!==null){wx(g);continue}}x!==null?(x.return=y,it=x):wx(g)}p=p.sibling}t:for(p=null,g=e;;){if(g.tag===5){if(p===null){p=g;try{r=g.stateNode,h?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=g.stateNode,c=g.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Jb("display",o))}catch(S){ue(e,e.return,S)}}}else if(g.tag===6){if(p===null)try{g.stateNode.nodeValue=h?"":g.memoizedProps}catch(S){ue(e,e.return,S)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===e)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===e)break t;for(;g.sibling===null;){if(g.return===null||g.return===e)break t;p===g&&(p=null),g=g.return}p===g&&(p=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:si(t,e),Ei(e),i&4&&vx(e);break;case 21:break;default:si(t,e),Ei(e)}}function Ei(e){var t=e.flags;if(t&2){try{t:{for(var n=e.return;n!==null;){if(SE(n)){var i=n;break t}n=n.return}throw Error(J(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Xc(r,""),i.flags&=-33);var s=yx(e);zg(e,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,l=yx(e);Fg(e,l,o);break;default:throw Error(J(161))}}catch(c){ue(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function A2(e,t,n){it=e,IE(e)}function IE(e,t,n){for(var i=(e.mode&1)!==0;it!==null;){var r=it,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Xh;if(!o){var l=r.alternate,c=l!==null&&l.memoizedState!==null||Qe;l=Xh;var h=Qe;if(Xh=o,(Qe=c)&&!h)for(it=r;it!==null;)o=it,c=o.child,o.tag===22&&o.memoizedState!==null?bx(r):c!==null?(c.return=o,it=c):bx(r);for(;s!==null;)it=s,IE(s),s=s.sibling;it=r,Xh=l,Qe=h}xx(e)}else r.subtreeFlags&8772&&s!==null?(s.return=r,it=s):xx(e)}}function xx(e){for(;it!==null;){var t=it;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Qe||op(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!Qe)if(n===null)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:oi(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&rx(t,s,i);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}rx(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var h=t.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var g=p.dehydrated;g!==null&&nu(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}Qe||t.flags&512&&Vg(t)}catch(y){ue(t,t.return,y)}}if(t===e){it=null;break}if(n=t.sibling,n!==null){n.return=t.return,it=n;break}it=t.return}}function wx(e){for(;it!==null;){var t=it;if(t===e){it=null;break}var n=t.sibling;if(n!==null){n.return=t.return,it=n;break}it=t.return}}function bx(e){for(;it!==null;){var t=it;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{op(4,t)}catch(c){ue(t,n,c)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var r=t.return;try{i.componentDidMount()}catch(c){ue(t,r,c)}}var s=t.return;try{Vg(t)}catch(c){ue(t,s,c)}break;case 5:var o=t.return;try{Vg(t)}catch(c){ue(t,o,c)}}}catch(c){ue(t,t.return,c)}if(t===e){it=null;break}var l=t.sibling;if(l!==null){l.return=t.return,it=l;break}it=t.return}}var R2=Math.ceil,pf=br.ReactCurrentDispatcher,gy=br.ReactCurrentOwner,Kn=br.ReactCurrentBatchConfig,jt=0,De=null,Te=null,Be=0,En=0,Ia=ws(0),Ce=0,fu=null,mo=0,ap=0,_y=0,Dc=null,pn=null,yy=0,Ga=1/0,er=null,mf=!1,Bg=null,ss=null,Jh=!1,Qr=null,gf=0,Oc=0,Ug=null,Ld=-1,Md=0;function an(){return jt&6?ge():Ld!==-1?Ld:Ld=ge()}function os(e){return e.mode&1?jt&2&&Be!==0?Be&-Be:p2.transition!==null?(Md===0&&(Md=dT()),Md):(e=Ut,e!==0||(e=window.event,e=e===void 0?16:vT(e.type)),e):1}function fi(e,t,n,i){if(50<Oc)throw Oc=0,Ug=null,Error(J(185));Lu(e,n,i),(!(jt&2)||e!==De)&&(e===De&&(!(jt&2)&&(ap|=n),Ce===4&&Hr(e,Be)),xn(e,i),n===1&&jt===0&&!(t.mode&1)&&(Ga=ge()+500,ip&&bs()))}function xn(e,t){var n=e.callbackNode;pA(e,t);var i=Xd(e,e===De?Be:0);if(i===0)n!==null&&R0(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(n!=null&&R0(n),t===1)e.tag===0?f2(Tx.bind(null,e)):VT(Tx.bind(null,e)),c2(function(){!(jt&6)&&bs()}),n=null;else{switch(fT(i)){case 1:n=W_;break;case 4:n=uT;break;case 16:n=Yd;break;case 536870912:n=hT;break;default:n=Yd}n=OE(n,CE.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function CE(e,t){if(Ld=-1,Md=0,jt&6)throw Error(J(327));var n=e.callbackNode;if(Da()&&e.callbackNode!==n)return null;var i=Xd(e,e===De?Be:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=_f(e,i);else{t=i;var r=jt;jt|=2;var s=RE();(De!==e||Be!==t)&&(er=null,Ga=ge()+500,oo(e,t));do try{M2();break}catch(l){AE(e,l)}while(!0);iy(),pf.current=s,jt=r,Te!==null?t=0:(De=null,Be=0,t=Ce)}if(t!==0){if(t===2&&(r=mg(e),r!==0&&(i=r,t=Hg(e,r))),t===1)throw n=fu,oo(e,0),Hr(e,i),xn(e,ge()),n;if(t===6)Hr(e,i);else{if(r=e.current.alternate,!(i&30)&&!N2(r)&&(t=_f(e,i),t===2&&(s=mg(e),s!==0&&(i=s,t=Hg(e,s))),t===1))throw n=fu,oo(e,0),Hr(e,i),xn(e,ge()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(J(345));case 2:Ks(e,pn,er);break;case 3:if(Hr(e,i),(i&130023424)===i&&(t=yy+500-ge(),10<t)){if(Xd(e,0)!==0)break;if(r=e.suspendedLanes,(r&i)!==i){an(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=Tg(Ks.bind(null,e,pn,er),t);break}Ks(e,pn,er);break;case 4:if(Hr(e,i),(i&4194240)===i)break;for(t=e.eventTimes,r=-1;0<i;){var o=31-di(i);s=1<<o,o=t[o],o>r&&(r=o),i&=~s}if(i=r,i=ge()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*R2(i/1960))-i,10<i){e.timeoutHandle=Tg(Ks.bind(null,e,pn,er),i);break}Ks(e,pn,er);break;case 5:Ks(e,pn,er);break;default:throw Error(J(329))}}}return xn(e,ge()),e.callbackNode===n?CE.bind(null,e):null}function Hg(e,t){var n=Dc;return e.current.memoizedState.isDehydrated&&(oo(e,t).flags|=256),e=_f(e,t),e!==2&&(t=pn,pn=n,t!==null&&Wg(t)),e}function Wg(e){pn===null?pn=e:pn.push.apply(pn,e)}function N2(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!gi(s(),r))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Hr(e,t){for(t&=~_y,t&=~ap,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-di(t),i=1<<n;e[n]=-1,t&=~i}}function Tx(e){if(jt&6)throw Error(J(327));Da();var t=Xd(e,0);if(!(t&1))return xn(e,ge()),null;var n=_f(e,t);if(e.tag!==0&&n===2){var i=mg(e);i!==0&&(t=i,n=Hg(e,i))}if(n===1)throw n=fu,oo(e,0),Hr(e,t),xn(e,ge()),n;if(n===6)throw Error(J(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ks(e,pn,er),xn(e,ge()),null}function vy(e,t){var n=jt;jt|=1;try{return e(t)}finally{jt=n,jt===0&&(Ga=ge()+500,ip&&bs())}}function go(e){Qr!==null&&Qr.tag===0&&!(jt&6)&&Da();var t=jt;jt|=1;var n=Kn.transition,i=Ut;try{if(Kn.transition=null,Ut=1,e)return e()}finally{Ut=i,Kn.transition=n,jt=t,!(jt&6)&&bs()}}function xy(){En=Ia.current,Xt(Ia)}function oo(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,l2(n)),Te!==null)for(n=Te.return;n!==null;){var i=n;switch(ty(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&rf();break;case 3:$a(),Xt(yn),Xt(Je),cy();break;case 5:ly(i);break;case 4:$a();break;case 13:Xt(se);break;case 19:Xt(se);break;case 10:ry(i.type._context);break;case 22:case 23:xy()}n=n.return}if(De=e,Te=e=as(e.current,null),Be=En=t,Ce=0,fu=null,_y=ap=mo=0,pn=Dc=null,to!==null){for(t=0;t<to.length;t++)if(n=to[t],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}to=null}return e}function AE(e,t){do{var n=Te;try{if(iy(),Ad.current=ff,df){for(var i=oe.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}df=!1}if(po=0,Me=Pe=oe=null,Lc=!1,uu=0,gy.current=null,n===null||n.return===null){Ce=1,fu=t,Te=null;break}t:{var s=e,o=n.return,l=n,c=t;if(t=Be,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,p=l,g=p.tag;if(!(p.mode&1)&&(g===0||g===11||g===15)){var y=p.alternate;y?(p.updateQueue=y.updateQueue,p.memoizedState=y.memoizedState,p.lanes=y.lanes):(p.updateQueue=null,p.memoizedState=null)}var x=ux(o);if(x!==null){x.flags&=-257,hx(x,o,l,s,t),x.mode&1&&cx(s,h,t),t=x,c=h;var T=t.updateQueue;if(T===null){var S=new Set;S.add(c),t.updateQueue=S}else T.add(c);break t}else{if(!(t&1)){cx(s,h,t),wy();break t}c=Error(J(426))}}else if(ee&&l.mode&1){var k=ux(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),hx(k,o,l,s,t),ey(qa(c,l));break t}}s=c=qa(c,l),Ce!==4&&(Ce=2),Dc===null?Dc=[s]:Dc.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var P=fE(s,c,t);ix(s,P);break t;case 1:l=c;var I=s.type,R=s.stateNode;if(!(s.flags&128)&&(typeof I.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(ss===null||!ss.has(R)))){s.flags|=65536,t&=-t,s.lanes|=t;var V=pE(s,l,t);ix(s,V);break t}}s=s.return}while(s!==null)}LE(n)}catch(B){t=B,Te===n&&n!==null&&(Te=n=n.return);continue}break}while(!0)}function RE(){var e=pf.current;return pf.current=ff,e===null?ff:e}function wy(){(Ce===0||Ce===3||Ce===2)&&(Ce=4),De===null||!(mo&268435455)&&!(ap&268435455)||Hr(De,Be)}function _f(e,t){var n=jt;jt|=2;var i=RE();(De!==e||Be!==t)&&(er=null,oo(e,t));do try{L2();break}catch(r){AE(e,r)}while(!0);if(iy(),jt=n,pf.current=i,Te!==null)throw Error(J(261));return De=null,Be=0,Ce}function L2(){for(;Te!==null;)NE(Te)}function M2(){for(;Te!==null&&!sA();)NE(Te)}function NE(e){var t=DE(e.alternate,e,En);e.memoizedProps=e.pendingProps,t===null?LE(e):Te=t,gy.current=null}function LE(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=P2(n,t),n!==null){n.flags&=32767,Te=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ce=6,Te=null;return}}else if(n=k2(n,t,En),n!==null){Te=n;return}if(t=t.sibling,t!==null){Te=t;return}Te=t=e}while(t!==null);Ce===0&&(Ce=5)}function Ks(e,t,n){var i=Ut,r=Kn.transition;try{Kn.transition=null,Ut=1,D2(e,t,n,i)}finally{Kn.transition=r,Ut=i}return null}function D2(e,t,n,i){do Da();while(Qr!==null);if(jt&6)throw Error(J(327));n=e.finishedWork;var r=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(J(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(mA(e,s),e===De&&(Te=De=null,Be=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Jh||(Jh=!0,OE(Yd,function(){return Da(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Kn.transition,Kn.transition=null;var o=Ut;Ut=1;var l=jt;jt|=4,gy.current=null,C2(e,n),PE(n,e),e2(wg),Jd=!!xg,wg=xg=null,e.current=n,A2(n),oA(),jt=l,Ut=o,Kn.transition=s}else e.current=n;if(Jh&&(Jh=!1,Qr=e,gf=r),s=e.pendingLanes,s===0&&(ss=null),cA(n.stateNode),xn(e,ge()),t!==null)for(i=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(mf)throw mf=!1,e=Bg,Bg=null,e;return gf&1&&e.tag!==0&&Da(),s=e.pendingLanes,s&1?e===Ug?Oc++:(Oc=0,Ug=e):Oc=0,bs(),null}function Da(){if(Qr!==null){var e=fT(gf),t=Kn.transition,n=Ut;try{if(Kn.transition=null,Ut=16>e?16:e,Qr===null)var i=!1;else{if(e=Qr,Qr=null,gf=0,jt&6)throw Error(J(331));var r=jt;for(jt|=4,it=e.current;it!==null;){var s=it,o=s.child;if(it.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var h=l[c];for(it=h;it!==null;){var p=it;switch(p.tag){case 0:case 11:case 15:Mc(8,p,s)}var g=p.child;if(g!==null)g.return=p,it=g;else for(;it!==null;){p=it;var y=p.sibling,x=p.return;if(EE(p),p===h){it=null;break}if(y!==null){y.return=x,it=y;break}it=x}}}var T=s.alternate;if(T!==null){var S=T.child;if(S!==null){T.child=null;do{var k=S.sibling;S.sibling=null,S=k}while(S!==null)}}it=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,it=o;else t:for(;it!==null;){if(s=it,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Mc(9,s,s.return)}var P=s.sibling;if(P!==null){P.return=s.return,it=P;break t}it=s.return}}var I=e.current;for(it=I;it!==null;){o=it;var R=o.child;if(o.subtreeFlags&2064&&R!==null)R.return=o,it=R;else t:for(o=I;it!==null;){if(l=it,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:op(9,l)}}catch(B){ue(l,l.return,B)}if(l===o){it=null;break t}var V=l.sibling;if(V!==null){V.return=l.return,it=V;break t}it=l.return}}if(jt=r,bs(),Ni&&typeof Ni.onPostCommitFiberRoot=="function")try{Ni.onPostCommitFiberRoot(Xf,e)}catch{}i=!0}return i}finally{Ut=n,Kn.transition=t}}return!1}function Ex(e,t,n){t=qa(n,t),t=fE(e,t,1),e=rs(e,t,1),t=an(),e!==null&&(Lu(e,1,t),xn(e,t))}function ue(e,t,n){if(e.tag===3)Ex(e,e,n);else for(;t!==null;){if(t.tag===3){Ex(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ss===null||!ss.has(i))){e=qa(n,e),e=pE(t,e,1),t=rs(t,e,1),e=an(),t!==null&&(Lu(t,1,e),xn(t,e));break}}t=t.return}}function O2(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),t=an(),e.pingedLanes|=e.suspendedLanes&n,De===e&&(Be&n)===n&&(Ce===4||Ce===3&&(Be&130023424)===Be&&500>ge()-yy?oo(e,0):_y|=n),xn(e,t)}function ME(e,t){t===0&&(e.mode&1?(t=Hh,Hh<<=1,!(Hh&130023424)&&(Hh=4194304)):t=1);var n=an();e=gr(e,t),e!==null&&(Lu(e,t,n),xn(e,n))}function j2(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),ME(e,n)}function V2(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(J(314))}i!==null&&i.delete(t),ME(e,n)}var DE;DE=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||yn.current)_n=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return _n=!1,S2(e,t,n);_n=!!(e.flags&131072)}else _n=!1,ee&&t.flags&1048576&&FT(t,af,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Nd(e,t),e=t.pendingProps;var r=Ua(t,Je.current);Ma(t,n),r=hy(null,t,i,e,r,n);var s=dy();return t.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,vn(i)?(s=!0,sf(t)):s=!1,t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,oy(t),r.updater=sp,t.stateNode=r,r._reactInternals=t,Ag(t,i,e,n),t=Lg(null,t,i,!0,s,n)):(t.tag=0,ee&&s&&J_(t),on(null,t,r,n),t=t.child),t;case 16:i=t.elementType;t:{switch(Nd(e,t),e=t.pendingProps,r=i._init,i=r(i._payload),t.type=i,r=t.tag=z2(i),e=oi(i,e),r){case 0:t=Ng(null,t,i,e,n);break t;case 1:t=px(null,t,i,e,n);break t;case 11:t=dx(null,t,i,e,n);break t;case 14:t=fx(null,t,i,oi(i.type,e),n);break t}throw Error(J(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:oi(i,r),Ng(e,t,i,r,n);case 1:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:oi(i,r),px(e,t,i,r,n);case 3:t:{if(yE(t),e===null)throw Error(J(387));i=t.pendingProps,s=t.memoizedState,r=s.element,$T(e,t),uf(t,i,null,n);var o=t.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){r=qa(Error(J(423)),t),t=mx(e,t,i,n,r);break t}else if(i!==r){r=qa(Error(J(424)),t),t=mx(e,t,i,n,r);break t}else for(kn=is(t.stateNode.containerInfo.firstChild),Cn=t,ee=!0,li=null,n=HT(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ha(),i===r){t=_r(e,t,n);break t}on(e,t,i,n)}t=t.child}return t;case 5:return qT(t),e===null&&Pg(t),i=t.type,r=t.pendingProps,s=e!==null?e.memoizedProps:null,o=r.children,bg(i,r)?o=null:s!==null&&bg(i,s)&&(t.flags|=32),_E(e,t),on(e,t,o,n),t.child;case 6:return e===null&&Pg(t),null;case 13:return vE(e,t,n);case 4:return ay(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Wa(t,null,i,n):on(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:oi(i,r),dx(e,t,i,r,n);case 7:return on(e,t,t.pendingProps,n),t.child;case 8:return on(e,t,t.pendingProps.children,n),t.child;case 12:return on(e,t,t.pendingProps.children,n),t.child;case 10:t:{if(i=t.type._context,r=t.pendingProps,s=t.memoizedProps,o=r.value,Gt(lf,i._currentValue),i._currentValue=o,s!==null)if(gi(s.value,o)){if(s.children===r.children&&!yn.current){t=_r(e,t,n);break t}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var c=l.firstContext;c!==null;){if(c.context===i){if(s.tag===1){c=hr(-1,n&-n),c.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?c.next=c:(c.next=p.next,p.next=c),h.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),Ig(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(J(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Ig(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}on(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,Ma(t,n),r=Qn(r),i=i(r),t.flags|=1,on(e,t,i,n),t.child;case 14:return i=t.type,r=oi(i,t.pendingProps),r=oi(i.type,r),fx(e,t,i,r,n);case 15:return mE(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:oi(i,r),Nd(e,t),t.tag=1,vn(i)?(e=!0,sf(t)):e=!1,Ma(t,n),dE(t,i,r),Ag(t,i,r,n),Lg(null,t,i,!0,e,n);case 19:return xE(e,t,n);case 22:return gE(e,t,n)}throw Error(J(156,t.tag))};function OE(e,t){return cT(e,t)}function F2(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $n(e,t,n,i){return new F2(e,t,n,i)}function by(e){return e=e.prototype,!(!e||!e.isReactComponent)}function z2(e){if(typeof e=="function")return by(e)?1:0;if(e!=null){if(e=e.$$typeof,e===B_)return 11;if(e===U_)return 14}return 2}function as(e,t){var n=e.alternate;return n===null?(n=$n(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dd(e,t,n,i,r,s){var o=2;if(i=e,typeof e=="function")by(e)&&(o=1);else if(typeof e=="string")o=5;else t:switch(e){case ya:return ao(n.children,r,s,t);case z_:o=8,r|=8;break;case tg:return e=$n(12,n,t,r|2),e.elementType=tg,e.lanes=s,e;case eg:return e=$n(13,n,t,r),e.elementType=eg,e.lanes=s,e;case ng:return e=$n(19,n,t,r),e.elementType=ng,e.lanes=s,e;case qb:return lp(n,r,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Wb:o=10;break t;case $b:o=9;break t;case B_:o=11;break t;case U_:o=14;break t;case Fr:o=16,i=null;break t}throw Error(J(130,e==null?e:typeof e,""))}return t=$n(o,n,t,r),t.elementType=e,t.type=i,t.lanes=s,t}function ao(e,t,n,i){return e=$n(7,e,i,t),e.lanes=n,e}function lp(e,t,n,i){return e=$n(22,e,i,t),e.elementType=qb,e.lanes=n,e.stateNode={isHidden:!1},e}function Tm(e,t,n){return e=$n(6,e,null,t),e.lanes=n,e}function Em(e,t,n){return t=$n(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function B2(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rm(0),this.expirationTimes=rm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rm(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Ty(e,t,n,i,r,s,o,l,c){return e=new B2(e,t,n,l,c),t===1?(t=1,s===!0&&(t|=8)):t=0,s=$n(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},oy(s),e}function U2(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_a,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}function jE(e){if(!e)return ps;e=e._reactInternals;t:{if(ko(e)!==e||e.tag!==1)throw Error(J(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break t;case 1:if(vn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break t}}t=t.return}while(t!==null);throw Error(J(171))}if(e.tag===1){var n=e.type;if(vn(n))return jT(e,n,t)}return t}function VE(e,t,n,i,r,s,o,l,c){return e=Ty(n,i,!0,e,r,s,o,l,c),e.context=jE(null),n=e.current,i=an(),r=os(n),s=hr(i,r),s.callback=t??null,rs(n,s,r),e.current.lanes=r,Lu(e,r,i),xn(e,i),e}function cp(e,t,n,i){var r=t.current,s=an(),o=os(r);return n=jE(n),t.context===null?t.context=n:t.pendingContext=n,t=hr(s,o),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=rs(r,t,o),e!==null&&(fi(e,r,o,s),Cd(e,r,o)),o}function yf(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Sx(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Ey(e,t){Sx(e,t),(e=e.alternate)&&Sx(e,t)}function H2(){return null}var FE=typeof reportError=="function"?reportError:function(e){console.error(e)};function Sy(e){this._internalRoot=e}up.prototype.render=Sy.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(J(409));cp(e,t,null,null)};up.prototype.unmount=Sy.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;go(function(){cp(null,e,null,null)}),t[mr]=null}};function up(e){this._internalRoot=e}up.prototype.unstable_scheduleHydration=function(e){if(e){var t=gT();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ur.length&&t!==0&&t<Ur[n].priority;n++);Ur.splice(n,0,e),n===0&&yT(e)}};function ky(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function hp(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function kx(){}function W2(e,t,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var h=yf(o);s.call(h)}}var o=VE(t,i,e,0,null,!1,!1,"",kx);return e._reactRootContainer=o,e[mr]=o.current,su(e.nodeType===8?e.parentNode:e),go(),o}for(;r=e.lastChild;)e.removeChild(r);if(typeof i=="function"){var l=i;i=function(){var h=yf(c);l.call(h)}}var c=Ty(e,0,!1,null,null,!1,!1,"",kx);return e._reactRootContainer=c,e[mr]=c.current,su(e.nodeType===8?e.parentNode:e),go(function(){cp(t,c,n,i)}),c}function dp(e,t,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var l=r;r=function(){var c=yf(o);l.call(c)}}cp(t,o,e,r)}else o=W2(n,t,e,r,i);return yf(o)}pT=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=gc(t.pendingLanes);n!==0&&($_(t,n|1),xn(t,ge()),!(jt&6)&&(Ga=ge()+500,bs()))}break;case 13:go(function(){var i=gr(e,1);if(i!==null){var r=an();fi(i,e,1,r)}}),Ey(e,1)}};q_=function(e){if(e.tag===13){var t=gr(e,134217728);if(t!==null){var n=an();fi(t,e,134217728,n)}Ey(e,134217728)}};mT=function(e){if(e.tag===13){var t=os(e),n=gr(e,t);if(n!==null){var i=an();fi(n,e,t,i)}Ey(e,t)}};gT=function(){return Ut};_T=function(e,t){var n=Ut;try{return Ut=e,t()}finally{Ut=n}};dg=function(e,t,n){switch(t){case"input":if(sg(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=np(i);if(!r)throw Error(J(90));Kb(i),sg(i,r)}}}break;case"textarea":Qb(e,n);break;case"select":t=n.value,t!=null&&Aa(e,!!n.multiple,t,!1)}};iT=vy;rT=go;var $2={usingClientEntryPoint:!1,Events:[Du,ba,np,eT,nT,vy]},oc={findFiberByHostInstance:Js,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},q2={bundleType:oc.bundleType,version:oc.version,rendererPackageName:oc.rendererPackageName,rendererConfig:oc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:br.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=aT(e),e===null?null:e.stateNode},findFiberByHostInstance:oc.findFiberByHostInstance||H2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var td=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!td.isDisabled&&td.supportsFiber)try{Xf=td.inject(q2),Ni=td}catch{}}Rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$2;Rn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ky(t))throw Error(J(200));return U2(e,t,null,n)};Rn.createRoot=function(e,t){if(!ky(e))throw Error(J(299));var n=!1,i="",r=FE;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),t=Ty(e,1,!1,null,null,n,!1,i,r),e[mr]=t.current,su(e.nodeType===8?e.parentNode:e),new Sy(t)};Rn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(J(188)):(e=Object.keys(e).join(","),Error(J(268,e)));return e=aT(t),e=e===null?null:e.stateNode,e};Rn.flushSync=function(e){return go(e)};Rn.hydrate=function(e,t,n){if(!hp(t))throw Error(J(200));return dp(null,e,t,!0,n)};Rn.hydrateRoot=function(e,t,n){if(!ky(e))throw Error(J(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=FE;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=VE(t,null,e,1,n??null,r,!1,s,o),e[mr]=t.current,su(e),i)for(e=0;e<i.length;e++)n=i[e],r=n._getVersion,r=r(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new up(t)};Rn.render=function(e,t,n){if(!hp(t))throw Error(J(200));return dp(null,e,t,!1,n)};Rn.unmountComponentAtNode=function(e){if(!hp(e))throw Error(J(40));return e._reactRootContainer?(go(function(){dp(null,null,e,!1,function(){e._reactRootContainer=null,e[mr]=null})}),!0):!1};Rn.unstable_batchedUpdates=vy;Rn.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!hp(n))throw Error(J(200));if(e==null||e._reactInternals===void 0)throw Error(J(38));return dp(e,t,n,!1,i)};Rn.version="18.3.1-next-f1338f8080-20240426";function zE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(zE)}catch(e){console.error(e)}}zE(),zb.exports=Rn;var G2=zb.exports,BE,Px=G2;BE=Px.createRoot,Px.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pu(){return pu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},pu.apply(this,arguments)}var Yr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Yr||(Yr={}));const Ix="popstate";function K2(e){e===void 0&&(e={});function t(r,s){let{pathname:o="/",search:l="",hash:c=""}=Po(r.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),$g("",{pathname:o,search:l,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){let o=r.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let c=r.location.href,h=c.indexOf("#");l=h===-1?c:c.slice(0,h)}return l+"#"+(typeof s=="string"?s:vf(s))}function i(r,s){Py(r.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return Q2(t,n,i,e)}function he(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Py(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Z2(){return Math.random().toString(36).substr(2,8)}function Cx(e,t){return{usr:e.state,key:e.key,idx:t}}function $g(e,t,n,i){return n===void 0&&(n=null),pu({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Po(t):t,{state:n,key:t&&t.key||i||Z2()})}function vf(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function Po(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function Q2(e,t,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,l=Yr.Pop,c=null,h=p();h==null&&(h=0,o.replaceState(pu({},o.state,{idx:h}),""));function p(){return(o.state||{idx:null}).idx}function g(){l=Yr.Pop;let k=p(),P=k==null?null:k-h;h=k,c&&c({action:l,location:S.location,delta:P})}function y(k,P){l=Yr.Push;let I=$g(S.location,k,P);n&&n(I,k),h=p()+1;let R=Cx(I,h),V=S.createHref(I);try{o.pushState(R,"",V)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;r.location.assign(V)}s&&c&&c({action:l,location:S.location,delta:1})}function x(k,P){l=Yr.Replace;let I=$g(S.location,k,P);n&&n(I,k),h=p();let R=Cx(I,h),V=S.createHref(I);o.replaceState(R,"",V),s&&c&&c({action:l,location:S.location,delta:0})}function T(k){let P=r.location.origin!=="null"?r.location.origin:r.location.href,I=typeof k=="string"?k:vf(k);return I=I.replace(/ $/,"%20"),he(P,"No window.location.(origin|href) available to create URL for href: "+I),new URL(I,P)}let S={get action(){return l},get location(){return e(r,o)},listen(k){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(Ix,g),c=k,()=>{r.removeEventListener(Ix,g),c=null}},createHref(k){return t(r,k)},createURL:T,encodeLocation(k){let P=T(k);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:y,replace:x,go(k){return o.go(k)}};return S}var Ax;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Ax||(Ax={}));function Y2(e,t,n){return n===void 0&&(n="/"),X2(e,t,n,!1)}function X2(e,t,n,i){let r=typeof t=="string"?Po(t):t,s=Ka(r.pathname||"/",n);if(s==null)return null;let o=UE(e);J2(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let h=uR(s);l=lR(o[c],h,i)}return l}function UE(e,t,n,i){t===void 0&&(t=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(s,o,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(he(c.relativePath.startsWith(i),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(i.length));let h=ls([i,c.relativePath]),p=n.concat(c);s.children&&s.children.length>0&&(he(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),UE(s.children,t,p,h)),!(s.path==null&&!s.index)&&t.push({path:h,score:oR(h,s.index),routesMeta:p})};return e.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))r(s,o);else for(let c of HE(s.path))r(s,o,c)}),t}function HE(e){let t=e.split("/");if(t.length===0)return[];let[n,...i]=t,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=HE(i.join("/")),l=[];return l.push(...o.map(c=>c===""?s:[s,c].join("/"))),r&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function J2(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:aR(t.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const tR=/^:[\w-]+$/,eR=3,nR=2,iR=1,rR=10,sR=-2,Rx=e=>e==="*";function oR(e,t){let n=e.split("/"),i=n.length;return n.some(Rx)&&(i+=sR),t&&(i+=nR),n.filter(r=>!Rx(r)).reduce((r,s)=>r+(tR.test(s)?eR:s===""?iR:rR),i)}function aR(e,t){return e.length===t.length&&e.slice(0,-1).every((i,r)=>i===t[r])?e[e.length-1]-t[t.length-1]:0}function lR(e,t,n){let{routesMeta:i}=e,r={},s="/",o=[];for(let l=0;l<i.length;++l){let c=i[l],h=l===i.length-1,p=s==="/"?t:t.slice(s.length)||"/",g=xf({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},p),y=c.route;if(!g&&h&&n&&!i[i.length-1].route.index&&(g=xf({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},p)),!g)return null;Object.assign(r,g.params),o.push({params:r,pathname:ls([s,g.pathname]),pathnameBase:pR(ls([s,g.pathnameBase])),route:y}),g.pathnameBase!=="/"&&(s=ls([s,g.pathnameBase]))}return o}function xf(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=cR(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:i.reduce((h,p,g)=>{let{paramName:y,isOptional:x}=p;if(y==="*"){let S=l[g]||"";o=s.slice(0,s.length-S.length).replace(/(.)\/+$/,"$1")}const T=l[g];return x&&!T?h[y]=void 0:h[y]=(T||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:o,pattern:e}}function cR(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Py(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let i=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(i.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(i.push({paramName:"*"}),r+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":e!==""&&e!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),i]}function uR(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Py(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Ka(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&i!=="/"?null:e.slice(n)||"/"}function hR(e,t){t===void 0&&(t="/");let{pathname:n,search:i="",hash:r=""}=typeof e=="string"?Po(e):e;return{pathname:n?n.startsWith("/")?n:dR(n,t):t,search:mR(i),hash:gR(r)}}function dR(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Sm(e,t,n,i){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function fR(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function WE(e,t){let n=fR(e);return t?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function $E(e,t,n,i){i===void 0&&(i=!1);let r;typeof e=="string"?r=Po(e):(r=pu({},e),he(!r.pathname||!r.pathname.includes("?"),Sm("?","pathname","search",r)),he(!r.pathname||!r.pathname.includes("#"),Sm("#","pathname","hash",r)),he(!r.search||!r.search.includes("#"),Sm("#","search","hash",r)));let s=e===""||r.pathname==="",o=s?"/":r.pathname,l;if(o==null)l=n;else{let g=t.length-1;if(!i&&o.startsWith("..")){let y=o.split("/");for(;y[0]==="..";)y.shift(),g-=1;r.pathname=y.join("/")}l=g>=0?t[g]:"/"}let c=hR(r,l),h=o&&o!=="/"&&o.endsWith("/"),p=(s||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(h||p)&&(c.pathname+="/"),c}const ls=e=>e.join("/").replace(/\/\/+/g,"/"),pR=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),mR=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,gR=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function _R(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const qE=["post","put","patch","delete"];new Set(qE);const yR=["get",...qE];new Set(yR);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mu(){return mu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},mu.apply(this,arguments)}const fp=$.createContext(null),GE=$.createContext(null),Ts=$.createContext(null),pp=$.createContext(null),Es=$.createContext({outlet:null,matches:[],isDataRoute:!1}),KE=$.createContext(null);function vR(e,t){let{relative:n}=t===void 0?{}:t;ju()||he(!1);let{basename:i,navigator:r}=$.useContext(Ts),{hash:s,pathname:o,search:l}=mp(e,{relative:n}),c=o;return i!=="/"&&(c=o==="/"?i:ls([i,o])),r.createHref({pathname:c,search:l,hash:s})}function ju(){return $.useContext(pp)!=null}function Io(){return ju()||he(!1),$.useContext(pp).location}function ZE(e){$.useContext(Ts).static||$.useLayoutEffect(e)}function ul(){let{isDataRoute:e}=$.useContext(Es);return e?LR():xR()}function xR(){ju()||he(!1);let e=$.useContext(fp),{basename:t,future:n,navigator:i}=$.useContext(Ts),{matches:r}=$.useContext(Es),{pathname:s}=Io(),o=JSON.stringify(WE(r,n.v7_relativeSplatPath)),l=$.useRef(!1);return ZE(()=>{l.current=!0}),$.useCallback(function(h,p){if(p===void 0&&(p={}),!l.current)return;if(typeof h=="number"){i.go(h);return}let g=$E(h,JSON.parse(o),s,p.relative==="path");e==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:ls([t,g.pathname])),(p.replace?i.replace:i.push)(g,p.state,p)},[t,i,o,s,e])}function wR(){let{matches:e}=$.useContext(Es),t=e[e.length-1];return t?t.params:{}}function mp(e,t){let{relative:n}=t===void 0?{}:t,{future:i}=$.useContext(Ts),{matches:r}=$.useContext(Es),{pathname:s}=Io(),o=JSON.stringify(WE(r,i.v7_relativeSplatPath));return $.useMemo(()=>$E(e,JSON.parse(o),s,n==="path"),[e,o,s,n])}function bR(e,t){return TR(e,t)}function TR(e,t,n,i){ju()||he(!1);let{navigator:r}=$.useContext(Ts),{matches:s}=$.useContext(Es),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let h=Io(),p;if(t){var g;let k=typeof t=="string"?Po(t):t;c==="/"||(g=k.pathname)!=null&&g.startsWith(c)||he(!1),p=k}else p=h;let y=p.pathname||"/",x=y;if(c!=="/"){let k=c.replace(/^\//,"").split("/");x="/"+y.replace(/^\//,"").split("/").slice(k.length).join("/")}let T=Y2(e,{pathname:x}),S=IR(T&&T.map(k=>Object.assign({},k,{params:Object.assign({},l,k.params),pathname:ls([c,r.encodeLocation?r.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?c:ls([c,r.encodeLocation?r.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),s,n,i);return t&&S?$.createElement(pp.Provider,{value:{location:mu({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Yr.Pop}},S):S}function ER(){let e=NR(),t=_R(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return $.createElement($.Fragment,null,$.createElement("h2",null,"Unexpected Application Error!"),$.createElement("h3",{style:{fontStyle:"italic"}},t),n?$.createElement("pre",{style:r},n):null,null)}const SR=$.createElement(ER,null);class kR extends $.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?$.createElement(Es.Provider,{value:this.props.routeContext},$.createElement(KE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function PR(e){let{routeContext:t,match:n,children:i}=e,r=$.useContext(fp);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),$.createElement(Es.Provider,{value:t},i)}function IR(e,t,n,i){var r;if(t===void 0&&(t=[]),n===void 0&&(n=null),i===void 0&&(i=null),e==null){var s;if(!n)return null;if(n.errors)e=n.matches;else if((s=i)!=null&&s.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,l=(r=n)==null?void 0:r.errors;if(l!=null){let p=o.findIndex(g=>g.route.id&&(l==null?void 0:l[g.route.id])!==void 0);p>=0||he(!1),o=o.slice(0,Math.min(o.length,p+1))}let c=!1,h=-1;if(n&&i&&i.v7_partialHydration)for(let p=0;p<o.length;p++){let g=o[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(h=p),g.route.id){let{loaderData:y,errors:x}=n,T=g.route.loader&&y[g.route.id]===void 0&&(!x||x[g.route.id]===void 0);if(g.route.lazy||T){c=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((p,g,y)=>{let x,T=!1,S=null,k=null;n&&(x=l&&g.route.id?l[g.route.id]:void 0,S=g.route.errorElement||SR,c&&(h<0&&y===0?(T=!0,k=null):h===y&&(T=!0,k=g.route.hydrateFallbackElement||null)));let P=t.concat(o.slice(0,y+1)),I=()=>{let R;return x?R=S:T?R=k:g.route.Component?R=$.createElement(g.route.Component,null):g.route.element?R=g.route.element:R=p,$.createElement(PR,{match:g,routeContext:{outlet:p,matches:P,isDataRoute:n!=null},children:R})};return n&&(g.route.ErrorBoundary||g.route.errorElement||y===0)?$.createElement(kR,{location:n.location,revalidation:n.revalidation,component:S,error:x,children:I(),routeContext:{outlet:null,matches:P,isDataRoute:!0}}):I()},null)}var QE=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(QE||{}),wf=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(wf||{});function CR(e){let t=$.useContext(fp);return t||he(!1),t}function AR(e){let t=$.useContext(GE);return t||he(!1),t}function RR(e){let t=$.useContext(Es);return t||he(!1),t}function YE(e){let t=RR(),n=t.matches[t.matches.length-1];return n.route.id||he(!1),n.route.id}function NR(){var e;let t=$.useContext(KE),n=AR(wf.UseRouteError),i=YE(wf.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[i]}function LR(){let{router:e}=CR(QE.UseNavigateStable),t=YE(wf.UseNavigateStable),n=$.useRef(!1);return ZE(()=>{n.current=!0}),$.useCallback(function(r,s){s===void 0&&(s={}),n.current&&(typeof r=="number"?e.navigate(r):e.navigate(r,mu({fromRouteId:t},s)))},[e,t])}function MR(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Zs(e){he(!1)}function DR(e){let{basename:t="/",children:n=null,location:i,navigationType:r=Yr.Pop,navigator:s,static:o=!1,future:l}=e;ju()&&he(!1);let c=t.replace(/^\/*/,"/"),h=$.useMemo(()=>({basename:c,navigator:s,static:o,future:mu({v7_relativeSplatPath:!1},l)}),[c,l,s,o]);typeof i=="string"&&(i=Po(i));let{pathname:p="/",search:g="",hash:y="",state:x=null,key:T="default"}=i,S=$.useMemo(()=>{let k=Ka(p,c);return k==null?null:{location:{pathname:k,search:g,hash:y,state:x,key:T},navigationType:r}},[c,p,g,y,x,T,r]);return S==null?null:$.createElement(Ts.Provider,{value:h},$.createElement(pp.Provider,{children:n,value:S}))}function Nx(e){let{children:t,location:n}=e;return bR(qg(t),n)}new Promise(()=>{});function qg(e,t){t===void 0&&(t=[]);let n=[];return $.Children.forEach(e,(i,r)=>{if(!$.isValidElement(i))return;let s=[...t,r];if(i.type===$.Fragment){n.push.apply(n,qg(i.props.children,s));return}i.type!==Zs&&he(!1),!i.props.index||!i.props.children||he(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=qg(i.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bf(){return bf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},bf.apply(this,arguments)}function XE(e,t){if(e==null)return{};var n={},i=Object.keys(e),r,s;for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function OR(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function jR(e,t){return e.button===0&&(!t||t==="_self")&&!OR(e)}const VR=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],FR=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],zR="6";try{window.__reactRouterVersion=zR}catch{}const BR=$.createContext({isTransitioning:!1}),UR="startTransition",Lx=OC[UR];function HR(e){let{basename:t,children:n,future:i,window:r}=e,s=$.useRef();s.current==null&&(s.current=K2({window:r,v5Compat:!0}));let o=s.current,[l,c]=$.useState({action:o.action,location:o.location}),{v7_startTransition:h}=i||{},p=$.useCallback(g=>{h&&Lx?Lx(()=>c(g)):c(g)},[c,h]);return $.useLayoutEffect(()=>o.listen(p),[o,p]),$.useEffect(()=>MR(i),[i]),$.createElement(DR,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o,future:i})}const WR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",$R=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,be=$.forwardRef(function(t,n){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:l,target:c,to:h,preventScrollReset:p,viewTransition:g}=t,y=XE(t,VR),{basename:x}=$.useContext(Ts),T,S=!1;if(typeof h=="string"&&$R.test(h)&&(T=h,WR))try{let R=new URL(window.location.href),V=h.startsWith("//")?new URL(R.protocol+h):new URL(h),B=Ka(V.pathname,x);V.origin===R.origin&&B!=null?h=B+V.search+V.hash:S=!0}catch{}let k=vR(h,{relative:r}),P=GR(h,{replace:o,state:l,target:c,preventScrollReset:p,relative:r,viewTransition:g});function I(R){i&&i(R),R.defaultPrevented||P(R)}return $.createElement("a",bf({},y,{href:T||k,onClick:S||s?i:I,ref:n,target:c}))}),JE=$.forwardRef(function(t,n){let{"aria-current":i="page",caseSensitive:r=!1,className:s="",end:o=!1,style:l,to:c,viewTransition:h,children:p}=t,g=XE(t,FR),y=mp(c,{relative:g.relative}),x=Io(),T=$.useContext(GE),{navigator:S,basename:k}=$.useContext(Ts),P=T!=null&&KR(y)&&h===!0,I=S.encodeLocation?S.encodeLocation(y).pathname:y.pathname,R=x.pathname,V=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;r||(R=R.toLowerCase(),V=V?V.toLowerCase():null,I=I.toLowerCase()),V&&k&&(V=Ka(V,k)||V);const B=I!=="/"&&I.endsWith("/")?I.length-1:I.length;let H=R===I||!o&&R.startsWith(I)&&R.charAt(B)==="/",N=V!=null&&(V===I||!o&&V.startsWith(I)&&V.charAt(I.length)==="/"),b={isActive:H,isPending:N,isTransitioning:P},A=H?i:void 0,D;typeof s=="function"?D=s(b):D=[s,H?"active":null,N?"pending":null,P?"transitioning":null].filter(Boolean).join(" ");let O=typeof l=="function"?l(b):l;return $.createElement(be,bf({},g,{"aria-current":A,className:D,ref:n,style:O,to:c,viewTransition:h}),typeof p=="function"?p(b):p)});var Gg;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Gg||(Gg={}));var Mx;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Mx||(Mx={}));function qR(e){let t=$.useContext(fp);return t||he(!1),t}function GR(e,t){let{target:n,replace:i,state:r,preventScrollReset:s,relative:o,viewTransition:l}=t===void 0?{}:t,c=ul(),h=Io(),p=mp(e,{relative:o});return $.useCallback(g=>{if(jR(g,n)){g.preventDefault();let y=i!==void 0?i:vf(h)===vf(p);c(e,{replace:y,state:r,preventScrollReset:s,relative:o,viewTransition:l})}},[h,c,p,i,r,n,e,s,o,l])}function KR(e,t){t===void 0&&(t={});let n=$.useContext(BR);n==null&&he(!1);let{basename:i}=qR(Gg.useViewTransitionState),r=mp(e,{relative:t.relative});if(!n.isTransitioning)return!1;let s=Ka(n.currentLocation.pathname,i)||n.currentLocation.pathname,o=Ka(n.nextLocation.pathname,i)||n.nextLocation.pathname;return xf(r.pathname,o)!=null||xf(r.pathname,s)!=null}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ZR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QR=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),pt=(e,t)=>{const n=$.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:l="",children:c,...h},p)=>$.createElement("svg",{ref:p,...ZR,width:r,height:r,stroke:i,strokeWidth:o?Number(s)*24/Number(r):s,className:["lucide",`lucide-${QR(e)}`,l].join(" "),...h},[...t.map(([g,y])=>$.createElement(g,y)),...Array.isArray(c)?c:[c]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tS=pt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YR=pt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kg=pt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XR=pt("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iy=pt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yc=pt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=pt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JR=pt("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tN=pt("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const km=pt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dx=pt("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eN=pt("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nN=pt("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iN=pt("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rN=pt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sN=pt("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oN=pt("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aN=pt("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eS=pt("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lN=pt("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cN=pt("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uN=pt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hN=pt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dN=pt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=pt("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cy=pt("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fN=pt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nS=pt("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iS=pt("Mountain",[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rS=pt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sS=pt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pN=pt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oS=pt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aS=pt("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mN=pt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gN=pt("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _N=pt("Signal",[["path",{d:"M2 20h.01",key:"4haj6o"}],["path",{d:"M7 20v-4",key:"j294jx"}],["path",{d:"M12 20v-8",key:"i3yub9"}],["path",{d:"M17 20V8",key:"1tkaf5"}],["path",{d:"M22 4v16",key:"sih9yq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=pt("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lS=pt("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cS=pt("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ay=pt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yN=pt("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vu=pt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ry=pt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uS=pt("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hS=pt("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=pt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jx=pt("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),dS=$.createContext(void 0),gp=()=>{const e=$.useContext(dS);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e},vN=({children:e})=>{const[t,n]=$.useState(()=>{const r=localStorage.getItem("theme");return r||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});$.useEffect(()=>{t==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",t)},[t]);const i=()=>{n(r=>r==="light"?"dark":"light")};return m.jsx(dS.Provider,{value:{theme:t,toggleTheme:i},children:e})};var Vx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):(r&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t},xN=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=e[n++],o=e[n++],l=e[n++],c=((r&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;t[i++]=String.fromCharCode(55296+(c>>10)),t[i++]=String.fromCharCode(56320+(c&1023))}else{const s=e[n++],o=e[n++];t[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return t.join("")},pS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const s=e[r],o=r+1<e.length,l=o?e[r+1]:0,c=r+2<e.length,h=c?e[r+2]:0,p=s>>2,g=(s&3)<<4|l>>4;let y=(l&15)<<2|h>>6,x=h&63;c||(x=64,o||(y=64)),i.push(n[p],n[g],n[y],n[x])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(fS(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):xN(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const s=n[e.charAt(r++)],l=r<e.length?n[e.charAt(r)]:0;++r;const h=r<e.length?n[e.charAt(r)]:64;++r;const g=r<e.length?n[e.charAt(r)]:64;if(++r,s==null||l==null||h==null||g==null)throw new wN;const y=s<<2|l>>4;if(i.push(y),h!==64){const x=l<<4&240|h>>2;if(i.push(x),g!==64){const T=h<<6&192|g;i.push(T)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class wN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bN=function(e){const t=fS(e);return pS.encodeByteArray(t,!0)},Tf=function(e){return bN(e).replace(/\./g,"")},mS=function(e){try{return pS.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN=()=>TN().__FIREBASE_DEFAULTS__,SN=()=>{if(typeof process>"u"||typeof Vx>"u")return;const e=Vx.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},kN=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&mS(e[1]);return t&&JSON.parse(t)},_p=()=>{try{return EN()||SN()||kN()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},gS=e=>{var t,n;return(n=(t=_p())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},_S=e=>{const t=gS(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},yS=()=>{var e;return(e=_p())===null||e===void 0?void 0:e.config},vS=e=>{var t;return(t=_p())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Tf(JSON.stringify(n)),Tf(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function IN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tn())}function CN(){var e;const t=(e=_p())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function AN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function RN(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function NN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function LN(){const e=tn();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function MN(){return!CN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function DN(){try{return typeof indexedDB=="object"}catch{return!1}}function ON(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;t(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jN="FirebaseError";class Fi extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=jN,Object.setPrototypeOf(this,Fi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fu.prototype.create)}}class Fu{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},r=`${this.service}/${t}`,s=this.errors[t],o=s?VN(s,i):"Error",l=`${this.serviceName}: ${o} (${r}).`;return new Fi(r,l,i)}}function VN(e,t){return e.replace(FN,(n,i)=>{const r=t[i];return r!=null?String(r):`<${i}?>`})}const FN=/\{\$([^}]+)}/g;function zN(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Ef(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const s=e[r],o=t[r];if(Fx(s)&&Fx(o)){if(!Ef(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Fx(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zu(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(r=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function vc(e){const t={};return e.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");t[decodeURIComponent(r)]=decodeURIComponent(s)}}),t}function xc(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function BN(e,t){const n=new UN(e,t);return n.subscribe.bind(n)}class UN{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,i){let r;if(t===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");HN(t,["next","error","complete"])?r=t:r={next:t,error:n,complete:i},r.next===void 0&&(r.next=Pm),r.error===void 0&&(r.error=Pm),r.complete===void 0&&(r.complete=Pm);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function HN(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Pm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(e){return e&&e._delegate?e._delegate:e}class ms{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new PN;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const i=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(qN(t))try{this.getOrInitializeService({instanceIdentifier:Qs})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(t=Qs){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Qs){return this.instances.has(t)}getOptions(t=Qs){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);i===l&&o.resolve(r)}return r}onInit(t,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(t),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&t(o,r),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:$N(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Qs){return this.component?this.component.multipleInstances?t:Qs:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $N(e){return e===Qs?void 0:e}function qN(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new WN(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Nt||(Nt={}));const KN={debug:Nt.DEBUG,verbose:Nt.VERBOSE,info:Nt.INFO,warn:Nt.WARN,error:Nt.ERROR,silent:Nt.SILENT},ZN=Nt.INFO,QN={[Nt.DEBUG]:"log",[Nt.VERBOSE]:"log",[Nt.INFO]:"info",[Nt.WARN]:"warn",[Nt.ERROR]:"error"},YN=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),r=QN[t];if(r)console[r](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Ny{constructor(t){this.name=t,this._logLevel=ZN,this._logHandler=YN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Nt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?KN[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Nt.DEBUG,...t),this._logHandler(this,Nt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Nt.VERBOSE,...t),this._logHandler(this,Nt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Nt.INFO,...t),this._logHandler(this,Nt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Nt.WARN,...t),this._logHandler(this,Nt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Nt.ERROR,...t),this._logHandler(this,Nt.ERROR,...t)}}const XN=(e,t)=>t.some(n=>e instanceof n);let zx,Bx;function JN(){return zx||(zx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tL(){return Bx||(Bx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const wS=new WeakMap,Zg=new WeakMap,bS=new WeakMap,Im=new WeakMap,Ly=new WeakMap;function eL(e){const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(cs(e.result)),r()},o=()=>{i(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&wS.set(n,e)}).catch(()=>{}),Ly.set(t,e),t}function nL(e){if(Zg.has(e))return;const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});Zg.set(e,t)}let Qg={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Zg.get(e);if(t==="objectStoreNames")return e.objectStoreNames||bS.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return cs(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function iL(e){Qg=e(Qg)}function rL(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(Cm(this),t,...n);return bS.set(i,t.sort?t.sort():[t]),cs(i)}:tL().includes(e)?function(...t){return e.apply(Cm(this),t),cs(wS.get(this))}:function(...t){return cs(e.apply(Cm(this),t))}}function sL(e){return typeof e=="function"?rL(e):(e instanceof IDBTransaction&&nL(e),XN(e,JN())?new Proxy(e,Qg):e)}function cs(e){if(e instanceof IDBRequest)return eL(e);if(Im.has(e))return Im.get(e);const t=sL(e);return t!==e&&(Im.set(e,t),Ly.set(t,e)),t}const Cm=e=>Ly.get(e);function oL(e,t,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(e,t),l=cs(o);return i&&o.addEventListener("upgradeneeded",c=>{i(cs(o.result),c.oldVersion,c.newVersion,cs(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),r&&c.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const aL=["get","getKey","getAll","getAllKeys","count"],lL=["put","add","delete","clear"],Am=new Map;function Ux(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Am.get(t))return Am.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=lL.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||aL.includes(n)))return;const s=async function(o,...l){const c=this.transaction(o,r?"readwrite":"readonly");let h=c.store;return i&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),r&&c.done]))[0]};return Am.set(t,s),s}iL(e=>({...e,get:(t,n,i)=>Ux(t,n)||e.get(t,n,i),has:(t,n)=>!!Ux(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(uL(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function uL(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Yg="@firebase/app",Hx="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yr=new Ny("@firebase/app"),hL="@firebase/app-compat",dL="@firebase/analytics-compat",fL="@firebase/analytics",pL="@firebase/app-check-compat",mL="@firebase/app-check",gL="@firebase/auth",_L="@firebase/auth-compat",yL="@firebase/database",vL="@firebase/data-connect",xL="@firebase/database-compat",wL="@firebase/functions",bL="@firebase/functions-compat",TL="@firebase/installations",EL="@firebase/installations-compat",SL="@firebase/messaging",kL="@firebase/messaging-compat",PL="@firebase/performance",IL="@firebase/performance-compat",CL="@firebase/remote-config",AL="@firebase/remote-config-compat",RL="@firebase/storage",NL="@firebase/storage-compat",LL="@firebase/firestore",ML="@firebase/vertexai-preview",DL="@firebase/firestore-compat",OL="firebase",jL="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xg="[DEFAULT]",VL={[Yg]:"fire-core",[hL]:"fire-core-compat",[fL]:"fire-analytics",[dL]:"fire-analytics-compat",[mL]:"fire-app-check",[pL]:"fire-app-check-compat",[gL]:"fire-auth",[_L]:"fire-auth-compat",[yL]:"fire-rtdb",[vL]:"fire-data-connect",[xL]:"fire-rtdb-compat",[wL]:"fire-fn",[bL]:"fire-fn-compat",[TL]:"fire-iid",[EL]:"fire-iid-compat",[SL]:"fire-fcm",[kL]:"fire-fcm-compat",[PL]:"fire-perf",[IL]:"fire-perf-compat",[CL]:"fire-rc",[AL]:"fire-rc-compat",[RL]:"fire-gcs",[NL]:"fire-gcs-compat",[LL]:"fire-fst",[DL]:"fire-fst-compat",[ML]:"fire-vertex","fire-js":"fire-js",[OL]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sf=new Map,FL=new Map,Jg=new Map;function Wx(e,t){try{e.container.addComponent(t)}catch(n){yr.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function _o(e){const t=e.name;if(Jg.has(t))return yr.debug(`There were multiple attempts to register component ${t}.`),!1;Jg.set(t,e);for(const n of Sf.values())Wx(n,e);for(const n of FL.values())Wx(n,e);return!0}function yp(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function ui(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},us=new Fu("app","Firebase",zL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(t,n,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ms("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw us.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Co=jL;function TS(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i=Object.assign({name:Xg,automaticDataCollectionEnabled:!1},t),r=i.name;if(typeof r!="string"||!r)throw us.create("bad-app-name",{appName:String(r)});if(n||(n=yS()),!n)throw us.create("no-options");const s=Sf.get(r);if(s){if(Ef(n,s.options)&&Ef(i,s.config))return s;throw us.create("duplicate-app",{appName:r})}const o=new GN(r);for(const c of Jg.values())o.addComponent(c);const l=new BL(n,i,o);return Sf.set(r,l),l}function My(e=Xg){const t=Sf.get(e);if(!t&&e===Xg&&yS())return TS();if(!t)throw us.create("no-app",{appName:e});return t}function Mi(e,t,n){var i;let r=(i=VL[e])!==null&&i!==void 0?i:e;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const l=[`Unable to register library "${r}" with version "${t}":`];s&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),yr.warn(l.join(" "));return}_o(new ms(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UL="firebase-heartbeat-database",HL=1,gu="firebase-heartbeat-store";let Rm=null;function ES(){return Rm||(Rm=oL(UL,HL,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(gu)}catch(n){console.warn(n)}}}}).catch(e=>{throw us.create("idb-open",{originalErrorMessage:e.message})})),Rm}async function WL(e){try{const n=(await ES()).transaction(gu),i=await n.objectStore(gu).get(SS(e));return await n.done,i}catch(t){if(t instanceof Fi)yr.warn(t.message);else{const n=us.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});yr.warn(n.message)}}}async function $x(e,t){try{const i=(await ES()).transaction(gu,"readwrite");await i.objectStore(gu).put(t,SS(e)),await i.done}catch(n){if(n instanceof Fi)yr.warn(n.message);else{const i=us.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});yr.warn(i.message)}}}function SS(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $L=1024,qL=30*24*60*60*1e3;class GL{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ZL(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=qx();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=qL}),this._storage.overwrite(this._heartbeatsCache))}catch(i){yr.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=qx(),{heartbeatsToSend:i,unsentEntries:r}=KL(this._heartbeatsCache.heartbeats),s=Tf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return yr.warn(n),""}}}function qx(){return new Date().toISOString().substring(0,10)}function KL(e,t=$L){const n=[];let i=e.slice();for(const r of e){const s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),Gx(n)>t){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Gx(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class ZL{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return DN()?ON().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await WL(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return $x(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return $x(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function Gx(e){return Tf(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QL(e){_o(new ms("platform-logger",t=>new cL(t),"PRIVATE")),_o(new ms("heartbeat",t=>new GL(t),"PRIVATE")),Mi(Yg,Hx,e),Mi(Yg,Hx,"esm2017"),Mi("fire-js","")}QL("");function Dy(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n}function kS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const YL=kS,PS=new Fu("auth","Firebase",kS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kf=new Ny("@firebase/auth");function XL(e,...t){kf.logLevel<=Nt.WARN&&kf.warn(`Auth (${Co}): ${e}`,...t)}function Od(e,...t){kf.logLevel<=Nt.ERROR&&kf.error(`Auth (${Co}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(e,...t){throw jy(e,...t)}function pi(e,...t){return jy(e,...t)}function Oy(e,t,n){const i=Object.assign(Object.assign({},YL()),{[t]:n});return new Fu("auth","Firebase",i).create(t,{appName:e.name})}function dr(e){return Oy(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function JL(e,t,n){const i=n;if(!(t instanceof i))throw i.name!==t.constructor.name&&Xn(e,"argument-error"),Oy(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function jy(e,...t){if(typeof e!="string"){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return PS.create(e,...t)}function ft(e,t,...n){if(!e)throw jy(t,...n)}function ar(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Od(t),new Error(t)}function vr(e,t){e||ar(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t_(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function tM(){return Kx()==="http:"||Kx()==="https:"}function Kx(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(tM()||RN()||"connection"in navigator)?navigator.onLine:!0}function nM(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(t,n){this.shortDelay=t,this.longDelay=n,vr(n>t,"Short delay should be less than long delay!"),this.isMobile=IN()||NN()}get(){return eM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vy(e,t){vr(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{static initialize(t,n,i){this.fetchImpl=t,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ar("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ar("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ar("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rM=new Bu(3e4,6e4);function Ss(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Tr(e,t,n,i,r={}){return CS(e,r,async()=>{let s={},o={};i&&(t==="GET"?o=i:s={body:JSON.stringify(i)});const l=zu(Object.assign({key:e.config.apiKey},o)).slice(1),c=await e._getAdditionalHeaders();c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode);const h=Object.assign({method:t,headers:c},s);return AN()||(h.referrerPolicy="no-referrer"),IS.fetch()(AS(e,e.config.apiHost,n,l),h)})}async function CS(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},iM),t);try{const r=new oM(e),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw ed(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[c,h]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw ed(e,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw ed(e,"email-already-in-use",o);if(c==="USER_DISABLED")throw ed(e,"user-disabled",o);const p=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Oy(e,p,h);Xn(e,p)}}catch(r){if(r instanceof Fi)throw r;Xn(e,"network-request-failed",{message:String(r)})}}async function Uu(e,t,n,i,r={}){const s=await Tr(e,t,n,i,r);return"mfaPendingCredential"in s&&Xn(e,"multi-factor-auth-required",{_serverResponse:s}),s}function AS(e,t,n,i){const r=`${t}${n}?${i}`;return e.config.emulator?Vy(e.config,r):`${e.config.apiScheme}://${r}`}function sM(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class oM{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(pi(this.auth,"network-request-failed")),rM.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ed(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=pi(e,t,i);return r.customData._tokenResponse=n,r}function Zx(e){return e!==void 0&&e.enterprise!==void 0}class aM{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return sM(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}}async function lM(e,t){return Tr(e,"GET","/v2/recaptchaConfig",Ss(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cM(e,t){return Tr(e,"POST","/v1/accounts:delete",t)}async function RS(e,t){return Tr(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jc(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function uM(e,t=!1){const n=ne(e),i=await n.getIdToken(t),r=Fy(i);ft(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:jc(Nm(r.auth_time)),issuedAtTime:jc(Nm(r.iat)),expirationTime:jc(Nm(r.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Nm(e){return Number(e)*1e3}function Fy(e){const[t,n,i]=e.split(".");if(t===void 0||n===void 0||i===void 0)return Od("JWT malformed, contained fewer than 3 sections"),null;try{const r=mS(n);return r?JSON.parse(r):(Od("Failed to decode base64 JWT payload"),null)}catch(r){return Od("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function Qx(e){const t=Fy(e);return ft(t,"internal-error"),ft(typeof t.exp<"u","internal-error"),ft(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Za(e,t,n=!1){if(n)return t;try{return await t}catch(i){throw i instanceof Fi&&hM(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}function hM({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=jc(this.lastLoginAt),this.creationTime=jc(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pf(e){var t;const n=e.auth,i=await e.getIdToken(),r=await Za(e,RS(n,{idToken:i}));ft(r==null?void 0:r.users.length,n,"internal-error");const s=r.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?NS(s.providerUserInfo):[],l=pM(e.providerData,o),c=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(l!=null&&l.length),p=c?h:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new e_(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(e,g)}async function fM(e){const t=ne(e);await Pf(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function pM(e,t){return[...e.filter(i=>!t.some(r=>r.providerId===i.providerId)),...t]}function NS(e){return e.map(t=>{var{providerId:n}=t,i=Dy(t,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mM(e,t){const n=await CS(e,{},async()=>{const i=zu({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,o=AS(e,r,"/v1/token",`key=${s}`),l=await e._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",IS.fetch()(o,{method:"POST",headers:l,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function gM(e,t){return Tr(e,"POST","/v2/accounts:revokeToken",Ss(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){ft(t.idToken,"internal-error"),ft(typeof t.idToken<"u","internal-error"),ft(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Qx(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){ft(t.length!==0,"internal-error");const n=Qx(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ft(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await mM(t,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(t,n,i){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,o=new Oa;return i&&(ft(typeof i=="string","internal-error",{appName:t}),o.refreshToken=i),r&&(ft(typeof r=="string","internal-error",{appName:t}),o.accessToken=r),s&&(ft(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Oa,this.toJSON())}_performRefresh(){return ar("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jr(e,t){ft(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class lr{constructor(t){var{uid:n,auth:i,stsTokenManager:r}=t,s=Dy(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new dM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new e_(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await Za(this,this.stsTokenManager.getToken(this.auth,t));return ft(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return uM(this,t)}reload(){return fM(this)}_assign(t){this!==t&&(ft(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new lr(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){ft(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),n&&await Pf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ui(this.auth.app))return Promise.reject(dr(this.auth));const t=await this.getIdToken();return await Za(this,cM(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var i,r,s,o,l,c,h,p;const g=(i=n.displayName)!==null&&i!==void 0?i:void 0,y=(r=n.email)!==null&&r!==void 0?r:void 0,x=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,T=(o=n.photoURL)!==null&&o!==void 0?o:void 0,S=(l=n.tenantId)!==null&&l!==void 0?l:void 0,k=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,P=(h=n.createdAt)!==null&&h!==void 0?h:void 0,I=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:R,emailVerified:V,isAnonymous:B,providerData:H,stsTokenManager:N}=n;ft(R&&N,t,"internal-error");const b=Oa.fromJSON(this.name,N);ft(typeof R=="string",t,"internal-error"),jr(g,t.name),jr(y,t.name),ft(typeof V=="boolean",t,"internal-error"),ft(typeof B=="boolean",t,"internal-error"),jr(x,t.name),jr(T,t.name),jr(S,t.name),jr(k,t.name),jr(P,t.name),jr(I,t.name);const A=new lr({uid:R,auth:t,email:y,emailVerified:V,displayName:g,isAnonymous:B,photoURL:T,phoneNumber:x,tenantId:S,stsTokenManager:b,createdAt:P,lastLoginAt:I});return H&&Array.isArray(H)&&(A.providerData=H.map(D=>Object.assign({},D))),k&&(A._redirectEventId=k),A}static async _fromIdTokenResponse(t,n,i=!1){const r=new Oa;r.updateFromServerResponse(n);const s=new lr({uid:n.localId,auth:t,stsTokenManager:r,isAnonymous:i});return await Pf(s),s}static async _fromGetAccountInfoResponse(t,n,i){const r=n.users[0];ft(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?NS(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),l=new Oa;l.updateFromIdToken(i);const c=new lr({uid:r.localId,auth:t,stsTokenManager:l,isAnonymous:o}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new e_(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,h),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx=new Map;function cr(e){vr(e instanceof Function,"Expected a class definition");let t=Yx.get(e);return t?(vr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Yx.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}LS.type="NONE";const Xx=LS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jd(e,t,n){return`firebase:${e}:${t}:${n}`}class ja{constructor(t,n,i){this.persistence=t,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=jd(this.userKey,r.apiKey,s),this.fullPersistenceKey=jd("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?lr._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,i="authUser"){if(!n.length)return new ja(cr(Xx),t,i);const r=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=r[0]||cr(Xx);const o=jd(i,t.config.apiKey,t.name);let l=null;for(const h of n)try{const p=await h._get(o);if(p){const g=lr._fromJSON(t,p);h!==s&&(l=g),s=h;break}}catch{}const c=r.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new ja(s,t,i):(s=c[0],l&&await s._set(o,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==s)try{await h._remove(o)}catch{}})),new ja(s,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jx(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(jS(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(MS(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(FS(t))return"Blackberry";if(zS(t))return"Webos";if(DS(t))return"Safari";if((t.includes("chrome/")||OS(t))&&!t.includes("edge/"))return"Chrome";if(VS(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=e.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function MS(e=tn()){return/firefox\//i.test(e)}function DS(e=tn()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function OS(e=tn()){return/crios\//i.test(e)}function jS(e=tn()){return/iemobile/i.test(e)}function VS(e=tn()){return/android/i.test(e)}function FS(e=tn()){return/blackberry/i.test(e)}function zS(e=tn()){return/webos/i.test(e)}function zy(e=tn()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function _M(e=tn()){var t;return zy(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function yM(){return LN()&&document.documentMode===10}function BS(e=tn()){return zy(e)||VS(e)||zS(e)||FS(e)||/windows phone/i.test(e)||jS(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(e,t=[]){let n;switch(e){case"Browser":n=Jx(tn());break;case"Worker":n=`${Jx(tn())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Co}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const i=s=>new Promise((o,l)=>{try{const c=t(s);o(c)}catch(c){l(c)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const i of this.queue)await i(t),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xM(e,t={}){return Tr(e,"GET","/v2/passwordPolicy",Ss(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM=6;class bM{constructor(t){var n,i,r,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:wM,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=t.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,i,r,s,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,c),this.validatePasswordCharacterOptions(t,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(i=c.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(r=c.containsLowercaseLetter)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(t,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=t.length>=i),r&&(n.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<t.length;r++)i=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(t,n,i,r){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new tw(this),this.idTokenSubscription=new tw(this),this.beforeStateQueue=new vM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=PS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=cr(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await ja.create(this,t),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await RS(this,{idToken:t}),i=await lr._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(ui(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(t);(!o||o===l)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ft(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Pf(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=nM()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(ui(this.app))return Promise.reject(dr(this));const n=t?ne(t):null;return n&&ft(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&ft(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return ui(this.app)?Promise.reject(dr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return ui(this.app)?Promise.reject(dr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(cr(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await xM(this),n=new bM(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new Fu("auth","Firebase",t())}onAuthStateChanged(t,n,i){return this.registerStateListener(this.authStateSubscription,t,n,i)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,i){return this.registerStateListener(this.idTokenSubscription,t,n,i)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await gM(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const i=await this.getOrInitRedirectPersistenceManager(n);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&cr(t)||this._popupRedirectResolver;ft(n,this,"argument-error"),this.redirectPersistenceManager=await ja.create(this,[cr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ft(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const c=t.addObserver(n,i,r);return()=>{o=!0,c()}}else{const c=t.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return ft(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=US(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&XL(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ks(e){return ne(e)}class tw{constructor(t){this.auth=t,this.observer=null,this.addObserver=BN(n=>this.observer=n)}get next(){return ft(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function EM(e){vp=e}function HS(e){return vp.loadJS(e)}function SM(){return vp.recaptchaEnterpriseScript}function kM(){return vp.gapiScript}function PM(e){return`__${e}${Math.floor(Math.random()*1e6)}`}const IM="recaptcha-enterprise",CM="NO_RECAPTCHA";class AM{constructor(t){this.type=IM,this.auth=ks(t)}async verify(t="verify",n=!1){async function i(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,l)=>{lM(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const h=new aM(c);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,o(h.siteKey)}}).catch(c=>{l(c)})})}function r(s,o,l){const c=window.grecaptcha;Zx(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:t}).then(h=>{o(h)}).catch(()=>{o(CM)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{i(this.auth).then(l=>{if(!n&&Zx(window.grecaptcha))r(l,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=SM();c.length!==0&&(c+=l),HS(c).then(()=>{r(l,s,o)}).catch(h=>{o(h)})}}).catch(l=>{o(l)})})}}async function ew(e,t,n,i=!1){const r=new AM(e);let s;try{s=await r.verify(n)}catch{s=await r.verify(n,!0)}const o=Object.assign({},t);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function n_(e,t,n,i){var r;if(!((r=e._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await ew(e,t,n,n==="getOobCode");return i(e,s)}else return i(e,t).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await ew(e,t,n,n==="getOobCode");return i(e,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RM(e,t){const n=yp(e,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(Ef(s,t??{}))return r;Xn(r,"already-initialized")}return n.initialize({options:t})}function NM(e,t){const n=(t==null?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(cr);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function LM(e,t,n){const i=ks(e);ft(i._canInitEmulator,i,"emulator-config-failed"),ft(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!1,s=WS(t),{host:o,port:l}=MM(t),c=l===null?"":`:${l}`;i.config.emulator={url:`${s}//${o}${c}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),DM()}function WS(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function MM(e){const t=WS(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:nw(i.substr(s.length+1))}}else{const[s,o]=i.split(":");return{host:s,port:nw(o)}}}function nw(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function DM(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return ar("not implemented")}_getIdTokenResponse(t){return ar("not implemented")}_linkToIdToken(t,n){return ar("not implemented")}_getReauthenticationResolver(t){return ar("not implemented")}}async function OM(e,t){return Tr(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jM(e,t){return Uu(e,"POST","/v1/accounts:signInWithPassword",Ss(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VM(e,t){return Uu(e,"POST","/v1/accounts:signInWithEmailLink",Ss(e,t))}async function FM(e,t){return Uu(e,"POST","/v1/accounts:signInWithEmailLink",Ss(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u extends By{constructor(t,n,i,r=null){super("password",i),this._email=t,this._password=n,this._tenantId=r}static _fromEmailAndPassword(t,n){return new _u(t,n,"password")}static _fromEmailAndCode(t,n,i=null){return new _u(t,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return n_(t,n,"signInWithPassword",jM);case"emailLink":return VM(t,{email:this._email,oobCode:this._password});default:Xn(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return n_(t,i,"signUpPassword",OM);case"emailLink":return FM(t,{idToken:n,email:this._email,oobCode:this._password});default:Xn(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Va(e,t){return Uu(e,"POST","/v1/accounts:signInWithIdp",Ss(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zM="http://localhost";class yo extends By{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new yo(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Xn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:r}=n,s=Dy(n,["providerId","signInMethod"]);if(!i||!r)return null;const o=new yo(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return Va(t,n)}_linkToIdToken(t,n){const i=this.buildRequest();return i.idToken=n,Va(t,i)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Va(t,n)}buildRequest(){const t={requestUri:zM,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=zu(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BM(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function UM(e){const t=vc(xc(e)).link,n=t?vc(xc(t)).deep_link_id:null,i=vc(xc(e)).deep_link_id;return(i?vc(xc(i)).link:null)||i||n||t||e}class Uy{constructor(t){var n,i,r,s,o,l;const c=vc(xc(t)),h=(n=c.apiKey)!==null&&n!==void 0?n:null,p=(i=c.oobCode)!==null&&i!==void 0?i:null,g=BM((r=c.mode)!==null&&r!==void 0?r:null);ft(h&&p&&g,"argument-error"),this.apiKey=h,this.operation=g,this.code=p,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(t){const n=UM(t);try{return new Uy(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(){this.providerId=hl.PROVIDER_ID}static credential(t,n){return _u._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const i=Uy.parseLink(n);return ft(i,"argument-error"),_u._fromEmailAndCode(t,i.code,i.tenantId)}}hl.PROVIDER_ID="password";hl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";hl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu extends Hy{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r extends Hu{constructor(){super("facebook.com")}static credential(t){return yo._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return $r.credentialFromTaggedObject(t)}static credentialFromError(t){return $r.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return $r.credential(t.oauthAccessToken)}catch{return null}}}$r.FACEBOOK_SIGN_IN_METHOD="facebook.com";$r.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr extends Hu{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return yo._fromParams({providerId:rr.PROVIDER_ID,signInMethod:rr.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return rr.credentialFromTaggedObject(t)}static credentialFromError(t){return rr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return rr.credential(n,i)}catch{return null}}}rr.GOOGLE_SIGN_IN_METHOD="google.com";rr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr extends Hu{constructor(){super("github.com")}static credential(t){return yo._fromParams({providerId:qr.PROVIDER_ID,signInMethod:qr.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return qr.credentialFromTaggedObject(t)}static credentialFromError(t){return qr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return qr.credential(t.oauthAccessToken)}catch{return null}}}qr.GITHUB_SIGN_IN_METHOD="github.com";qr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr extends Hu{constructor(){super("twitter.com")}static credential(t,n){return yo._fromParams({providerId:Gr.PROVIDER_ID,signInMethod:Gr.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Gr.credentialFromTaggedObject(t)}static credentialFromError(t){return Gr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return Gr.credential(n,i)}catch{return null}}}Gr.TWITTER_SIGN_IN_METHOD="twitter.com";Gr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HM(e,t){return Uu(e,"POST","/v1/accounts:signUp",Ss(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,i,r=!1){const s=await lr._fromIdTokenResponse(t,i,r),o=iw(i);return new vo({user:s,providerId:o,_tokenResponse:i,operationType:n})}static async _forOperation(t,n,i){await t._updateTokensIfNecessary(i,!0);const r=iw(i);return new vo({user:t,providerId:r,_tokenResponse:i,operationType:n})}}function iw(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If extends Fi{constructor(t,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,If.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,n,i,r){return new If(t,n,i,r)}}function $S(e,t,n,i){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?If._fromErrorAndOperation(e,s,t,i):s})}async function WM(e,t,n=!1){const i=await Za(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return vo._forOperation(e,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $M(e,t,n=!1){const{auth:i}=e;if(ui(i.app))return Promise.reject(dr(i));const r="reauthenticate";try{const s=await Za(e,$S(i,r,t,e),n);ft(s.idToken,i,"internal-error");const o=Fy(s.idToken);ft(o,i,"internal-error");const{sub:l}=o;return ft(e.uid===l,i,"user-mismatch"),vo._forOperation(e,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Xn(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qS(e,t,n=!1){if(ui(e.app))return Promise.reject(dr(e));const i="signIn",r=await $S(e,i,t),s=await vo._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(s.user),s}async function qM(e,t){return qS(ks(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GS(e){const t=ks(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function GM(e,t,n){if(ui(e.app))return Promise.reject(dr(e));const i=ks(e),o=await n_(i,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",HM).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&GS(e),c}),l=await vo._fromIdTokenResponse(i,"signIn",o);return await i._updateCurrentUser(l.user),l}function KM(e,t,n){return ui(e.app)?Promise.reject(dr(e)):qM(ne(e),hl.credential(t,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&GS(e),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZM(e,t){return Tr(e,"POST","/v1/accounts:update",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QM(e,{displayName:t,photoURL:n}){if(t===void 0&&n===void 0)return;const i=ne(e),s={idToken:await i.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},o=await Za(i,ZM(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const l=i.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=i.displayName,l.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}function YM(e,t,n,i){return ne(e).onIdTokenChanged(t,n,i)}function XM(e,t,n){return ne(e).beforeAuthStateChanged(t,n)}function JM(e,t,n,i){return ne(e).onAuthStateChanged(t,n,i)}function tD(e){return ne(e).signOut()}const Cf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Cf,"1"),this.storage.removeItem(Cf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD=1e3,nD=10;class ZS extends KS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=BS(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&t(n,r,i)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const i=t.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(i);!n&&this.localCache[i]===o||this.notifyListeners(i,o)},s=this.storage.getItem(i);yM()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,nD):r()}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:i}),!0)})},eD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}ZS.type="LOCAL";const iD=ZS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS extends KS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}QS.type="SESSION";const YS=QS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rD(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(r=>r.isListeningto(t));if(n)return n;const i=new xp(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:i,eventType:r,data:s}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const l=Array.from(o).map(async h=>h(n.origin,s)),c=await rD(l);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:c})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wy(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((l,c)=>{const h=Wy("",20);r.port1.start();const p=setTimeout(()=>{c(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(g){const y=g;if(y.data.eventId===h)switch(y.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(y.data.response);break;default:clearTimeout(p),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:h,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Di(){return window}function oD(e){Di().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XS(){return typeof Di().WorkerGlobalScope<"u"&&typeof Di().importScripts=="function"}async function aD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function lD(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function cD(){return XS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS="firebaseLocalStorageDb",uD=1,Af="firebaseLocalStorage",tk="fbase_key";class Wu{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function wp(e,t){return e.transaction([Af],t?"readwrite":"readonly").objectStore(Af)}function hD(){const e=indexedDB.deleteDatabase(JS);return new Wu(e).toPromise()}function i_(){const e=indexedDB.open(JS,uD);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const i=e.result;try{i.createObjectStore(Af,{keyPath:tk})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const i=e.result;i.objectStoreNames.contains(Af)?t(i):(i.close(),await hD(),t(await i_()))})})}async function rw(e,t,n){const i=wp(e,!0).put({[tk]:t,value:n});return new Wu(i).toPromise()}async function dD(e,t){const n=wp(e,!1).get(t),i=await new Wu(n).toPromise();return i===void 0?null:i.value}function sw(e,t){const n=wp(e,!0).delete(t);return new Wu(n).toPromise()}const fD=800,pD=3;class ek{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await i_(),this.db)}async _withRetries(t){let n=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(n++>pD)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return XS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xp._getInstance(cD()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await aD(),!this.activeServiceWorker)return;this.sender=new sD(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||lD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await i_();return await rw(t,Cf,"1"),await sw(t,Cf),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>rw(i,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(i=>dD(i,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>sw(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(r=>{const s=wp(r,!1).getAll();return new Wu(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(t.length!==0)for(const{fbase_key:r,value:s}of t)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),fD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ek.type="LOCAL";const mD=ek;new Bu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nk(e,t){return t?cr(t):(ft(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y extends By{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Va(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Va(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Va(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function gD(e){return qS(e.auth,new $y(e),e.bypassAuthState)}function _D(e){const{auth:t,user:n}=e;return ft(n,t,"internal-error"),$M(n,new $y(e),e.bypassAuthState)}async function yD(e){const{auth:t,user:n}=e;return ft(n,t,"internal-error"),WM(n,new $y(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(t,n,i,r,s=!1){this.auth=t,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:o,type:l}=t;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(h){this.reject(h)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return gD;case"linkViaPopup":case"linkViaRedirect":return yD;case"reauthViaPopup":case"reauthViaRedirect":return _D;default:Xn(this.auth,"internal-error")}}resolve(t){vr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){vr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vD=new Bu(2e3,1e4);async function xD(e,t,n){if(ui(e.app))return Promise.reject(pi(e,"operation-not-supported-in-this-environment"));const i=ks(e);JL(e,t,Hy);const r=nk(i,n);return new no(i,"signInViaPopup",t,r).executeNotNull()}class no extends ik{constructor(t,n,i,r,s){super(t,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,no.currentPopupAction&&no.currentPopupAction.cancel(),no.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return ft(t,this.auth,"internal-error"),t}async onExecution(){vr(this.filter.length===1,"Popup operations only handle one event");const t=Wy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(pi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(pi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,no.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,vD.get())};t()}}no.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD="pendingRedirect",Vd=new Map;class bD extends ik{constructor(t,n,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let t=Vd.get(this.auth._key());if(!t){try{const i=await TD(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(n){t=()=>Promise.reject(n)}Vd.set(this.auth._key(),t)}return this.bypassAuthState||Vd.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function TD(e,t){const n=kD(t),i=SD(e);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function ED(e,t){Vd.set(e._key(),t)}function SD(e){return cr(e._redirectPersistence)}function kD(e){return jd(wD,e.config.apiKey,e.name)}async function PD(e,t,n=!1){if(ui(e.app))return Promise.reject(dr(e));const i=ks(e),r=nk(i,t),o=await new bD(i,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ID=10*60*1e3;class CD{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(n=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!AD(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var i;if(t.error&&!rk(t)){const r=((i=t.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(pi(this.auth,r))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const i=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=ID&&this.cachedEventUids.clear(),this.cachedEventUids.has(ow(t))}saveEventToCache(t){this.cachedEventUids.add(ow(t)),this.lastProcessedEventTime=Date.now()}}function ow(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function rk({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function AD(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return rk(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RD(e,t={}){return Tr(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ND=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,LD=/^https?/;async function MD(e){if(e.config.emulator)return;const{authorizedDomains:t}=await RD(e);for(const n of t)try{if(DD(n))return}catch{}Xn(e,"unauthorized-domain")}function DD(e){const t=t_(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&i===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!LD.test(n))return!1;if(ND.test(e))return i===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD=new Bu(3e4,6e4);function aw(){const e=Di().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function jD(e){return new Promise((t,n)=>{var i,r,s;function o(){aw(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{aw(),n(pi(e,"network-request-failed"))},timeout:OD.get()})}if(!((r=(i=Di().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)t(gapi.iframes.getContext());else if(!((s=Di().gapi)===null||s===void 0)&&s.load)o();else{const l=PM("iframefcb");return Di()[l]=()=>{gapi.load?o():n(pi(e,"network-request-failed"))},HS(`${kM()}?onload=${l}`).catch(c=>n(c))}}).catch(t=>{throw Fd=null,t})}let Fd=null;function VD(e){return Fd=Fd||jD(e),Fd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD=new Bu(5e3,15e3),zD="__/auth/iframe",BD="emulator/auth/iframe",UD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},HD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function WD(e){const t=e.config;ft(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Vy(t,BD):`https://${e.config.authDomain}/${zD}`,i={apiKey:t.apiKey,appName:e.name,v:Co},r=HD.get(e.config.apiHost);r&&(i.eid=r);const s=e._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${zu(i).slice(1)}`}async function $D(e){const t=await VD(e),n=Di().gapi;return ft(n,e,"internal-error"),t.open({where:document.body,url:WD(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:UD,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const o=pi(e,"network-request-failed"),l=Di().setTimeout(()=>{s(o)},FD.get());function c(){Di().clearTimeout(l),r(i)}i.ping(c).then(c,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},GD=500,KD=600,ZD="_blank",QD="http://localhost";class lw{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function YD(e,t,n,i=GD,r=KD){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const c=Object.assign(Object.assign({},qD),{width:i.toString(),height:r.toString(),top:s,left:o}),h=tn().toLowerCase();n&&(l=OS(h)?ZD:n),MS(h)&&(t=t||QD,c.scrollbars="yes");const p=Object.entries(c).reduce((y,[x,T])=>`${y}${x}=${T},`,"");if(_M(h)&&l!=="_self")return XD(t||"",l),new lw(null);const g=window.open(t||"",l,p);ft(g,e,"popup-blocked");try{g.focus()}catch{}return new lw(g)}function XD(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD="__/auth/handler",tO="emulator/auth/handler",eO=encodeURIComponent("fac");async function cw(e,t,n,i,r,s){ft(e.config.authDomain,e,"auth-domain-config-required"),ft(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:Co,eventId:r};if(t instanceof Hy){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",zN(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[p,g]of Object.entries({}))o[p]=g}if(t instanceof Hu){const p=t.getScopes().filter(g=>g!=="");p.length>0&&(o.scopes=p.join(","))}e.tenantId&&(o.tid=e.tenantId);const l=o;for(const p of Object.keys(l))l[p]===void 0&&delete l[p];const c=await e._getAppCheckToken(),h=c?`#${eO}=${encodeURIComponent(c)}`:"";return`${nO(e)}?${zu(l).slice(1)}${h}`}function nO({config:e}){return e.emulator?Vy(e,tO):`https://${e.authDomain}/${JD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lm="webStorageSupport";class iO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=YS,this._completeRedirectFn=PD,this._overrideRedirectResult=ED}async _openPopup(t,n,i,r){var s;vr((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await cw(t,n,i,t_(),r);return YD(t,o,Wy())}async _openRedirect(t,n,i,r){await this._originValidation(t);const s=await cw(t,n,i,t_(),r);return oD(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(vr(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(t);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(t){const n=await $D(t),i=new CD(t);return n.register("authEvent",r=>(ft(r==null?void 0:r.authEvent,t,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=n,i}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Lm,{type:Lm},r=>{var s;const o=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[Lm];o!==void 0&&n(!!o),Xn(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=MD(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return BS()||DS()||zy()}}const rO=iO;var uw="@firebase/auth",hw="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ft(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oO(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function aO(e){_o(new ms("auth",(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=i.options;ft(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const c={apiKey:o,authDomain:l,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:US(e)},h=new TM(i,r,s,c);return NM(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,i)=>{t.getProvider("auth-internal").initialize()})),_o(new ms("auth-internal",t=>{const n=ks(t.getProvider("auth").getImmediate());return(i=>new sO(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Mi(uw,hw,oO(e)),Mi(uw,hw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO=5*60,cO=vS("authIdTokenMaxAge")||lO;let dw=null;const uO=e=>async t=>{const n=t&&await t.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>cO)return;const r=n==null?void 0:n.token;dw!==r&&(dw=r,await fetch(e,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function hO(e=My()){const t=yp(e,"auth");if(t.isInitialized())return t.getImmediate();const n=RM(e,{popupRedirectResolver:rO,persistence:[mD,iD,YS]}),i=vS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const o=uO(s.toString());XM(n,o,()=>o(n.currentUser)),YM(n,l=>o(l))}}const r=gS("auth");return r&&LM(n,`http://${r}`),n}function dO(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}EM({loadJS(e){return new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=r=>{const s=pi("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",dO().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});aO("Browser");var fw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lo,sk;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(N,b){function A(){}A.prototype=b.prototype,N.D=b.prototype,N.prototype=new A,N.prototype.constructor=N,N.C=function(D,O,z){for(var j=Array(arguments.length-2),Rt=2;Rt<arguments.length;Rt++)j[Rt-2]=arguments[Rt];return b.prototype[O].apply(D,j)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(N,b,A){A||(A=0);var D=Array(16);if(typeof b=="string")for(var O=0;16>O;++O)D[O]=b.charCodeAt(A++)|b.charCodeAt(A++)<<8|b.charCodeAt(A++)<<16|b.charCodeAt(A++)<<24;else for(O=0;16>O;++O)D[O]=b[A++]|b[A++]<<8|b[A++]<<16|b[A++]<<24;b=N.g[0],A=N.g[1],O=N.g[2];var z=N.g[3],j=b+(z^A&(O^z))+D[0]+3614090360&4294967295;b=A+(j<<7&4294967295|j>>>25),j=z+(O^b&(A^O))+D[1]+3905402710&4294967295,z=b+(j<<12&4294967295|j>>>20),j=O+(A^z&(b^A))+D[2]+606105819&4294967295,O=z+(j<<17&4294967295|j>>>15),j=A+(b^O&(z^b))+D[3]+3250441966&4294967295,A=O+(j<<22&4294967295|j>>>10),j=b+(z^A&(O^z))+D[4]+4118548399&4294967295,b=A+(j<<7&4294967295|j>>>25),j=z+(O^b&(A^O))+D[5]+1200080426&4294967295,z=b+(j<<12&4294967295|j>>>20),j=O+(A^z&(b^A))+D[6]+2821735955&4294967295,O=z+(j<<17&4294967295|j>>>15),j=A+(b^O&(z^b))+D[7]+4249261313&4294967295,A=O+(j<<22&4294967295|j>>>10),j=b+(z^A&(O^z))+D[8]+1770035416&4294967295,b=A+(j<<7&4294967295|j>>>25),j=z+(O^b&(A^O))+D[9]+2336552879&4294967295,z=b+(j<<12&4294967295|j>>>20),j=O+(A^z&(b^A))+D[10]+4294925233&4294967295,O=z+(j<<17&4294967295|j>>>15),j=A+(b^O&(z^b))+D[11]+2304563134&4294967295,A=O+(j<<22&4294967295|j>>>10),j=b+(z^A&(O^z))+D[12]+1804603682&4294967295,b=A+(j<<7&4294967295|j>>>25),j=z+(O^b&(A^O))+D[13]+4254626195&4294967295,z=b+(j<<12&4294967295|j>>>20),j=O+(A^z&(b^A))+D[14]+2792965006&4294967295,O=z+(j<<17&4294967295|j>>>15),j=A+(b^O&(z^b))+D[15]+1236535329&4294967295,A=O+(j<<22&4294967295|j>>>10),j=b+(O^z&(A^O))+D[1]+4129170786&4294967295,b=A+(j<<5&4294967295|j>>>27),j=z+(A^O&(b^A))+D[6]+3225465664&4294967295,z=b+(j<<9&4294967295|j>>>23),j=O+(b^A&(z^b))+D[11]+643717713&4294967295,O=z+(j<<14&4294967295|j>>>18),j=A+(z^b&(O^z))+D[0]+3921069994&4294967295,A=O+(j<<20&4294967295|j>>>12),j=b+(O^z&(A^O))+D[5]+3593408605&4294967295,b=A+(j<<5&4294967295|j>>>27),j=z+(A^O&(b^A))+D[10]+38016083&4294967295,z=b+(j<<9&4294967295|j>>>23),j=O+(b^A&(z^b))+D[15]+3634488961&4294967295,O=z+(j<<14&4294967295|j>>>18),j=A+(z^b&(O^z))+D[4]+3889429448&4294967295,A=O+(j<<20&4294967295|j>>>12),j=b+(O^z&(A^O))+D[9]+568446438&4294967295,b=A+(j<<5&4294967295|j>>>27),j=z+(A^O&(b^A))+D[14]+3275163606&4294967295,z=b+(j<<9&4294967295|j>>>23),j=O+(b^A&(z^b))+D[3]+4107603335&4294967295,O=z+(j<<14&4294967295|j>>>18),j=A+(z^b&(O^z))+D[8]+1163531501&4294967295,A=O+(j<<20&4294967295|j>>>12),j=b+(O^z&(A^O))+D[13]+2850285829&4294967295,b=A+(j<<5&4294967295|j>>>27),j=z+(A^O&(b^A))+D[2]+4243563512&4294967295,z=b+(j<<9&4294967295|j>>>23),j=O+(b^A&(z^b))+D[7]+1735328473&4294967295,O=z+(j<<14&4294967295|j>>>18),j=A+(z^b&(O^z))+D[12]+2368359562&4294967295,A=O+(j<<20&4294967295|j>>>12),j=b+(A^O^z)+D[5]+4294588738&4294967295,b=A+(j<<4&4294967295|j>>>28),j=z+(b^A^O)+D[8]+2272392833&4294967295,z=b+(j<<11&4294967295|j>>>21),j=O+(z^b^A)+D[11]+1839030562&4294967295,O=z+(j<<16&4294967295|j>>>16),j=A+(O^z^b)+D[14]+4259657740&4294967295,A=O+(j<<23&4294967295|j>>>9),j=b+(A^O^z)+D[1]+2763975236&4294967295,b=A+(j<<4&4294967295|j>>>28),j=z+(b^A^O)+D[4]+1272893353&4294967295,z=b+(j<<11&4294967295|j>>>21),j=O+(z^b^A)+D[7]+4139469664&4294967295,O=z+(j<<16&4294967295|j>>>16),j=A+(O^z^b)+D[10]+3200236656&4294967295,A=O+(j<<23&4294967295|j>>>9),j=b+(A^O^z)+D[13]+681279174&4294967295,b=A+(j<<4&4294967295|j>>>28),j=z+(b^A^O)+D[0]+3936430074&4294967295,z=b+(j<<11&4294967295|j>>>21),j=O+(z^b^A)+D[3]+3572445317&4294967295,O=z+(j<<16&4294967295|j>>>16),j=A+(O^z^b)+D[6]+76029189&4294967295,A=O+(j<<23&4294967295|j>>>9),j=b+(A^O^z)+D[9]+3654602809&4294967295,b=A+(j<<4&4294967295|j>>>28),j=z+(b^A^O)+D[12]+3873151461&4294967295,z=b+(j<<11&4294967295|j>>>21),j=O+(z^b^A)+D[15]+530742520&4294967295,O=z+(j<<16&4294967295|j>>>16),j=A+(O^z^b)+D[2]+3299628645&4294967295,A=O+(j<<23&4294967295|j>>>9),j=b+(O^(A|~z))+D[0]+4096336452&4294967295,b=A+(j<<6&4294967295|j>>>26),j=z+(A^(b|~O))+D[7]+1126891415&4294967295,z=b+(j<<10&4294967295|j>>>22),j=O+(b^(z|~A))+D[14]+2878612391&4294967295,O=z+(j<<15&4294967295|j>>>17),j=A+(z^(O|~b))+D[5]+4237533241&4294967295,A=O+(j<<21&4294967295|j>>>11),j=b+(O^(A|~z))+D[12]+1700485571&4294967295,b=A+(j<<6&4294967295|j>>>26),j=z+(A^(b|~O))+D[3]+2399980690&4294967295,z=b+(j<<10&4294967295|j>>>22),j=O+(b^(z|~A))+D[10]+4293915773&4294967295,O=z+(j<<15&4294967295|j>>>17),j=A+(z^(O|~b))+D[1]+2240044497&4294967295,A=O+(j<<21&4294967295|j>>>11),j=b+(O^(A|~z))+D[8]+1873313359&4294967295,b=A+(j<<6&4294967295|j>>>26),j=z+(A^(b|~O))+D[15]+4264355552&4294967295,z=b+(j<<10&4294967295|j>>>22),j=O+(b^(z|~A))+D[6]+2734768916&4294967295,O=z+(j<<15&4294967295|j>>>17),j=A+(z^(O|~b))+D[13]+1309151649&4294967295,A=O+(j<<21&4294967295|j>>>11),j=b+(O^(A|~z))+D[4]+4149444226&4294967295,b=A+(j<<6&4294967295|j>>>26),j=z+(A^(b|~O))+D[11]+3174756917&4294967295,z=b+(j<<10&4294967295|j>>>22),j=O+(b^(z|~A))+D[2]+718787259&4294967295,O=z+(j<<15&4294967295|j>>>17),j=A+(z^(O|~b))+D[9]+3951481745&4294967295,N.g[0]=N.g[0]+b&4294967295,N.g[1]=N.g[1]+(O+(j<<21&4294967295|j>>>11))&4294967295,N.g[2]=N.g[2]+O&4294967295,N.g[3]=N.g[3]+z&4294967295}i.prototype.u=function(N,b){b===void 0&&(b=N.length);for(var A=b-this.blockSize,D=this.B,O=this.h,z=0;z<b;){if(O==0)for(;z<=A;)r(this,N,z),z+=this.blockSize;if(typeof N=="string"){for(;z<b;)if(D[O++]=N.charCodeAt(z++),O==this.blockSize){r(this,D),O=0;break}}else for(;z<b;)if(D[O++]=N[z++],O==this.blockSize){r(this,D),O=0;break}}this.h=O,this.o+=b},i.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var b=1;b<N.length-8;++b)N[b]=0;var A=8*this.o;for(b=N.length-8;b<N.length;++b)N[b]=A&255,A/=256;for(this.u(N),N=Array(16),b=A=0;4>b;++b)for(var D=0;32>D;D+=8)N[A++]=this.g[b]>>>D&255;return N};function s(N,b){var A=l;return Object.prototype.hasOwnProperty.call(A,N)?A[N]:A[N]=b(N)}function o(N,b){this.h=b;for(var A=[],D=!0,O=N.length-1;0<=O;O--){var z=N[O]|0;D&&z==b||(A[O]=z,D=!1)}this.g=A}var l={};function c(N){return-128<=N&&128>N?s(N,function(b){return new o([b|0],0>b?-1:0)}):new o([N|0],0>N?-1:0)}function h(N){if(isNaN(N)||!isFinite(N))return g;if(0>N)return k(h(-N));for(var b=[],A=1,D=0;N>=A;D++)b[D]=N/A|0,A*=4294967296;return new o(b,0)}function p(N,b){if(N.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(N.charAt(0)=="-")return k(p(N.substring(1),b));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=h(Math.pow(b,8)),D=g,O=0;O<N.length;O+=8){var z=Math.min(8,N.length-O),j=parseInt(N.substring(O,O+z),b);8>z?(z=h(Math.pow(b,z)),D=D.j(z).add(h(j))):(D=D.j(A),D=D.add(h(j)))}return D}var g=c(0),y=c(1),x=c(16777216);e=o.prototype,e.m=function(){if(S(this))return-k(this).m();for(var N=0,b=1,A=0;A<this.g.length;A++){var D=this.i(A);N+=(0<=D?D:4294967296+D)*b,b*=4294967296}return N},e.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(T(this))return"0";if(S(this))return"-"+k(this).toString(N);for(var b=h(Math.pow(N,6)),A=this,D="";;){var O=V(A,b).g;A=P(A,O.j(b));var z=((0<A.g.length?A.g[0]:A.h)>>>0).toString(N);if(A=O,T(A))return z+D;for(;6>z.length;)z="0"+z;D=z+D}},e.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function T(N){if(N.h!=0)return!1;for(var b=0;b<N.g.length;b++)if(N.g[b]!=0)return!1;return!0}function S(N){return N.h==-1}e.l=function(N){return N=P(this,N),S(N)?-1:T(N)?0:1};function k(N){for(var b=N.g.length,A=[],D=0;D<b;D++)A[D]=~N.g[D];return new o(A,~N.h).add(y)}e.abs=function(){return S(this)?k(this):this},e.add=function(N){for(var b=Math.max(this.g.length,N.g.length),A=[],D=0,O=0;O<=b;O++){var z=D+(this.i(O)&65535)+(N.i(O)&65535),j=(z>>>16)+(this.i(O)>>>16)+(N.i(O)>>>16);D=j>>>16,z&=65535,j&=65535,A[O]=j<<16|z}return new o(A,A[A.length-1]&-2147483648?-1:0)};function P(N,b){return N.add(k(b))}e.j=function(N){if(T(this)||T(N))return g;if(S(this))return S(N)?k(this).j(k(N)):k(k(this).j(N));if(S(N))return k(this.j(k(N)));if(0>this.l(x)&&0>N.l(x))return h(this.m()*N.m());for(var b=this.g.length+N.g.length,A=[],D=0;D<2*b;D++)A[D]=0;for(D=0;D<this.g.length;D++)for(var O=0;O<N.g.length;O++){var z=this.i(D)>>>16,j=this.i(D)&65535,Rt=N.i(O)>>>16,Vt=N.i(O)&65535;A[2*D+2*O]+=j*Vt,I(A,2*D+2*O),A[2*D+2*O+1]+=z*Vt,I(A,2*D+2*O+1),A[2*D+2*O+1]+=j*Rt,I(A,2*D+2*O+1),A[2*D+2*O+2]+=z*Rt,I(A,2*D+2*O+2)}for(D=0;D<b;D++)A[D]=A[2*D+1]<<16|A[2*D];for(D=b;D<2*b;D++)A[D]=0;return new o(A,0)};function I(N,b){for(;(N[b]&65535)!=N[b];)N[b+1]+=N[b]>>>16,N[b]&=65535,b++}function R(N,b){this.g=N,this.h=b}function V(N,b){if(T(b))throw Error("division by zero");if(T(N))return new R(g,g);if(S(N))return b=V(k(N),b),new R(k(b.g),k(b.h));if(S(b))return b=V(N,k(b)),new R(k(b.g),b.h);if(30<N.g.length){if(S(N)||S(b))throw Error("slowDivide_ only works with positive integers.");for(var A=y,D=b;0>=D.l(N);)A=B(A),D=B(D);var O=H(A,1),z=H(D,1);for(D=H(D,2),A=H(A,2);!T(D);){var j=z.add(D);0>=j.l(N)&&(O=O.add(A),z=j),D=H(D,1),A=H(A,1)}return b=P(N,O.j(b)),new R(O,b)}for(O=g;0<=N.l(b);){for(A=Math.max(1,Math.floor(N.m()/b.m())),D=Math.ceil(Math.log(A)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),z=h(A),j=z.j(b);S(j)||0<j.l(N);)A-=D,z=h(A),j=z.j(b);T(z)&&(z=y),O=O.add(z),N=P(N,j)}return new R(O,N)}e.A=function(N){return V(this,N).h},e.and=function(N){for(var b=Math.max(this.g.length,N.g.length),A=[],D=0;D<b;D++)A[D]=this.i(D)&N.i(D);return new o(A,this.h&N.h)},e.or=function(N){for(var b=Math.max(this.g.length,N.g.length),A=[],D=0;D<b;D++)A[D]=this.i(D)|N.i(D);return new o(A,this.h|N.h)},e.xor=function(N){for(var b=Math.max(this.g.length,N.g.length),A=[],D=0;D<b;D++)A[D]=this.i(D)^N.i(D);return new o(A,this.h^N.h)};function B(N){for(var b=N.g.length+1,A=[],D=0;D<b;D++)A[D]=N.i(D)<<1|N.i(D-1)>>>31;return new o(A,N.h)}function H(N,b){var A=b>>5;b%=32;for(var D=N.g.length-A,O=[],z=0;z<D;z++)O[z]=0<b?N.i(z+A)>>>b|N.i(z+A+1)<<32-b:N.i(z+A);return new o(O,N.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,sk=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,lo=o}).apply(typeof fw<"u"?fw:typeof self<"u"?self:typeof window<"u"?window:{});var nd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ok,wc,ak,zd,r_,lk,ck,uk;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,v,E){return d==Array.prototype||d==Object.prototype||(d[v]=E.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof nd=="object"&&nd];for(var v=0;v<d.length;++v){var E=d[v];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=n(this);function r(d,v){if(v)t:{var E=i;d=d.split(".");for(var M=0;M<d.length-1;M++){var U=d[M];if(!(U in E))break t;E=E[U]}d=d[d.length-1],M=E[d],v=v(M),v!=M&&v!=null&&t(E,d,{configurable:!0,writable:!0,value:v})}}function s(d,v){d instanceof String&&(d+="");var E=0,M=!1,U={next:function(){if(!M&&E<d.length){var G=E++;return{value:v(G,d[G]),done:!1}}return M=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}r("Array.prototype.values",function(d){return d||function(){return s(this,function(v,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(d){var v=typeof d;return v=v!="object"?v:d?Array.isArray(d)?"array":v:"null",v=="array"||v=="object"&&typeof d.length=="number"}function h(d){var v=typeof d;return v=="object"&&d!=null||v=="function"}function p(d,v,E){return d.call.apply(d.bind,arguments)}function g(d,v,E){if(!d)throw Error();if(2<arguments.length){var M=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,M),d.apply(v,U)}}return function(){return d.apply(v,arguments)}}function y(d,v,E){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:g,y.apply(null,arguments)}function x(d,v){var E=Array.prototype.slice.call(arguments,1);return function(){var M=E.slice();return M.push.apply(M,arguments),d.apply(this,M)}}function T(d,v){function E(){}E.prototype=v.prototype,d.aa=v.prototype,d.prototype=new E,d.prototype.constructor=d,d.Qb=function(M,U,G){for(var tt=Array(arguments.length-2),zt=2;zt<arguments.length;zt++)tt[zt-2]=arguments[zt];return v.prototype[U].apply(M,tt)}}function S(d){const v=d.length;if(0<v){const E=Array(v);for(let M=0;M<v;M++)E[M]=d[M];return E}return[]}function k(d,v){for(let E=1;E<arguments.length;E++){const M=arguments[E];if(c(M)){const U=d.length||0,G=M.length||0;d.length=U+G;for(let tt=0;tt<G;tt++)d[U+tt]=M[tt]}else d.push(M)}}class P{constructor(v,E){this.i=v,this.j=E,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function I(d){return/^[\s\xa0]*$/.test(d)}function R(){var d=l.navigator;return d&&(d=d.userAgent)?d:""}function V(d){return V[" "](d),d}V[" "]=function(){};var B=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function H(d,v,E){for(const M in d)v.call(E,d[M],M,d)}function N(d,v){for(const E in d)v.call(void 0,d[E],E,d)}function b(d){const v={};for(const E in d)v[E]=d[E];return v}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(d,v){let E,M;for(let U=1;U<arguments.length;U++){M=arguments[U];for(E in M)d[E]=M[E];for(let G=0;G<A.length;G++)E=A[G],Object.prototype.hasOwnProperty.call(M,E)&&(d[E]=M[E])}}function O(d){var v=1;d=d.split(":");const E=[];for(;0<v&&d.length;)E.push(d.shift()),v--;return d.length&&E.push(d.join(":")),E}function z(d){l.setTimeout(()=>{throw d},0)}function j(){var d=st;let v=null;return d.g&&(v=d.g,d.g=d.g.next,d.g||(d.h=null),v.next=null),v}class Rt{constructor(){this.h=this.g=null}add(v,E){const M=Vt.get();M.set(v,E),this.h?this.h.next=M:this.g=M,this.h=M}}var Vt=new P(()=>new Et,d=>d.reset());class Et{constructor(){this.next=this.g=this.h=null}set(v,E){this.h=v,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let bt,K=!1,st=new Rt,X=()=>{const d=l.Promise.resolve(void 0);bt=()=>{d.then(lt)}};var lt=()=>{for(var d;d=j();){try{d.h.call(d.g)}catch(E){z(E)}var v=Vt;v.j(d),100>v.h&&(v.h++,d.next=v.g,v.g=d)}K=!1};function ut(){this.s=this.s,this.C=this.C}ut.prototype.s=!1,ut.prototype.ma=function(){this.s||(this.s=!0,this.N())},ut.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function wt(d,v){this.type=d,this.g=this.target=v,this.defaultPrevented=!1}wt.prototype.h=function(){this.defaultPrevented=!0};var St=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var d=!1,v=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const E=()=>{};l.addEventListener("test",E,v),l.removeEventListener("test",E,v)}catch{}return d}();function _t(d,v){if(wt.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var E=this.type=d.type,M=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=v,v=d.relatedTarget){if(B){t:{try{V(v.nodeName);var U=!0;break t}catch{}U=!1}U||(v=null)}}else E=="mouseover"?v=d.fromElement:E=="mouseout"&&(v=d.toElement);this.relatedTarget=v,M?(this.clientX=M.clientX!==void 0?M.clientX:M.pageX,this.clientY=M.clientY!==void 0?M.clientY:M.pageY,this.screenX=M.screenX||0,this.screenY=M.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:ct[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&_t.aa.h.call(this)}}T(_t,wt);var ct={2:"touch",3:"pen",4:"mouse"};_t.prototype.h=function(){_t.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ke="closure_listenable_"+(1e6*Math.random()|0),vi=0;function nh(d,v,E,M,U){this.listener=d,this.proxy=null,this.src=v,this.type=E,this.capture=!!M,this.ha=U,this.key=++vi,this.da=this.fa=!1}function Er(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Sr(d){this.src=d,this.g={},this.h=0}Sr.prototype.add=function(d,v,E,M,U){var G=d.toString();d=this.g[G],d||(d=this.g[G]=[],this.h++);var tt=Cs(d,v,M,U);return-1<tt?(v=d[tt],E||(v.fa=!1)):(v=new nh(v,this.src,G,!!M,U),v.fa=E,d.push(v)),v};function zi(d,v){var E=v.type;if(E in d.g){var M=d.g[E],U=Array.prototype.indexOf.call(M,v,void 0),G;(G=0<=U)&&Array.prototype.splice.call(M,U,1),G&&(Er(v),d.g[E].length==0&&(delete d.g[E],d.h--))}}function Cs(d,v,E,M){for(var U=0;U<d.length;++U){var G=d[U];if(!G.da&&G.listener==v&&G.capture==!!E&&G.ha==M)return U}return-1}var _l="closure_lm_"+(1e6*Math.random()|0),Do={};function yl(d,v,E,M,U){if(Array.isArray(v)){for(var G=0;G<v.length;G++)yl(d,v[G],E,M,U);return null}return E=sh(E),d&&d[ke]?d.K(v,E,h(M)?!!M.capture:!!M,U):vl(d,v,E,!1,M,U)}function vl(d,v,E,M,U,G){if(!v)throw Error("Invalid event type");var tt=h(U)?!!U.capture:!!U,zt=Fo(d);if(zt||(d[_l]=zt=new Sr(d)),E=zt.add(v,E,M,tt,G),E.proxy)return E;if(M=Oo(),E.proxy=M,M.src=d,M.listener=E,d.addEventListener)St||(U=tt),U===void 0&&(U=!1),d.addEventListener(v.toString(),M,U);else if(d.attachEvent)d.attachEvent(Vo(v.toString()),M);else if(d.addListener&&d.removeListener)d.addListener(M);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Oo(){function d(E){return v.call(d.src,d.listener,E)}const v=rh;return d}function ih(d,v,E,M,U){if(Array.isArray(v))for(var G=0;G<v.length;G++)ih(d,v[G],E,M,U);else M=h(M)?!!M.capture:!!M,E=sh(E),d&&d[ke]?(d=d.i,v=String(v).toString(),v in d.g&&(G=d.g[v],E=Cs(G,E,M,U),-1<E&&(Er(G[E]),Array.prototype.splice.call(G,E,1),G.length==0&&(delete d.g[v],d.h--)))):d&&(d=Fo(d))&&(v=d.g[v.toString()],d=-1,v&&(d=Cs(v,E,M,U)),(E=-1<d?v[d]:null)&&jo(E))}function jo(d){if(typeof d!="number"&&d&&!d.da){var v=d.src;if(v&&v[ke])zi(v.i,d);else{var E=d.type,M=d.proxy;v.removeEventListener?v.removeEventListener(E,M,d.capture):v.detachEvent?v.detachEvent(Vo(E),M):v.addListener&&v.removeListener&&v.removeListener(M),(E=Fo(v))?(zi(E,d),E.h==0&&(E.src=null,v[_l]=null)):Er(d)}}}function Vo(d){return d in Do?Do[d]:Do[d]="on"+d}function rh(d,v){if(d.da)d=!0;else{v=new _t(v,this);var E=d.listener,M=d.ha||d.src;d.fa&&jo(d),d=E.call(M,v)}return d}function Fo(d){return d=d[_l],d instanceof Sr?d:null}var xl="__closure_events_fn_"+(1e9*Math.random()>>>0);function sh(d){return typeof d=="function"?d:(d[xl]||(d[xl]=function(v){return d.handleEvent(v)}),d[xl])}function ye(){ut.call(this),this.i=new Sr(this),this.M=this,this.F=null}T(ye,ut),ye.prototype[ke]=!0,ye.prototype.removeEventListener=function(d,v,E,M){ih(this,d,v,E,M)};function Ae(d,v){var E,M=d.F;if(M)for(E=[];M;M=M.F)E.push(M);if(d=d.M,M=v.type||v,typeof v=="string")v=new wt(v,d);else if(v instanceof wt)v.target=v.target||d;else{var U=v;v=new wt(M,d),D(v,U)}if(U=!0,E)for(var G=E.length-1;0<=G;G--){var tt=v.g=E[G];U=As(tt,M,!0,v)&&U}if(tt=v.g=d,U=As(tt,M,!0,v)&&U,U=As(tt,M,!1,v)&&U,E)for(G=0;G<E.length;G++)tt=v.g=E[G],U=As(tt,M,!1,v)&&U}ye.prototype.N=function(){if(ye.aa.N.call(this),this.i){var d=this.i,v;for(v in d.g){for(var E=d.g[v],M=0;M<E.length;M++)Er(E[M]);delete d.g[v],d.h--}}this.F=null},ye.prototype.K=function(d,v,E,M){return this.i.add(String(d),v,!1,E,M)},ye.prototype.L=function(d,v,E,M){return this.i.add(String(d),v,!0,E,M)};function As(d,v,E,M){if(v=d.i.g[String(v)],!v)return!0;v=v.concat();for(var U=!0,G=0;G<v.length;++G){var tt=v[G];if(tt&&!tt.da&&tt.capture==E){var zt=tt.listener,ve=tt.ha||tt.src;tt.fa&&zi(d.i,tt),U=zt.call(ve,M)!==!1&&U}}return U&&!M.defaultPrevented}function oh(d,v,E){if(typeof d=="function")E&&(d=y(d,E));else if(d&&typeof d.handleEvent=="function")d=y(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:l.setTimeout(d,v||0)}function wl(d){d.g=oh(()=>{d.g=null,d.i&&(d.i=!1,wl(d))},d.l);const v=d.h;d.h=null,d.m.apply(null,v)}class ah extends ut{constructor(v,E){super(),this.m=v,this.l=E,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:wl(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rs(d){ut.call(this),this.h=d,this.g={}}T(Rs,ut);var bl=[];function zo(d){H(d.g,function(v,E){this.g.hasOwnProperty(E)&&jo(v)},d),d.g={}}Rs.prototype.N=function(){Rs.aa.N.call(this),zo(this)},Rs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bo=l.JSON.stringify,$p=l.JSON.parse,Ns=class{stringify(d){return l.JSON.stringify(d,void 0)}parse(d){return l.JSON.parse(d,void 0)}};function Tl(){}Tl.prototype.h=null;function lh(d){return d.h||(d.h=d.i())}function El(){}var kr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Uo(){wt.call(this,"d")}T(Uo,wt);function Sl(){wt.call(this,"c")}T(Sl,wt);var Bi={},ch=null;function Ho(){return ch=ch||new ye}Bi.La="serverreachability";function uh(d){wt.call(this,Bi.La,d)}T(uh,wt);function Ls(d){const v=Ho();Ae(v,new uh(v))}Bi.STAT_EVENT="statevent";function Wo(d,v){wt.call(this,Bi.STAT_EVENT,d),this.stat=v}T(Wo,wt);function je(d){const v=Ho();Ae(v,new Wo(v,d))}Bi.Ma="timingevent";function hh(d,v){wt.call(this,Bi.Ma,d),this.size=v}T(hh,wt);function Ms(d,v){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){d()},v)}function Ds(){this.g=!0}Ds.prototype.xa=function(){this.g=!1};function Ln(d,v,E,M,U,G){d.info(function(){if(d.g)if(G)for(var tt="",zt=G.split("&"),ve=0;ve<zt.length;ve++){var Mt=zt[ve].split("=");if(1<Mt.length){var $t=Mt[0];Mt=Mt[1];var re=$t.split("_");tt=2<=re.length&&re[1]=="type"?tt+($t+"="+Mt+"&"):tt+($t+"=redacted&")}}else tt=null;else tt=G;return"XMLHTTP REQ ("+M+") [attempt "+U+"]: "+v+`
`+E+`
`+tt})}function ot(d,v,E,M,U,G,tt){d.info(function(){return"XMLHTTP RESP ("+M+") [ attempt "+U+"]: "+v+`
`+E+`
`+G+" "+tt})}function Ui(d,v,E,M){d.info(function(){return"XMLHTTP TEXT ("+v+"): "+fh(d,E)+(M?" "+M:"")})}function dh(d,v){d.info(function(){return"TIMEOUT: "+v})}Ds.prototype.info=function(){};function fh(d,v){if(!d.g)return v;if(!v)return null;try{var E=JSON.parse(v);if(E){for(d=0;d<E.length;d++)if(Array.isArray(E[d])){var M=E[d];if(!(2>M.length)){var U=M[1];if(Array.isArray(U)&&!(1>U.length)){var G=U[0];if(G!="noop"&&G!="stop"&&G!="close")for(var tt=1;tt<U.length;tt++)U[tt]=""}}}}return Bo(E)}catch{return v}}var Os={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},$o={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},qo;function ti(){}T(ti,Tl),ti.prototype.g=function(){return new XMLHttpRequest},ti.prototype.i=function(){return{}},qo=new ti;function ei(d,v,E,M){this.j=d,this.i=v,this.l=E,this.R=M||1,this.U=new Rs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ph}function ph(){this.i=null,this.g="",this.h=!1}var mh={},kl={};function Pl(d,v,E){d.L=1,d.v=Dn(ce(v)),d.m=E,d.P=!0,Il(d,null)}function Il(d,v){d.F=Date.now(),Ko(d),d.A=ce(d.v);var E=d.A,M=d.R;Array.isArray(M)||(M=[String(M)]),yh(E.i,"t",M),d.C=0,E=d.j.J,d.h=new ph,d.g=Sh(d.j,E?v:null,!d.m),0<d.O&&(d.M=new ah(y(d.Y,d,d.g),d.O)),v=d.U,E=d.g,M=d.ca;var U="readystatechange";Array.isArray(U)||(U&&(bl[0]=U.toString()),U=bl);for(var G=0;G<U.length;G++){var tt=yl(E,U[G],M||v.handleEvent,!1,v.h||v);if(!tt)break;v.g[tt.key]=tt}v=d.H?b(d.H):{},d.m?(d.u||(d.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,v)):(d.u="GET",d.g.ea(d.A,d.u,null,v)),Ls(),Ln(d.i,d.u,d.A,d.l,d.R,d.m)}ei.prototype.ca=function(d){d=d.target;const v=this.M;v&&nn(d)==3?v.j():this.Y(d)},ei.prototype.Y=function(d){try{if(d==this.g)t:{const re=nn(this.g);var v=this.g.Ba();const Lr=this.g.Z();if(!(3>re)&&(re!=3||this.g&&(this.h.h||this.g.oa()||Wl(this.g)))){this.J||re!=4||v==7||(v==8||0>=Lr?Ls(3):Ls(2)),Cl(this);var E=this.g.Z();this.X=E;e:if(gh(this)){var M=Wl(this.g);d="";var U=M.length,G=nn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Hi(this),js(this);var tt="";break e}this.h.i=new l.TextDecoder}for(v=0;v<U;v++)this.h.h=!0,d+=this.h.i.decode(M[v],{stream:!(G&&v==U-1)});M.length=0,this.h.g+=d,this.C=0,tt=this.h.g}else tt=this.g.oa();if(this.o=E==200,ot(this.i,this.u,this.A,this.l,this.R,re,E),this.o){if(this.T&&!this.K){e:{if(this.g){var zt,ve=this.g;if((zt=ve.g?ve.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(zt)){var Mt=zt;break e}}Mt=null}if(E=Mt)Ui(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Vs(this,E);else{this.o=!1,this.s=3,je(12),Hi(this),js(this);break t}}if(this.P){E=!0;let pe;for(;!this.J&&this.C<tt.length;)if(pe=Go(this,tt),pe==kl){re==4&&(this.s=4,je(14),E=!1),Ui(this.i,this.l,null,"[Incomplete Response]");break}else if(pe==mh){this.s=4,je(15),Ui(this.i,this.l,tt,"[Invalid Chunk]"),E=!1;break}else Ui(this.i,this.l,pe,null),Vs(this,pe);if(gh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),re!=4||tt.length!=0||this.h.h||(this.s=1,je(16),E=!1),this.o=this.o&&E,!E)Ui(this.i,this.l,tt,"[Invalid Chunked Response]"),Hi(this),js(this);else if(0<tt.length&&!this.W){this.W=!0;var $t=this.j;$t.g==this&&$t.ba&&!$t.M&&($t.j.info("Great, no buffering proxy detected. Bytes received: "+tt.length),ia($t),$t.M=!0,je(11))}}else Ui(this.i,this.l,tt,null),Vs(this,tt);re==4&&Hi(this),this.o&&!this.J&&(re==4?ql(this.j,this):(this.o=!1,Ko(this)))}else qp(this.g),E==400&&0<tt.indexOf("Unknown SID")?(this.s=3,je(12)):(this.s=0,je(13)),Hi(this),js(this)}}}catch{}finally{}};function gh(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function Go(d,v){var E=d.C,M=v.indexOf(`
`,E);return M==-1?kl:(E=Number(v.substring(E,M)),isNaN(E)?mh:(M+=1,M+E>v.length?kl:(v=v.slice(M,M+E),d.C=M+E,v)))}ei.prototype.cancel=function(){this.J=!0,Hi(this)};function Ko(d){d.S=Date.now()+d.I,_h(d,d.I)}function _h(d,v){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Ms(y(d.ba,d),v)}function Cl(d){d.B&&(l.clearTimeout(d.B),d.B=null)}ei.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(dh(this.i,this.A),this.L!=2&&(Ls(),je(17)),Hi(this),this.s=2,js(this)):_h(this,this.S-d)};function js(d){d.j.G==0||d.J||ql(d.j,d)}function Hi(d){Cl(d);var v=d.M;v&&typeof v.ma=="function"&&v.ma(),d.M=null,zo(d.U),d.g&&(v=d.g,d.g=null,v.abort(),v.ma())}function Vs(d,v){try{var E=d.j;if(E.G!=0&&(E.g==d||Ct(E.h,d))){if(!d.K&&Ct(E.h,d)&&E.G==3){try{var M=E.Da.g.parse(v)}catch{M=null}if(Array.isArray(M)&&M.length==3){var U=M;if(U[0]==0){t:if(!E.u){if(E.g)if(E.g.F+3e3<d.F)sa(E),ea(E);else break t;na(E),je(18)}}else E.za=U[1],0<E.za-E.T&&37500>U[2]&&E.F&&E.v==0&&!E.C&&(E.C=Ms(y(E.Za,E),6e3));if(1>=Pr(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Ki(E,11)}else if((d.K||E.g==d)&&sa(E),!I(v))for(U=E.Da.g.parse(v),v=0;v<U.length;v++){let Mt=U[v];if(E.T=Mt[0],Mt=Mt[1],E.G==2)if(Mt[0]=="c"){E.K=Mt[1],E.ia=Mt[2];const $t=Mt[3];$t!=null&&(E.la=$t,E.j.info("VER="+E.la));const re=Mt[4];re!=null&&(E.Aa=re,E.j.info("SVER="+E.Aa));const Lr=Mt[5];Lr!=null&&typeof Lr=="number"&&0<Lr&&(M=1.5*Lr,E.L=M,E.j.info("backChannelRequestTimeoutMs_="+M)),M=E;const pe=d.g;if(pe){const aa=pe.g?pe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(aa){var G=M.h;G.g||aa.indexOf("spdy")==-1&&aa.indexOf("quic")==-1&&aa.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(qt(G,G.h),G.h=null))}if(M.D){const bi=pe.g?pe.g.getResponseHeader("X-HTTP-Session-Id"):null;bi&&(M.ya=bi,mt(M.I,M.D,bi))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-d.F,E.j.info("Handshake RTT: "+E.R+"ms")),M=E;var tt=d;if(M.qa=oa(M,M.J?M.ia:null,M.W),tt.K){zs(M.h,tt);var zt=tt,ve=M.L;ve&&(zt.I=ve),zt.B&&(Cl(zt),Ko(zt)),M.g=tt}else ri(M);0<E.i.length&&Nr(E)}else Mt[0]!="stop"&&Mt[0]!="close"||Ki(E,7);else E.G==3&&(Mt[0]=="stop"||Mt[0]=="close"?Mt[0]=="stop"?Ki(E,7):ta(E):Mt[0]!="noop"&&E.l&&E.l.ta(Mt),E.v=0)}}Ls(4)}catch{}}var Fs=class{constructor(d,v){this.g=d,this.map=v}};function Al(d){this.l=d||10,l.PerformanceNavigationTiming?(d=l.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Rl(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Pr(d){return d.h?1:d.g?d.g.size:0}function Ct(d,v){return d.h?d.h==v:d.g?d.g.has(v):!1}function qt(d,v){d.g?d.g.add(v):d.h=v}function zs(d,v){d.h&&d.h==v?d.h=null:d.g&&d.g.has(v)&&d.g.delete(v)}Al.prototype.cancel=function(){if(this.i=Wi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Wi(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let v=d.i;for(const E of d.g.values())v=v.concat(E.D);return v}return S(d.i)}function Ir(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(c(d)){for(var v=[],E=d.length,M=0;M<E;M++)v.push(d[M]);return v}v=[],E=0;for(M in d)v[E++]=d[M];return v}function Nl(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(c(d)||typeof d=="string"){var v=[];d=d.length;for(var E=0;E<d;E++)v.push(E);return v}v=[],E=0;for(const M in d)v[E++]=M;return v}}}function xt(d,v){if(d.forEach&&typeof d.forEach=="function")d.forEach(v,void 0);else if(c(d)||typeof d=="string")Array.prototype.forEach.call(d,v,void 0);else for(var E=Nl(d),M=Ir(d),U=M.length,G=0;G<U;G++)v.call(void 0,M[G],E&&E[G],d)}var Jt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ll(d,v){if(d){d=d.split("&");for(var E=0;E<d.length;E++){var M=d[E].indexOf("="),U=null;if(0<=M){var G=d[E].substring(0,M);U=d[E].substring(M+1)}else G=d[E];v(G,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Mn(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Mn){this.h=d.h,Zo(this,d.j),this.o=d.o,this.g=d.g,$i(this,d.s),this.l=d.l;var v=d.i,E=new qi;E.i=v.i,v.g&&(E.g=new Map(v.g),E.h=v.h),xi(this,E),this.m=d.m}else d&&(v=String(d).match(Jt))?(this.h=!1,Zo(this,v[1]||"",!0),this.o=ni(v[2]||""),this.g=ni(v[3]||"",!0),$i(this,v[4]),this.l=ni(v[5]||"",!0),xi(this,v[6]||"",!0),this.m=ni(v[7]||"")):(this.h=!1,this.i=new qi(null,this.h))}Mn.prototype.toString=function(){var d=[],v=this.j;v&&d.push(ii(v,Cr,!0),":");var E=this.g;return(E||v=="file")&&(d.push("//"),(v=this.o)&&d.push(ii(v,Cr,!0),"@"),d.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&d.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&d.push("/"),d.push(ii(E,E.charAt(0)=="/"?Ol:Dl,!0))),(E=this.i.toString())&&d.push("?",E),(E=this.m)&&d.push("#",ii(E,jl)),d.join("")};function ce(d){return new Mn(d)}function Zo(d,v,E){d.j=E?ni(v,!0):v,d.j&&(d.j=d.j.replace(/:$/,""))}function $i(d,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);d.s=v}else d.s=null}function xi(d,v,E){v instanceof qi?(d.i=v,On(d.i,d.h)):(E||(v=ii(v,Qo)),d.i=new qi(v,d.h))}function mt(d,v,E){d.i.set(v,E)}function Dn(d){return mt(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function ni(d,v){return d?v?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function ii(d,v,E){return typeof d=="string"?(d=encodeURI(d).replace(v,Ml),E&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Ml(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Cr=/[#\/\?@]/g,Dl=/[#\?:]/g,Ol=/[#\?]/g,Qo=/[#\?@]/g,jl=/#/g;function qi(d,v){this.h=this.g=null,this.i=d||null,this.j=!!v}function wn(d){d.g||(d.g=new Map,d.h=0,d.i&&Ll(d.i,function(v,E){d.add(decodeURIComponent(v.replace(/\+/g," ")),E)}))}e=qi.prototype,e.add=function(d,v){wn(this),this.i=null,d=ht(this,d);var E=this.g.get(d);return E||this.g.set(d,E=[]),E.push(v),this.h+=1,this};function Vl(d,v){wn(d),v=ht(d,v),d.g.has(v)&&(d.i=null,d.h-=d.g.get(v).length,d.g.delete(v))}function Yo(d,v){return wn(d),v=ht(d,v),d.g.has(v)}e.forEach=function(d,v){wn(this),this.g.forEach(function(E,M){E.forEach(function(U){d.call(v,U,M,this)},this)},this)},e.na=function(){wn(this);const d=Array.from(this.g.values()),v=Array.from(this.g.keys()),E=[];for(let M=0;M<v.length;M++){const U=d[M];for(let G=0;G<U.length;G++)E.push(v[M])}return E},e.V=function(d){wn(this);let v=[];if(typeof d=="string")Yo(this,d)&&(v=v.concat(this.g.get(ht(this,d))));else{d=Array.from(this.g.values());for(let E=0;E<d.length;E++)v=v.concat(d[E])}return v},e.set=function(d,v){return wn(this),this.i=null,d=ht(this,d),Yo(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[v]),this.h+=1,this},e.get=function(d,v){return d?(d=this.V(d),0<d.length?String(d[0]):v):v};function yh(d,v,E){Vl(d,v),0<E.length&&(d.i=null,d.g.set(ht(d,v),S(E)),d.h+=E.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],v=Array.from(this.g.keys());for(var E=0;E<v.length;E++){var M=v[E];const G=encodeURIComponent(String(M)),tt=this.V(M);for(M=0;M<tt.length;M++){var U=G;tt[M]!==""&&(U+="="+encodeURIComponent(String(tt[M]))),d.push(U)}}return this.i=d.join("&")};function ht(d,v){return v=String(v),d.j&&(v=v.toLowerCase()),v}function On(d,v){v&&!d.j&&(wn(d),d.i=null,d.g.forEach(function(E,M){var U=M.toLowerCase();M!=U&&(Vl(this,M),yh(this,U,E))},d)),d.j=v}function Wt(d,v){const E=new Ds;if(l.Image){const M=new Image;M.onload=x(jn,E,"TestLoadImage: loaded",!0,v,M),M.onerror=x(jn,E,"TestLoadImage: error",!1,v,M),M.onabort=x(jn,E,"TestLoadImage: abort",!1,v,M),M.ontimeout=x(jn,E,"TestLoadImage: timeout",!1,v,M),l.setTimeout(function(){M.ontimeout&&M.ontimeout()},1e4),M.src=d}else v(!1)}function vh(d,v){const E=new Ds,M=new AbortController,U=setTimeout(()=>{M.abort(),jn(E,"TestPingServer: timeout",!1,v)},1e4);fetch(d,{signal:M.signal}).then(G=>{clearTimeout(U),G.ok?jn(E,"TestPingServer: ok",!0,v):jn(E,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(U),jn(E,"TestPingServer: error",!1,v)})}function jn(d,v,E,M,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),M(E)}catch{}}function Fl(){this.g=new Ns}function zl(d,v,E){const M=E||"";try{xt(d,function(U,G){let tt=U;h(U)&&(tt=Bo(U)),v.push(M+G+"="+encodeURIComponent(tt))})}catch(U){throw v.push(M+"type="+encodeURIComponent("_badmap")),U}}function Vn(d){this.l=d.Ub||null,this.j=d.eb||!1}T(Vn,Tl),Vn.prototype.g=function(){return new Ar(this.l,this.j)},Vn.prototype.i=function(d){return function(){return d}}({});function Ar(d,v){ye.call(this),this.D=d,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(Ar,ye),e=Ar.prototype,e.open=function(d,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=v,this.readyState=1,bn(this)},e.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(v.body=d),(this.D||l).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ie(this)),this.readyState=0},e.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,bn(this)),this.g&&(this.readyState=3,bn(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Rr(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function Rr(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}e.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var v=d.value?d.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!d.done}))&&(this.response=this.responseText+=v)}d.done?ie(this):bn(this),this.readyState==3&&Rr(this)}},e.Ra=function(d){this.g&&(this.response=this.responseText=d,ie(this))},e.Qa=function(d){this.g&&(this.response=d,ie(this))},e.ga=function(){this.g&&ie(this)};function ie(d){d.readyState=4,d.l=null,d.j=null,d.v=null,bn(d)}e.setRequestHeader=function(d,v){this.u.append(d,v)},e.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],v=this.h.entries();for(var E=v.next();!E.done;)E=E.value,d.push(E[0]+": "+E[1]),E=v.next();return d.join(`\r
`)};function bn(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Ar.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Bl(d){let v="";return H(d,function(E,M){v+=M,v+=":",v+=E,v+=`\r
`}),v}function Xo(d,v,E){t:{for(M in E){var M=!1;break t}M=!0}M||(E=Bl(E),typeof d=="string"?E!=null&&encodeURIComponent(String(E)):mt(d,v,E))}function te(d){ye.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(te,ye);var xh=/^https?$/i,Ul=["POST","PUT"];e=te.prototype,e.Ha=function(d){this.J=d},e.ea=function(d,v,E,M){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);v=v?v.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qo.g(),this.v=this.o?lh(this.o):lh(qo),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(v,String(d),!0),this.B=!1}catch(G){wh(this,G);return}if(d=E||"",E=new Map(this.headers),M)if(Object.getPrototypeOf(M)===Object.prototype)for(var U in M)E.set(U,M[U]);else if(typeof M.keys=="function"&&typeof M.get=="function")for(const G of M.keys())E.set(G,M.get(G));else throw Error("Unknown input type for opt_headers: "+String(M));M=Array.from(E.keys()).find(G=>G.toLowerCase()=="content-type"),U=l.FormData&&d instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Ul,v,void 0))||M||U||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,tt]of E)this.g.setRequestHeader(G,tt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{hn(this),this.u=!0,this.g.send(d),this.u=!1}catch(G){wh(this,G)}};function wh(d,v){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=v,d.m=5,Hl(d),Jo(d)}function Hl(d){d.A||(d.A=!0,Ae(d,"complete"),Ae(d,"error"))}e.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,Ae(this,"complete"),Ae(this,"abort"),Jo(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Jo(this,!0)),te.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Pt(this):this.bb())},e.bb=function(){Pt(this)};function Pt(d){if(d.h&&typeof o<"u"&&(!d.v[1]||nn(d)!=4||d.Z()!=2)){if(d.u&&nn(d)==4)oh(d.Ea,0,d);else if(Ae(d,"readystatechange"),nn(d)==4){d.h=!1;try{const tt=d.Z();t:switch(tt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break t;default:v=!1}var E;if(!(E=v)){var M;if(M=tt===0){var U=String(d.D).match(Jt)[1]||null;!U&&l.self&&l.self.location&&(U=l.self.location.protocol.slice(0,-1)),M=!xh.test(U?U.toLowerCase():"")}E=M}if(E)Ae(d,"complete"),Ae(d,"success");else{d.m=6;try{var G=2<nn(d)?d.g.statusText:""}catch{G=""}d.l=G+" ["+d.Z()+"]",Hl(d)}}finally{Jo(d)}}}}function Jo(d,v){if(d.g){hn(d);const E=d.g,M=d.v[0]?()=>{}:null;d.g=null,d.v=null,v||Ae(d,"ready");try{E.onreadystatechange=M}catch{}}}function hn(d){d.I&&(l.clearTimeout(d.I),d.I=null)}e.isActive=function(){return!!this.g};function nn(d){return d.g?d.g.readyState:0}e.Z=function(){try{return 2<nn(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(d){if(this.g){var v=this.g.responseText;return d&&v.indexOf(d)==0&&(v=v.substring(d.length)),$p(v)}};function Wl(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function qp(d){const v={};d=(d.g&&2<=nn(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let M=0;M<d.length;M++){if(I(d[M]))continue;var E=O(d[M]);const U=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const G=v[U]||[];v[U]=G,G.push(E)}N(v,function(M){return M.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Gi(d,v,E){return E&&E.internalChannelParams&&E.internalChannelParams[d]||v}function bh(d){this.Aa=0,this.i=[],this.j=new Ds,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gi("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gi("baseRetryDelayMs",5e3,d),this.cb=Gi("retryDelaySeedMs",1e4,d),this.Wa=Gi("forwardChannelMaxRetries",2,d),this.wa=Gi("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Al(d&&d.concurrentRequestLimit),this.Da=new Fl,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=bh.prototype,e.la=8,e.G=1,e.connect=function(d,v,E,M){je(0),this.W=d,this.H=v||{},E&&M!==void 0&&(this.H.OSID=E,this.H.OAID=M),this.F=this.X,this.I=oa(this,null,this.W),Nr(this)};function ta(d){if(Th(d),d.G==3){var v=d.U++,E=ce(d.I);if(mt(E,"SID",d.K),mt(E,"RID",v),mt(E,"TYPE","terminate"),Bs(d,E),v=new ei(d,d.j,v),v.L=2,v.v=Dn(ce(E)),E=!1,l.navigator&&l.navigator.sendBeacon)try{E=l.navigator.sendBeacon(v.v.toString(),"")}catch{}!E&&l.Image&&(new Image().src=v.v,E=!0),E||(v.g=Sh(v.j,null),v.g.ea(v.v)),v.F=Date.now(),Ko(v)}Eh(d)}function ea(d){d.g&&(ia(d),d.g.cancel(),d.g=null)}function Th(d){ea(d),d.u&&(l.clearTimeout(d.u),d.u=null),sa(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&l.clearTimeout(d.s),d.s=null)}function Nr(d){if(!Rl(d.h)&&!d.s){d.s=!0;var v=d.Ga;bt||X(),K||(bt(),K=!0),st.add(v,d),d.B=0}}function Gp(d,v){return Pr(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=v.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Ms(y(d.Ga,d,v),Gl(d,d.B)),d.B++,!0)}e.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const U=new ei(this,this.j,d);let G=this.o;if(this.S&&(G?(G=b(G),D(G,this.S)):G=this.S),this.m!==null||this.O||(U.H=G,G=null),this.P)t:{for(var v=0,E=0;E<this.i.length;E++){e:{var M=this.i[E];if("__data__"in M.map&&(M=M.map.__data__,typeof M=="string")){M=M.length;break e}M=void 0}if(M===void 0)break;if(v+=M,4096<v){v=E;break t}if(v===4096||E===this.i.length-1){v=E+1;break t}}v=1e3}else v=1e3;v=$l(this,U,v),E=ce(this.I),mt(E,"RID",d),mt(E,"CVER",22),this.D&&mt(E,"X-HTTP-Session-Id",this.D),Bs(this,E),G&&(this.O?v="headers="+encodeURIComponent(String(Bl(G)))+"&"+v:this.m&&Xo(E,this.m,G)),qt(this.h,U),this.Ua&&mt(E,"TYPE","init"),this.P?(mt(E,"$req",v),mt(E,"SID","null"),U.T=!0,Pl(U,E,null)):Pl(U,E,v),this.G=2}}else this.G==3&&(d?Tn(this,d):this.i.length==0||Rl(this.h)||Tn(this))};function Tn(d,v){var E;v?E=v.l:E=d.U++;const M=ce(d.I);mt(M,"SID",d.K),mt(M,"RID",E),mt(M,"AID",d.T),Bs(d,M),d.m&&d.o&&Xo(M,d.m,d.o),E=new ei(d,d.j,E,d.B+1),d.m===null&&(E.H=d.o),v&&(d.i=v.D.concat(d.i)),v=$l(d,E,1e3),E.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),qt(d.h,E),Pl(E,M,v)}function Bs(d,v){d.H&&H(d.H,function(E,M){mt(v,M,E)}),d.l&&xt({},function(E,M){mt(v,M,E)})}function $l(d,v,E){E=Math.min(d.i.length,E);var M=d.l?y(d.l.Na,d.l,d):null;t:{var U=d.i;let G=-1;for(;;){const tt=["count="+E];G==-1?0<E?(G=U[0].g,tt.push("ofs="+G)):G=0:tt.push("ofs="+G);let zt=!0;for(let ve=0;ve<E;ve++){let Mt=U[ve].g;const $t=U[ve].map;if(Mt-=G,0>Mt)G=Math.max(0,U[ve].g-100),zt=!1;else try{zl($t,tt,"req"+Mt+"_")}catch{M&&M($t)}}if(zt){M=tt.join("&");break t}}}return d=d.i.splice(0,E),v.D=d,M}function ri(d){if(!d.g&&!d.u){d.Y=1;var v=d.Fa;bt||X(),K||(bt(),K=!0),st.add(v,d),d.v=0}}function na(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Ms(y(d.Fa,d),Gl(d,d.v)),d.v++,!0)}e.Fa=function(){if(this.u=null,ra(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Ms(y(this.ab,this),d)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,je(10),ea(this),ra(this))};function ia(d){d.A!=null&&(l.clearTimeout(d.A),d.A=null)}function ra(d){d.g=new ei(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var v=ce(d.qa);mt(v,"RID","rpc"),mt(v,"SID",d.K),mt(v,"AID",d.T),mt(v,"CI",d.F?"0":"1"),!d.F&&d.ja&&mt(v,"TO",d.ja),mt(v,"TYPE","xmlhttp"),Bs(d,v),d.m&&d.o&&Xo(v,d.m,d.o),d.L&&(d.g.I=d.L);var E=d.g;d=d.ia,E.L=1,E.v=Dn(ce(v)),E.m=null,E.P=!0,Il(E,d)}e.Za=function(){this.C!=null&&(this.C=null,ea(this),na(this),je(19))};function sa(d){d.C!=null&&(l.clearTimeout(d.C),d.C=null)}function ql(d,v){var E=null;if(d.g==v){sa(d),ia(d),d.g=null;var M=2}else if(Ct(d.h,v))E=v.D,zs(d.h,v),M=1;else return;if(d.G!=0){if(v.o)if(M==1){E=v.m?v.m.length:0,v=Date.now()-v.F;var U=d.B;M=Ho(),Ae(M,new hh(M,E)),Nr(d)}else ri(d);else if(U=v.s,U==3||U==0&&0<v.X||!(M==1&&Gp(d,v)||M==2&&na(d)))switch(E&&0<E.length&&(v=d.h,v.i=v.i.concat(E)),U){case 1:Ki(d,5);break;case 4:Ki(d,10);break;case 3:Ki(d,6);break;default:Ki(d,2)}}}function Gl(d,v){let E=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(E*=2),E*v}function Ki(d,v){if(d.j.info("Error code "+v),v==2){var E=y(d.fb,d),M=d.Xa;const U=!M;M=new Mn(M||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Zo(M,"https"),Dn(M),U?Wt(M.toString(),E):vh(M.toString(),E)}else je(2);d.G=0,d.l&&d.l.sa(v),Eh(d),Th(d)}e.fb=function(d){d?(this.j.info("Successfully pinged google.com"),je(2)):(this.j.info("Failed to ping google.com"),je(1))};function Eh(d){if(d.G=0,d.ka=[],d.l){const v=Wi(d.h);(v.length!=0||d.i.length!=0)&&(k(d.ka,v),k(d.ka,d.i),d.h.i.length=0,S(d.i),d.i.length=0),d.l.ra()}}function oa(d,v,E){var M=E instanceof Mn?ce(E):new Mn(E);if(M.g!="")v&&(M.g=v+"."+M.g),$i(M,M.s);else{var U=l.location;M=U.protocol,v=v?v+"."+U.hostname:U.hostname,U=+U.port;var G=new Mn(null);M&&Zo(G,M),v&&(G.g=v),U&&$i(G,U),E&&(G.l=E),M=G}return E=d.D,v=d.ya,E&&v&&mt(M,E,v),mt(M,"VER",d.la),Bs(d,M),M}function Sh(d,v,E){if(v&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=d.Ca&&!d.pa?new te(new Vn({eb:E})):new te(d.pa),v.Ha(d.J),v}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Kl(){}e=Kl.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Us(){}Us.prototype.g=function(d,v){return new Re(d,v)};function Re(d,v){ye.call(this),this.g=new bh(v),this.l=d,this.h=v&&v.messageUrlParams||null,d=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(d?d["X-WebChannel-Content-Type"]=v.messageContentType:d={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(d?d["X-WebChannel-Client-Profile"]=v.va:d={"X-WebChannel-Client-Profile":v.va}),this.g.S=d,(d=v&&v.Sb)&&!I(d)&&(this.g.m=d),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!I(v)&&(this.g.D=v,d=this.h,d!==null&&v in d&&(d=this.h,v in d&&delete d[v])),this.j=new Fn(this)}T(Re,ye),Re.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Re.prototype.close=function(){ta(this.g)},Re.prototype.o=function(d){var v=this.g;if(typeof d=="string"){var E={};E.__data__=d,d=E}else this.u&&(E={},E.__data__=Bo(d),d=E);v.i.push(new Fs(v.Ya++,d)),v.G==3&&Nr(v)},Re.prototype.N=function(){this.g.l=null,delete this.j,ta(this.g),delete this.g,Re.aa.N.call(this)};function wi(d){Uo.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var v=d.__sm__;if(v){t:{for(const E in v){d=E;break t}d=void 0}(this.i=d)&&(d=this.i,v=v!==null&&d in v?v[d]:void 0),this.data=v}else this.data=d}T(wi,Uo);function kh(){Sl.call(this),this.status=1}T(kh,Sl);function Fn(d){this.g=d}T(Fn,Kl),Fn.prototype.ua=function(){Ae(this.g,"a")},Fn.prototype.ta=function(d){Ae(this.g,new wi(d))},Fn.prototype.sa=function(d){Ae(this.g,new kh)},Fn.prototype.ra=function(){Ae(this.g,"b")},Us.prototype.createWebChannel=Us.prototype.g,Re.prototype.send=Re.prototype.o,Re.prototype.open=Re.prototype.m,Re.prototype.close=Re.prototype.close,uk=function(){return new Us},ck=function(){return Ho()},lk=Bi,r_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Os.NO_ERROR=0,Os.TIMEOUT=8,Os.HTTP_ERROR=6,zd=Os,$o.COMPLETE="complete",ak=$o,El.EventType=kr,kr.OPEN="a",kr.CLOSE="b",kr.ERROR="c",kr.MESSAGE="d",ye.prototype.listen=ye.prototype.K,wc=El,te.prototype.listenOnce=te.prototype.L,te.prototype.getLastError=te.prototype.Ka,te.prototype.getLastErrorCode=te.prototype.Ba,te.prototype.getStatus=te.prototype.Z,te.prototype.getResponseJson=te.prototype.Oa,te.prototype.getResponseText=te.prototype.oa,te.prototype.send=te.prototype.ea,te.prototype.setWithCredentials=te.prototype.Ha,ok=te}).apply(typeof nd<"u"?nd:typeof self<"u"?self:typeof window<"u"?window:{});const pw="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ze.UNAUTHENTICATED=new Ze(null),Ze.GOOGLE_CREDENTIALS=new Ze("google-credentials-uid"),Ze.FIRST_PARTY=new Ze("first-party-uid"),Ze.MOCK_USER=new Ze("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dl="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo=new Ny("@firebase/firestore");function ac(){return xo.logLevel}function rt(e,...t){if(xo.logLevel<=Nt.DEBUG){const n=t.map(qy);xo.debug(`Firestore (${dl}): ${e}`,...n)}}function xr(e,...t){if(xo.logLevel<=Nt.ERROR){const n=t.map(qy);xo.error(`Firestore (${dl}): ${e}`,...n)}}function Qa(e,...t){if(xo.logLevel<=Nt.WARN){const n=t.map(qy);xo.warn(`Firestore (${dl}): ${e}`,...n)}}function qy(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(e="Unexpected state"){const t=`FIRESTORE (${dl}) INTERNAL ASSERTION FAILED: `+e;throw xr(t),new Error(t)}function Ht(e,t){e||gt()}function vt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class nt extends Fi{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class fO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Ze.UNAUTHENTICATED))}shutdown(){}}class pO{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class mO{constructor(t){this.t=t,this.currentUser=Ze.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Ht(this.o===void 0);let i=this.i;const r=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve();let s=new fr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new fr,t.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const c=s;t.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},l=c=>{rt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(rt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new fr)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(rt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ht(typeof i.accessToken=="string"),new hk(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Ht(t===null||typeof t=="string"),new Ze(t)}}class gO{constructor(t,n,i){this.l=t,this.h=n,this.P=i,this.type="FirstParty",this.user=Ze.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class _O{constructor(t,n,i){this.l=t,this.h=n,this.P=i}getToken(){return Promise.resolve(new gO(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(Ze.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yO{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vO{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){Ht(this.o===void 0);const i=s=>{s.error!=null&&rt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,rt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{rt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):rt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Ht(typeof n.token=="string"),this.R=n.token,new yO(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xO(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let i="";for(;i.length<20;){const r=xO(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=t.charAt(r[s]%t.length))}return i}}function Ft(e,t){return e<t?-1:e>t?1:0}function Ya(e,t,n){return e.length===t.length&&e.every((i,r)=>n(i,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new nt(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new nt(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new nt(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new nt(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Se.fromMillis(Date.now())}static fromDate(t){return Se.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*n));return new Se(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Ft(this.nanoseconds,t.nanoseconds):Ft(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(t){this.timestamp=t}static fromTimestamp(t){return new yt(t)}static min(){return new yt(new Se(0,0))}static max(){return new yt(new Se(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(t,n,i){n===void 0?n=0:n>t.length&&gt(),i===void 0?i=t.length-n:i>t.length-n&&gt(),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return yu.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof yu?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let r=0;r<i;r++){const s=t.get(r),o=n.get(r);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class Yt extends yu{construct(t,n,i){return new Yt(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new nt(Z.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Yt(n)}static emptyPath(){return new Yt([])}}const wO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ze extends yu{construct(t,n,i){return new ze(t,n,i)}static isValidIdentifier(t){return wO.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ze.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ze(["__name__"])}static fromServerFormat(t){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new nt(Z.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;r<t.length;){const l=t[r];if(l==="\\"){if(r+1===t.length)throw new nt(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new nt(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=c,r+=2}else l==="`"?(o=!o,r++):l!=="."||o?(i+=l,r++):(s(),r++)}if(s(),o)throw new nt(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ze(n)}static emptyPath(){return new ze([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(t){this.path=t}static fromPath(t){return new at(Yt.fromString(t))}static fromName(t){return new at(Yt.fromString(t).popFirst(5))}static empty(){return new at(Yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Yt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Yt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new at(new Yt(t.slice()))}}function bO(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=yt.fromTimestamp(i===1e9?new Se(n+1,0):new Se(n,i));return new gs(r,at.empty(),t)}function TO(e){return new gs(e.readTime,e.key,-1)}class gs{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new gs(yt.min(),at.empty(),-1)}static max(){return new gs(yt.max(),at.empty(),-1)}}function EO(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=at.comparator(e.documentKey,t.documentKey),n!==0?n:Ft(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $u(e){if(e.code!==Z.FAILED_PRECONDITION||e.message!==SO)throw e;rt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&gt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new Y((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof Y?n:Y.resolve(n)}catch(n){return Y.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):Y.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):Y.reject(n)}static resolve(t){return new Y((n,i)=>{n(t)})}static reject(t){return new Y((n,i)=>{i(t)})}static waitFor(t){return new Y((n,i)=>{let r=0,s=0,o=!1;t.forEach(l=>{++r,l.next(()=>{++s,o&&s===r&&n()},c=>i(c))}),o=!0,s===r&&n()})}static or(t){let n=Y.resolve(!1);for(const i of t)n=n.next(r=>r?Y.resolve(r):i());return n}static forEach(t,n){const i=[];return t.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(t,n){return new Y((i,r)=>{const s=t.length,o=new Array(s);let l=0;for(let c=0;c<s;c++){const h=c;n(t[h]).next(p=>{o[h]=p,++l,l===s&&i(o)},p=>r(p))}})}static doWhile(t,n){return new Y((i,r)=>{const s=()=>{t()===!0?n().next(()=>{s()},r):i()};s()})}}function PO(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function qu(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}Gy.oe=-1;function bp(e){return e==null}function Rf(e){return e===0&&1/e==-1/0}function IO(e){return typeof e=="number"&&Number.isInteger(e)&&!Rf(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mw(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ao(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function fk(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(t,n){this.comparator=t,this.root=n||Fe.EMPTY}insert(t,n){return new le(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Fe.BLACK,null,null))}remove(t){return new le(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Fe.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){const t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new id(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new id(this.root,t,this.comparator,!1)}getReverseIterator(){return new id(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new id(this.root,t,this.comparator,!0)}}class id{constructor(t,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?i(t.key,n):1,n&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Fe{constructor(t,n,i,r,s){this.key=t,this.value=n,this.color=i??Fe.RED,this.left=r??Fe.EMPTY,this.right=s??Fe.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,r,s){return new Fe(t??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(t,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Fe.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,r=this;if(n(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(t,r.key)===0){if(r.right.isEmpty())return Fe.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Fe.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Fe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw gt();const t=this.left.check();if(t!==this.right.check())throw gt();return t+(this.isRed()?0:1)}}Fe.EMPTY=null,Fe.RED=!0,Fe.BLACK=!1;Fe.EMPTY=new class{constructor(){this.size=0}get key(){throw gt()}get value(){throw gt()}get color(){throw gt()}get left(){throw gt()}get right(){throw gt()}copy(t,n,i,r,s){return this}insert(t,n,i){return new Fe(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(t){this.comparator=t,this.data=new le(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;n(r.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new gw(this.data.getIterator())}getIteratorFrom(t){return new gw(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof Ue)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Ue(this.comparator);return n.data=t,n}}class gw{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(t){this.fields=t,t.sort(ze.comparator)}static empty(){return new Pn([])}unionWith(t){let n=new Ue(ze.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new Pn(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Ya(this.fields,t.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new pk("Invalid base64 string: "+s):s}}(t);return new We(n)}static fromUint8Array(t){const n=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(t);return new We(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ft(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}We.EMPTY_BYTE_STRING=new We("");const CO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _s(e){if(Ht(!!e),typeof e=="string"){let t=0;const n=CO.exec(e);if(Ht(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:me(e.seconds),nanos:me(e.nanos)}}function me(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function wo(e){return typeof e=="string"?We.fromBase64String(e):We.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ky(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Zy(e){const t=e.mapValue.fields.__previous_value__;return Ky(t)?Zy(t):t}function vu(e){const t=_s(e.mapValue.fields.__local_write_time__.timestampValue);return new Se(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(t,n,i,r,s,o,l,c,h){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=h}}class xu{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new xu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof xu&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function bo(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ky(e)?4:NO(e)?9007199254740991:RO(e)?10:11:gt()}function Vi(e,t){if(e===t)return!0;const n=bo(e);if(n!==bo(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return vu(e).isEqual(vu(t));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=_s(r.timestampValue),l=_s(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(r,s){return wo(r.bytesValue).isEqual(wo(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(r,s){return me(r.geoPointValue.latitude)===me(s.geoPointValue.latitude)&&me(r.geoPointValue.longitude)===me(s.geoPointValue.longitude)}(e,t);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return me(r.integerValue)===me(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=me(r.doubleValue),l=me(s.doubleValue);return o===l?Rf(o)===Rf(l):isNaN(o)&&isNaN(l)}return!1}(e,t);case 9:return Ya(e.arrayValue.values||[],t.arrayValue.values||[],Vi);case 10:case 11:return function(r,s){const o=r.mapValue.fields||{},l=s.mapValue.fields||{};if(mw(o)!==mw(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Vi(o[c],l[c])))return!1;return!0}(e,t);default:return gt()}}function wu(e,t){return(e.values||[]).find(n=>Vi(n,t))!==void 0}function Xa(e,t){if(e===t)return 0;const n=bo(e),i=bo(t);if(n!==i)return Ft(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ft(e.booleanValue,t.booleanValue);case 2:return function(s,o){const l=me(s.integerValue||s.doubleValue),c=me(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(e,t);case 3:return _w(e.timestampValue,t.timestampValue);case 4:return _w(vu(e),vu(t));case 5:return Ft(e.stringValue,t.stringValue);case 6:return function(s,o){const l=wo(s),c=wo(o);return l.compareTo(c)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const l=s.split("/"),c=o.split("/");for(let h=0;h<l.length&&h<c.length;h++){const p=Ft(l[h],c[h]);if(p!==0)return p}return Ft(l.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const l=Ft(me(s.latitude),me(o.latitude));return l!==0?l:Ft(me(s.longitude),me(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return yw(e.arrayValue,t.arrayValue);case 10:return function(s,o){var l,c,h,p;const g=s.fields||{},y=o.fields||{},x=(l=g.value)===null||l===void 0?void 0:l.arrayValue,T=(c=y.value)===null||c===void 0?void 0:c.arrayValue,S=Ft(((h=x==null?void 0:x.values)===null||h===void 0?void 0:h.length)||0,((p=T==null?void 0:T.values)===null||p===void 0?void 0:p.length)||0);return S!==0?S:yw(x,T)}(e.mapValue,t.mapValue);case 11:return function(s,o){if(s===rd.mapValue&&o===rd.mapValue)return 0;if(s===rd.mapValue)return 1;if(o===rd.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),h=o.fields||{},p=Object.keys(h);c.sort(),p.sort();for(let g=0;g<c.length&&g<p.length;++g){const y=Ft(c[g],p[g]);if(y!==0)return y;const x=Xa(l[c[g]],h[p[g]]);if(x!==0)return x}return Ft(c.length,p.length)}(e.mapValue,t.mapValue);default:throw gt()}}function _w(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Ft(e,t);const n=_s(e),i=_s(t),r=Ft(n.seconds,i.seconds);return r!==0?r:Ft(n.nanos,i.nanos)}function yw(e,t){const n=e.values||[],i=t.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=Xa(n[r],i[r]);if(s)return s}return Ft(n.length,i.length)}function Ja(e){return s_(e)}function s_(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const i=_s(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return wo(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return at.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=s_(s);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${s_(n.fields[o])}`;return r+"}"}(e.mapValue):gt()}function vw(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function o_(e){return!!e&&"integerValue"in e}function Qy(e){return!!e&&"arrayValue"in e}function xw(e){return!!e&&"nullValue"in e}function ww(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Bd(e){return!!e&&"mapValue"in e}function RO(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Vc(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Ao(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=Vc(i)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Vc(e.arrayValue.values[n]);return t}return Object.assign({},e)}function NO(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(t){this.value=t}static empty(){return new mn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!Bd(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Vc(n)}setAll(t){let n=ze.emptyPath(),i={},r=[];t.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,i,r),i={},r=[],n=l.popLast()}o?i[l.lastSegment()]=Vc(o):r.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(t){const n=this.field(t.popLast());Bd(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Vi(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=n.mapValue.fields[t.get(i)];Bd(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(t,n,i){Ao(n,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new mn(Vc(this.value))}}function mk(e){const t=[];return Ao(e.fields,(n,i)=>{const r=new ze([n]);if(Bd(i)){const s=mk(i.mapValue).fields;if(s.length===0)t.push(r);else for(const o of s)t.push(r.child(o))}else t.push(r)}),new Pn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(t,n,i,r,s,o,l){this.key=t,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(t){return new Ye(t,0,yt.min(),yt.min(),yt.min(),mn.empty(),0)}static newFoundDocument(t,n,i,r){return new Ye(t,1,n,yt.min(),i,r,0)}static newNoDocument(t,n){return new Ye(t,2,n,yt.min(),yt.min(),mn.empty(),0)}static newUnknownDocument(t,n){return new Ye(t,3,n,yt.min(),yt.min(),mn.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(yt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=mn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=mn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=yt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Ye&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ye(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(t,n){this.position=t,this.inclusive=n}}function bw(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){const s=t[r],o=e.position[r];if(s.field.isKeyField()?i=at.comparator(at.fromName(o.referenceValue),n.key):i=Xa(o,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function Tw(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Vi(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(t,n="asc"){this.field=t,this.dir=n}}function LO(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{}class Ee extends gk{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new DO(t,n,i):n==="array-contains"?new VO(t,i):n==="in"?new FO(t,i):n==="not-in"?new zO(t,i):n==="array-contains-any"?new BO(t,i):new Ee(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new OO(t,i):new jO(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Xa(n,this.value)):n!==null&&bo(this.value)===bo(n)&&this.matchesComparison(Xa(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return gt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _i extends gk{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new _i(t,n)}matches(t){return _k(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function _k(e){return e.op==="and"}function yk(e){return MO(e)&&_k(e)}function MO(e){for(const t of e.filters)if(t instanceof _i)return!1;return!0}function a_(e){if(e instanceof Ee)return e.field.canonicalString()+e.op.toString()+Ja(e.value);if(yk(e))return e.filters.map(t=>a_(t)).join(",");{const t=e.filters.map(n=>a_(n)).join(",");return`${e.op}(${t})`}}function vk(e,t){return e instanceof Ee?function(i,r){return r instanceof Ee&&i.op===r.op&&i.field.isEqual(r.field)&&Vi(i.value,r.value)}(e,t):e instanceof _i?function(i,r){return r instanceof _i&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,l)=>s&&vk(o,r.filters[l]),!0):!1}(e,t):void gt()}function xk(e){return e instanceof Ee?function(n){return`${n.field.canonicalString()} ${n.op} ${Ja(n.value)}`}(e):e instanceof _i?function(n){return n.op.toString()+" {"+n.getFilters().map(xk).join(" ,")+"}"}(e):"Filter"}class DO extends Ee{constructor(t,n,i){super(t,n,i),this.key=at.fromName(i.referenceValue)}matches(t){const n=at.comparator(t.key,this.key);return this.matchesComparison(n)}}class OO extends Ee{constructor(t,n){super(t,"in",n),this.keys=wk("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class jO extends Ee{constructor(t,n){super(t,"not-in",n),this.keys=wk("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function wk(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>at.fromName(i.referenceValue))}class VO extends Ee{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Qy(n)&&wu(n.arrayValue,this.value)}}class FO extends Ee{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&wu(this.value.arrayValue,n)}}class zO extends Ee{constructor(t,n){super(t,"not-in",n)}matches(t){if(wu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!wu(this.value.arrayValue,n)}}class BO extends Ee{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Qy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>wu(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO{constructor(t,n=null,i=[],r=[],s=null,o=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=l,this.ue=null}}function Ew(e,t=null,n=[],i=[],r=null,s=null,o=null){return new UO(e,t,n,i,r,s,o)}function Yy(e){const t=vt(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>a_(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),bp(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>Ja(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>Ja(i)).join(",")),t.ue=n}return t.ue}function Xy(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!LO(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!vk(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Tw(e.startAt,t.startAt)&&Tw(e.endAt,t.endAt)}function l_(e){return at.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(t,n=null,i=[],r=[],s=null,o="F",l=null,c=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function HO(e,t,n,i,r,s,o,l){return new fl(e,t,n,i,r,s,o,l)}function Jy(e){return new fl(e)}function Sw(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function bk(e){return e.collectionGroup!==null}function Fc(e){const t=vt(e);if(t.ce===null){t.ce=[];const n=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),n.add(s.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Ue(ze.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.ce.push(new bu(s,i))}),n.has(ze.keyField().canonicalString())||t.ce.push(new bu(ze.keyField(),i))}return t.ce}function Oi(e){const t=vt(e);return t.le||(t.le=WO(t,Fc(e))),t.le}function WO(e,t){if(e.limitType==="F")return Ew(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new bu(r.field,s)});const n=e.endAt?new Nf(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Nf(e.startAt.position,e.startAt.inclusive):null;return Ew(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function c_(e,t){const n=e.filters.concat([t]);return new fl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Lf(e,t,n){return new fl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Tp(e,t){return Xy(Oi(e),Oi(t))&&e.limitType===t.limitType}function Tk(e){return`${Yy(Oi(e))}|lt:${e.limitType}`}function pa(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>xk(r)).join(", ")}]`),bp(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Ja(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Ja(r)).join(",")),`Target(${i})`}(Oi(e))}; limitType=${e.limitType})`}function Ep(e,t){return t.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):at.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(e,t)&&function(i,r){for(const s of Fc(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(e,t)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(e,t)&&function(i,r){return!(i.startAt&&!function(o,l,c){const h=bw(o,l,c);return o.inclusive?h<=0:h<0}(i.startAt,Fc(i),r)||i.endAt&&!function(o,l,c){const h=bw(o,l,c);return o.inclusive?h>=0:h>0}(i.endAt,Fc(i),r))}(e,t)}function $O(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Ek(e){return(t,n)=>{let i=!1;for(const r of Fc(e)){const s=qO(r,t,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function qO(e,t,n){const i=e.field.isKeyField()?at.comparator(t.key,n.key):function(s,o,l){const c=o.data.field(s),h=l.data.field(s);return c!==null&&h!==null?Xa(c,h):gt()}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return gt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,n]);r.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Ao(this.inner,(n,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return fk(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GO=new le(at.comparator);function wr(){return GO}const Sk=new le(at.comparator);function bc(...e){let t=Sk;for(const n of e)t=t.insert(n.key,n);return t}function kk(e){let t=Sk;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function io(){return zc()}function Pk(){return zc()}function zc(){return new pl(e=>e.toString(),(e,t)=>e.isEqual(t))}const KO=new le(at.comparator),ZO=new Ue(at.comparator);function At(...e){let t=ZO;for(const n of e)t=t.add(n);return t}const QO=new Ue(Ft);function YO(){return QO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rf(t)?"-0":t}}function Ik(e){return{integerValue:""+e}}function XO(e,t){return IO(t)?Ik(t):tv(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(){this._=void 0}}function JO(e,t,n){return e instanceof Mf?function(r,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Ky(s)&&(s=Zy(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof Tu?Ak(e,t):e instanceof Eu?Rk(e,t):function(r,s){const o=Ck(r,s),l=kw(o)+kw(r.Pe);return o_(o)&&o_(r.Pe)?Ik(l):tv(r.serializer,l)}(e,t)}function tj(e,t,n){return e instanceof Tu?Ak(e,t):e instanceof Eu?Rk(e,t):n}function Ck(e,t){return e instanceof Df?function(i){return o_(i)||function(s){return!!s&&"doubleValue"in s}(i)}(t)?t:{integerValue:0}:null}class Mf extends Sp{}class Tu extends Sp{constructor(t){super(),this.elements=t}}function Ak(e,t){const n=Nk(t);for(const i of e.elements)n.some(r=>Vi(r,i))||n.push(i);return{arrayValue:{values:n}}}class Eu extends Sp{constructor(t){super(),this.elements=t}}function Rk(e,t){let n=Nk(t);for(const i of e.elements)n=n.filter(r=>!Vi(r,i));return{arrayValue:{values:n}}}class Df extends Sp{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function kw(e){return me(e.integerValue||e.doubleValue)}function Nk(e){return Qy(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function ej(e,t){return e.field.isEqual(t.field)&&function(i,r){return i instanceof Tu&&r instanceof Tu||i instanceof Eu&&r instanceof Eu?Ya(i.elements,r.elements,Vi):i instanceof Df&&r instanceof Df?Vi(i.Pe,r.Pe):i instanceof Mf&&r instanceof Mf}(e.transform,t.transform)}class nj{constructor(t,n){this.version=t,this.transformResults=n}}class Zn{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Zn}static exists(t){return new Zn(void 0,t)}static updateTime(t){return new Zn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Ud(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class kp{}function Lk(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new ev(e.key,Zn.none()):new Gu(e.key,e.data,Zn.none());{const n=e.data,i=mn.empty();let r=new Ue(ze.comparator);for(let s of t.fields)if(!r.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new Ps(e.key,i,new Pn(r.toArray()),Zn.none())}}function ij(e,t,n){e instanceof Gu?function(r,s,o){const l=r.value.clone(),c=Iw(r.fieldTransforms,s,o.transformResults);l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(e,t,n):e instanceof Ps?function(r,s,o){if(!Ud(r.precondition,s))return void s.convertToUnknownDocument(o.version);const l=Iw(r.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(Mk(r)),c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(e,t,n):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function Bc(e,t,n,i){return e instanceof Gu?function(s,o,l,c){if(!Ud(s.precondition,o))return l;const h=s.value.clone(),p=Cw(s.fieldTransforms,c,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(e,t,n,i):e instanceof Ps?function(s,o,l,c){if(!Ud(s.precondition,o))return l;const h=Cw(s.fieldTransforms,c,o),p=o.data;return p.setAll(Mk(s)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(e,t,n,i):function(s,o,l){return Ud(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(e,t,n)}function rj(e,t){let n=null;for(const i of e.fieldTransforms){const r=t.data.field(i.field),s=Ck(i.transform,r||null);s!=null&&(n===null&&(n=mn.empty()),n.set(i.field,s))}return n||null}function Pw(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Ya(i,r,(s,o)=>ej(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Gu extends kp{constructor(t,n,i,r=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Ps extends kp{constructor(t,n,i,r,s=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Mk(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function Iw(e,t,n){const i=new Map;Ht(e.length===n.length);for(let r=0;r<n.length;r++){const s=e[r],o=s.transform,l=t.data.field(s.field);i.set(s.field,tj(o,l,n[r]))}return i}function Cw(e,t,n){const i=new Map;for(const r of e){const s=r.transform,o=n.data.field(r.field);i.set(r.field,JO(s,o,t))}return i}class ev extends kp{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class sj extends kp{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(t,n,i,r){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&ij(s,t,i[r])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=Bc(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=Bc(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=Pk();return this.mutations.forEach(r=>{const s=t.get(r.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(r.key)?null:l;const c=Lk(o,l);c!==null&&i.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(yt.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),At())}isEqual(t){return this.batchId===t.batchId&&Ya(this.mutations,t.mutations,(n,i)=>Pw(n,i))&&Ya(this.baseMutations,t.baseMutations,(n,i)=>Pw(n,i))}}class nv{constructor(t,n,i,r){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(t,n,i){Ht(t.mutations.length===i.length);let r=function(){return KO}();const s=t.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new nv(t,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var we,Dt;function cj(e){switch(e){default:return gt();case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0}}function Dk(e){if(e===void 0)return xr("GRPC error has no .code"),Z.UNKNOWN;switch(e){case we.OK:return Z.OK;case we.CANCELLED:return Z.CANCELLED;case we.UNKNOWN:return Z.UNKNOWN;case we.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case we.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case we.INTERNAL:return Z.INTERNAL;case we.UNAVAILABLE:return Z.UNAVAILABLE;case we.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case we.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case we.NOT_FOUND:return Z.NOT_FOUND;case we.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case we.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case we.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case we.ABORTED:return Z.ABORTED;case we.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case we.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case we.DATA_LOSS:return Z.DATA_LOSS;default:return gt()}}(Dt=we||(we={}))[Dt.OK=0]="OK",Dt[Dt.CANCELLED=1]="CANCELLED",Dt[Dt.UNKNOWN=2]="UNKNOWN",Dt[Dt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Dt[Dt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Dt[Dt.NOT_FOUND=5]="NOT_FOUND",Dt[Dt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Dt[Dt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Dt[Dt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Dt[Dt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Dt[Dt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Dt[Dt.ABORTED=10]="ABORTED",Dt[Dt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Dt[Dt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Dt[Dt.INTERNAL=13]="INTERNAL",Dt[Dt.UNAVAILABLE=14]="UNAVAILABLE",Dt[Dt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uj(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hj=new lo([4294967295,4294967295],0);function Aw(e){const t=uj().encode(e),n=new sk;return n.update(t),new Uint8Array(n.digest())}function Rw(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new lo([n,i],0),new lo([r,s],0)]}class iv{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Tc(`Invalid padding: ${n}`);if(i<0)throw new Tc(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new Tc(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new Tc(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*t.length-n,this.Te=lo.fromNumber(this.Ie)}Ee(t,n,i){let r=t.add(n.multiply(lo.fromNumber(i)));return r.compare(hj)===1&&(r=new lo([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const n=Aw(t),[i,r]=Rw(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(t,n,i){const r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new iv(s,r,n);return i.forEach(l=>o.insert(l)),o}insert(t){if(this.Ie===0)return;const n=Aw(t),[i,r]=Rw(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);this.Ae(o)}}Ae(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class Tc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(t,n,i,r,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const r=new Map;return r.set(t,Ku.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new Pp(yt.min(),r,new le(Ft),wr(),At())}}class Ku{constructor(t,n,i,r,s){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new Ku(i,n,At(),At(),At())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(t,n,i,r){this.Re=t,this.removedTargetIds=n,this.key=i,this.Ve=r}}class Ok{constructor(t,n){this.targetId=t,this.me=n}}class jk{constructor(t,n,i=We.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=r}}class Nw{constructor(){this.fe=0,this.ge=Mw(),this.pe=We.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=At(),n=At(),i=At();return this.ge.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:gt()}}),new Ku(this.pe,this.ye,t,n,i)}Ce(){this.we=!1,this.ge=Mw()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,Ht(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class dj{constructor(t){this.Le=t,this.Be=new Map,this.ke=wr(),this.qe=Lw(),this.Qe=new le(Ft)}Ke(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(n,t.Ve):this.Ue(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.Ue(n,t.key,t.Ve)}We(t){this.forEachTarget(t,n=>{const i=this.Ge(n);switch(t.state){case 0:this.ze(n)&&i.De(t.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(t.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(t.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(t.resumeToken));break;default:gt()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(t){const n=t.targetId,i=t.me.count,r=this.Je(n);if(r){const s=r.target;if(l_(s))if(i===0){const o=new at(s.path);this.Ue(n,o,Ye.newNoDocument(o,yt.min()))}else Ht(i===1);else{const o=this.Ye(n);if(o!==i){const l=this.Ze(t),c=l?this.Xe(l,t,o):1;if(c!==0){this.je(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let o,l;try{o=wo(i).toUint8Array()}catch(c){if(c instanceof pk)return Qa("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new iv(o,r,s)}catch(c){return Qa(c instanceof Tc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ie===0?null:l}Xe(t,n,i){return n.me.count===i-this.nt(t,n.targetId)?0:2}nt(t,n){const i=this.Le.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(l)||(this.Ue(n,s,null),r++)}),r}rt(t){const n=new Map;this.Be.forEach((s,o)=>{const l=this.Je(o);if(l){if(s.current&&l_(l.target)){const c=new at(l.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,Ye.newNoDocument(c,t))}s.be&&(n.set(o,s.ve()),s.Ce())}});let i=At();this.qe.forEach((s,o)=>{let l=!0;o.forEachWhile(c=>{const h=this.Je(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const r=new Pp(t,n,this.Qe,this.ke,i);return this.ke=wr(),this.qe=Lw(),this.Qe=new le(Ft),r}$e(t,n){if(!this.ze(t))return;const i=this.it(t,n.key)?2:0;this.Ge(t).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t))}Ue(t,n,i){if(!this.ze(t))return;const r=this.Ge(t);this.it(t,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(t)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(t){this.Be.delete(t)}Ye(t){const n=this.Ge(t).ve();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let n=this.Be.get(t);return n||(n=new Nw,this.Be.set(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new Ue(Ft),this.qe=this.qe.insert(t,n)),n}ze(t){const n=this.Je(t)!==null;return n||rt("WatchChangeAggregator","Detected inactive target",t),n}Je(t){const n=this.Be.get(t);return n&&n.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new Nw),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.Ue(t,n,null)})}it(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function Lw(){return new le(at.comparator)}function Mw(){return new le(at.comparator)}const fj={asc:"ASCENDING",desc:"DESCENDING"},pj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mj={and:"AND",or:"OR"};class gj{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function u_(e,t){return e.useProto3Json||bp(t)?t:{value:t}}function Of(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Vk(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function _j(e,t){return Of(e,t.toTimestamp())}function ji(e){return Ht(!!e),yt.fromTimestamp(function(n){const i=_s(n);return new Se(i.seconds,i.nanos)}(e))}function rv(e,t){return h_(e,t).canonicalString()}function h_(e,t){const n=function(r){return new Yt(["projects",r.projectId,"databases",r.database])}(e).child("documents");return t===void 0?n:n.child(t)}function Fk(e){const t=Yt.fromString(e);return Ht(Wk(t)),t}function d_(e,t){return rv(e.databaseId,t.path)}function Mm(e,t){const n=Fk(t);if(n.get(1)!==e.databaseId.projectId)throw new nt(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new nt(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new at(Bk(n))}function zk(e,t){return rv(e.databaseId,t)}function yj(e){const t=Fk(e);return t.length===4?Yt.emptyPath():Bk(t)}function f_(e){return new Yt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Bk(e){return Ht(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function Dw(e,t,n){return{name:d_(e,t),fields:n.value.mapValue.fields}}function vj(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:gt()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(h,p){return h.useProto3Json?(Ht(p===void 0||typeof p=="string"),We.fromBase64String(p||"")):(Ht(p===void 0||p instanceof Buffer||p instanceof Uint8Array),We.fromUint8Array(p||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,l=o&&function(h){const p=h.code===void 0?Z.UNKNOWN:Dk(h.code);return new nt(p,h.message||"")}(o);n=new jk(i,r,s,l||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=Mm(e,i.document.name),s=ji(i.document.updateTime),o=i.document.createTime?ji(i.document.createTime):yt.min(),l=new mn({mapValue:{fields:i.document.fields}}),c=Ye.newFoundDocument(r,s,o,l),h=i.targetIds||[],p=i.removedTargetIds||[];n=new Hd(h,p,c.key,c)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=Mm(e,i.document),s=i.readTime?ji(i.readTime):yt.min(),o=Ye.newNoDocument(r,s),l=i.removedTargetIds||[];n=new Hd([],l,o.key,o)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=Mm(e,i.document),s=i.removedTargetIds||[];n=new Hd([],s,r,null)}else{if(!("filter"in t))return gt();{t.filter;const i=t.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,o=new lj(r,s),l=i.targetId;n=new Ok(l,o)}}return n}function xj(e,t){let n;if(t instanceof Gu)n={update:Dw(e,t.key,t.value)};else if(t instanceof ev)n={delete:d_(e,t.key)};else if(t instanceof Ps)n={update:Dw(e,t.key,t.data),updateMask:Cj(t.fieldMask)};else{if(!(t instanceof sj))return gt();n={verify:d_(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(s,o){const l=o.transform;if(l instanceof Mf)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Tu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Eu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Df)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw gt()}(0,i))),t.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:_j(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:gt()}(e,t.precondition)),n}function wj(e,t){return e&&e.length>0?(Ht(t!==void 0),e.map(n=>function(r,s){let o=r.updateTime?ji(r.updateTime):ji(s);return o.isEqual(yt.min())&&(o=ji(s)),new nj(o,r.transformResults||[])}(n,t))):[]}function bj(e,t){return{documents:[zk(e,t.path)]}}function Tj(e,t){const n={structuredQuery:{}},i=t.path;let r;t.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=zk(e,r);const s=function(h){if(h.length!==0)return Hk(_i.create(h,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(h){if(h.length!==0)return h.map(p=>function(y){return{field:ma(y.field),direction:kj(y.dir)}}(p))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const l=u_(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(t.endAt)),{_t:n,parent:r}}function Ej(e){let t=yj(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Ht(i===1);const p=n.from[0];p.allDescendants?r=p.collectionId:t=t.child(p.collectionId)}let s=[];n.where&&(s=function(g){const y=Uk(g);return y instanceof _i&&yk(y)?y.getFilters():[y]}(n.where));let o=[];n.orderBy&&(o=function(g){return g.map(y=>function(T){return new bu(ga(T.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(y))}(n.orderBy));let l=null;n.limit&&(l=function(g){let y;return y=typeof g=="object"?g.value:g,bp(y)?null:y}(n.limit));let c=null;n.startAt&&(c=function(g){const y=!!g.before,x=g.values||[];return new Nf(x,y)}(n.startAt));let h=null;return n.endAt&&(h=function(g){const y=!g.before,x=g.values||[];return new Nf(x,y)}(n.endAt)),HO(t,r,o,s,l,"F",c,h)}function Sj(e,t){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return gt()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Uk(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=ga(n.unaryFilter.field);return Ee.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=ga(n.unaryFilter.field);return Ee.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ga(n.unaryFilter.field);return Ee.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ga(n.unaryFilter.field);return Ee.create(o,"!=",{nullValue:"NULL_VALUE"});default:return gt()}}(e):e.fieldFilter!==void 0?function(n){return Ee.create(ga(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return gt()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return _i.create(n.compositeFilter.filters.map(i=>Uk(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return gt()}}(n.compositeFilter.op))}(e):gt()}function kj(e){return fj[e]}function Pj(e){return pj[e]}function Ij(e){return mj[e]}function ma(e){return{fieldPath:e.canonicalString()}}function ga(e){return ze.fromServerFormat(e.fieldPath)}function Hk(e){return e instanceof Ee?function(n){if(n.op==="=="){if(ww(n.value))return{unaryFilter:{field:ma(n.field),op:"IS_NAN"}};if(xw(n.value))return{unaryFilter:{field:ma(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ww(n.value))return{unaryFilter:{field:ma(n.field),op:"IS_NOT_NAN"}};if(xw(n.value))return{unaryFilter:{field:ma(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ma(n.field),op:Pj(n.op),value:n.value}}}(e):e instanceof _i?function(n){const i=n.getFilters().map(r=>Hk(r));return i.length===1?i[0]:{compositeFilter:{op:Ij(n.op),filters:i}}}(e):gt()}function Cj(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function Wk(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(t,n,i,r,s=yt.min(),o=yt.min(),l=We.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(t){return new Xr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(t){this.ct=t}}function Rj(e){const t=Ej({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Lf(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(){this.un=new Lj}addToCollectionParentIndex(t,n){return this.un.add(n),Y.resolve()}getCollectionParents(t,n){return Y.resolve(this.un.getEntries(n))}addFieldIndex(t,n){return Y.resolve()}deleteFieldIndex(t,n){return Y.resolve()}deleteAllFieldIndexes(t){return Y.resolve()}createTargetIndexes(t,n){return Y.resolve()}getDocumentsMatchingTarget(t,n){return Y.resolve(null)}getIndexType(t,n){return Y.resolve(0)}getFieldIndexes(t,n){return Y.resolve([])}getNextCollectionGroupToUpdate(t){return Y.resolve(null)}getMinOffset(t,n){return Y.resolve(gs.min())}getMinOffsetFromCollectionGroup(t,n){return Y.resolve(gs.min())}updateCollectionGroup(t,n,i){return Y.resolve()}updateIndexEntries(t,n){return Y.resolve()}}class Lj{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n]||new Ue(Yt.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(t){return(this.index[t]||new Ue(Yt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(t){this.Ln=t}next(){return this.Ln+=2,this.Ln}static Bn(){return new tl(0)}static kn(){return new tl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(){this.changes=new pl(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Ye.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?Y.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(t,n,i,r){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,n))).next(r=>(i!==null&&Bc(i.mutation,r,Pn.empty(),Se.now()),r))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,At()).next(()=>i))}getLocalViewOfDocuments(t,n,i=At()){const r=io();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,i).next(s=>{let o=bc();return s.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const i=io();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,At()))}populateOverlays(t,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(t,n,i,r){let s=wr();const o=zc(),l=function(){return zc()}();return n.forEach((c,h)=>{const p=i.get(h.key);r.has(h.key)&&(p===void 0||p.mutation instanceof Ps)?s=s.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),Bc(p.mutation,h,p.mutation.getFieldMask(),Se.now())):o.set(h.key,Pn.empty())}),this.recalculateAndSaveOverlays(t,s).next(c=>(c.forEach((h,p)=>o.set(h,p)),n.forEach((h,p)=>{var g;return l.set(h,new Dj(p,(g=o.get(h))!==null&&g!==void 0?g:null))}),l))}recalculateAndSaveOverlays(t,n){const i=zc();let r=new le((o,l)=>o-l),s=At();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const h=n.get(c);if(h===null)return;let p=i.get(c)||Pn.empty();p=l.applyToLocalView(h,p),i.set(c,p);const g=(r.get(l.batchId)||At()).add(c);r=r.insert(l.batchId,g)})}).next(()=>{const o=[],l=r.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),h=c.key,p=c.value,g=Pk();p.forEach(y=>{if(!s.has(y)){const x=Lk(n.get(y),i.get(y));x!==null&&g.set(y,x),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(t,h,g))}return Y.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,r){return function(o){return at.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):bk(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,r):this.getDocumentsMatchingCollectionQuery(t,n,i,r)}getNextDocuments(t,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,r-s.size):Y.resolve(io());let l=-1,c=s;return o.next(h=>Y.forEach(h,(p,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),s.get(p)?Y.resolve():this.remoteDocumentCache.getEntry(t,p).next(y=>{c=c.insert(p,y)}))).next(()=>this.populateOverlays(t,h,s)).next(()=>this.computeViews(t,c,h,At())).next(p=>({batchId:l,changes:kk(p)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new at(n)).next(i=>{let r=bc();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,n,i,r){const s=n.collectionGroup;let o=bc();return this.indexManager.getCollectionParents(t,s).next(l=>Y.forEach(l,c=>{const h=function(g,y){return new fl(y,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(t,h,i,r).next(p=>{p.forEach((g,y)=>{o=o.insert(g,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,s,r))).next(o=>{s.forEach((c,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,Ye.newInvalidDocument(p)))});let l=bc();return o.forEach((c,h)=>{const p=s.get(c);p!==void 0&&Bc(p.mutation,h,Pn.empty(),Se.now()),Ep(n,h)&&(l=l.insert(c,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(t){this.serializer=t,this.hr=new Map,this.Pr=new Map}getBundleMetadata(t,n){return Y.resolve(this.hr.get(n))}saveBundleMetadata(t,n){return this.hr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:ji(r.createTime)}}(n)),Y.resolve()}getNamedQuery(t,n){return Y.resolve(this.Pr.get(n))}saveNamedQuery(t,n){return this.Pr.set(n.name,function(r){return{name:r.name,query:Rj(r.bundledQuery),readTime:ji(r.readTime)}}(n)),Y.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(){this.overlays=new le(at.comparator),this.Ir=new Map}getOverlay(t,n){return Y.resolve(this.overlays.get(n))}getOverlays(t,n){const i=io();return Y.forEach(n,r=>this.getOverlay(t,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((r,s)=>{this.ht(t,n,s)}),Y.resolve()}removeOverlaysForBatchId(t,n,i){const r=this.Ir.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(i)),Y.resolve()}getOverlaysForCollection(t,n,i){const r=io(),s=n.length+1,o=new at(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&c.largestBatchId>i&&r.set(c.getKey(),c)}return Y.resolve(r)}getOverlaysForCollectionGroup(t,n,i,r){let s=new le((h,p)=>h-p);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let p=s.get(h.largestBatchId);p===null&&(p=io(),s=s.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const l=io(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,p)=>l.set(h,p)),!(l.size()>=r)););return Y.resolve(l)}ht(t,n,i){const r=this.overlays.get(i.key);if(r!==null){const o=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new aj(n,i));let s=this.Ir.get(n);s===void 0&&(s=At(),this.Ir.set(n,s)),this.Ir.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(){this.sessionToken=We.EMPTY_BYTE_STRING}getSessionToken(t){return Y.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,Y.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(){this.Tr=new Ue(Le.Er),this.dr=new Ue(Le.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(t,n){const i=new Le(t,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.Vr(new Le(t,n))}mr(t,n){t.forEach(i=>this.removeReference(i,n))}gr(t){const n=new at(new Yt([])),i=new Le(n,t),r=new Le(n,t+1),s=[];return this.dr.forEachInRange([i,r],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(t=>this.Vr(t))}Vr(t){this.Tr=this.Tr.delete(t),this.dr=this.dr.delete(t)}yr(t){const n=new at(new Yt([])),i=new Le(n,t),r=new Le(n,t+1);let s=At();return this.dr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new Le(t,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class Le{constructor(t,n){this.key=t,this.wr=n}static Er(t,n){return at.comparator(t.key,n.key)||Ft(t.wr,n.wr)}static Ar(t,n){return Ft(t.wr,n.wr)||at.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ue(Le.Er)}checkEmpty(t){return Y.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,r){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new oj(s,n,i,r);this.mutationQueue.push(o);for(const l of r)this.br=this.br.add(new Le(l.key,s)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return Y.resolve(o)}lookupMutationBatch(t,n){return Y.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,r=this.vr(i),s=r<0?0:r;return Y.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Y.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(t){return Y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new Le(n,0),r=new Le(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([i,r],o=>{const l=this.Dr(o.wr);s.push(l)}),Y.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new Ue(Ft);return n.forEach(r=>{const s=new Le(r,0),o=new Le(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],l=>{i=i.add(l.wr)})}),Y.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,r=i.length+1;let s=i;at.isDocumentKey(s)||(s=s.child(""));const o=new Le(new at(s),0);let l=new Ue(Ft);return this.br.forEachWhile(c=>{const h=c.key.path;return!!i.isPrefixOf(h)&&(h.length===r&&(l=l.add(c.wr)),!0)},o),Y.resolve(this.Cr(l))}Cr(t){const n=[];return t.forEach(i=>{const r=this.Dr(i);r!==null&&n.push(r)}),n}removeMutationBatch(t,n){Ht(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return Y.forEach(n.mutations,r=>{const s=new Le(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.br=i})}On(t){}containsKey(t,n){const i=new Le(n,0),r=this.br.firstAfterOrEqual(i);return Y.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,Y.resolve()}Fr(t,n){return this.vr(t)}vr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Dr(t){const n=this.vr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{constructor(t){this.Mr=t,this.docs=function(){return new le(at.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,o=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return Y.resolve(i?i.document.mutableCopy():Ye.newInvalidDocument(n))}getEntries(t,n){let i=wr();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Ye.newInvalidDocument(r))}),Y.resolve(i)}getDocumentsMatchingQuery(t,n,i,r){let s=wr();const o=n.path,l=new at(o.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:h,value:{document:p}}=c.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||EO(TO(p),i)<=0||(r.has(p.key)||Ep(n,p))&&(s=s.insert(p.key,p.mutableCopy()))}return Y.resolve(s)}getAllFromCollectionGroup(t,n,i,r){gt()}Or(t,n){return Y.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new Uj(this)}getSize(t){return Y.resolve(this.size)}}class Uj extends Mj{constructor(t){super(),this.cr=t}applyChanges(t){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.cr.addEntry(t,r)):this.cr.removeEntry(i)}),Y.waitFor(n)}getFromCache(t,n){return this.cr.getEntry(t,n)}getAllFromCache(t,n){return this.cr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(t){this.persistence=t,this.Nr=new pl(n=>Yy(n),Xy),this.lastRemoteSnapshotVersion=yt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new sv,this.targetCount=0,this.kr=tl.Bn()}forEachTarget(t,n){return this.Nr.forEach((i,r)=>n(r)),Y.resolve()}getLastRemoteSnapshotVersion(t){return Y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Y.resolve(this.Lr)}allocateTargetId(t){return this.highestTargetId=this.kr.next(),Y.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),Y.resolve()}Kn(t){this.Nr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.kr=new tl(n),this.highestTargetId=n),t.sequenceNumber>this.Lr&&(this.Lr=t.sequenceNumber)}addTargetData(t,n){return this.Kn(n),this.targetCount+=1,Y.resolve()}updateTargetData(t,n){return this.Kn(n),Y.resolve()}removeTargetData(t,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Y.resolve()}removeTargets(t,n,i){let r=0;const s=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&i.get(l.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,l.targetId)),r++)}),Y.waitFor(s).next(()=>r)}getTargetCount(t){return Y.resolve(this.targetCount)}getTargetData(t,n){const i=this.Nr.get(n)||null;return Y.resolve(i)}addMatchingKeys(t,n,i){return this.Br.Rr(n,i),Y.resolve()}removeMatchingKeys(t,n,i){this.Br.mr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(t,o))}),Y.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Br.gr(n),Y.resolve()}getMatchingKeysForTargetId(t,n){const i=this.Br.yr(n);return Y.resolve(i)}containsKey(t,n){return Y.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj{constructor(t,n){this.qr={},this.overlays={},this.Qr=new Gy(0),this.Kr=!1,this.Kr=!0,this.$r=new Fj,this.referenceDelegate=t(this),this.Ur=new Hj(this),this.indexManager=new Nj,this.remoteDocumentCache=function(r){return new Bj(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new Aj(n),this.Gr=new jj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new Vj,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.qr[t.toKey()];return i||(i=new zj(n,this.referenceDelegate),this.qr[t.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(t,n,i){rt("MemoryPersistence","Starting transaction:",t);const r=new $j(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(s=>this.referenceDelegate.jr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Hr(t,n){return Y.or(Object.values(this.qr).map(i=>()=>i.containsKey(t,n)))}}class $j extends kO{constructor(t){super(),this.currentSequenceNumber=t}}class ov{constructor(t){this.persistence=t,this.Jr=new sv,this.Yr=null}static Zr(t){return new ov(t)}get Xr(){if(this.Yr)return this.Yr;throw gt()}addReference(t,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),Y.resolve()}removeReference(t,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),Y.resolve()}markPotentiallyOrphaned(t,n){return this.Xr.add(n.toString()),Y.resolve()}removeTarget(t,n){this.Jr.gr(n.targetId).forEach(r=>this.Xr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(r=>{r.forEach(s=>this.Xr.add(s.toString()))}).next(()=>i.removeTargetData(t,n))}zr(){this.Yr=new Set}jr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Y.forEach(this.Xr,i=>{const r=at.fromPath(i);return this.ei(t,r).next(s=>{s||n.removeEntry(r,yt.min())})}).next(()=>(this.Yr=null,n.apply(t)))}updateLimboDocument(t,n){return this.ei(t,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(t){return 0}ei(t,n){return Y.or([()=>Y.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Hr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(t,n,i,r){this.targetId=t,this.fromCache=n,this.$i=i,this.Ui=r}static Wi(t,n){let i=At(),r=At();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new av(t,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return MN()?8:PO(tn())>0?6:4}()}initialize(t,n){this.Ji=t,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(t,n,i,r){const s={result:null};return this.Yi(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(t,n,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new qj;return this.Xi(t,n,o).next(l=>{if(s.result=l,this.zi)return this.es(t,n,o,l.size)})}).next(()=>s.result)}es(t,n,i,r){return i.documentReadCount<this.ji?(ac()<=Nt.DEBUG&&rt("QueryEngine","SDK will not create cache indexes for query:",pa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Y.resolve()):(ac()<=Nt.DEBUG&&rt("QueryEngine","Query:",pa(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(ac()<=Nt.DEBUG&&rt("QueryEngine","The SDK decides to create cache indexes for query:",pa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Oi(n))):Y.resolve())}Yi(t,n){if(Sw(n))return Y.resolve(null);let i=Oi(n);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Lf(n,null,"F"),i=Oi(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const o=At(...s);return this.Ji.getDocuments(t,o).next(l=>this.indexManager.getMinOffset(t,i).next(c=>{const h=this.ts(n,l);return this.ns(n,h,o,c.readTime)?this.Yi(t,Lf(n,null,"F")):this.rs(t,h,n,c)}))})))}Zi(t,n,i,r){return Sw(n)||r.isEqual(yt.min())?Y.resolve(null):this.Ji.getDocuments(t,i).next(s=>{const o=this.ts(n,s);return this.ns(n,o,i,r)?Y.resolve(null):(ac()<=Nt.DEBUG&&rt("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),pa(n)),this.rs(t,o,n,bO(r,-1)).next(l=>l))})}ts(t,n){let i=new Ue(Ek(t));return n.forEach((r,s)=>{Ep(t,s)&&(i=i.add(s))}),i}ns(t,n,i,r){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(t,n,i){return ac()<=Nt.DEBUG&&rt("QueryEngine","Using full collection scan to execute query:",pa(n)),this.Ji.getDocumentsMatchingQuery(t,n,gs.min(),i)}rs(t,n,i,r){return this.Ji.getDocumentsMatchingQuery(t,i,r).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(t,n,i,r){this.persistence=t,this.ss=n,this.serializer=r,this.os=new le(Ft),this._s=new pl(s=>Yy(s),Xy),this.us=new Map,this.cs=t.getRemoteDocumentCache(),this.Ur=t.getTargetCache(),this.Gr=t.getBundleCache(),this.ls(i)}ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Oj(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.os))}}function Zj(e,t,n,i){return new Kj(e,t,n,i)}async function $k(e,t){const n=vt(e);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.ls(t),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],l=[];let c=At();for(const h of r){o.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}for(const h of s){l.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}return n.localDocuments.getDocuments(i,c).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:l}))})})}function Qj(e,t){const n=vt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,c,h,p){const g=h.batch,y=g.keys();let x=Y.resolve();return y.forEach(T=>{x=x.next(()=>p.getEntry(c,T)).next(S=>{const k=h.docVersions.get(T);Ht(k!==null),S.version.compareTo(k)<0&&(g.applyToRemoteDocument(S,h),S.isValidDocument()&&(S.setReadTime(h.commitVersion),p.addEntry(S)))})}),x.next(()=>l.mutationQueue.removeMutationBatch(c,g))}(n,i,t,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let c=At();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(c=c.add(l.batch.mutations[h].key));return c}(t))).next(()=>n.localDocuments.getDocuments(i,r))})}function qk(e){const t=vt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Ur.getLastRemoteSnapshotVersion(n))}function Yj(e,t){const n=vt(e),i=t.snapshotVersion;let r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;const l=[];t.targetChanges.forEach((p,g)=>{const y=r.get(g);if(!y)return;l.push(n.Ur.removeMatchingKeys(s,p.removedDocuments,g).next(()=>n.Ur.addMatchingKeys(s,p.addedDocuments,g)));let x=y.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(g)!==null?x=x.withResumeToken(We.EMPTY_BYTE_STRING,yt.min()).withLastLimboFreeSnapshotVersion(yt.min()):p.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(p.resumeToken,i)),r=r.insert(g,x),function(S,k,P){return S.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(y,x,p)&&l.push(n.Ur.updateTargetData(s,x))});let c=wr(),h=At();if(t.documentUpdates.forEach(p=>{t.resolvedLimboDocuments.has(p)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,p))}),l.push(Xj(s,o,t.documentUpdates).next(p=>{c=p.Ps,h=p.Is})),!i.isEqual(yt.min())){const p=n.Ur.getLastRemoteSnapshotVersion(s).next(g=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,i));l.push(p)}return Y.waitFor(l).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,h)).next(()=>c)}).then(s=>(n.os=r,s))}function Xj(e,t,n){let i=At(),r=At();return n.forEach(s=>i=i.add(s)),t.getEntries(e,i).next(s=>{let o=wr();return n.forEach((l,c)=>{const h=s.get(l);c.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(l)),c.isNoDocument()&&c.version.isEqual(yt.min())?(t.removeEntry(l,c.readTime),o=o.insert(l,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(c),o=o.insert(l,c)):rt("LocalStore","Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",c.version)}),{Ps:o,Is:r}})}function Jj(e,t){const n=vt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function tV(e,t){const n=vt(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Ur.getTargetData(i,t).next(s=>s?(r=s,Y.resolve(r)):n.Ur.allocateTargetId(i).next(o=>(r=new Xr(t,o,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(t,i.targetId)),i})}async function p_(e,t,n){const i=vt(e),r=i.os.get(t),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!qu(o))throw o;rt("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}i.os=i.os.remove(t),i._s.delete(r.target)}function Ow(e,t,n){const i=vt(e);let r=yt.min(),s=At();return i.persistence.runTransaction("Execute query","readwrite",o=>function(c,h,p){const g=vt(c),y=g._s.get(p);return y!==void 0?Y.resolve(g.os.get(y)):g.Ur.getTargetData(h,p)}(i,o,Oi(t)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(o,l.targetId).next(c=>{s=c})}).next(()=>i.ss.getDocumentsMatchingQuery(o,t,n?r:yt.min(),n?s:At())).next(l=>(eV(i,$O(t),l),{documents:l,Ts:s})))}function eV(e,t,n){let i=e.us.get(t)||yt.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),e.us.set(t,i)}class jw{constructor(){this.activeTargetIds=YO()}fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Vs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class nV{constructor(){this.so=new jw,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.so.fs(t),this.oo[t]||"not-current"}updateQueryState(t,n,i){this.oo[t]=n}removeLocalQueryTarget(t){this.so.gs(t)}isLocalQueryTarget(t){return this.so.activeTargetIds.has(t)}clearQueryState(t){delete this.oo[t]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(t){return this.so.activeTargetIds.has(t)}start(){return this.so=new jw,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{_o(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(t){this.ho.push(t)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){rt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ho)t(0)}lo(){rt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ho)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sd=null;function Dm(){return sd===null?sd=function(){return 268435456+Math.round(2147483648*Math.random())}():sd++,"0x"+sd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(t){this.Io=t.Io,this.To=t.To}Eo(t){this.Ao=t}Ro(t){this.Vo=t}mo(t){this.fo=t}onMessage(t){this.po=t}close(){this.To()}send(t){this.Io(t)}yo(){this.Ao()}wo(){this.Vo()}So(t){this.fo(t)}bo(t){this.po(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ge="WebChannelConnection";class oV extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${r}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Fo(){return!1}Mo(n,i,r,s,o){const l=Dm(),c=this.xo(n,i.toUriEncodedString());rt("RestConnection",`Sending RPC '${n}' ${l}:`,c,r);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,s,o),this.No(n,c,h,r).then(p=>(rt("RestConnection",`Received RPC '${n}' ${l}: `,p),p),p=>{throw Qa("RestConnection",`RPC '${n}' ${l} failed with error: `,p,"url: ",c,"request:",r),p})}Lo(n,i,r,s,o,l){return this.Mo(n,i,r,s,o)}Oo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+dl}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>n[o]=s),r&&r.headers.forEach((s,o)=>n[o]=s)}xo(n,i){const r=rV[n];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}No(t,n,i,r){const s=Dm();return new Promise((o,l)=>{const c=new ok;c.setWithCredentials(!0),c.listenOnce(ak.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case zd.NO_ERROR:const p=c.getResponseJson();rt(Ge,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(p)),o(p);break;case zd.TIMEOUT:rt(Ge,`RPC '${t}' ${s} timed out`),l(new nt(Z.DEADLINE_EXCEEDED,"Request time out"));break;case zd.HTTP_ERROR:const g=c.getStatus();if(rt(Ge,`RPC '${t}' ${s} failed with status:`,g,"response text:",c.getResponseText()),g>0){let y=c.getResponseJson();Array.isArray(y)&&(y=y[0]);const x=y==null?void 0:y.error;if(x&&x.status&&x.message){const T=function(k){const P=k.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(P)>=0?P:Z.UNKNOWN}(x.status);l(new nt(T,x.message))}else l(new nt(Z.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new nt(Z.UNAVAILABLE,"Connection failed."));break;default:gt()}}finally{rt(Ge,`RPC '${t}' ${s} completed.`)}});const h=JSON.stringify(r);rt(Ge,`RPC '${t}' ${s} sending request:`,r),c.send(n,"POST",h,i,15)})}Bo(t,n,i){const r=Dm(),s=[this.Do,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=uk(),l=ck(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,i),c.encodeInitMessageHeaders=!0;const p=s.join("");rt(Ge,`Creating RPC '${t}' stream ${r}: ${p}`,c);const g=o.createWebChannel(p,c);let y=!1,x=!1;const T=new sV({Io:k=>{x?rt(Ge,`Not sending because RPC '${t}' stream ${r} is closed:`,k):(y||(rt(Ge,`Opening RPC '${t}' stream ${r} transport.`),g.open(),y=!0),rt(Ge,`RPC '${t}' stream ${r} sending:`,k),g.send(k))},To:()=>g.close()}),S=(k,P,I)=>{k.listen(P,R=>{try{I(R)}catch(V){setTimeout(()=>{throw V},0)}})};return S(g,wc.EventType.OPEN,()=>{x||(rt(Ge,`RPC '${t}' stream ${r} transport opened.`),T.yo())}),S(g,wc.EventType.CLOSE,()=>{x||(x=!0,rt(Ge,`RPC '${t}' stream ${r} transport closed`),T.So())}),S(g,wc.EventType.ERROR,k=>{x||(x=!0,Qa(Ge,`RPC '${t}' stream ${r} transport errored:`,k),T.So(new nt(Z.UNAVAILABLE,"The operation could not be completed")))}),S(g,wc.EventType.MESSAGE,k=>{var P;if(!x){const I=k.data[0];Ht(!!I);const R=I,V=R.error||((P=R[0])===null||P===void 0?void 0:P.error);if(V){rt(Ge,`RPC '${t}' stream ${r} received error:`,V);const B=V.status;let H=function(A){const D=we[A];if(D!==void 0)return Dk(D)}(B),N=V.message;H===void 0&&(H=Z.INTERNAL,N="Unknown error status: "+B+" with message "+V.message),x=!0,T.So(new nt(H,N)),g.close()}else rt(Ge,`RPC '${t}' stream ${r} received:`,I),T.bo(I)}}),S(l,lk.STAT_EVENT,k=>{k.stat===r_.PROXY?rt(Ge,`RPC '${t}' stream ${r} detected buffering proxy`):k.stat===r_.NOPROXY&&rt(Ge,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{T.wo()},0),T}}function Om(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ip(e){return new gj(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(t,n,i=1e3,r=1.5,s=6e4){this.ui=t,this.timerId=n,this.ko=i,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(t){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,n-i);r>0&&rt("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),t())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(t,n,i,r,s,o,l,c){this.ui=t,this.Ho=i,this.Jo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Gk(t,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(t){this.u_(),this.stream.send(t)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(t,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,t!==4?this.t_.reset():n&&n.code===Z.RESOURCE_EXHAUSTED?(xr(n.toString()),xr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.mo(n)}l_(){}auth(){this.state=1;const t=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===n&&this.P_(i,r)},i=>{t(()=>{const r=new nt(Z.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(t,n){const i=this.h_(this.Yo);this.stream=this.T_(t,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(t){return rt("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}h_(t){return n=>{this.ui.enqueueAndForget(()=>this.Yo===t?n():(rt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class aV extends Kk{constructor(t,n,i,r,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}T_(t,n){return this.connection.Bo("Listen",t,n)}E_(t){return this.onNext(t)}onNext(t){this.t_.reset();const n=vj(this.serializer,t),i=function(s){if(!("targetChange"in s))return yt.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?yt.min():o.readTime?ji(o.readTime):yt.min()}(t);return this.listener.d_(n,i)}A_(t){const n={};n.database=f_(this.serializer),n.addTarget=function(s,o){let l;const c=o.target;if(l=l_(c)?{documents:bj(s,c)}:{query:Tj(s,c)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=Vk(s,o.resumeToken);const h=u_(s,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(yt.min())>0){l.readTime=Of(s,o.snapshotVersion.toTimestamp());const h=u_(s,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,t);const i=Sj(this.serializer,t);i&&(n.labels=i),this.a_(n)}R_(t){const n={};n.database=f_(this.serializer),n.removeTarget=t,this.a_(n)}}class lV extends Kk{constructor(t,n,i,r,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(t,n){return this.connection.Bo("Write",t,n)}E_(t){return Ht(!!t.streamToken),this.lastStreamToken=t.streamToken,Ht(!t.writeResults||t.writeResults.length===0),this.listener.f_()}onNext(t){Ht(!!t.streamToken),this.lastStreamToken=t.streamToken,this.t_.reset();const n=wj(t.writeResults,t.commitTime),i=ji(t.commitTime);return this.listener.g_(i,n)}p_(){const t={};t.database=f_(this.serializer),this.a_(t)}m_(t){const n={streamToken:this.lastStreamToken,writes:t.map(i=>xj(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV extends class{}{constructor(t,n,i,r){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new nt(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(t,n,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(t,h_(n,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new nt(Z.UNKNOWN,s.toString())})}Lo(t,n,i,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(t,h_(n,i),r,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new nt(Z.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class uV{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(t){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.C_("Offline")))}set(t){this.x_(),this.S_=0,t==="Online"&&(this.D_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}F_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(xr(n),this.D_=!1):rt("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(t,n,i,r,s){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{i.enqueueAndForget(async()=>{Ro(this)&&(rt("RemoteStore","Restarting streams for network reachability change."),await async function(c){const h=vt(c);h.L_.add(4),await Zu(h),h.q_.set("Unknown"),h.L_.delete(4),await Cp(h)}(this))})}),this.q_=new uV(i,r)}}async function Cp(e){if(Ro(e))for(const t of e.B_)await t(!0)}async function Zu(e){for(const t of e.B_)await t(!1)}function Zk(e,t){const n=vt(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),hv(n)?uv(n):ml(n).r_()&&cv(n,t))}function lv(e,t){const n=vt(e),i=ml(n);n.N_.delete(t),i.r_()&&Qk(n,t),n.N_.size===0&&(i.r_()?i.o_():Ro(n)&&n.q_.set("Unknown"))}function cv(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(yt.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}ml(e).A_(t)}function Qk(e,t){e.Q_.xe(t),ml(e).R_(t)}function uv(e){e.Q_=new dj({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),ml(e).start(),e.q_.v_()}function hv(e){return Ro(e)&&!ml(e).n_()&&e.N_.size>0}function Ro(e){return vt(e).L_.size===0}function Yk(e){e.Q_=void 0}async function dV(e){e.q_.set("Online")}async function fV(e){e.N_.forEach((t,n)=>{cv(e,t)})}async function pV(e,t){Yk(e),hv(e)?(e.q_.M_(t),uv(e)):e.q_.set("Unknown")}async function mV(e,t,n){if(e.q_.set("Online"),t instanceof jk&&t.state===2&&t.cause)try{await async function(r,s){const o=s.cause;for(const l of s.targetIds)r.N_.has(l)&&(await r.remoteSyncer.rejectListen(l,o),r.N_.delete(l),r.Q_.removeTarget(l))}(e,t)}catch(i){rt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),await jf(e,i)}else if(t instanceof Hd?e.Q_.Ke(t):t instanceof Ok?e.Q_.He(t):e.Q_.We(t),!n.isEqual(yt.min()))try{const i=await qk(e.localStore);n.compareTo(i)>=0&&await function(s,o){const l=s.Q_.rt(o);return l.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const p=s.N_.get(h);p&&s.N_.set(h,p.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,h)=>{const p=s.N_.get(c);if(!p)return;s.N_.set(c,p.withResumeToken(We.EMPTY_BYTE_STRING,p.snapshotVersion)),Qk(s,c);const g=new Xr(p.target,c,h,p.sequenceNumber);cv(s,g)}),s.remoteSyncer.applyRemoteEvent(l)}(e,n)}catch(i){rt("RemoteStore","Failed to raise snapshot:",i),await jf(e,i)}}async function jf(e,t,n){if(!qu(t))throw t;e.L_.add(1),await Zu(e),e.q_.set("Offline"),n||(n=()=>qk(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{rt("RemoteStore","Retrying IndexedDB access"),await n(),e.L_.delete(1),await Cp(e)})}function Xk(e,t){return t().catch(n=>jf(e,n,t))}async function Ap(e){const t=vt(e),n=ys(t);let i=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;gV(t);)try{const r=await Jj(t.localStore,i);if(r===null){t.O_.length===0&&n.o_();break}i=r.batchId,_V(t,r)}catch(r){await jf(t,r)}Jk(t)&&tP(t)}function gV(e){return Ro(e)&&e.O_.length<10}function _V(e,t){e.O_.push(t);const n=ys(e);n.r_()&&n.V_&&n.m_(t.mutations)}function Jk(e){return Ro(e)&&!ys(e).n_()&&e.O_.length>0}function tP(e){ys(e).start()}async function yV(e){ys(e).p_()}async function vV(e){const t=ys(e);for(const n of e.O_)t.m_(n.mutations)}async function xV(e,t,n){const i=e.O_.shift(),r=nv.from(i,t,n);await Xk(e,()=>e.remoteSyncer.applySuccessfulWrite(r)),await Ap(e)}async function wV(e,t){t&&ys(e).V_&&await async function(i,r){if(function(o){return cj(o)&&o!==Z.ABORTED}(r.code)){const s=i.O_.shift();ys(i).s_(),await Xk(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Ap(i)}}(e,t),Jk(e)&&tP(e)}async function Fw(e,t){const n=vt(e);n.asyncQueue.verifyOperationInProgress(),rt("RemoteStore","RemoteStore received new credentials");const i=Ro(n);n.L_.add(3),await Zu(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),await Cp(n)}async function bV(e,t){const n=vt(e);t?(n.L_.delete(2),await Cp(n)):t||(n.L_.add(2),await Zu(n),n.q_.set("Unknown"))}function ml(e){return e.K_||(e.K_=function(n,i,r){const s=vt(n);return s.w_(),new aV(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(e.datastore,e.asyncQueue,{Eo:dV.bind(null,e),Ro:fV.bind(null,e),mo:pV.bind(null,e),d_:mV.bind(null,e)}),e.B_.push(async t=>{t?(e.K_.s_(),hv(e)?uv(e):e.q_.set("Unknown")):(await e.K_.stop(),Yk(e))})),e.K_}function ys(e){return e.U_||(e.U_=function(n,i,r){const s=vt(n);return s.w_(),new lV(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:yV.bind(null,e),mo:wV.bind(null,e),f_:vV.bind(null,e),g_:xV.bind(null,e)}),e.B_.push(async t=>{t?(e.U_.s_(),await Ap(e)):(await e.U_.stop(),e.O_.length>0&&(rt("RemoteStore",`Stopping write stream with ${e.O_.length} pending writes`),e.O_=[]))})),e.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(t,n,i,r,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new fr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,r,s){const o=Date.now()+i,l=new dv(t,n,o,r,s);return l.start(i),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new nt(Z.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fv(e,t){if(xr("AsyncQueue",`${t}: ${e}`),qu(e))return new nt(Z.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(t){this.comparator=t?(n,i)=>t(n,i)||at.comparator(n.key,i.key):(n,i)=>at.comparator(n.key,i.key),this.keyedMap=bc(),this.sortedSet=new le(this.comparator)}static emptySet(t){return new Fa(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Fa)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new Fa;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(){this.W_=new le(at.comparator)}track(t){const n=t.doc.key,i=this.W_.get(n);i?t.type!==0&&i.type===3?this.W_=this.W_.insert(n,t):t.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.W_=this.W_.remove(n):t.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:t.doc}):gt():this.W_=this.W_.insert(n,t)}G_(){const t=[];return this.W_.inorderTraversal((n,i)=>{t.push(i)}),t}}class el{constructor(t,n,i,r,s,o,l,c,h){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(t,n,i,r,s){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new el(t,n,Fa.emptySet(n),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Tp(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TV{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(t=>t.J_())}}class EV{constructor(){this.queries=Bw(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const r=vt(n),s=r.queries;r.queries=Bw(),s.forEach((o,l)=>{for(const c of l.j_)c.onError(i)})})(this,new nt(Z.ABORTED,"Firestore shutting down"))}}function Bw(){return new pl(e=>Tk(e),Tp)}async function eP(e,t){const n=vt(e);let i=3;const r=t.query;let s=n.queries.get(r);s?!s.H_()&&t.J_()&&(i=2):(s=new TV,i=t.J_()?0:1);try{switch(i){case 0:s.z_=await n.onListen(r,!0);break;case 1:s.z_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const l=fv(o,`Initialization of query '${pa(t.query)}' failed`);return void t.onError(l)}n.queries.set(r,s),s.j_.push(t),t.Z_(n.onlineState),s.z_&&t.X_(s.z_)&&pv(n)}async function nP(e,t){const n=vt(e),i=t.query;let r=3;const s=n.queries.get(i);if(s){const o=s.j_.indexOf(t);o>=0&&(s.j_.splice(o,1),s.j_.length===0?r=t.J_()?0:1:!s.H_()&&t.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function SV(e,t){const n=vt(e);let i=!1;for(const r of t){const s=r.query,o=n.queries.get(s);if(o){for(const l of o.j_)l.X_(r)&&(i=!0);o.z_=r}}i&&pv(n)}function kV(e,t,n){const i=vt(e),r=i.queries.get(t);if(r)for(const s of r.j_)s.onError(n);i.queries.delete(t)}function pv(e){e.Y_.forEach(t=>{t.next()})}var m_,Uw;(Uw=m_||(m_={})).ea="default",Uw.Cache="cache";class iP{constructor(t,n,i){this.query=t,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)r.type!==3&&i.push(r);t=new el(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.na?this.ia(t)&&(this.ta.next(t),n=!0):this.sa(t,this.onlineState)&&(this.oa(t),n=!0),this.ra=t,n}onError(t){this.ta.error(t)}Z_(t){this.onlineState=t;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,t)&&(this.oa(this.ra),n=!0),n}sa(t,n){if(!t.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}ia(t){if(t.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(t){t=el.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.na=!0,this.ta.next(t)}J_(){return this.options.source!==m_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(t){this.key=t}}class sP{constructor(t){this.key=t}}class PV{constructor(t,n){this.query=t,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=At(),this.mutatedKeys=At(),this.Aa=Ek(t),this.Ra=new Fa(this.Aa)}get Va(){return this.Ta}ma(t,n){const i=n?n.fa:new zw,r=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=r,l=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((p,g)=>{const y=r.get(p),x=Ep(this.query,g)?g:null,T=!!y&&this.mutatedKeys.has(y.key),S=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let k=!1;y&&x?y.data.isEqual(x.data)?T!==S&&(i.track({type:3,doc:x}),k=!0):this.ga(y,x)||(i.track({type:2,doc:x}),k=!0,(c&&this.Aa(x,c)>0||h&&this.Aa(x,h)<0)&&(l=!0)):!y&&x?(i.track({type:0,doc:x}),k=!0):y&&!x&&(i.track({type:1,doc:y}),k=!0,(c||h)&&(l=!0)),k&&(x?(o=o.add(x),s=S?s.add(p):s.delete(p)):(o=o.delete(p),s=s.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),s=s.delete(p.key),i.track({type:1,doc:p})}return{Ra:o,fa:i,ns:l,mutatedKeys:s}}ga(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,r){const s=this.Ra;this.Ra=t.Ra,this.mutatedKeys=t.mutatedKeys;const o=t.fa.G_();o.sort((p,g)=>function(x,T){const S=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gt()}};return S(x)-S(T)}(p.type,g.type)||this.Aa(p.doc,g.doc)),this.pa(i),r=r!=null&&r;const l=n&&!r?this.ya():[],c=this.da.size===0&&this.current&&!r?1:0,h=c!==this.Ea;return this.Ea=c,o.length!==0||h?{snapshot:new el(this.query,t.Ra,s,o,t.mutatedKeys,c===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new zw,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(t){return!this.Ta.has(t)&&!!this.Ra.has(t)&&!this.Ra.get(t).hasLocalMutations}pa(t){t&&(t.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=t.current)}ya(){if(!this.current)return[];const t=this.da;this.da=At(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return t.forEach(i=>{this.da.has(i)||n.push(new sP(i))}),this.da.forEach(i=>{t.has(i)||n.push(new rP(i))}),n}ba(t){this.Ta=t.Ts,this.da=At();const n=this.ma(t.documents);return this.applyChanges(n,!0)}Da(){return el.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class IV{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class CV{constructor(t){this.key=t,this.va=!1}}class AV{constructor(t,n,i,r,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new pl(l=>Tk(l),Tp),this.Ma=new Map,this.xa=new Set,this.Oa=new le(at.comparator),this.Na=new Map,this.La=new sv,this.Ba={},this.ka=new Map,this.qa=tl.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function RV(e,t,n=!0){const i=hP(e);let r;const s=i.Fa.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Da()):r=await oP(i,t,n,!0),r}async function NV(e,t){const n=hP(e);await oP(n,t,!0,!1)}async function oP(e,t,n,i){const r=await tV(e.localStore,Oi(t)),s=r.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let l;return i&&(l=await LV(e,t,s,o==="current",r.resumeToken)),e.isPrimaryClient&&n&&Zk(e.remoteStore,r),l}async function LV(e,t,n,i,r){e.Ka=(g,y,x)=>async function(S,k,P,I){let R=k.view.ma(P);R.ns&&(R=await Ow(S.localStore,k.query,!1).then(({documents:N})=>k.view.ma(N,R)));const V=I&&I.targetChanges.get(k.targetId),B=I&&I.targetMismatches.get(k.targetId)!=null,H=k.view.applyChanges(R,S.isPrimaryClient,V,B);return Ww(S,k.targetId,H.wa),H.snapshot}(e,g,y,x);const s=await Ow(e.localStore,t,!0),o=new PV(t,s.Ts),l=o.ma(s.documents),c=Ku.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",r),h=o.applyChanges(l,e.isPrimaryClient,c);Ww(e,n,h.wa);const p=new IV(t,n,o);return e.Fa.set(t,p),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),h.snapshot}async function MV(e,t,n){const i=vt(e),r=i.Fa.get(t),s=i.Ma.get(r.targetId);if(s.length>1)return i.Ma.set(r.targetId,s.filter(o=>!Tp(o,t))),void i.Fa.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await p_(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&lv(i.remoteStore,r.targetId),g_(i,r.targetId)}).catch($u)):(g_(i,r.targetId),await p_(i.localStore,r.targetId,!0))}async function DV(e,t){const n=vt(e),i=n.Fa.get(t),r=n.Ma.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),lv(n.remoteStore,i.targetId))}async function OV(e,t,n){const i=HV(e);try{const r=await function(o,l){const c=vt(o),h=Se.now(),p=l.reduce((x,T)=>x.add(T.key),At());let g,y;return c.persistence.runTransaction("Locally write mutations","readwrite",x=>{let T=wr(),S=At();return c.cs.getEntries(x,p).next(k=>{T=k,T.forEach((P,I)=>{I.isValidDocument()||(S=S.add(P))})}).next(()=>c.localDocuments.getOverlayedDocuments(x,T)).next(k=>{g=k;const P=[];for(const I of l){const R=rj(I,g.get(I.key).overlayedDocument);R!=null&&P.push(new Ps(I.key,R,mk(R.value.mapValue),Zn.exists(!0)))}return c.mutationQueue.addMutationBatch(x,h,P,l)}).next(k=>{y=k;const P=k.applyToLocalDocumentSet(g,S);return c.documentOverlayCache.saveOverlays(x,k.batchId,P)})}).then(()=>({batchId:y.batchId,changes:kk(g)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(o,l,c){let h=o.Ba[o.currentUser.toKey()];h||(h=new le(Ft)),h=h.insert(l,c),o.Ba[o.currentUser.toKey()]=h}(i,r.batchId,n),await Qu(i,r.changes),await Ap(i.remoteStore)}catch(r){const s=fv(r,"Failed to persist write");n.reject(s)}}async function aP(e,t){const n=vt(e);try{const i=await Yj(n.localStore,t);t.targetChanges.forEach((r,s)=>{const o=n.Na.get(s);o&&(Ht(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.va=!0:r.modifiedDocuments.size>0?Ht(o.va):r.removedDocuments.size>0&&(Ht(o.va),o.va=!1))}),await Qu(n,i,t)}catch(i){await $u(i)}}function Hw(e,t,n){const i=vt(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Fa.forEach((s,o)=>{const l=o.view.Z_(t);l.snapshot&&r.push(l.snapshot)}),function(o,l){const c=vt(o);c.onlineState=l;let h=!1;c.queries.forEach((p,g)=>{for(const y of g.j_)y.Z_(l)&&(h=!0)}),h&&pv(c)}(i.eventManager,t),r.length&&i.Ca.d_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function jV(e,t,n){const i=vt(e);i.sharedClientState.updateQueryState(t,"rejected",n);const r=i.Na.get(t),s=r&&r.key;if(s){let o=new le(at.comparator);o=o.insert(s,Ye.newNoDocument(s,yt.min()));const l=At().add(s),c=new Pp(yt.min(),new Map,new le(Ft),o,l);await aP(i,c),i.Oa=i.Oa.remove(s),i.Na.delete(t),mv(i)}else await p_(i.localStore,t,!1).then(()=>g_(i,t,n)).catch($u)}async function VV(e,t){const n=vt(e),i=t.batch.batchId;try{const r=await Qj(n.localStore,t);cP(n,i,null),lP(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Qu(n,r)}catch(r){await $u(r)}}async function FV(e,t,n){const i=vt(e);try{const r=await function(o,l){const c=vt(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return c.mutationQueue.lookupMutationBatch(h,l).next(g=>(Ht(g!==null),p=g.keys(),c.mutationQueue.removeMutationBatch(h,g))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,p,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>c.localDocuments.getDocuments(h,p))})}(i.localStore,t);cP(i,t,n),lP(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await Qu(i,r)}catch(r){await $u(r)}}function lP(e,t){(e.ka.get(t)||[]).forEach(n=>{n.resolve()}),e.ka.delete(t)}function cP(e,t,n){const i=vt(e);let r=i.Ba[i.currentUser.toKey()];if(r){const s=r.get(t);s&&(n?s.reject(n):s.resolve(),r=r.remove(t)),i.Ba[i.currentUser.toKey()]=r}}function g_(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.Ma.get(t))e.Fa.delete(i),n&&e.Ca.$a(i,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach(i=>{e.La.containsKey(i)||uP(e,i)})}function uP(e,t){e.xa.delete(t.path.canonicalString());const n=e.Oa.get(t);n!==null&&(lv(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),mv(e))}function Ww(e,t,n){for(const i of n)i instanceof rP?(e.La.addReference(i.key,t),zV(e,i)):i instanceof sP?(rt("SyncEngine","Document no longer in limbo: "+i.key),e.La.removeReference(i.key,t),e.La.containsKey(i.key)||uP(e,i.key)):gt()}function zV(e,t){const n=t.key,i=n.path.canonicalString();e.Oa.get(n)||e.xa.has(i)||(rt("SyncEngine","New document in limbo: "+n),e.xa.add(i),mv(e))}function mv(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const n=new at(Yt.fromString(t)),i=e.qa.next();e.Na.set(i,new CV(n)),e.Oa=e.Oa.insert(n,i),Zk(e.remoteStore,new Xr(Oi(Jy(n.path)),i,"TargetPurposeLimboResolution",Gy.oe))}}async function Qu(e,t,n){const i=vt(e),r=[],s=[],o=[];i.Fa.isEmpty()||(i.Fa.forEach((l,c)=>{o.push(i.Ka(c,t,n).then(h=>{var p;if((h||n)&&i.isPrimaryClient){const g=h?!h.fromCache:(p=n==null?void 0:n.targetChanges.get(c.targetId))===null||p===void 0?void 0:p.current;i.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(h){r.push(h);const g=av.Wi(c.targetId,h);s.push(g)}}))}),await Promise.all(o),i.Ca.d_(r),await async function(c,h){const p=vt(c);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>Y.forEach(h,y=>Y.forEach(y.$i,x=>p.persistence.referenceDelegate.addReference(g,y.targetId,x)).next(()=>Y.forEach(y.Ui,x=>p.persistence.referenceDelegate.removeReference(g,y.targetId,x)))))}catch(g){if(!qu(g))throw g;rt("LocalStore","Failed to update sequence numbers: "+g)}for(const g of h){const y=g.targetId;if(!g.fromCache){const x=p.os.get(y),T=x.snapshotVersion,S=x.withLastLimboFreeSnapshotVersion(T);p.os=p.os.insert(y,S)}}}(i.localStore,s))}async function BV(e,t){const n=vt(e);if(!n.currentUser.isEqual(t)){rt("SyncEngine","User change. New user:",t.toKey());const i=await $k(n.localStore,t);n.currentUser=t,function(s,o){s.ka.forEach(l=>{l.forEach(c=>{c.reject(new nt(Z.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await Qu(n,i.hs)}}function UV(e,t){const n=vt(e),i=n.Na.get(t);if(i&&i.va)return At().add(i.key);{let r=At();const s=n.Ma.get(t);if(!s)return r;for(const o of s){const l=n.Fa.get(o);r=r.unionWith(l.view.Va)}return r}}function hP(e){const t=vt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=aP.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=UV.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=jV.bind(null,t),t.Ca.d_=SV.bind(null,t.eventManager),t.Ca.$a=kV.bind(null,t.eventManager),t}function HV(e){const t=vt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=VV.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=FV.bind(null,t),t}class Vf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Ip(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),await this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)}ja(t,n){return null}Ha(t,n){return null}za(t){return Zj(this.persistence,new Gj,t.initialUser,this.serializer)}Ga(t){return new Wj(ov.Zr,this.serializer)}Wa(t){return new nV}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vf.provider={build:()=>new Vf};class __{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Hw(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=BV.bind(null,this.syncEngine),await bV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new EV}()}createDatastore(t){const n=Ip(t.databaseInfo.databaseId),i=function(s){return new oV(s)}(t.databaseInfo);return function(s,o,l,c){return new cV(s,o,l,c)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return function(i,r,s,o,l){return new hV(i,r,s,o,l)}(this.localStore,this.datastore,t.asyncQueue,n=>Hw(this.syncEngine,n,0),function(){return Vw.D()?new Vw:new iV}())}createSyncEngine(t,n){return function(r,s,o,l,c,h,p){const g=new AV(r,s,o,l,c,h);return p&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(r){const s=vt(r);rt("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Zu(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}__.provider={build:()=>new __};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ya(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ya(this.observer.error,t):xr("Uncaught Error in snapshot listener:",t.toString()))}Za(){this.muted=!0}Ya(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(t,n,i,r,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Ze.UNAUTHENTICATED,this.clientId=dk.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async o=>{rt("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(rt("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new fr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=fv(n,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function jm(e,t){e.asyncQueue.verifyOperationInProgress(),rt("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(async r=>{i.isEqual(r)||(await $k(t.localStore,r),i=r)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function $w(e,t){e.asyncQueue.verifyOperationInProgress();const n=await $V(e);rt("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(i=>Fw(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,r)=>Fw(t.remoteStore,r)),e._onlineComponents=t}async function $V(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){rt("FirestoreClient","Using user provided OfflineComponentProvider");try{await jm(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(r){return r.name==="FirebaseError"?r.code===Z.FAILED_PRECONDITION||r.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Qa("Error using user provided cache. Falling back to memory cache: "+n),await jm(e,new Vf)}}else rt("FirestoreClient","Using default OfflineComponentProvider"),await jm(e,new Vf);return e._offlineComponents}async function fP(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(rt("FirestoreClient","Using user provided OnlineComponentProvider"),await $w(e,e._uninitializedComponentsProvider._online)):(rt("FirestoreClient","Using default OnlineComponentProvider"),await $w(e,new __))),e._onlineComponents}function qV(e){return fP(e).then(t=>t.syncEngine)}async function pP(e){const t=await fP(e),n=t.eventManager;return n.onListen=RV.bind(null,t.syncEngine),n.onUnlisten=MV.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=NV.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=DV.bind(null,t.syncEngine),n}function GV(e,t,n={}){const i=new fr;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,l,c,h){const p=new dP({next:y=>{p.Za(),o.enqueueAndForget(()=>nP(s,g));const x=y.docs.has(l);!x&&y.fromCache?h.reject(new nt(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&y.fromCache&&c&&c.source==="server"?h.reject(new nt(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(y)},error:y=>h.reject(y)}),g=new iP(Jy(l.path),p,{includeMetadataChanges:!0,_a:!0});return eP(s,g)}(await pP(e),e.asyncQueue,t,n,i)),i.promise}function KV(e,t,n={}){const i=new fr;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,l,c,h){const p=new dP({next:y=>{p.Za(),o.enqueueAndForget(()=>nP(s,g)),y.fromCache&&c.source==="server"?h.reject(new nt(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(y)},error:y=>h.reject(y)}),g=new iP(l,p,{includeMetadataChanges:!0,_a:!0});return eP(s,g)}(await pP(e),e.asyncQueue,t,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mP(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gP(e,t,n){if(!n)throw new nt(Z.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function ZV(e,t,n,i){if(t===!0&&i===!0)throw new nt(Z.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Gw(e){if(!at.isDocumentKey(e))throw new nt(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Kw(e){if(at.isDocumentKey(e))throw new nt(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Rp(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":gt()}function yi(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new nt(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Rp(e);throw new nt(Z.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function QV(e,t){if(t<=0)throw new nt(Z.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(t){var n,i;if(t.host===void 0){if(t.ssl!==void 0)throw new nt(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new nt(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}ZV("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mP((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new nt(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new nt(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new nt(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Np{constructor(t,n,i,r){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zw({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new nt(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new nt(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zw(t),t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new fO;switch(i.type){case"firstParty":return new _O(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new nt(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=qw.get(n);i&&(rt("ComponentProvider","Removing Datastore"),qw.delete(n),i.terminate())}(this),Promise.resolve()}}function YV(e,t,n,i={}){var r;const s=(e=yi(e,Np))._getSettings(),o=`${t}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Qa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let l,c;if(typeof i.mockUserToken=="string")l=i.mockUserToken,c=Ze.MOCK_USER;else{l=xS(i.mockUserToken,(r=e._app)===null||r===void 0?void 0:r.options.projectId);const h=i.mockUserToken.sub||i.mockUserToken.user_id;if(!h)throw new nt(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Ze(h)}e._authCredentials=new pO(new hk(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Is(this.firestore,t,this._query)}}class ln{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hs(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ln(this.firestore,t,this._key)}}class hs extends Is{constructor(t,n,i){super(t,n,Jy(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ln(this.firestore,null,new at(t))}withConverter(t){return new hs(this.firestore,t,this._path)}}function Vm(e,t,...n){if(e=ne(e),gP("collection","path",t),e instanceof Np){const i=Yt.fromString(t,...n);return Kw(i),new hs(e,null,i)}{if(!(e instanceof ln||e instanceof hs))throw new nt(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(Yt.fromString(t,...n));return Kw(i),new hs(e.firestore,null,i)}}function ci(e,t,...n){if(e=ne(e),arguments.length===1&&(t=dk.newId()),gP("doc","path",t),e instanceof Np){const i=Yt.fromString(t,...n);return Gw(i),new ln(e,null,new at(i))}{if(!(e instanceof ln||e instanceof hs))throw new nt(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(Yt.fromString(t,...n));return Gw(i),new ln(e.firestore,e instanceof hs?e.converter:null,new at(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(t=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Gk(this,"async_queue_retry"),this.Vu=()=>{const i=Om();i&&rt("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=t;const n=Om();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.fu(),this.gu(t)}enterRestrictedMode(t){if(!this.Iu){this.Iu=!0,this.Au=t||!1;const n=Om();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(t){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new fr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Pu.push(t),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(t){if(!qu(t))throw t;rt("AsyncQueue","Operation failed with retryable error: "+t)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(t){const n=this.mu.then(()=>(this.du=!0,t().catch(i=>{this.Eu=i,this.du=!1;const r=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(i);throw xr("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(t,n,i){this.fu(),this.Ru.indexOf(t)>-1&&(n=0);const r=dv.createAndSchedule(this,t,n,i,s=>this.yu(s));return this.Tu.push(r),r}fu(){this.Eu&&gt()}verifyOperationInProgress(){}async wu(){let t;do t=this.mu,await t;while(t!==this.mu)}Su(t){for(const n of this.Tu)if(n.timerId===t)return!0;return!1}bu(t){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.wu()})}Du(t){this.Ru.push(t)}yu(t){const n=this.Tu.indexOf(t);this.Tu.splice(n,1)}}class No extends Np{constructor(t,n,i,r){super(t,n,i,r),this.type="firestore",this._queue=new Qw,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Qw(t),this._firestoreClient=void 0,await t}}}function XV(e,t){const n=typeof e=="object"?e:My(),i=typeof e=="string"?e:"(default)",r=yp(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=_S("firestore");s&&YV(r,...s)}return r}function gv(e){if(e._terminated)throw new nt(Z.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||JV(e),e._firestoreClient}function JV(e){var t,n,i;const r=e._freezeSettings(),s=function(l,c,h,p){return new AO(l,c,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,mP(p.experimentalLongPollingOptions),p.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,r);e._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(e._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),e._firestoreClient=new WV(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(t){this._byteString=t}static fromBase64String(t){try{return new nl(We.fromBase64String(t))}catch(n){throw new nt(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new nl(We.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new nt(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ze(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new nt(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new nt(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Ft(this._lat,t._lat)||Ft(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tF=/^__.*__$/;class eF{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new Ps(t,this.data,this.fieldMask,n,this.fieldTransforms):new Gu(t,this.data,n,this.fieldTransforms)}}class _P{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new Ps(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function yP(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gt()}}class xv{constructor(t,n,i,r,s,o){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(t){return new xv(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(t){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(t),r=this.Fu({path:i,xu:!1});return r.Ou(t),r}Nu(t){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(t),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(t){return this.Fu({path:void 0,xu:!0})}Bu(t){return Ff(t,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Ou(this.path.get(t))}Ou(t){if(t.length===0)throw this.Bu("Document fields must not be empty");if(yP(this.Cu)&&tF.test(t))throw this.Bu('Document fields cannot begin and end with "__"')}}class nF{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||Ip(t)}Qu(t,n,i,r=!1){return new xv({Cu:t,methodName:n,qu:i,path:ze.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Mp(e){const t=e._freezeSettings(),n=Ip(e._databaseId);return new nF(e._databaseId,!!t.ignoreUndefinedProperties,n)}function vP(e,t,n,i,r,s={}){const o=e.Qu(s.merge||s.mergeFields?2:0,t,n,r);wv("Data must be an object, but it was:",o,i);const l=xP(i,o);let c,h;if(s.merge)c=new Pn(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const p=[];for(const g of s.mergeFields){const y=y_(t,g,n);if(!o.contains(y))throw new nt(Z.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);bP(p,y)||p.push(y)}c=new Pn(p),h=o.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,h=o.fieldTransforms;return new eF(new mn(l),c,h)}class Dp extends _v{_toFieldTransform(t){if(t.Cu!==2)throw t.Cu===1?t.Bu(`${this._methodName}() can only appear at the top level of your update data`):t.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Dp}}function iF(e,t,n,i){const r=e.Qu(1,t,n);wv("Data must be an object, but it was:",r,i);const s=[],o=mn.empty();Ao(i,(c,h)=>{const p=bv(t,c,n);h=ne(h);const g=r.Nu(p);if(h instanceof Dp)s.push(p);else{const y=Yu(h,g);y!=null&&(s.push(p),o.set(p,y))}});const l=new Pn(s);return new _P(o,l,r.fieldTransforms)}function rF(e,t,n,i,r,s){const o=e.Qu(1,t,n),l=[y_(t,i,n)],c=[r];if(s.length%2!=0)throw new nt(Z.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)l.push(y_(t,s[y])),c.push(s[y+1]);const h=[],p=mn.empty();for(let y=l.length-1;y>=0;--y)if(!bP(h,l[y])){const x=l[y];let T=c[y];T=ne(T);const S=o.Nu(x);if(T instanceof Dp)h.push(x);else{const k=Yu(T,S);k!=null&&(h.push(x),p.set(x,k))}}const g=new Pn(h);return new _P(p,g,o.fieldTransforms)}function sF(e,t,n,i=!1){return Yu(n,e.Qu(i?4:3,t))}function Yu(e,t){if(wP(e=ne(e)))return wv("Unsupported field value:",t,e),xP(e,t);if(e instanceof _v)return function(i,r){if(!yP(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&t.Cu!==4)throw t.Bu("Nested arrays are not supported");return function(i,r){const s=[];let o=0;for(const l of i){let c=Yu(l,r.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(e,t)}return function(i,r){if((i=ne(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return XO(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=Se.fromDate(i);return{timestampValue:Of(r.serializer,s)}}if(i instanceof Se){const s=new Se(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Of(r.serializer,s)}}if(i instanceof yv)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof nl)return{bytesValue:Vk(r.serializer,i._byteString)};if(i instanceof ln){const s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:rv(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof vv)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw l.Bu("VectorValues must only contain numeric values.");return tv(l.serializer,c)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${Rp(i)}`)}(e,t)}function xP(e,t){const n={};return fk(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ao(e,(i,r)=>{const s=Yu(r,t.Mu(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function wP(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Se||e instanceof yv||e instanceof nl||e instanceof ln||e instanceof _v||e instanceof vv)}function wv(e,t,n){if(!wP(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=Rp(n);throw i==="an object"?t.Bu(e+" a custom object"):t.Bu(e+" "+i)}}function y_(e,t,n){if((t=ne(t))instanceof Lp)return t._internalPath;if(typeof t=="string")return bv(e,t);throw Ff("Field path arguments must be of type string or ",e,!1,void 0,n)}const oF=new RegExp("[~\\*/\\[\\]]");function bv(e,t,n){if(t.search(oF)>=0)throw Ff(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Lp(...t.split("."))._internalPath}catch{throw Ff(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Ff(e,t,n,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let l=`Function ${t}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${i}`),o&&(c+=` in document ${r}`),c+=")"),new nt(Z.INVALID_ARGUMENT,l+e+c)}function bP(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(t,n,i,r,s){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ln(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new aF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Op("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class aF extends TP{data(){return super.data()}}function Op(e,t){return typeof t=="string"?bv(e,t):t instanceof Lp?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lF(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new nt(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Tv{}class Ev extends Tv{}function Yw(e,t,...n){let i=[];t instanceof Tv&&i.push(t),i=i.concat(n),function(s){const o=s.filter(c=>c instanceof Sv).length,l=s.filter(c=>c instanceof jp).length;if(o>1||o>0&&l>0)throw new nt(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)e=r._apply(e);return e}class jp extends Ev{constructor(t,n,i){super(),this._field=t,this._op=n,this._value=i,this.type="where"}static _create(t,n,i){return new jp(t,n,i)}_apply(t){const n=this._parse(t);return EP(t._query,n),new Is(t.firestore,t.converter,c_(t._query,n))}_parse(t){const n=Mp(t.firestore);return function(s,o,l,c,h,p,g){let y;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new nt(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){e1(g,p);const x=[];for(const T of g)x.push(t1(c,s,T));y={arrayValue:{values:x}}}else y=t1(c,s,g)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||e1(g,p),y=sF(l,o,g,p==="in"||p==="not-in");return Ee.create(h,p,y)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function Xw(e,t,n){const i=t,r=Op("where",e);return jp._create(r,i,n)}class Sv extends Tv{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Sv(t,n)}_parse(t){const n=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:_i.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(r,s){let o=r;const l=s.getFlattenedFilters();for(const c of l)EP(o,c),o=c_(o,c)}(t._query,n),new Is(t.firestore,t.converter,c_(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class kv extends Ev{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new kv(t,n)}_apply(t){const n=function(r,s,o){if(r.startAt!==null)throw new nt(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new nt(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new bu(s,o)}(t._query,this._field,this._direction);return new Is(t.firestore,t.converter,function(r,s){const o=r.explicitOrderBy.concat([s]);return new fl(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(t._query,n))}}function Jw(e,t="asc"){const n=t,i=Op("orderBy",e);return kv._create(i,n)}class Pv extends Ev{constructor(t,n,i){super(),this.type=t,this._limit=n,this._limitType=i}static _create(t,n,i){return new Pv(t,n,i)}_apply(t){return new Is(t.firestore,t.converter,Lf(t._query,this._limit,this._limitType))}}function cF(e){return QV("limit",e),Pv._create("limit",e,"F")}function t1(e,t,n){if(typeof(n=ne(n))=="string"){if(n==="")throw new nt(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bk(t)&&n.indexOf("/")!==-1)throw new nt(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=t.path.child(Yt.fromString(n));if(!at.isDocumentKey(i))throw new nt(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return vw(e,new at(i))}if(n instanceof ln)return vw(e,n._key);throw new nt(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rp(n)}.`)}function e1(e,t){if(!Array.isArray(e)||e.length===0)throw new nt(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function EP(e,t){const n=function(r,s){for(const o of r)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(e.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new nt(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new nt(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class uF{convertValue(t,n="none"){switch(bo(t)){case 0:return null;case 1:return t.booleanValue;case 2:return me(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(wo(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw gt()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return Ao(t,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(t){var n,i,r;const s=(r=(i=(n=t.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>me(o.doubleValue));return new vv(s)}convertGeoPoint(t){return new yv(me(t.latitude),me(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":const i=Zy(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(vu(t));default:return null}}convertTimestamp(t){const n=_s(t);return new Se(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=Yt.fromString(t);Ht(Wk(i));const r=new xu(i.get(1),i.get(3)),s=new at(i.popFirst(5));return r.isEqual(n)||xr(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SP(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class kP extends TP{constructor(t,n,i,r,s,o){super(t,n,i,r,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Wd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(Op("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class Wd extends kP{data(t={}){return super.data(t)}}class hF{constructor(t,n,i,r){this._firestore=t,this._userDataWriter=n,this._snapshot=r,this.metadata=new Ec(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(i=>{t.call(n,new Wd(this._firestore,this._userDataWriter,i.key,i,new Ec(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new nt(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(l=>{const c=new Wd(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Ec(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const c=new Wd(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Ec(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,p=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),p=o.indexOf(l.doc.key)),{type:dF(l.type),doc:c,oldIndex:h,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function dF(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uc(e){e=yi(e,ln);const t=yi(e.firestore,No);return GV(gv(t),e._key).then(n=>mF(t,e,n))}class PP extends uF{constructor(t){super(),this.firestore=t}convertBytes(t){return new nl(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new ln(this.firestore,null,n)}}function n1(e){e=yi(e,Is);const t=yi(e.firestore,No),n=gv(t),i=new PP(t);return lF(e._query),KV(n,e._query).then(r=>new hF(t,i,e,r))}function od(e,t,n){e=yi(e,ln);const i=yi(e.firestore,No),r=SP(e.converter,t,n);return Vp(i,[vP(Mp(i),"setDoc",e._key,r,e.converter!==null,n).toMutation(e._key,Zn.none())])}function i1(e,t,n,...i){e=yi(e,ln);const r=yi(e.firestore,No),s=Mp(r);let o;return o=typeof(t=ne(t))=="string"||t instanceof Lp?rF(s,"updateDoc",e._key,t,n,i):iF(s,"updateDoc",e._key,t),Vp(r,[o.toMutation(e._key,Zn.exists(!0))])}function fF(e){return Vp(yi(e.firestore,No),[new ev(e._key,Zn.none())])}function pF(e,t){const n=yi(e.firestore,No),i=ci(e),r=SP(e.converter,t);return Vp(n,[vP(Mp(e.firestore),"addDoc",i._key,r,e.converter!==null,{}).toMutation(i._key,Zn.exists(!1))]).then(()=>i)}function Vp(e,t){return function(i,r){const s=new fr;return i.asyncQueue.enqueueAndForget(async()=>OV(await qV(i),r,s)),s.promise}(gv(e),t)}function mF(e,t,n){const i=n.docs.get(t._key),r=new PP(e);return new kP(e,r,t._key,i,new Ec(n.hasPendingWrites,n.fromCache),t.converter)}(function(t,n=!0){(function(r){dl=r})(Co),_o(new ms("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),l=new No(new mO(i.getProvider("auth-internal")),new vO(i.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new nt(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xu(h.options.projectId,p)}(o,r),o);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Mi(pw,"4.7.3",t),Mi(pw,"4.7.3","esm2017")})();var gF="firebase",_F="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mi(gF,_F,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP="firebasestorage.googleapis.com",CP="storageBucket",yF=2*60*1e3,vF=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe extends Fi{constructor(t,n,i=0){super(Fm(t),`Firebase Storage: ${n} (${Fm(t)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,fe.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return Fm(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var de;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(de||(de={}));function Fm(e){return"storage/"+e}function Iv(){const e="An unknown error occurred, please check the error payload for server response.";return new fe(de.UNKNOWN,e)}function xF(e){return new fe(de.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function wF(e){return new fe(de.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function bF(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new fe(de.UNAUTHENTICATED,e)}function TF(){return new fe(de.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function EF(e){return new fe(de.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function SF(){return new fe(de.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function kF(){return new fe(de.CANCELED,"User canceled the upload/download.")}function PF(e){return new fe(de.INVALID_URL,"Invalid URL '"+e+"'.")}function IF(e){return new fe(de.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function CF(){return new fe(de.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+CP+"' property when initializing the app?")}function AF(){return new fe(de.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function RF(){return new fe(de.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function NF(e){return new fe(de.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function v_(e){return new fe(de.INVALID_ARGUMENT,e)}function AP(){return new fe(de.APP_DELETED,"The Firebase app was deleted.")}function LF(e){return new fe(de.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Hc(e,t){return new fe(de.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function lc(e){throw new fe(de.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let i;try{i=In.makeFromUrl(t,n)}catch{return new In(t,"")}if(i.path==="")return i;throw IF(t)}static makeFromUrl(t,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function s(V){V.path.charAt(V.path.length-1)==="/"&&(V.path_=V.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+r+o,"i"),c={bucket:1,path:3};function h(V){V.path_=decodeURIComponent(V.path)}const p="v[A-Za-z0-9_]+",g=n.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",x=new RegExp(`^https?://${g}/${p}/b/${r}/o${y}`,"i"),T={bucket:1,path:3},S=n===IP?"(?:storage.googleapis.com|storage.cloud.google.com)":n,k="([^?#]*)",P=new RegExp(`^https?://${S}/${r}/${k}`,"i"),R=[{regex:l,indices:c,postModify:s},{regex:x,indices:T,postModify:h},{regex:P,indices:{bucket:1,path:2},postModify:h}];for(let V=0;V<R.length;V++){const B=R[V],H=B.regex.exec(t);if(H){const N=H[B.indices.bucket];let b=H[B.indices.path];b||(b=""),i=new In(N,b),B.postModify(i);break}}if(i==null)throw PF(t);return i}}class MF{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DF(e,t,n){let i=1,r=null,s=null,o=!1,l=0;function c(){return l===2}let h=!1;function p(...k){h||(h=!0,t.apply(null,k))}function g(k){r=setTimeout(()=>{r=null,e(x,c())},k)}function y(){s&&clearTimeout(s)}function x(k,...P){if(h){y();return}if(k){y(),p.call(null,k,...P);return}if(c()||o){y(),p.call(null,k,...P);return}i<64&&(i*=2);let R;l===1?(l=2,R=0):R=(i+Math.random())*1e3,g(R)}let T=!1;function S(k){T||(T=!0,y(),!h&&(r!==null?(k||(l=2),clearTimeout(r),g(0)):k||(l=1)))}return g(0),s=setTimeout(()=>{o=!0,S(!0)},n),S}function OF(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jF(e){return e!==void 0}function VF(e){return typeof e=="object"&&!Array.isArray(e)}function Cv(e){return typeof e=="string"||e instanceof String}function r1(e){return Av()&&e instanceof Blob}function Av(){return typeof Blob<"u"}function s1(e,t,n,i){if(i<t)throw v_(`Invalid value for '${e}'. Expected ${t} or greater.`);if(i>n)throw v_(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fp(e,t,n){let i=t;return n==null&&(i=`https://${t}`),`${n}://${i}/v0${e}`}function RP(e){const t=encodeURIComponent;let n="?";for(const i in e)if(e.hasOwnProperty(i)){const r=t(i)+"="+t(e[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var co;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(co||(co={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FF(e,t){const n=e>=500&&e<600,r=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||r||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zF{constructor(t,n,i,r,s,o,l,c,h,p,g,y=!0){this.url_=t,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=h,this.progressCallback_=p,this.connectionFactory_=g,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,T)=>{this.resolve_=x,this.reject_=T,this.start_()})}start_(){const t=(i,r)=>{if(r){i(!1,new ad(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=l=>{const c=l.loaded,h=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,h)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const l=s.getErrorCode()===co.NO_ERROR,c=s.getStatus();if(!l||FF(c,this.additionalRetryCodes_)&&this.retry){const p=s.getErrorCode()===co.ABORT;i(!1,new ad(!1,null,p));return}const h=this.successCodes_.indexOf(c)!==-1;i(!0,new ad(h,s))})},n=(i,r)=>{const s=this.resolve_,o=this.reject_,l=r.connection;if(r.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());jF(c)?s(c):s()}catch(c){o(c)}else if(l!==null){const c=Iv();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(r.canceled){const c=this.appDelete_?AP():kF();o(c)}else{const c=SF();o(c)}};this.canceled_?n(!1,new ad(!1,null,!0)):this.backoffId_=DF(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&OF(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ad{constructor(t,n,i){this.wasSuccessCode=t,this.connection=n,this.canceled=!!i}}function BF(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function UF(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function HF(e,t){t&&(e["X-Firebase-GMPID"]=t)}function WF(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function $F(e,t,n,i,r,s,o=!0){const l=RP(e.urlParams),c=e.url+l,h=Object.assign({},e.headers);return HF(h,t),BF(h,n),UF(h,s),WF(h,i),new zF(c,e.method,h,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,r,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qF(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function GF(...e){const t=qF();if(t!==void 0){const n=new t;for(let i=0;i<e.length;i++)n.append(e[i]);return n.getBlob()}else{if(Av())return new Blob(e);throw new fe(de.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function KF(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZF(e){if(typeof atob>"u")throw NF("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ri={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class zm{constructor(t,n){this.data=t,this.contentType=n||null}}function QF(e,t){switch(e){case Ri.RAW:return new zm(NP(t));case Ri.BASE64:case Ri.BASE64URL:return new zm(LP(e,t));case Ri.DATA_URL:return new zm(XF(t),JF(t))}throw Iv()}function NP(e){const t=[];for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);if(i<=127)t.push(i);else if(i<=2047)t.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=i,o=e.charCodeAt(++n);i=65536|(s&1023)<<10|o&1023,t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(t)}function YF(e){let t;try{t=decodeURIComponent(e)}catch{throw Hc(Ri.DATA_URL,"Malformed data URL.")}return NP(t)}function LP(e,t){switch(e){case Ri.BASE64:{const r=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(r||s)throw Hc(e,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Ri.BASE64URL:{const r=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(r||s)throw Hc(e,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=ZF(t)}catch(r){throw r.message.includes("polyfill")?r:Hc(e,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class MP{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw Hc(Ri.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=t4(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=t.substring(t.indexOf(",")+1)}}function XF(e){const t=new MP(e);return t.base64?LP(Ri.BASE64,t.rest):YF(t.rest)}function JF(e){return new MP(e).contentType}function t4(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(t,n){let i=0,r="";r1(t)?(this.data_=t,i=t.size,r=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(t,n){if(r1(this.data_)){const i=this.data_,r=KF(i,t,n);return r===null?null:new Kr(r)}else{const i=new Uint8Array(this.data_.buffer,t,n-t);return new Kr(i,!0)}}static getBlob(...t){if(Av()){const n=t.map(i=>i instanceof Kr?i.data_:i);return new Kr(GF.apply(null,n))}else{const n=t.map(o=>Cv(o)?QF(Ri.RAW,o).data:o.data_);let i=0;n.forEach(o=>{i+=o.byteLength});const r=new Uint8Array(i);let s=0;return n.forEach(o=>{for(let l=0;l<o.length;l++)r[s++]=o[l]}),new Kr(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DP(e){let t;try{t=JSON.parse(e)}catch{return null}return VF(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e4(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function n4(e,t){const n=t.split("/").filter(i=>i.length>0).join("/");return e.length===0?n:e+"/"+n}function OP(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i4(e,t){return t}class sn{constructor(t,n,i,r){this.server=t,this.local=n||t,this.writable=!!i,this.xform=r||i4}}let ld=null;function r4(e){return!Cv(e)||e.length<2?e:OP(e)}function jP(){if(ld)return ld;const e=[];e.push(new sn("bucket")),e.push(new sn("generation")),e.push(new sn("metageneration")),e.push(new sn("name","fullPath",!0));function t(s,o){return r4(o)}const n=new sn("name");n.xform=t,e.push(n);function i(s,o){return o!==void 0?Number(o):o}const r=new sn("size");return r.xform=i,e.push(r),e.push(new sn("timeCreated")),e.push(new sn("updated")),e.push(new sn("md5Hash",null,!0)),e.push(new sn("cacheControl",null,!0)),e.push(new sn("contentDisposition",null,!0)),e.push(new sn("contentEncoding",null,!0)),e.push(new sn("contentLanguage",null,!0)),e.push(new sn("contentType",null,!0)),e.push(new sn("metadata","customMetadata",!0)),ld=e,ld}function s4(e,t){function n(){const i=e.bucket,r=e.fullPath,s=new In(i,r);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function o4(e,t,n){const i={};i.type="file";const r=n.length;for(let s=0;s<r;s++){const o=n[s];i[o.local]=o.xform(i,t[o.server])}return s4(i,e),i}function VP(e,t,n){const i=DP(t);return i===null?null:o4(e,i,n)}function a4(e,t,n,i){const r=DP(t);if(r===null||!Cv(r.downloadTokens))return null;const s=r.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(h=>{const p=e.bucket,g=e.fullPath,y="/b/"+o(p)+"/o/"+o(g),x=Fp(y,n,i),T=RP({alt:"media",token:h});return x+T})[0]}function l4(e,t){const n={},i=t.length;for(let r=0;r<i;r++){const s=t[r];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}class Rv{constructor(t,n,i,r){this.url=t,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FP(e){if(!e)throw Iv()}function c4(e,t){function n(i,r){const s=VP(e,r,t);return FP(s!==null),s}return n}function u4(e,t){function n(i,r){const s=VP(e,r,t);return FP(s!==null),a4(s,r,e.host,e._protocol)}return n}function zP(e){function t(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=TF():r=bF():n.getStatus()===402?r=wF(e.bucket):n.getStatus()===403?r=EF(e.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return t}function BP(e){const t=zP(e);function n(i,r){let s=t(i,r);return i.getStatus()===404&&(s=xF(e.path)),s.serverResponse=r.serverResponse,s}return n}function h4(e,t,n){const i=t.fullServerUrl(),r=Fp(i,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,l=new Rv(r,s,u4(e,n),o);return l.errorHandler=BP(t),l}function d4(e,t){const n=t.fullServerUrl(),i=Fp(n,e.host,e._protocol),r="DELETE",s=e.maxOperationRetryTime;function o(c,h){}const l=new Rv(i,r,o,s);return l.successCodes=[200,204],l.errorHandler=BP(t),l}function f4(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function p4(e,t,n){const i=Object.assign({},n);return i.fullPath=e.path,i.size=t.size(),i.contentType||(i.contentType=f4(null,t)),i}function m4(e,t,n,i,r){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let R="";for(let V=0;V<2;V++)R=R+Math.random().toString().slice(2);return R}const c=l();o["Content-Type"]="multipart/related; boundary="+c;const h=p4(t,i,r),p=l4(h,n),g="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+c+`\r
Content-Type: `+h.contentType+`\r
\r
`,y=`\r
--`+c+"--",x=Kr.getBlob(g,i,y);if(x===null)throw AF();const T={name:h.fullPath},S=Fp(s,e.host,e._protocol),k="POST",P=e.maxUploadRetryTime,I=new Rv(S,k,c4(e,n),P);return I.urlParams=T,I.headers=o,I.body=x.uploadData(),I.errorHandler=zP(t),I}class g4{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=co.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=co.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=co.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,i,r){if(this.sent_)throw lc("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),r!==void 0)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw lc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw lc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw lc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw lc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class _4 extends g4{initXhr(){this.xhr_.responseType="text"}}function Nv(){return new _4}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(t,n){this._service=t,n instanceof In?this._location=n:this._location=In.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new To(t,n)}get root(){const t=new In(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return OP(this._location.path)}get storage(){return this._service}get parent(){const t=e4(this._location.path);if(t===null)return null;const n=new In(this._location.bucket,t);return new To(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw LF(t)}}function y4(e,t,n){e._throwIfRoot("uploadBytes");const i=m4(e.storage,e._location,jP(),new Kr(t,!0),n);return e.storage.makeRequestWithTokens(i,Nv).then(r=>({metadata:r,ref:e}))}function v4(e){e._throwIfRoot("getDownloadURL");const t=h4(e.storage,e._location,jP());return e.storage.makeRequestWithTokens(t,Nv).then(n=>{if(n===null)throw RF();return n})}function x4(e){e._throwIfRoot("deleteObject");const t=d4(e.storage,e._location);return e.storage.makeRequestWithTokens(t,Nv)}function w4(e,t){const n=n4(e._location.path,t),i=new In(e._location.bucket,n);return new To(e.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b4(e){return/^[A-Za-z]+:\/\//.test(e)}function T4(e,t){return new To(e,t)}function UP(e,t){if(e instanceof Lv){const n=e;if(n._bucket==null)throw CF();const i=new To(n,n._bucket);return t!=null?UP(i,t):i}else return t!==void 0?w4(e,t):e}function E4(e,t){if(t&&b4(t)){if(e instanceof Lv)return T4(e,t);throw v_("To use ref(service, url), the first argument must be a Storage instance.")}else return UP(e,t)}function o1(e,t){const n=t==null?void 0:t[CP];return n==null?null:In.makeFromBucketSpec(n,e)}function S4(e,t,n,i={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:r}=i;r&&(e._overrideAuthToken=typeof r=="string"?r:xS(r,e.app.options.projectId))}class Lv{constructor(t,n,i,r,s){this.app=t,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=IP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=yF,this._maxUploadRetryTime=vF,this._requests=new Set,r!=null?this._bucket=In.makeFromBucketSpec(r,this._host):this._bucket=o1(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=In.makeFromBucketSpec(this._url,t):this._bucket=o1(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){s1("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){s1("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new To(this,t)}_makeRequest(t,n,i,r,s=!0){if(this._deleted)return new MF(AP());{const o=$F(t,this._appId,i,r,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,i,r).getPromise()}}const a1="@firebase/storage",l1="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HP="storage";function k4(e,t,n){return e=ne(e),y4(e,t,n)}function P4(e){return e=ne(e),v4(e)}function I4(e){return e=ne(e),x4(e)}function c1(e,t){return e=ne(e),E4(e,t)}function C4(e=My(),t){e=ne(e);const i=yp(e,HP).getImmediate({identifier:t}),r=_S("storage");return r&&A4(i,...r),i}function A4(e,t,n,i={}){S4(e,t,n,i)}function R4(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),r=e.getProvider("app-check-internal");return new Lv(n,i,r,t,Co)}function N4(){_o(new ms(HP,R4,"PUBLIC").setMultipleInstances(!0)),Mi(a1,l1,""),Mi(a1,l1,"esm2017")}N4();const L4={apiKey:"AIzaSyCXVdMm5iaiEz0jWzi6xy9gKM6P2P-O1Bo",authDomain:"tracker-a61ae.firebaseapp.com",projectId:"tracker-a61ae",storageBucket:"tracker-a61ae.firebasestorage.app",messagingSenderId:"912276878221",appId:"1:912276878221:web:6503c8ccb340e5278c83c4",measurementId:"G-DDDQCZRGQH"},Mv=TS(L4),Hs=hO(Mv),M4=new rr,Sn=XV(Mv),u1=C4(Mv),WP=$.createContext(void 0),Xu=()=>{const e=$.useContext(WP);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},D4=({children:e})=>{const[t,n]=$.useState(null),[i,r]=$.useState(null),[s,o]=$.useState(!0);$.useEffect(()=>JM(Hs,async S=>{n(S),S?await l(S.uid):r(null),o(!1)}),[]);const l=async T=>{var S,k;try{const P=await Uc(ci(Sn,"users",T));if(P.exists()){const I=P.data();r({...I,createdAt:((S=I.createdAt)==null?void 0:S.toDate())||new Date,lastLogin:((k=I.lastLogin)==null?void 0:k.toDate())||new Date})}}catch(P){console.error("Error loading user profile:",P)}},c=async(T,S={})=>{const k={uid:T.uid,email:T.email||"",displayName:T.displayName||S.displayName||"",photoURL:T.photoURL||"",plan:"free",storageUsed:0,storageLimit:104857600,createdAt:new Date,lastLogin:new Date,...S};try{await od(ci(Sn,"users",T.uid),{...k,createdAt:new Date,lastLogin:new Date}),r(k)}catch(P){throw console.error("Error creating user profile:",P),P}},h=async(T,S,k)=>{try{const{user:P}=await GM(Hs,T,S);await QM(P,{displayName:k}),await c(P,{displayName:k})}catch(P){throw console.error("Error signing up:",P),P}},p=async(T,S)=>{try{await KM(Hs,T,S),Hs.currentUser&&await od(ci(Sn,"users",Hs.currentUser.uid),{lastLogin:new Date},{merge:!0})}catch(k){throw console.error("Error signing in:",k),k}},g=async()=>{try{const{user:T}=await xD(Hs,M4);(await Uc(ci(Sn,"users",T.uid))).exists()?await od(ci(Sn,"users",T.uid),{lastLogin:new Date},{merge:!0}):await c(T)}catch(T){throw console.error("Error signing in with Google:",T),T}},y=async()=>{try{await tD(Hs),r(null)}catch(T){throw console.error("Error signing out:",T),T}},x=async T=>{if(t)try{await od(ci(Sn,"users",t.uid),T,{merge:!0}),r(S=>S?{...S,...T}:null)}catch(S){throw console.error("Error updating user profile:",S),S}};return m.jsx(WP.Provider,{value:{user:t,userProfile:i,loading:s,signUp:h,signIn:p,signInWithGoogle:g,logout:y,updateUserProfile:x},children:e})},O4="https://api.tracker.rivieraapps.com";class j4{constructor(t=O4){this.authToken=null,this.baseUrl=t,this.authToken=localStorage.getItem("authToken")}async request(t,n={}){`${this.baseUrl}${t}`,{...n.headers},this.authToken&&`${this.authToken}`;try{return await new Promise(r=>setTimeout(r,500+Math.random()*1e3)),await this.simulateApiResponse(t,n)}catch(i){return{success:!1,error:i instanceof Error?i.message:"Network error",timestamp:new Date().toISOString()}}}async simulateApiResponse(t,n){const i=n.method||"GET";if(!(Math.random()>.1))throw new Error("Simulated network error");const s=new Date().toISOString();switch(!0){case t==="/auth/login":return{success:!0,data:{token:"fake-jwt-token-"+Date.now(),user:{id:"1",email:"user@example.com"}},timestamp:s};case(t==="/routes"&&i==="GET"):return{success:!0,data:[],timestamp:s};case(t==="/routes"&&i==="POST"):return{success:!0,data:{id:"route_"+Date.now(),synced:!0},timestamp:s};case(t==="/trackers"&&i==="GET"):return{success:!0,data:[],timestamp:s};case(t==="/trackers"&&i==="POST"):return{success:!0,data:{id:"tracker_"+Date.now(),synced:!0},timestamp:s};case(t.startsWith("/trackers/")&&i==="PUT"):return{success:!0,data:{synced:!0},timestamp:s};default:return{success:!0,data:{},timestamp:s}}}async login(t,n){const i=await this.request("/auth/login",{method:"POST",body:JSON.stringify({email:t,password:n})});return i.success&&i.data&&(this.authToken=i.data.token,localStorage.setItem("authToken",this.authToken)),i}async logout(){this.authToken=null,localStorage.removeItem("authToken")}async syncRoutes(t){return this.request("/routes/sync",{method:"POST",body:JSON.stringify({routes:t})})}async uploadRoute(t){return this.request("/routes",{method:"POST",body:JSON.stringify(t)})}async getRoutes(){return this.request("/routes")}async syncTrackers(t){return this.request("/trackers/sync",{method:"POST",body:JSON.stringify({trackers:t})})}async addTracker(t){return this.request("/trackers",{method:"POST",body:JSON.stringify(t)})}async updateTracker(t,n){return this.request(`/trackers/${t}`,{method:"PUT",body:JSON.stringify(n)})}async getTrackers(){return this.request("/trackers")}async getSyncStatus(){const t=localStorage.getItem("lastSyncTime");return{lastSync:t?new Date(t):new Date(0),pending:0,failed:0}}async performFullSync(){try{const t=JSON.parse(localStorage.getItem("gpxRoutes")||"[]");await this.syncRoutes(t);const n=JSON.parse(localStorage.getItem("trackers")||"[]");return await this.syncTrackers(n),localStorage.setItem("lastSyncTime",new Date().toISOString()),!0}catch(t){return console.error("Sync failed:",t),!1}}}const h1=new j4,$P=$.createContext(void 0),Dv=()=>{const e=$.useContext($P);if(!e)throw new Error("useSync must be used within a SyncProvider");return e},V4=({children:e})=>{const[t,n]=$.useState({lastSync:new Date(0),pending:0,failed:0}),[i,r]=$.useState(navigator.onLine),[s,o]=$.useState(!1),[l,c]=$.useState(null);$.useEffect(()=>{const y=()=>r(!0),x=()=>r(!1);return window.addEventListener("online",y),window.addEventListener("offline",x),()=>{window.removeEventListener("online",y),window.removeEventListener("offline",x)}},[]),$.useEffect(()=>{h()},[]),$.useEffect(()=>{i&&t.pending>0&&p()},[i]);const h=async()=>{try{const y=await h1.getSyncStatus();n(y)}catch(y){console.error("Failed to load sync status:",y)}},p=async()=>{if(!(!i||s)){o(!0),c(null);try{if(await h1.performFullSync())n(x=>({...x,lastSync:new Date,pending:0,failed:0}));else throw new Error("Sync failed")}catch(y){const x=y instanceof Error?y.message:"Sync failed";c(x),n(T=>({...T,failed:T.failed+1}))}finally{o(!1)}}},g=(y,x)=>{const T=JSON.parse(localStorage.getItem("pendingSync")||"[]"),S={type:y,id:x,timestamp:Date.now()};T.find(k=>k.type===y&&k.id===x)||(T.push(S),localStorage.setItem("pendingSync",JSON.stringify(T)),n(k=>({...k,pending:k.pending+1}))),i&&setTimeout(p,1e3)};return m.jsx($P.Provider,{value:{syncStatus:t,isOnline:i,isSyncing:s,lastSyncError:l,performSync:p,markForSync:g},children:e})},F4=()=>{const{syncStatus:e,isOnline:t,isSyncing:n,lastSyncError:i,performSync:r}=Dv(),s=h=>{const g=new Date().getTime()-h.getTime(),y=Math.floor(g/6e4);if(y<1)return"Just now";if(y<60)return`${y}m ago`;const x=Math.floor(y/60);return x<24?`${x}h ago`:`${Math.floor(x/24)}d ago`},o=()=>t?n?m.jsx(sS,{size:16,className:"text-primary animate-spin"}):i?m.jsx(tS,{size:16,className:"text-red-500"}):e.pending>0?m.jsx(JR,{size:16,className:"text-yellow-500"}):m.jsx(yc,{size:16,className:"text-green-500"}):m.jsx(uS,{size:16,className:"text-red-500"}),l=()=>t?n?"Syncing...":i?"Sync failed":e.pending>0?`${e.pending} pending`:"Synced":"Offline",c=()=>!t||i?"text-red-500":n||e.pending>0?"text-yellow-500":"text-green-500";return m.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[m.jsxs("button",{onClick:r,disabled:!t||n,className:"flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-background transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:i||`Last sync: ${s(e.lastSync)}`,children:[o(),m.jsx("span",{className:c(),children:l()})]}),e.lastSync.getTime()>0&&m.jsx("span",{className:"text-text-light text-xs",children:s(e.lastSync)})]})},z4=({onMenuClick:e})=>{const{theme:t,toggleTheme:n}=gp(),{user:i,userProfile:r,logout:s}=Xu(),o=Io(),l=ul(),c=()=>{switch(!0){case o.pathname==="/dashboard":return"Dashboard";case o.pathname.includes("/routes/"):return"Route Details";case o.pathname==="/upload":return"Upload Route";case o.pathname==="/settings":return"Settings";default:return"TracSync"}},h=async()=>{try{await s(),l("/")}catch(p){console.error("Error logging out:",p)}};return m.jsx("header",{className:"sticky top-0 z-10 bg-card shadow-sm border-b border-border",children:m.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("button",{onClick:e,className:"p-2 rounded-lg text-text-light hover:bg-background transition-colors lg:hidden","aria-label":"Toggle menu",children:m.jsx(fN,{size:24})}),m.jsxs(be,{to:"/dashboard",className:"flex items-center gap-2",children:[m.jsx("div",{className:"bg-primary text-white p-1.5 rounded-lg",children:m.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("path",{d:"M12 2L15.5 9H8.5L12 2Z",fill:"currentColor"}),m.jsx("path",{d:"M18.5 9L22 16H15L18.5 9Z",fill:"currentColor"}),m.jsx("path",{d:"M5.5 9L9 16H2L5.5 9Z",fill:"currentColor"}),m.jsx("path",{d:"M12 16L15.5 23H8.5L12 16Z",fill:"currentColor"})]})}),m.jsx("h1",{className:"text-xl font-bold tracking-tight hidden sm:block",children:"TracSync"})]})]}),m.jsx("div",{className:"text-lg font-semibold md:hidden",children:c()}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"hidden md:block",children:m.jsx(F4,{})}),m.jsxs(be,{to:"/upload",className:"btn btn-primary hidden sm:flex items-center gap-2",children:[m.jsx(Vu,{size:18}),m.jsx("span",{children:"Upload"})]}),m.jsx("button",{onClick:n,className:"p-2 rounded-lg text-text-light hover:bg-background transition-colors","aria-label":t==="dark"?"Switch to light mode":"Switch to dark mode",children:t==="dark"?m.jsx(lS,{size:20}):m.jsx(nS,{size:20})}),i&&m.jsxs("div",{className:"relative group",children:[m.jsxs("button",{className:"flex items-center gap-2 p-2 rounded-lg text-text-light hover:bg-background transition-colors",children:[i.photoURL?m.jsx("img",{src:i.photoURL,alt:i.displayName||"User",className:"w-6 h-6 rounded-full",onError:p=>{p.target.onerror=null,p.target.src="/default-avatar.png"}}):m.jsx(Ry,{size:20}),m.jsx("span",{className:"hidden sm:block ml-2 text-sm font-medium",children:i.displayName||"User"})]}),m.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-card border border-border rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200",children:[m.jsxs("div",{className:"p-3 border-b border-border",children:[m.jsx("p",{className:"font-medium text-sm",children:i.displayName}),m.jsx("p",{className:"text-xs text-text-light",children:i.email}),r&&m.jsxs("p",{className:"text-xs text-accent capitalize",children:[r.plan," Plan"]})]}),m.jsxs("div",{className:"py-1",children:[m.jsx(be,{to:"/settings",className:"block px-3 py-2 text-sm hover:bg-background transition-colors",children:"Settings"}),m.jsxs("button",{onClick:h,className:"w-full text-left px-3 py-2 text-sm hover:bg-background transition-colors flex items-center gap-2",children:[m.jsx(hN,{size:16}),"Sign Out"]})]})]})]})]})]})})},B4=({isOpen:e,setIsOpen:t})=>{const n=[{title:"Dashboard",path:"/dashboard",icon:m.jsx(eS,{size:20})},{title:"Upload Route",path:"/upload",icon:m.jsx(Vu,{size:20})},{title:"Settings",path:"/settings",icon:m.jsx(oS,{size:20})}];return m.jsxs(m.Fragment,{children:[e&&m.jsx("div",{className:"fixed inset-0 bg-black/50 z-20 lg:hidden",onClick:()=>t(!1)}),m.jsxs("aside",{className:`
          fixed top-0 left-0 z-30 h-full w-64 bg-card border-r border-border transform transition-transform duration-300 ease-in-out 
          ${e?"translate-x-0":"-translate-x-full"} 
          lg:relative lg:translate-x-0
        `,children:[m.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"bg-primary text-white p-1.5 rounded-lg",children:m.jsx(Cy,{size:20})}),m.jsx("h2",{className:"text-xl font-bold",children:"TracSync"})]}),m.jsx("button",{className:"p-1.5 rounded-lg hover:bg-background lg:hidden",onClick:()=>t(!1),children:m.jsx(Br,{size:20})})]}),m.jsx("nav",{className:"p-4",children:m.jsx("ul",{className:"space-y-2",children:n.map(i=>m.jsx("li",{children:m.jsxs(JE,{to:i.path,className:({isActive:r})=>`
                    flex items-center gap-3 px-4 py-3 rounded-lg transition-all
                    ${r?"bg-primary text-white":"text-text-light hover:bg-background hover:text-text"}
                  `,end:i.path==="/",children:[i.icon,m.jsx("span",{className:"font-medium",children:i.title})]})},i.path))})}),m.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-border",children:m.jsxs("div",{className:"text-sm text-text-light",children:[m.jsx("p",{children:"TracSync v0.1.0"}),m.jsxs("p",{className:"mt-1",children:["Local storage: ",U4()]})]})})]})]})},U4=()=>{try{const e=localStorage.getItem("gpxRoutes");if(!e)return"0 KB";const t=new Blob([e]).size;return t<1024?`${t} B`:t<1048576?`${(t/1024).toFixed(1)} KB`:`${(t/1048576).toFixed(1)} MB`}catch{return"Unknown"}},H4=({isOpen:e,onClose:t,initialMode:n="signin"})=>{const[i,r]=$.useState(n),[s,o]=$.useState(""),[l,c]=$.useState(""),[h,p]=$.useState(""),[g,y]=$.useState(!1),[x,T]=$.useState(!1),[S,k]=$.useState(""),{signIn:P,signUp:I,signInWithGoogle:R}=Xu(),V=async b=>{b.preventDefault(),T(!0),k("");try{i==="signup"?await I(s,l,h):await P(s,l),t()}catch(A){k(A.message||"An error occurred")}finally{T(!1)}},B=async()=>{T(!0),k("");try{await R(),t()}catch(b){k(b.message||"An error occurred")}finally{T(!1)}},H=()=>{o(""),c(""),p(""),k(""),y(!1)},N=()=>{r(i==="signin"?"signup":"signin"),H()};return e?m.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:m.jsxs("div",{className:"card max-w-md w-full p-6 fade-in slide-up",children:[m.jsxs("div",{className:"flex items-center justify-between mb-6",children:[m.jsx("h2",{className:"text-2xl font-bold",children:i==="signin"?"Sign In":"Create Account"}),m.jsx("button",{onClick:t,className:"p-2 rounded-lg hover:bg-background transition-colors",children:m.jsx(Br,{size:20})})]}),S&&m.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3 mb-4",children:m.jsx("p",{className:"text-sm text-red-800 dark:text-red-200",children:S})}),m.jsxs("form",{onSubmit:V,className:"space-y-4",children:[i==="signup"&&m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"Full Name"}),m.jsxs("div",{className:"relative",children:[m.jsx(Ry,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-text-light",size:18}),m.jsx("input",{type:"text",value:h,onChange:b=>p(b.target.value),className:"input-field pl-10",placeholder:"Enter your full name",required:!0})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email"}),m.jsxs("div",{className:"relative",children:[m.jsx(dN,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-text-light",size:18}),m.jsx("input",{type:"email",value:s,onChange:b=>o(b.target.value),className:"input-field pl-10",placeholder:"Enter your email",required:!0})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"Password"}),m.jsxs("div",{className:"relative",children:[m.jsx(uN,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-text-light",size:18}),m.jsx("input",{type:g?"text":"password",value:l,onChange:b=>c(b.target.value),className:"input-field pl-10 pr-10",placeholder:"Enter your password",required:!0,minLength:6}),m.jsx("button",{type:"button",onClick:()=>y(!g),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-text-light hover:text-text",children:g?m.jsx(eN,{size:18}):m.jsx(nN,{size:18})})]})]}),m.jsx("button",{type:"submit",disabled:x,className:"btn btn-primary w-full",children:x?"Please wait...":i==="signin"?"Sign In":"Create Account"})]}),m.jsxs("div",{className:"my-6 flex items-center",children:[m.jsx("div",{className:"flex-1 border-t border-border"}),m.jsx("span",{className:"px-4 text-text-light text-sm",children:"or"}),m.jsx("div",{className:"flex-1 border-t border-border"})]}),m.jsxs("button",{onClick:B,disabled:x,className:"btn btn-outline w-full flex items-center justify-center gap-3",children:[m.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",children:[m.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),m.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),m.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),m.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),m.jsx("div",{className:"mt-6 text-center",children:m.jsxs("p",{className:"text-text-light text-sm",children:[i==="signin"?"Don't have an account?":"Already have an account?",m.jsx("button",{onClick:N,className:"ml-1 text-primary hover:underline font-medium",children:i==="signin"?"Sign up":"Sign in"})]})})]})}):null},W4=()=>{const e=ul(),{user:t}=Xu(),[n,i]=$.useState(!1),[r,s]=$.useState("signin"),[o,l]=$.useState(!1),c=()=>{t?e("/dashboard"):(s("signup"),i(!0))},h=()=>{t?e("/dashboard"):(s("signin"),i(!0))},p=[{icon:m.jsx(jx,{className:"text-accent",size:20}),title:"Power",description:"With a compact battery under 2000mAh, it easily achieves over 2 days of continuous tracking in normal mode."},{icon:m.jsx(jx,{className:"text-accent",size:20}),title:"Customizable & Developer-Focused",description:"Enables you to build and modify tracking features to fit your projects unique needs."},{icon:m.jsx(hS,{className:"text-accent",size:20}),title:"ESP32-S3",description:"ESP32-S3, a powerful microcontroller with built-in Wi-Fi and Bluetooth."},{icon:m.jsx(mN,{className:"text-accent",size:20}),title:"uBlox MAX-M10S",description:"High-performance multi-GNSS receiver. Supports GPS, Galileo, GLONASS, and BeiDou."},{icon:m.jsx(Cy,{className:"text-accent",size:20}),title:"Sensors",description:"Sub-meter accuracy with multi-constellation support"}];return m.jsxs("div",{className:"min-h-screen bg-background",children:[m.jsx("nav",{className:"sticky top-0 z-50 bg-card/80 backdrop-blur-md border-b border-border",children:m.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8",children:m.jsxs("div",{className:"flex justify-between items-center h-14 sm:h-16",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"bg-primary text-white p-1.5 sm:p-2 rounded-lg",children:m.jsx(Wr,{size:18,className:"sm:size-20"})}),m.jsx("span",{className:"text-lg sm:text-xl font-bold",children:"TracSync"})]}),m.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[m.jsxs("button",{onClick:()=>l(!0),className:"text-text-light hover:text-text transition-colors flex items-center gap-1 sm:gap-2 px-2 py-1 sm:px-3 sm:py-2",children:[m.jsx(km,{size:18}),m.jsx("span",{className:" sm:inline",children:"Install"})]}),t?m.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[m.jsx(be,{to:"/dashboard",className:"hidden sm:inline text-text-light hover:text-text transition-colors",children:"Dashboard"}),m.jsxs(be,{to:"/dashboard",className:"btn btn-primary flex items-center gap-1 sm:gap-2 px-2 py-1 sm:px-4 sm:py-2",children:[m.jsx(Wr,{size:18}),m.jsx("span",{className:"hidden sm:inline",children:"Go to App"})]})]}):m.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[m.jsx("button",{onClick:h,className:"text-text-light hover:text-text transition-colors flex items-center gap-1 sm:gap-2 px-2 py-1 sm:px-3 sm:py-2"}),m.jsxs("button",{onClick:c,className:"btn btn-primary flex items-center gap-1 sm:gap-2 px-2 py-1 sm:px-4 sm:py-2",children:[m.jsx(Ry,{size:18}),m.jsx("span",{className:"hidden sm:inline",children:"Get Started"})]})]})]})]})})}),m.jsx("section",{className:"relative overflow-hidden",children:m.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20",children:m.jsxs("div",{className:"text-center",children:[m.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-6 bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"Professional GPS Tracking"}),m.jsx("p",{className:"text-xl text-text-light mb-8 max-w-3xl mx-auto",children:"TracSync is the ultimate platform for visualizing, analyzing, and sharing your GPS routes. Upload GPX files, connect hardware trackers, and gain insights into your adventures."}),m.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center mb-12",children:[m.jsxs("button",{onClick:c,className:"btn btn-primary text-lg px-8 py-3 flex items-center gap-2",children:["Start Tracking",m.jsx(Kg,{size:20})]}),m.jsxs("button",{onClick:()=>l(!0),className:"btn btn-outline text-lg px-8 py-3 flex items-center gap-2",children:[m.jsx(km,{size:20}),"Install App"]})]}),m.jsx("div",{className:"relative max-w-4xl mx-auto",children:m.jsx("div",{className:"bg-gradient-to-br from-primary/20 to-accent/20 rounded-2xl p-8 backdrop-blur-sm border border-border",children:m.jsx("div",{className:"bg-card rounded-xl p-6 shadow-lg",style:{backgroundImage:'url("/demo-route.png")'},children:m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[m.jsxs("div",{className:"space-y-3",children:[m.jsx("div",{className:"h-4 bg-primary/20 rounded"}),m.jsx("div",{className:"h-4 bg-primary/10 rounded w-3/4"}),m.jsx("div",{className:"h-4 bg-primary/10 rounded w-1/2"})]}),m.jsx("div",{className:"bg-primary/10 rounded-lg h-32 flex items-center justify-center",children:m.jsx(Wr,{size:32,className:"text-primary"})}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("div",{className:"h-4 bg-accent/20 rounded"}),m.jsx("div",{className:"h-4 bg-accent/10 rounded w-2/3"}),m.jsx("div",{className:"h-4 bg-accent/10 rounded w-3/4"})]})]})})})})]})})}),m.jsx("section",{className:"py-20 bg-gradient-to-br from-accent/5 to-primary/5",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[m.jsxs("div",{className:"text-center mb-16",children:[m.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Supported Hardware"}),m.jsx("p",{className:"text-xl text-text-light max-w-2xl mx-auto",children:"Connect your GPS tracking devices for seamless data collection and real-time monitoring."})]}),m.jsx("div",{className:"max-w-4xl mx-auto",children:m.jsx("div",{className:"card p-8 mb-8",children:m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-center",children:[m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[m.jsx("div",{className:"bg-accent text-white p-3 rounded-xl",children:m.jsx(Wr,{size:24})}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-2xl font-bold",children:"Pocket Tracker"}),m.jsx("p",{className:"text-text-light",children:"DIY GPS Tracking Device"})]})]}),m.jsx("p",{className:"text-text-light mb-6",children:"PocketTracker is a compact, developer-friendly tracking device designed for custom applications, prototyping, and specialized projects but it is also for entusiast who want to build his own tracking device. PocketTracker is built for flexibility and customization, allowing developers to integrate their own firmware, sensors, and tracking solutions."}),m.jsx("div",{className:"grid grid-cols-2 gap-4 mb-6",children:p.map((g,y)=>m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("div",{className:"p-2 bg-accent/10 rounded-lg mt-1",children:g.icon}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-semibold text-sm",children:g.title}),m.jsx("p",{className:"text-xs text-text-light",children:g.description})]})]},y))}),m.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[m.jsxs("a",{href:"https://www.elecrow.com/pocket-tracker.html",target:"_blank",rel:"noopener noreferrer",className:"btn btn-primary flex items-center gap-2",children:[m.jsx(gN,{size:18}),"Buy PocketTracker",m.jsx(Dx,{size:16})]}),m.jsx("button",{onClick:c,className:"btn btn-outline",children:"Connect to TracSync"}),m.jsxs("a",{href:"https://www.gabrielecalabrese.com/pockettracker/",target:"_blank",rel:"noopener noreferrer",className:"btn btn-outline  flex items-center",children:["Official site",m.jsx(Dx,{size:16})]})]})]}),m.jsxs("div",{className:"relative",children:[m.jsxs("div",{className:"relative bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900 rounded-2xl p-8 shadow-2xl",children:[m.jsx("img",{src:"/pocketTracker.png",alt:"Pocket Tracker GPS Device",className:"w-full h-64 object-cover rounded-xl mb-4"}),m.jsx("div",{className:"text-center",children:m.jsx("div",{className:"text-text font-bold text-lg",children:m.jsx("a",{href:"https://www.gabrielecalabrese.com/pockettracker/",children:"PocketTracker"})})})]}),m.jsxs("div",{className:"absolute -top-4 -right-4 bg-card rounded-lg p-3 shadow-lg border border-border",children:[m.jsx("div",{className:"text-xs text-text-light",children:"Accuracy"}),m.jsx("div",{className:"text-lg font-bold text-accent",children:"1.5m"})]}),m.jsxs("div",{className:"absolute -bottom-4 -left-4 bg-card rounded-lg p-3 shadow-lg border border-border",children:[m.jsx("div",{className:"text-xs text-text-light",children:"Battery Life"}),m.jsx("div",{className:"text-lg font-bold text-primary",children:"2 days"})]})]})]})})})]})}),m.jsx("footer",{className:"bg-card border-t border-border py-12",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[m.jsx("div",{className:"bg-primary text-white p-2 rounded-lg",children:m.jsx(Wr,{size:20})}),m.jsx("span",{className:"text-lg font-bold",children:"TracSync"})]}),m.jsx("p",{className:"text-text-light",children:"The ultimate platform for tracking and analyzing your GPS routes and adventures."})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold mb-4",children:"Product"}),m.jsxs("ul",{className:"space-y-2 text-text-light",children:[m.jsx("li",{children:m.jsx(be,{to:"/dashboard",className:"hover:text-text transition-colors",children:"Dashboard"})}),m.jsx("li",{children:m.jsx(be,{to:"/upload",className:"hover:text-text transition-colors",children:"Upload Routes"})}),m.jsx("li",{children:m.jsx(be,{to:"/settings",className:"hover:text-text transition-colors",children:"Settings"})}),m.jsx("li",{children:m.jsx(be,{to:"/pricing",className:"hover:text-text transition-colors",children:"Pricing"})})]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold mb-4",children:"Hardware"}),m.jsxs("ul",{className:"space-y-2 text-text-light",children:[m.jsx("li",{children:m.jsx("a",{href:"https://pockettracker.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-text transition-colors",children:"Pocket Tracker"})}),m.jsx("li",{children:m.jsx("a",{href:"https://pockettracker.com/support",target:"_blank",rel:"noopener noreferrer",className:"hover:text-text transition-colors",children:"Device Support"})}),m.jsx("li",{children:m.jsx("a",{href:"https://pockettracker.com/specs",target:"_blank",rel:"noopener noreferrer",className:"hover:text-text transition-colors",children:"Specifications"})})]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold mb-4",children:"Support"}),m.jsxs("ul",{className:"space-y-2 text-text-light",children:[m.jsx("li",{children:m.jsx("a",{href:"#",className:"hover:text-text transition-colors",children:"Help Center"})}),m.jsx("li",{children:m.jsx("a",{href:"#",className:"hover:text-text transition-colors",children:"Contact Us"})}),m.jsx("li",{children:m.jsx("a",{href:"#",className:"hover:text-text transition-colors",children:"API Docs"})}),m.jsx("li",{children:m.jsx("button",{onClick:()=>l(!0),className:"hover:text-text transition-colors",children:"Install App"})})]})]})]}),m.jsx("div",{className:"border-t border-border mt-8 pt-8 text-center text-text-light",children:m.jsx("p",{children:" 2024 TracSync. All rights reserved."})})]})}),o&&m.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:m.jsxs("div",{className:"card max-w-2xl w-full p-6 fade-in slide-up max-h-[90vh] overflow-y-auto",children:[m.jsxs("div",{className:"flex items-center justify-between mb-6",children:[m.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[m.jsx(km,{size:24,className:"text-primary"}),"Install TracSync App"]}),m.jsx("button",{onClick:()=>l(!1),className:"p-2 rounded-lg hover:bg-background transition-colors",children:m.jsx(q4,{size:20})})]}),m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"border border-border rounded-lg p-4",children:[m.jsxs("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[m.jsx(Ox,{size:20}),"iOS (iPhone/iPad)"]}),m.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-sm text-text-light",children:[m.jsx("li",{children:"Open TracSync in Safari browser"}),m.jsxs("li",{children:["Tap the Share button ",m.jsx(aS,{size:14,className:"inline"})," at the bottom"]}),m.jsx("li",{children:'Scroll down and tap "Add to Home Screen"'}),m.jsx("li",{children:'Tap "Add" to confirm installation'}),m.jsx("li",{children:"TracSync will appear on your home screen like a native app"})]})]}),m.jsxs("div",{className:"border border-border rounded-lg p-4",children:[m.jsxs("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[m.jsx(Ox,{size:20}),"Android"]}),m.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-sm text-text-light",children:[m.jsx("li",{children:"Open TracSync in Chrome browser"}),m.jsx("li",{children:"Tap the menu () in the top right corner"}),m.jsx("li",{children:'Select "Add to Home screen" or "Install app"'}),m.jsx("li",{children:'Tap "Add" or "Install" to confirm'}),m.jsx("li",{children:"TracSync will be installed as a native app"})]})]}),m.jsxs("div",{className:"border border-border rounded-lg p-4",children:[m.jsxs("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[m.jsx($4,{size:20}),"Desktop (Chrome/Edge)"]}),m.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-sm text-text-light",children:[m.jsxs("li",{children:["Look for the install icon ",m.jsx(rS,{size:14,className:"inline"})," in the address bar"]}),m.jsx("li",{children:'Click the install icon or "Install TracSync" button'}),m.jsx("li",{children:'Click "Install" in the confirmation dialog'}),m.jsx("li",{children:"TracSync will open as a desktop app"})]})]}),m.jsxs("div",{className:"bg-primary/5 rounded-lg p-4",children:[m.jsx("h3",{className:"font-semibold mb-3 text-primary",children:"Benefits of Installing"}),m.jsxs("ul",{className:"space-y-2 text-sm text-text-light",children:[m.jsxs("li",{className:"flex items-center gap-2",children:[m.jsx(yc,{size:16,className:"text-green-500"}),"Works offline for viewing saved routes"]}),m.jsxs("li",{className:"flex items-center gap-2",children:[m.jsx(yc,{size:16,className:"text-green-500"}),"Faster loading and native app experience"]}),m.jsxs("li",{className:"flex items-center gap-2",children:[m.jsx(yc,{size:16,className:"text-green-500"}),"Push notifications for tracker updates"]}),m.jsxs("li",{className:"flex items-center gap-2",children:[m.jsx(yc,{size:16,className:"text-green-500"}),"No app store required - installs directly"]})]})]})]}),m.jsx("div",{className:"mt-6 flex justify-end",children:m.jsx("button",{onClick:()=>l(!1),className:"btn btn-primary",children:"Got it!"})})]})}),m.jsx(H4,{isOpen:n,onClose:()=>i(!1),initialMode:r})]})},$4=({size:e})=>m.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[m.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),m.jsx("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),m.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"21"})]}),q4=({size:e})=>m.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[m.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),m.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]});var qP={exports:{}},Bm,d1;function G4(){if(d1)return Bm;d1=1,Bm=function(){return e};function e(){}return Bm}(function(e){let t=function(){this.xmlSource="",this.metadata={},this.waypoints=[],this.tracks=[],this.routes=[]};t.prototype.parse=function(n){let i=this,r=new window.DOMParser;this.xmlSource=r.parseFromString(n,"text/xml");let s=this.xmlSource.querySelector("metadata");if(s!=null){this.metadata.name=this.getElementValue(s,"name"),this.metadata.desc=this.getElementValue(s,"desc"),this.metadata.time=this.getElementValue(s,"time");let y={},x=s.querySelector("author");if(x!=null){y.name=this.getElementValue(x,"name"),y.email={};let k=x.querySelector("email");k!=null&&(y.email.id=k.getAttribute("id"),y.email.domain=k.getAttribute("domain"));let P={},I=x.querySelector("link");I!=null&&(P.href=I.getAttribute("href"),P.text=this.getElementValue(I,"text"),P.type=this.getElementValue(I,"type")),y.link=P}this.metadata.author=y;let T={},S=this.queryDirectSelector(s,"link");S!=null&&(T.href=S.getAttribute("href"),T.text=this.getElementValue(S,"text"),T.type=this.getElementValue(S,"type"),this.metadata.link=T)}var o=[].slice.call(this.xmlSource.querySelectorAll("wpt"));for(let y in o){var l=o[y];let x={};x.name=i.getElementValue(l,"name"),x.sym=i.getElementValue(l,"sym"),x.lat=parseFloat(l.getAttribute("lat")),x.lon=parseFloat(l.getAttribute("lon"));let T=parseFloat(i.getElementValue(l,"ele"));x.ele=isNaN(T)?null:T,x.cmt=i.getElementValue(l,"cmt"),x.desc=i.getElementValue(l,"desc");let S=i.getElementValue(l,"time");x.time=S==null?null:new Date(S),i.waypoints.push(x)}var c=[].slice.call(this.xmlSource.querySelectorAll("rte"));for(let y in c){let x=c[y],T={};T.name=i.getElementValue(x,"name"),T.cmt=i.getElementValue(x,"cmt"),T.desc=i.getElementValue(x,"desc"),T.src=i.getElementValue(x,"src"),T.number=i.getElementValue(x,"number");let S=i.queryDirectSelector(x,"type");T.type=S!=null?S.innerHTML:null;let k={},P=x.querySelector("link");P!=null&&(k.href=P.getAttribute("href"),k.text=i.getElementValue(P,"text"),k.type=i.getElementValue(P,"type")),T.link=k;let I=[];var h=[].slice.call(x.querySelectorAll("rtept"));for(let R in h){let V=h[R],B={};B.lat=parseFloat(V.getAttribute("lat")),B.lon=parseFloat(V.getAttribute("lon"));let H=parseFloat(i.getElementValue(V,"ele"));B.ele=isNaN(H)?null:H;let N=i.getElementValue(V,"time");B.time=N==null?null:new Date(N),I.push(B)}T.distance=i.calculDistance(I),T.elevation=i.calcElevation(I),T.slopes=i.calculSlope(I,T.distance.cumul),T.points=I,i.routes.push(T)}var p=[].slice.call(this.xmlSource.querySelectorAll("trk"));for(let y in p){let x=p[y],T={};T.name=i.getElementValue(x,"name"),T.cmt=i.getElementValue(x,"cmt"),T.desc=i.getElementValue(x,"desc"),T.src=i.getElementValue(x,"src"),T.number=i.getElementValue(x,"number");let S=i.queryDirectSelector(x,"type");T.type=S!=null?S.innerHTML:null;let k={},P=x.querySelector("link");P!=null&&(k.href=P.getAttribute("href"),k.text=i.getElementValue(P,"text"),k.type=i.getElementValue(P,"type")),T.link=k;let I=[],R=[].slice.call(x.querySelectorAll("trkpt"));for(let V in R){var g=R[V];let B={};B.lat=parseFloat(g.getAttribute("lat")),B.lon=parseFloat(g.getAttribute("lon"));let H=parseFloat(i.getElementValue(g,"ele"));B.ele=isNaN(H)?null:H;let N=i.getElementValue(g,"time");B.time=N==null?null:new Date(N),I.push(B)}T.distance=i.calculDistance(I),T.elevation=i.calcElevation(I),T.slopes=i.calculSlope(I,T.distance.cumul),T.points=I,i.tracks.push(T)}},t.prototype.getElementValue=function(n,i){let r=n.querySelector(i);return r!=null?r.innerHTML!=null?r.innerHTML:r.childNodes[0].data:r},t.prototype.queryDirectSelector=function(n,i){let r=n.querySelectorAll(i),s=r[0];if(r.length>1){let o=n.childNodes;for(idx in o)elem=o[idx],elem.tagName===i&&(s=elem)}return s},t.prototype.calculDistance=function(n){let i={},r=0,s=[];for(var o=0;o<n.length-1;o++)r+=this.calcDistanceBetween(n[o],n[o+1]),s[o]=r;return s[n.length-1]=r,i.total=r,i.cumul=s,i},t.prototype.calcDistanceBetween=function(n,i){let r={};r.lat=n.lat,r.lon=n.lon;let s={};s.lat=i.lat,s.lon=i.lon;var o=Math.PI/180,l=r.lat*o,c=s.lat*o,h=Math.sin((s.lat-r.lat)*o/2),p=Math.sin((s.lon-r.lon)*o/2),g=h*h+Math.cos(l)*Math.cos(c)*p*p;return 6371e3*(2*Math.atan2(Math.sqrt(g),Math.sqrt(1-g)))},t.prototype.calcElevation=function(n){for(var i=0,r=0,s={},o=0;o<n.length-1;o++){let g=n[o+1].ele,y=n[o].ele;if(g!==null&&y!==null){let x=parseFloat(g)-parseFloat(y);x<0?r+=x:x>0&&(i+=x)}}for(var l=[],c=0,h=(o=0,n.length);o<h;o++)if(n[o].ele!==null){var p=parseFloat(n[o].ele);l.push(p),c+=p}return s.max=Math.max.apply(null,l)||null,s.min=Math.min.apply(null,l)||null,s.pos=Math.abs(i)||null,s.neg=Math.abs(r)||null,s.avg=c/l.length||null,s},t.prototype.calculSlope=function(n,i){let r=[];for(var s=0;s<n.length-1;s++){let o=n[s],l=100*(n[s+1].ele-o.ele)/(i[s+1]-i[s]);r.push(l)}return r},t.prototype.toGeoJSON=function(){var n={type:"FeatureCollection",features:[],properties:{name:this.metadata.name,desc:this.metadata.desc,time:this.metadata.time,author:this.metadata.author,link:this.metadata.link}};for(idx in this.tracks){let s=this.tracks[idx];var i={type:"Feature",geometry:{type:"LineString",coordinates:[]},properties:{}};for(idx in i.properties.name=s.name,i.properties.cmt=s.cmt,i.properties.desc=s.desc,i.properties.src=s.src,i.properties.number=s.number,i.properties.link=s.link,i.properties.type=s.type,s.points){let o=s.points[idx];(r=[]).push(o.lon),r.push(o.lat),r.push(o.ele),i.geometry.coordinates.push(r)}n.features.push(i)}for(idx in this.routes){let s=this.routes[idx];i={type:"Feature",geometry:{type:"LineString",coordinates:[]},properties:{}};for(idx in i.properties.name=s.name,i.properties.cmt=s.cmt,i.properties.desc=s.desc,i.properties.src=s.src,i.properties.number=s.number,i.properties.link=s.link,i.properties.type=s.type,s.points){let o=s.points[idx];var r;(r=[]).push(o.lon),r.push(o.lat),r.push(o.ele),i.geometry.coordinates.push(r)}n.features.push(i)}for(idx in this.waypoints){let s=this.waypoints[idx];(i={type:"Feature",geometry:{type:"Point",coordinates:[]},properties:{}}).properties.name=s.name,i.properties.sym=s.sym,i.properties.cmt=s.cmt,i.properties.desc=s.desc,i.geometry.coordinates=[s.lon,s.lat,s.ele],n.features.push(i)}return n},G4()(),e.exports=t})(qP);var K4=qP.exports;const Z4=N_(K4);function Q4(e){if(!e)return{};const t={};return e.replace(/\n/g,",").split(",").forEach(i=>{const r=i.match(/([\w\s]+)\(([^)]+)\):\s*([-\d.]+)/);if(r){const o=r[1].trim().replace(/\s+/g,"_").toLowerCase(),l=r[2].trim(),c=parseFloat(r[3]);t[o]=c,t[`${o}_unit`]=l;return}const s=i.match(/([\w\s]+):\s*([-\d.]+)/);if(s){const o=s[1].trim().replace(/\s+/g,"_").toLowerCase(),l=parseFloat(s[2]);t[o]=l;return}}),t}const Y4=e=>new Promise((t,n)=>{const i=new FileReader;i.onload=r=>{var s,o,l;try{const c=new Z4;if(c.parse((s=r.target)==null?void 0:s.result),c.tracks.length===0)throw new Error("No tracks found in GPX file");const h=c.tracks.map(b=>{const A=b.points.map(bt=>{var K,st;return{position:{lat:bt.lat,lon:bt.lon,ele:bt.ele||0,time:new Date(bt.time)},speed:bt.speed,heartRate:(K=bt.extensions)==null?void 0:K.hr,cadence:(st=bt.extensions)==null?void 0:st.cad}});let D=0,O=0,z=0,j=0;for(let bt=1;bt<A.length;bt++){const K=A[bt-1],st=A[bt];st.speed&&(j+=st.speed,z=Math.max(z,st.speed));const X=st.position.ele-K.position.ele;X>0?D+=X:O+=Math.abs(X)}const Rt=A[0].position.time,Et=A[A.length-1].position.time.getTime()-Rt.getTime();return{points:A,distance:b.distance.total,duration:Et/1e3,elevationGain:D,elevationLoss:O,maxSpeed:z,avgSpeed:j/A.length}}),p=h.reduce((b,A)=>b+A.distance,0),g=h.reduce((b,A)=>b+A.duration,0),y=h.reduce((b,A)=>b+A.elevationGain,0),x=h.reduce((b,A)=>b+A.elevationLoss,0),T=h[0],S=h[h.length-1],k=T.points[0].position,P=S.points[S.points.length-1].position;let I=Number.MAX_VALUE,R=Number.MIN_VALUE,V=Number.MAX_VALUE,B=Number.MIN_VALUE;h.forEach(b=>{b.points.forEach(A=>{const{lat:D,lon:O}=A.position;I=Math.min(I,D),R=Math.max(R,D),V=Math.min(V,O),B=Math.max(B,O)})});const H=Array.isArray(c.waypoints)?c.waypoints.map(b=>{const A=Q4(b.cmt),D={...b.extensions||{},...A};return{lat:b.lat,lon:b.lon,ele:b.ele,time:b.time?new Date(b.time):void 0,name:b.name,description:b.desc,comment:b.cmt,extensions:D}}):[],N={id:`route_${Date.now()}`,name:e.name.replace(".gpx","")||"Unnamed Route",description:((o=c.metadata)==null?void 0:o.desc)||"",date:new Date(((l=c.metadata)==null?void 0:l.time)||Date.now()),segments:h,totalDistance:p,totalDuration:g,totalElevationGain:y,totalElevationLoss:x,startPoint:k,endPoint:P,bounds:{minLat:I,maxLat:R,minLon:V,maxLon:B},waypoints:H};t(N)}catch(c){n(c)}},i.onerror=()=>{n(new Error("Error reading GPX file"))},i.readAsText(e)}),il=e=>e<1e3?`${e.toFixed(0)}m`:`${(e/1e3).toFixed(2)}km`,zf=e=>{const t=Math.floor(e/3600),n=Math.floor(e%3600/60),i=Math.floor(e%60);return t>0?`${t}h ${n}m ${i}s`:n>0?`${n}m ${i}s`:`${i}s`},X4=e=>`${e.toFixed(0)}m`,Ov=e=>e.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});class J4{async uploadRoute(t,n,i){try{const r=c1(u1,`routes/${t}/${n.id}.gpx`),s=await k4(r,i),o=await P4(s.ref),l={...n,userId:t,fileUrl:o,fileName:i.name,fileSize:i.size,uploadedAt:Se.now(),isPublic:!1},c=await pF(Vm(Sn,"routes"),l);return await this.updateUserStorageUsage(t,i.size),c.id}catch(r){throw console.error("Error uploading route:",r),r}}async getUserRoutes(t){try{const n=Yw(Vm(Sn,"routes"),Xw("userId","==",t),Jw("uploadedAt","desc"));return(await n1(n)).docs.map(r=>({id:r.id,...r.data()}))}catch(n){throw console.error("Error fetching user routes:",n),n}}async deleteRoute(t,n){try{const i=await Uc(ci(Sn,"routes",t));if(!i.exists())throw new Error("Route not found");const r=i.data();if(r.userId!==n)throw new Error("Unauthorized");const s=c1(u1,`routes/${n}/${r.id}.gpx`);await I4(s),await fF(ci(Sn,"routes",t)),await this.updateUserStorageUsage(n,-r.fileSize)}catch(i){throw console.error("Error deleting route:",i),i}}async updateUserStorageUsage(t,n){try{const i=ci(Sn,"users",t),r=await Uc(i);if(r.exists()){const s=r.data().storageUsed||0;await i1(i,{storageUsed:Math.max(0,s+n)})}}catch(i){throw console.error("Error updating storage usage:",i),i}}async getUserStats(t){try{const n=await this.getUserRoutes(t);return n.reduce((r,s)=>(r.totalDistance+=s.totalDistance,r.totalDuration+=s.totalDuration,r.storageUsed+=s.fileSize,r),{totalRoutes:n.length,totalDistance:0,totalDuration:0,storageUsed:0})}catch(n){throw console.error("Error calculating user stats:",n),n}}async getPublicRoutes(t=20){try{const n=Yw(Vm(Sn,"routes"),Xw("isPublic","==",!0),Jw("uploadedAt","desc"),cF(t));return(await n1(n)).docs.map(r=>({id:r.id,...r.data()}))}catch(n){throw console.error("Error fetching public routes:",n),n}}async toggleRouteVisibility(t,n,i){try{const r=ci(Sn,"routes",t),s=await Uc(r);if(!s.exists())throw new Error("Route not found");if(s.data().userId!==n)throw new Error("Unauthorized");await i1(r,{isPublic:i})}catch(r){throw console.error("Error updating route visibility:",r),r}}}const Um=new J4,GP=$.createContext(void 0),zp=()=>{const e=$.useContext(GP);if(!e)throw new Error("useRoutes must be used within a RouteProvider");return e},tz=({children:e})=>{const[t,n]=$.useState([]),[i,r]=$.useState(!1),{markForSync:s}=Dv(),{user:o,userProfile:l}=Xu();$.useEffect(()=>{const x=localStorage.getItem("gpxRoutes");if(x)try{n(JSON.parse(x))}catch(T){console.error("Error parsing saved routes:",T)}},[]),$.useEffect(()=>{o&&c()},[o]),$.useEffect(()=>{t.length>0&&localStorage.setItem("gpxRoutes",JSON.stringify(t))},[t]);const c=async()=>{if(o)try{r(!0);const T=(await Um.getUserRoutes(o.uid)).map(S=>({...S,date:S.uploadedAt.toDate()}));n(T)}catch(x){console.error("Error loading Firebase routes:",x)}finally{r(!1)}},h=async x=>{try{if(r(!0),o&&l){const S=l.storageUsed,k=x.size;if(S+k>l.storageLimit)return alert("Storage limit exceeded. Please upgrade your plan or delete some routes."),!1}const T=await Y4(x);if(console.log("parsed route: "),console.log(T),n(S=>[...S,T]),o)try{await Um.uploadRoute(o.uid,T,x)}catch(S){console.error("Error uploading to Firebase:",S),s("route",T.id)}else s("route",T.id);return!0}catch(T){return console.error("Error parsing GPX file:",T),!1}finally{r(!1)}},p=x=>t.find(T=>T.id===x),g=async x=>{if(n(T=>T.filter(S=>S.id!==x)),o)try{await Um.deleteRoute(x,o.uid)}catch(T){console.error("Error deleting from Firebase:",T)}},y=async()=>{if(o)try{r(!0),await c()}catch(x){console.error("Error syncing with Firebase:",x)}finally{r(!1)}};return m.jsx(GP.Provider,{value:{routes:t,addRoute:h,getRoute:p,deleteRoute:g,loading:i,syncWithFirebase:y},children:e})};var x_={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(n,i){i(t)})(xC,function(n){var i="1.9.4";function r(a){var u,f,_,w;for(f=1,_=arguments.length;f<_;f++){w=arguments[f];for(u in w)a[u]=w[u]}return a}var s=Object.create||function(){function a(){}return function(u){return a.prototype=u,new a}}();function o(a,u){var f=Array.prototype.slice;if(a.bind)return a.bind.apply(a,f.call(arguments,1));var _=f.call(arguments,2);return function(){return a.apply(u,_.length?_.concat(f.call(arguments)):arguments)}}var l=0;function c(a){return"_leaflet_id"in a||(a._leaflet_id=++l),a._leaflet_id}function h(a,u,f){var _,w,C,F;return F=function(){_=!1,w&&(C.apply(f,w),w=!1)},C=function(){_?w=arguments:(a.apply(f,arguments),setTimeout(F,u),_=!0)},C}function p(a,u,f){var _=u[1],w=u[0],C=_-w;return a===_&&f?a:((a-w)%C+C)%C+w}function g(){return!1}function y(a,u){if(u===!1)return a;var f=Math.pow(10,u===void 0?6:u);return Math.round(a*f)/f}function x(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function T(a){return x(a).split(/\s+/)}function S(a,u){Object.prototype.hasOwnProperty.call(a,"options")||(a.options=a.options?s(a.options):{});for(var f in u)a.options[f]=u[f];return a.options}function k(a,u,f){var _=[];for(var w in a)_.push(encodeURIComponent(f?w.toUpperCase():w)+"="+encodeURIComponent(a[w]));return(!u||u.indexOf("?")===-1?"?":"&")+_.join("&")}var P=/\{ *([\w_ -]+) *\}/g;function I(a,u){return a.replace(P,function(f,_){var w=u[_];if(w===void 0)throw new Error("No value provided for variable "+f);return typeof w=="function"&&(w=w(u)),w})}var R=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};function V(a,u){for(var f=0;f<a.length;f++)if(a[f]===u)return f;return-1}var B="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function H(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}var N=0;function b(a){var u=+new Date,f=Math.max(0,16-(u-N));return N=u+f,window.setTimeout(a,f)}var A=window.requestAnimationFrame||H("RequestAnimationFrame")||b,D=window.cancelAnimationFrame||H("CancelAnimationFrame")||H("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)};function O(a,u,f){if(f&&A===b)a.call(u);else return A.call(window,o(a,u))}function z(a){a&&D.call(window,a)}var j={__proto__:null,extend:r,create:s,bind:o,get lastId(){return l},stamp:c,throttle:h,wrapNum:p,falseFn:g,formatNum:y,trim:x,splitWords:T,setOptions:S,getParamString:k,template:I,isArray:R,indexOf:V,emptyImageUrl:B,requestFn:A,cancelFn:D,requestAnimFrame:O,cancelAnimFrame:z};function Rt(){}Rt.extend=function(a){var u=function(){S(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},f=u.__super__=this.prototype,_=s(f);_.constructor=u,u.prototype=_;for(var w in this)Object.prototype.hasOwnProperty.call(this,w)&&w!=="prototype"&&w!=="__super__"&&(u[w]=this[w]);return a.statics&&r(u,a.statics),a.includes&&(Vt(a.includes),r.apply(null,[_].concat(a.includes))),r(_,a),delete _.statics,delete _.includes,_.options&&(_.options=f.options?s(f.options):{},r(_.options,a.options)),_._initHooks=[],_.callInitHooks=function(){if(!this._initHooksCalled){f.callInitHooks&&f.callInitHooks.call(this),this._initHooksCalled=!0;for(var C=0,F=_._initHooks.length;C<F;C++)_._initHooks[C].call(this)}},u},Rt.include=function(a){var u=this.prototype.options;return r(this.prototype,a),a.options&&(this.prototype.options=u,this.mergeOptions(a.options)),this},Rt.mergeOptions=function(a){return r(this.prototype.options,a),this},Rt.addInitHook=function(a){var u=Array.prototype.slice.call(arguments,1),f=typeof a=="function"?a:function(){this[a].apply(this,u)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(f),this};function Vt(a){if(!(typeof L>"u"||!L||!L.Mixin)){a=R(a)?a:[a];for(var u=0;u<a.length;u++)a[u]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Et={on:function(a,u,f){if(typeof a=="object")for(var _ in a)this._on(_,a[_],u);else{a=T(a);for(var w=0,C=a.length;w<C;w++)this._on(a[w],u,f)}return this},off:function(a,u,f){if(!arguments.length)delete this._events;else if(typeof a=="object")for(var _ in a)this._off(_,a[_],u);else{a=T(a);for(var w=arguments.length===1,C=0,F=a.length;C<F;C++)w?this._off(a[C]):this._off(a[C],u,f)}return this},_on:function(a,u,f,_){if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}if(this._listens(a,u,f)===!1){f===this&&(f=void 0);var w={fn:u,ctx:f};_&&(w.once=!0),this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(w)}},_off:function(a,u,f){var _,w,C;if(this._events&&(_=this._events[a],!!_)){if(arguments.length===1){if(this._firingCount)for(w=0,C=_.length;w<C;w++)_[w].fn=g;delete this._events[a];return}if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}var F=this._listens(a,u,f);if(F!==!1){var W=_[F];this._firingCount&&(W.fn=g,this._events[a]=_=_.slice()),_.splice(F,1)}}},fire:function(a,u,f){if(!this.listens(a,f))return this;var _=r({},u,{type:a,target:this,sourceTarget:u&&u.sourceTarget||this});if(this._events){var w=this._events[a];if(w){this._firingCount=this._firingCount+1||1;for(var C=0,F=w.length;C<F;C++){var W=w[C],q=W.fn;W.once&&this.off(a,q,W.ctx),q.call(W.ctx||this,_)}this._firingCount--}}return f&&this._propagateEvent(_),this},listens:function(a,u,f,_){typeof a!="string"&&console.warn('"string" type argument expected');var w=u;typeof u!="function"&&(_=!!u,w=void 0,f=void 0);var C=this._events&&this._events[a];if(C&&C.length&&this._listens(a,w,f)!==!1)return!0;if(_){for(var F in this._eventParents)if(this._eventParents[F].listens(a,u,f,_))return!0}return!1},_listens:function(a,u,f){if(!this._events)return!1;var _=this._events[a]||[];if(!u)return!!_.length;f===this&&(f=void 0);for(var w=0,C=_.length;w<C;w++)if(_[w].fn===u&&_[w].ctx===f)return w;return!1},once:function(a,u,f){if(typeof a=="object")for(var _ in a)this._on(_,a[_],u,!0);else{a=T(a);for(var w=0,C=a.length;w<C;w++)this._on(a[w],u,f,!0)}return this},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[c(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[c(a)],this},_propagateEvent:function(a){for(var u in this._eventParents)this._eventParents[u].fire(a.type,r({layer:a.target,propagatedFrom:a.target},a),!0)}};Et.addEventListener=Et.on,Et.removeEventListener=Et.clearAllEventListeners=Et.off,Et.addOneTimeEventListener=Et.once,Et.fireEvent=Et.fire,Et.hasEventListeners=Et.listens;var bt=Rt.extend(Et);function K(a,u,f){this.x=f?Math.round(a):a,this.y=f?Math.round(u):u}var st=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)};K.prototype={clone:function(){return new K(this.x,this.y)},add:function(a){return this.clone()._add(X(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(X(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new K(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new K(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=st(this.x),this.y=st(this.y),this},distanceTo:function(a){a=X(a);var u=a.x-this.x,f=a.y-this.y;return Math.sqrt(u*u+f*f)},equals:function(a){return a=X(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=X(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+y(this.x)+", "+y(this.y)+")"}};function X(a,u,f){return a instanceof K?a:R(a)?new K(a[0],a[1]):a==null?a:typeof a=="object"&&"x"in a&&"y"in a?new K(a.x,a.y):new K(a,u,f)}function lt(a,u){if(a)for(var f=u?[a,u]:a,_=0,w=f.length;_<w;_++)this.extend(f[_])}lt.prototype={extend:function(a){var u,f;if(!a)return this;if(a instanceof K||typeof a[0]=="number"||"x"in a)u=f=X(a);else if(a=ut(a),u=a.min,f=a.max,!u||!f)return this;return!this.min&&!this.max?(this.min=u.clone(),this.max=f.clone()):(this.min.x=Math.min(u.x,this.min.x),this.max.x=Math.max(f.x,this.max.x),this.min.y=Math.min(u.y,this.min.y),this.max.y=Math.max(f.y,this.max.y)),this},getCenter:function(a){return X((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return X(this.min.x,this.max.y)},getTopRight:function(){return X(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var u,f;return typeof a[0]=="number"||a instanceof K?a=X(a):a=ut(a),a instanceof lt?(u=a.min,f=a.max):u=f=a,u.x>=this.min.x&&f.x<=this.max.x&&u.y>=this.min.y&&f.y<=this.max.y},intersects:function(a){a=ut(a);var u=this.min,f=this.max,_=a.min,w=a.max,C=w.x>=u.x&&_.x<=f.x,F=w.y>=u.y&&_.y<=f.y;return C&&F},overlaps:function(a){a=ut(a);var u=this.min,f=this.max,_=a.min,w=a.max,C=w.x>u.x&&_.x<f.x,F=w.y>u.y&&_.y<f.y;return C&&F},isValid:function(){return!!(this.min&&this.max)},pad:function(a){var u=this.min,f=this.max,_=Math.abs(u.x-f.x)*a,w=Math.abs(u.y-f.y)*a;return ut(X(u.x-_,u.y-w),X(f.x+_,f.y+w))},equals:function(a){return a?(a=ut(a),this.min.equals(a.getTopLeft())&&this.max.equals(a.getBottomRight())):!1}};function ut(a,u){return!a||a instanceof lt?a:new lt(a,u)}function wt(a,u){if(a)for(var f=u?[a,u]:a,_=0,w=f.length;_<w;_++)this.extend(f[_])}wt.prototype={extend:function(a){var u=this._southWest,f=this._northEast,_,w;if(a instanceof _t)_=a,w=a;else if(a instanceof wt){if(_=a._southWest,w=a._northEast,!_||!w)return this}else return a?this.extend(ct(a)||St(a)):this;return!u&&!f?(this._southWest=new _t(_.lat,_.lng),this._northEast=new _t(w.lat,w.lng)):(u.lat=Math.min(_.lat,u.lat),u.lng=Math.min(_.lng,u.lng),f.lat=Math.max(w.lat,f.lat),f.lng=Math.max(w.lng,f.lng)),this},pad:function(a){var u=this._southWest,f=this._northEast,_=Math.abs(u.lat-f.lat)*a,w=Math.abs(u.lng-f.lng)*a;return new wt(new _t(u.lat-_,u.lng-w),new _t(f.lat+_,f.lng+w))},getCenter:function(){return new _t((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new _t(this.getNorth(),this.getWest())},getSouthEast:function(){return new _t(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){typeof a[0]=="number"||a instanceof _t||"lat"in a?a=ct(a):a=St(a);var u=this._southWest,f=this._northEast,_,w;return a instanceof wt?(_=a.getSouthWest(),w=a.getNorthEast()):_=w=a,_.lat>=u.lat&&w.lat<=f.lat&&_.lng>=u.lng&&w.lng<=f.lng},intersects:function(a){a=St(a);var u=this._southWest,f=this._northEast,_=a.getSouthWest(),w=a.getNorthEast(),C=w.lat>=u.lat&&_.lat<=f.lat,F=w.lng>=u.lng&&_.lng<=f.lng;return C&&F},overlaps:function(a){a=St(a);var u=this._southWest,f=this._northEast,_=a.getSouthWest(),w=a.getNorthEast(),C=w.lat>u.lat&&_.lat<f.lat,F=w.lng>u.lng&&_.lng<f.lng;return C&&F},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,u){return a?(a=St(a),this._southWest.equals(a.getSouthWest(),u)&&this._northEast.equals(a.getNorthEast(),u)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function St(a,u){return a instanceof wt?a:new wt(a,u)}function _t(a,u,f){if(isNaN(a)||isNaN(u))throw new Error("Invalid LatLng object: ("+a+", "+u+")");this.lat=+a,this.lng=+u,f!==void 0&&(this.alt=+f)}_t.prototype={equals:function(a,u){if(!a)return!1;a=ct(a);var f=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return f<=(u===void 0?1e-9:u)},toString:function(a){return"LatLng("+y(this.lat,a)+", "+y(this.lng,a)+")"},distanceTo:function(a){return vi.distance(this,ct(a))},wrap:function(){return vi.wrapLatLng(this)},toBounds:function(a){var u=180*a/40075017,f=u/Math.cos(Math.PI/180*this.lat);return St([this.lat-u,this.lng-f],[this.lat+u,this.lng+f])},clone:function(){return new _t(this.lat,this.lng,this.alt)}};function ct(a,u,f){return a instanceof _t?a:R(a)&&typeof a[0]!="object"?a.length===3?new _t(a[0],a[1],a[2]):a.length===2?new _t(a[0],a[1]):null:a==null?a:typeof a=="object"&&"lat"in a?new _t(a.lat,"lng"in a?a.lng:a.lon,a.alt):u===void 0?null:new _t(a,u,f)}var ke={latLngToPoint:function(a,u){var f=this.projection.project(a),_=this.scale(u);return this.transformation._transform(f,_)},pointToLatLng:function(a,u){var f=this.scale(u),_=this.transformation.untransform(a,f);return this.projection.unproject(_)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var u=this.projection.bounds,f=this.scale(a),_=this.transformation.transform(u.min,f),w=this.transformation.transform(u.max,f);return new lt(_,w)},infinite:!1,wrapLatLng:function(a){var u=this.wrapLng?p(a.lng,this.wrapLng,!0):a.lng,f=this.wrapLat?p(a.lat,this.wrapLat,!0):a.lat,_=a.alt;return new _t(f,u,_)},wrapLatLngBounds:function(a){var u=a.getCenter(),f=this.wrapLatLng(u),_=u.lat-f.lat,w=u.lng-f.lng;if(_===0&&w===0)return a;var C=a.getSouthWest(),F=a.getNorthEast(),W=new _t(C.lat-_,C.lng-w),q=new _t(F.lat-_,F.lng-w);return new wt(W,q)}},vi=r({},ke,{wrapLng:[-180,180],R:6371e3,distance:function(a,u){var f=Math.PI/180,_=a.lat*f,w=u.lat*f,C=Math.sin((u.lat-a.lat)*f/2),F=Math.sin((u.lng-a.lng)*f/2),W=C*C+Math.cos(_)*Math.cos(w)*F*F,q=2*Math.atan2(Math.sqrt(W),Math.sqrt(1-W));return this.R*q}}),nh=6378137,Er={R:nh,MAX_LATITUDE:85.0511287798,project:function(a){var u=Math.PI/180,f=this.MAX_LATITUDE,_=Math.max(Math.min(f,a.lat),-f),w=Math.sin(_*u);return new K(this.R*a.lng*u,this.R*Math.log((1+w)/(1-w))/2)},unproject:function(a){var u=180/Math.PI;return new _t((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*u,a.x*u/this.R)},bounds:function(){var a=nh*Math.PI;return new lt([-a,-a],[a,a])}()};function Sr(a,u,f,_){if(R(a)){this._a=a[0],this._b=a[1],this._c=a[2],this._d=a[3];return}this._a=a,this._b=u,this._c=f,this._d=_}Sr.prototype={transform:function(a,u){return this._transform(a.clone(),u)},_transform:function(a,u){return u=u||1,a.x=u*(this._a*a.x+this._b),a.y=u*(this._c*a.y+this._d),a},untransform:function(a,u){return u=u||1,new K((a.x/u-this._b)/this._a,(a.y/u-this._d)/this._c)}};function zi(a,u,f,_){return new Sr(a,u,f,_)}var Cs=r({},vi,{code:"EPSG:3857",projection:Er,transformation:function(){var a=.5/(Math.PI*Er.R);return zi(a,.5,-a,.5)}()}),_l=r({},Cs,{code:"EPSG:900913"});function Do(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function yl(a,u){var f="",_,w,C,F,W,q;for(_=0,C=a.length;_<C;_++){for(W=a[_],w=0,F=W.length;w<F;w++)q=W[w],f+=(w?"L":"M")+q.x+" "+q.y;f+=u?ot.svg?"z":"x":""}return f||"M0 0"}var vl=document.documentElement.style,Oo="ActiveXObject"in window,ih=Oo&&!document.addEventListener,jo="msLaunchUri"in navigator&&!("documentMode"in document),Vo=Ln("webkit"),rh=Ln("android"),Fo=Ln("android 2")||Ln("android 3"),xl=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),sh=rh&&Ln("Google")&&xl<537&&!("AudioNode"in window),ye=!!window.opera,Ae=!jo&&Ln("chrome"),As=Ln("gecko")&&!Vo&&!ye&&!Oo,oh=!Ae&&Ln("safari"),wl=Ln("phantom"),ah="OTransition"in vl,Rs=navigator.platform.indexOf("Win")===0,bl=Oo&&"transition"in vl,zo="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Fo,Bo="MozPerspective"in vl,$p=!window.L_DISABLE_3D&&(bl||zo||Bo)&&!ah&&!wl,Ns=typeof orientation<"u"||Ln("mobile"),Tl=Ns&&Vo,lh=Ns&&zo,El=!window.PointerEvent&&window.MSPointerEvent,kr=!!(window.PointerEvent||El),Uo="ontouchstart"in window||!!window.TouchEvent,Sl=!window.L_NO_TOUCH&&(Uo||kr),Bi=Ns&&ye,ch=Ns&&As,Ho=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,uh=function(){var a=!1;try{var u=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveEventSupport",g,u),window.removeEventListener("testPassiveEventSupport",g,u)}catch{}return a}(),Ls=function(){return!!document.createElement("canvas").getContext}(),Wo=!!(document.createElementNS&&Do("svg").createSVGRect),je=!!Wo&&function(){var a=document.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),hh=!Wo&&function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var u=a.firstChild;return u.style.behavior="url(#default#VML)",u&&typeof u.adj=="object"}catch{return!1}}(),Ms=navigator.platform.indexOf("Mac")===0,Ds=navigator.platform.indexOf("Linux")===0;function Ln(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}var ot={ie:Oo,ielt9:ih,edge:jo,webkit:Vo,android:rh,android23:Fo,androidStock:sh,opera:ye,chrome:Ae,gecko:As,safari:oh,phantom:wl,opera12:ah,win:Rs,ie3d:bl,webkit3d:zo,gecko3d:Bo,any3d:$p,mobile:Ns,mobileWebkit:Tl,mobileWebkit3d:lh,msPointer:El,pointer:kr,touch:Sl,touchNative:Uo,mobileOpera:Bi,mobileGecko:ch,retina:Ho,passiveEvents:uh,canvas:Ls,svg:Wo,vml:hh,inlineSvg:je,mac:Ms,linux:Ds},Ui=ot.msPointer?"MSPointerDown":"pointerdown",dh=ot.msPointer?"MSPointerMove":"pointermove",fh=ot.msPointer?"MSPointerUp":"pointerup",Os=ot.msPointer?"MSPointerCancel":"pointercancel",$o={touchstart:Ui,touchmove:dh,touchend:fh,touchcancel:Os},qo={touchstart:Ko,touchmove:Go,touchend:Go,touchcancel:Go},ti={},ei=!1;function ph(a,u,f){return u==="touchstart"&&gh(),qo[u]?(f=qo[u].bind(this,f),a.addEventListener($o[u],f,!1),f):(console.warn("wrong event specified:",u),g)}function mh(a,u,f){if(!$o[u]){console.warn("wrong event specified:",u);return}a.removeEventListener($o[u],f,!1)}function kl(a){ti[a.pointerId]=a}function Pl(a){ti[a.pointerId]&&(ti[a.pointerId]=a)}function Il(a){delete ti[a.pointerId]}function gh(){ei||(document.addEventListener(Ui,kl,!0),document.addEventListener(dh,Pl,!0),document.addEventListener(fh,Il,!0),document.addEventListener(Os,Il,!0),ei=!0)}function Go(a,u){if(u.pointerType!==(u.MSPOINTER_TYPE_MOUSE||"mouse")){u.touches=[];for(var f in ti)u.touches.push(ti[f]);u.changedTouches=[u],a(u)}}function Ko(a,u){u.MSPOINTER_TYPE_TOUCH&&u.pointerType===u.MSPOINTER_TYPE_TOUCH&&ie(u),Go(a,u)}function _h(a){var u={},f,_;for(_ in a)f=a[_],u[_]=f&&f.bind?f.bind(a):f;return a=u,u.type="dblclick",u.detail=2,u.isTrusted=!1,u._simulated=!0,u}var Cl=200;function js(a,u){a.addEventListener("dblclick",u);var f=0,_;function w(C){if(C.detail!==1){_=C.detail;return}if(!(C.pointerType==="mouse"||C.sourceCapabilities&&!C.sourceCapabilities.firesTouchEvents)){var F=Bl(C);if(!(F.some(function(q){return q instanceof HTMLLabelElement&&q.attributes.for})&&!F.some(function(q){return q instanceof HTMLInputElement||q instanceof HTMLSelectElement}))){var W=Date.now();W-f<=Cl?(_++,_===2&&u(_h(C))):_=1,f=W}}}return a.addEventListener("click",w),{dblclick:u,simDblclick:w}}function Hi(a,u){a.removeEventListener("dblclick",u.dblclick),a.removeEventListener("click",u.simDblclick)}var Vs=$i(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Fs=$i(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Al=Fs==="webkitTransition"||Fs==="OTransition"?Fs+"End":"transitionend";function Rl(a){return typeof a=="string"?document.getElementById(a):a}function Pr(a,u){var f=a.style[u]||a.currentStyle&&a.currentStyle[u];if((!f||f==="auto")&&document.defaultView){var _=document.defaultView.getComputedStyle(a,null);f=_?_[u]:null}return f==="auto"?null:f}function Ct(a,u,f){var _=document.createElement(a);return _.className=u||"",f&&f.appendChild(_),_}function qt(a){var u=a.parentNode;u&&u.removeChild(a)}function zs(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function Wi(a){var u=a.parentNode;u&&u.lastChild!==a&&u.appendChild(a)}function Ir(a){var u=a.parentNode;u&&u.firstChild!==a&&u.insertBefore(a,u.firstChild)}function Nl(a,u){if(a.classList!==void 0)return a.classList.contains(u);var f=Mn(a);return f.length>0&&new RegExp("(^|\\s)"+u+"(\\s|$)").test(f)}function xt(a,u){if(a.classList!==void 0)for(var f=T(u),_=0,w=f.length;_<w;_++)a.classList.add(f[_]);else if(!Nl(a,u)){var C=Mn(a);Ll(a,(C?C+" ":"")+u)}}function Jt(a,u){a.classList!==void 0?a.classList.remove(u):Ll(a,x((" "+Mn(a)+" ").replace(" "+u+" "," ")))}function Ll(a,u){a.className.baseVal===void 0?a.className=u:a.className.baseVal=u}function Mn(a){return a.correspondingElement&&(a=a.correspondingElement),a.className.baseVal===void 0?a.className:a.className.baseVal}function ce(a,u){"opacity"in a.style?a.style.opacity=u:"filter"in a.style&&Zo(a,u)}function Zo(a,u){var f=!1,_="DXImageTransform.Microsoft.Alpha";try{f=a.filters.item(_)}catch{if(u===1)return}u=Math.round(u*100),f?(f.Enabled=u!==100,f.Opacity=u):a.style.filter+=" progid:"+_+"(opacity="+u+")"}function $i(a){for(var u=document.documentElement.style,f=0;f<a.length;f++)if(a[f]in u)return a[f];return!1}function xi(a,u,f){var _=u||new K(0,0);a.style[Vs]=(ot.ie3d?"translate("+_.x+"px,"+_.y+"px)":"translate3d("+_.x+"px,"+_.y+"px,0)")+(f?" scale("+f+")":"")}function mt(a,u){a._leaflet_pos=u,ot.any3d?xi(a,u):(a.style.left=u.x+"px",a.style.top=u.y+"px")}function Dn(a){return a._leaflet_pos||new K(0,0)}var ni,ii,Ml;if("onselectstart"in document)ni=function(){ht(window,"selectstart",ie)},ii=function(){Wt(window,"selectstart",ie)};else{var Cr=$i(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ni=function(){if(Cr){var a=document.documentElement.style;Ml=a[Cr],a[Cr]="none"}},ii=function(){Cr&&(document.documentElement.style[Cr]=Ml,Ml=void 0)}}function Dl(){ht(window,"dragstart",ie)}function Ol(){Wt(window,"dragstart",ie)}var Qo,jl;function qi(a){for(;a.tabIndex===-1;)a=a.parentNode;a.style&&(wn(),Qo=a,jl=a.style.outlineStyle,a.style.outlineStyle="none",ht(window,"keydown",wn))}function wn(){Qo&&(Qo.style.outlineStyle=jl,Qo=void 0,jl=void 0,Wt(window,"keydown",wn))}function Vl(a){do a=a.parentNode;while((!a.offsetWidth||!a.offsetHeight)&&a!==document.body);return a}function Yo(a){var u=a.getBoundingClientRect();return{x:u.width/a.offsetWidth||1,y:u.height/a.offsetHeight||1,boundingClientRect:u}}var yh={__proto__:null,TRANSFORM:Vs,TRANSITION:Fs,TRANSITION_END:Al,get:Rl,getStyle:Pr,create:Ct,remove:qt,empty:zs,toFront:Wi,toBack:Ir,hasClass:Nl,addClass:xt,removeClass:Jt,setClass:Ll,getClass:Mn,setOpacity:ce,testProp:$i,setTransform:xi,setPosition:mt,getPosition:Dn,get disableTextSelection(){return ni},get enableTextSelection(){return ii},disableImageDrag:Dl,enableImageDrag:Ol,preventOutline:qi,restoreOutline:wn,getSizedParentNode:Vl,getScale:Yo};function ht(a,u,f,_){if(u&&typeof u=="object")for(var w in u)Fl(a,w,u[w],f);else{u=T(u);for(var C=0,F=u.length;C<F;C++)Fl(a,u[C],f,_)}return this}var On="_leaflet_events";function Wt(a,u,f,_){if(arguments.length===1)vh(a),delete a[On];else if(u&&typeof u=="object")for(var w in u)zl(a,w,u[w],f);else if(u=T(u),arguments.length===2)vh(a,function(W){return V(u,W)!==-1});else for(var C=0,F=u.length;C<F;C++)zl(a,u[C],f,_);return this}function vh(a,u){for(var f in a[On]){var _=f.split(/\d/)[0];(!u||u(_))&&zl(a,_,null,null,f)}}var jn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Fl(a,u,f,_){var w=u+c(f)+(_?"_"+c(_):"");if(a[On]&&a[On][w])return this;var C=function(W){return f.call(_||a,W||window.event)},F=C;!ot.touchNative&&ot.pointer&&u.indexOf("touch")===0?C=ph(a,u,C):ot.touch&&u==="dblclick"?C=js(a,C):"addEventListener"in a?u==="touchstart"||u==="touchmove"||u==="wheel"||u==="mousewheel"?a.addEventListener(jn[u]||u,C,ot.passiveEvents?{passive:!1}:!1):u==="mouseenter"||u==="mouseleave"?(C=function(W){W=W||window.event,Ul(a,W)&&F(W)},a.addEventListener(jn[u],C,!1)):a.addEventListener(u,F,!1):a.attachEvent("on"+u,C),a[On]=a[On]||{},a[On][w]=C}function zl(a,u,f,_,w){w=w||u+c(f)+(_?"_"+c(_):"");var C=a[On]&&a[On][w];if(!C)return this;!ot.touchNative&&ot.pointer&&u.indexOf("touch")===0?mh(a,u,C):ot.touch&&u==="dblclick"?Hi(a,C):"removeEventListener"in a?a.removeEventListener(jn[u]||u,C,!1):a.detachEvent("on"+u,C),a[On][w]=null}function Vn(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,this}function Ar(a){return Fl(a,"wheel",Vn),this}function Rr(a){return ht(a,"mousedown touchstart dblclick contextmenu",Vn),a._leaflet_disable_click=!0,this}function ie(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function bn(a){return ie(a),Vn(a),this}function Bl(a){if(a.composedPath)return a.composedPath();for(var u=[],f=a.target;f;)u.push(f),f=f.parentNode;return u}function Xo(a,u){if(!u)return new K(a.clientX,a.clientY);var f=Yo(u),_=f.boundingClientRect;return new K((a.clientX-_.left)/f.x-u.clientLeft,(a.clientY-_.top)/f.y-u.clientTop)}var te=ot.linux&&ot.chrome?window.devicePixelRatio:ot.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function xh(a){return ot.edge?a.wheelDeltaY/2:a.deltaY&&a.deltaMode===0?-a.deltaY/te:a.deltaY&&a.deltaMode===1?-a.deltaY*20:a.deltaY&&a.deltaMode===2?-a.deltaY*60:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?-a.detail*20:a.detail?a.detail/-32765*60:0}function Ul(a,u){var f=u.relatedTarget;if(!f)return!0;try{for(;f&&f!==a;)f=f.parentNode}catch{return!1}return f!==a}var wh={__proto__:null,on:ht,off:Wt,stopPropagation:Vn,disableScrollPropagation:Ar,disableClickPropagation:Rr,preventDefault:ie,stop:bn,getPropagationPath:Bl,getMousePosition:Xo,getWheelDelta:xh,isExternalTarget:Ul,addListener:ht,removeListener:Wt},Hl=bt.extend({run:function(a,u,f,_){this.stop(),this._el=a,this._inProgress=!0,this._duration=f||.25,this._easeOutPower=1/Math.max(_||.5,.2),this._startPos=Dn(a),this._offset=u.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=O(this._animate,this),this._step()},_step:function(a){var u=+new Date-this._startTime,f=this._duration*1e3;u<f?this._runFrame(this._easeOut(u/f),a):(this._runFrame(1),this._complete())},_runFrame:function(a,u){var f=this._startPos.add(this._offset.multiplyBy(a));u&&f._round(),mt(this._el,f),this.fire("step")},_complete:function(){z(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),Pt=bt.extend({options:{crs:Cs,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,u){u=S(this,u),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),u.maxBounds&&this.setMaxBounds(u.maxBounds),u.zoom!==void 0&&(this._zoom=this._limitZoom(u.zoom)),u.center&&u.zoom!==void 0&&this.setView(ct(u.center),u.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Fs&&ot.any3d&&!ot.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ht(this._proxy,Al,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,u,f){if(u=u===void 0?this._zoom:this._limitZoom(u),a=this._limitCenter(ct(a),u,this.options.maxBounds),f=f||{},this._stop(),this._loaded&&!f.reset&&f!==!0){f.animate!==void 0&&(f.zoom=r({animate:f.animate},f.zoom),f.pan=r({animate:f.animate,duration:f.duration},f.pan));var _=this._zoom!==u?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,u,f.zoom):this._tryAnimatedPan(a,f.pan);if(_)return clearTimeout(this._sizeTimer),this}return this._resetView(a,u,f.pan&&f.pan.noMoveStart),this},setZoom:function(a,u){return this._loaded?this.setView(this.getCenter(),a,{zoom:u}):(this._zoom=a,this)},zoomIn:function(a,u){return a=a||(ot.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,u)},zoomOut:function(a,u){return a=a||(ot.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,u)},setZoomAround:function(a,u,f){var _=this.getZoomScale(u),w=this.getSize().divideBy(2),C=a instanceof K?a:this.latLngToContainerPoint(a),F=C.subtract(w).multiplyBy(1-1/_),W=this.containerPointToLatLng(w.add(F));return this.setView(W,u,{zoom:f})},_getBoundsCenterZoom:function(a,u){u=u||{},a=a.getBounds?a.getBounds():St(a);var f=X(u.paddingTopLeft||u.padding||[0,0]),_=X(u.paddingBottomRight||u.padding||[0,0]),w=this.getBoundsZoom(a,!1,f.add(_));if(w=typeof u.maxZoom=="number"?Math.min(u.maxZoom,w):w,w===1/0)return{center:a.getCenter(),zoom:w};var C=_.subtract(f).divideBy(2),F=this.project(a.getSouthWest(),w),W=this.project(a.getNorthEast(),w),q=this.unproject(F.add(W).divideBy(2).add(C),w);return{center:q,zoom:w}},fitBounds:function(a,u){if(a=St(a),!a.isValid())throw new Error("Bounds are not valid.");var f=this._getBoundsCenterZoom(a,u);return this.setView(f.center,f.zoom,u)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,u){return this.setView(a,this._zoom,{pan:u})},panBy:function(a,u){if(a=X(a).round(),u=u||{},!a.x&&!a.y)return this.fire("moveend");if(u.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Hl,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),u.noMoveStart||this.fire("movestart"),u.animate!==!1){xt(this._mapPane,"leaflet-pan-anim");var f=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,f,u.duration||.25,u.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,u,f){if(f=f||{},f.animate===!1||!ot.any3d)return this.setView(a,u,f);this._stop();var _=this.project(this.getCenter()),w=this.project(a),C=this.getSize(),F=this._zoom;a=ct(a),u=u===void 0?F:u;var W=Math.max(C.x,C.y),q=W*this.getZoomScale(F,u),Q=w.distanceTo(_)||1,et=1.42,dt=et*et;function kt(xe){var jh=xe?-1:1,fC=xe?q:W,pC=q*q-W*W+jh*dt*dt*Q*Q,mC=2*fC*dt*Q,Xp=pC/mC,y0=Math.sqrt(Xp*Xp+1)-Xp,gC=y0<1e-9?-18:Math.log(y0);return gC}function rn(xe){return(Math.exp(xe)-Math.exp(-xe))/2}function Ne(xe){return(Math.exp(xe)+Math.exp(-xe))/2}function zn(xe){return rn(xe)/Ne(xe)}var dn=kt(0);function ha(xe){return W*(Ne(dn)/Ne(dn+et*xe))}function cC(xe){return W*(Ne(dn)*zn(dn+et*xe)-rn(dn))/dt}function uC(xe){return 1-Math.pow(1-xe,1.5)}var hC=Date.now(),g0=(kt(1)-dn)/et,dC=f.duration?1e3*f.duration:1e3*g0*.8;function _0(){var xe=(Date.now()-hC)/dC,jh=uC(xe)*g0;xe<=1?(this._flyToFrame=O(_0,this),this._move(this.unproject(_.add(w.subtract(_).multiplyBy(cC(jh)/Q)),F),this.getScaleZoom(W/ha(jh),F),{flyTo:!0})):this._move(a,u)._moveEnd(!0)}return this._moveStart(!0,f.noMoveStart),_0.call(this),this},flyToBounds:function(a,u){var f=this._getBoundsCenterZoom(a,u);return this.flyTo(f.center,f.zoom,u)},setMaxBounds:function(a){return a=St(a),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),a.isValid()?(this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(a){var u=this.options.minZoom;return this.options.minZoom=a,this._loaded&&u!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this},setMaxZoom:function(a){var u=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&u!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,u){this._enforcingBounds=!0;var f=this.getCenter(),_=this._limitCenter(f,this._zoom,St(a));return f.equals(_)||this.panTo(_,u),this._enforcingBounds=!1,this},panInside:function(a,u){u=u||{};var f=X(u.paddingTopLeft||u.padding||[0,0]),_=X(u.paddingBottomRight||u.padding||[0,0]),w=this.project(this.getCenter()),C=this.project(a),F=this.getPixelBounds(),W=ut([F.min.add(f),F.max.subtract(_)]),q=W.getSize();if(!W.contains(C)){this._enforcingBounds=!0;var Q=C.subtract(W.getCenter()),et=W.extend(C).getSize().subtract(q);w.x+=Q.x<0?-et.x:et.x,w.y+=Q.y<0?-et.y:et.y,this.panTo(this.unproject(w),u),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=r({animate:!1,pan:!0},a===!0?{animate:!0}:a);var u=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var f=this.getSize(),_=u.divideBy(2).round(),w=f.divideBy(2).round(),C=_.subtract(w);return!C.x&&!C.y?this:(a.animate&&a.pan?this.panBy(C):(a.pan&&this._rawPanBy(C),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:u,newSize:f}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=r({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var u=o(this._handleGeolocationResponse,this),f=o(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(u,f,a):navigator.geolocation.getCurrentPosition(u,f,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){if(this._container._leaflet_id){var u=a.code,f=a.message||(u===1?"permission denied":u===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:u,message:"Geolocation error: "+f+"."})}},_handleGeolocationResponse:function(a){if(this._container._leaflet_id){var u=a.coords.latitude,f=a.coords.longitude,_=new _t(u,f),w=_.toBounds(a.coords.accuracy*2),C=this._locateOptions;if(C.setView){var F=this.getBoundsZoom(w);this.setView(_,C.maxZoom?Math.min(F,C.maxZoom):F)}var W={latlng:_,bounds:w,timestamp:a.timestamp};for(var q in a.coords)typeof a.coords[q]=="number"&&(W[q]=a.coords[q]);this.fire("locationfound",W)}},addHandler:function(a,u){if(!u)return this;var f=this[a]=new u(this);return this._handlers.push(f),this.options[a]&&f.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),qt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(z(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var a;for(a in this._layers)this._layers[a].remove();for(a in this._panes)qt(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,u){var f="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),_=Ct("div",f,u||this._mapPane);return a&&(this._panes[a]=_),_},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),u=this.unproject(a.getBottomLeft()),f=this.unproject(a.getTopRight());return new wt(u,f)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,u,f){a=St(a),f=X(f||[0,0]);var _=this.getZoom()||0,w=this.getMinZoom(),C=this.getMaxZoom(),F=a.getNorthWest(),W=a.getSouthEast(),q=this.getSize().subtract(f),Q=ut(this.project(W,_),this.project(F,_)).getSize(),et=ot.any3d?this.options.zoomSnap:1,dt=q.x/Q.x,kt=q.y/Q.y,rn=u?Math.max(dt,kt):Math.min(dt,kt);return _=this.getScaleZoom(rn,_),et&&(_=Math.round(_/(et/100))*(et/100),_=u?Math.ceil(_/et)*et:Math.floor(_/et)*et),Math.max(w,Math.min(C,_))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new K(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,u){var f=this._getTopLeftPoint(a,u);return new lt(f,f.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===void 0?this.getZoom():a)},getPane:function(a){return typeof a=="string"?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,u){var f=this.options.crs;return u=u===void 0?this._zoom:u,f.scale(a)/f.scale(u)},getScaleZoom:function(a,u){var f=this.options.crs;u=u===void 0?this._zoom:u;var _=f.zoom(a*f.scale(u));return isNaN(_)?1/0:_},project:function(a,u){return u=u===void 0?this._zoom:u,this.options.crs.latLngToPoint(ct(a),u)},unproject:function(a,u){return u=u===void 0?this._zoom:u,this.options.crs.pointToLatLng(X(a),u)},layerPointToLatLng:function(a){var u=X(a).add(this.getPixelOrigin());return this.unproject(u)},latLngToLayerPoint:function(a){var u=this.project(ct(a))._round();return u._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(ct(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(St(a))},distance:function(a,u){return this.options.crs.distance(ct(a),ct(u))},containerPointToLayerPoint:function(a){return X(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return X(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var u=this.containerPointToLayerPoint(X(a));return this.layerPointToLatLng(u)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ct(a)))},mouseEventToContainerPoint:function(a){return Xo(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var u=this._container=Rl(a);if(u){if(u._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ht(u,"scroll",this._onScroll,this),this._containerId=c(u)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&ot.any3d,xt(a,"leaflet-container"+(ot.touch?" leaflet-touch":"")+(ot.retina?" leaflet-retina":"")+(ot.ielt9?" leaflet-oldie":"")+(ot.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var u=Pr(a,"position");u!=="absolute"&&u!=="relative"&&u!=="fixed"&&u!=="sticky"&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),mt(this._mapPane,new K(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(xt(a.markerPane,"leaflet-zoom-hide"),xt(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,u,f){mt(this._mapPane,new K(0,0));var _=!this._loaded;this._loaded=!0,u=this._limitZoom(u),this.fire("viewprereset");var w=this._zoom!==u;this._moveStart(w,f)._move(a,u)._moveEnd(w),this.fire("viewreset"),_&&this.fire("load")},_moveStart:function(a,u){return a&&this.fire("zoomstart"),u||this.fire("movestart"),this},_move:function(a,u,f,_){u===void 0&&(u=this._zoom);var w=this._zoom!==u;return this._zoom=u,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),_?f&&f.pinch&&this.fire("zoom",f):((w||f&&f.pinch)&&this.fire("zoom",f),this.fire("move",f)),this},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return z(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){mt(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={},this._targets[c(this._container)]=this;var u=a?Wt:ht;u(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&u(window,"resize",this._onResize,this),ot.any3d&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){z(this._resizeRequest),this._resizeRequest=O(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,u){for(var f=[],_,w=u==="mouseout"||u==="mouseover",C=a.target||a.srcElement,F=!1;C;){if(_=this._targets[c(C)],_&&(u==="click"||u==="preclick")&&this._draggableMoved(_)){F=!0;break}if(_&&_.listens(u,!0)&&(w&&!Ul(C,a)||(f.push(_),w))||C===this._container)break;C=C.parentNode}return!f.length&&!F&&!w&&this.listens(u,!0)&&(f=[this]),f},_isClickDisabled:function(a){for(;a&&a!==this._container;){if(a._leaflet_disable_click)return!0;a=a.parentNode}},_handleDOMEvent:function(a){var u=a.target||a.srcElement;if(!(!this._loaded||u._leaflet_disable_events||a.type==="click"&&this._isClickDisabled(u))){var f=a.type;f==="mousedown"&&qi(u),this._fireDOMEvent(a,f)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,u,f){if(a.type==="click"){var _=r({},a);_.type="preclick",this._fireDOMEvent(_,_.type,f)}var w=this._findEventTargets(a,u);if(f){for(var C=[],F=0;F<f.length;F++)f[F].listens(u,!0)&&C.push(f[F]);w=C.concat(w)}if(w.length){u==="contextmenu"&&ie(a);var W=w[0],q={originalEvent:a};if(a.type!=="keypress"&&a.type!=="keydown"&&a.type!=="keyup"){var Q=W.getLatLng&&(!W._radius||W._radius<=10);q.containerPoint=Q?this.latLngToContainerPoint(W.getLatLng()):this.mouseEventToContainerPoint(a),q.layerPoint=this.containerPointToLayerPoint(q.containerPoint),q.latlng=Q?W.getLatLng():this.layerPointToLatLng(q.layerPoint)}for(F=0;F<w.length;F++)if(w[F].fire(u,q,!0),q.originalEvent._stopped||w[F].options.bubblingMouseEvents===!1&&V(this._mouseEvents,u)!==-1)return}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,u=this._handlers.length;a<u;a++)this._handlers[a].disable()},whenReady:function(a,u){return this._loaded?a.call(u||this,{target:this}):this.on("load",a,u),this},_getMapPanePos:function(){return Dn(this._mapPane)||new K(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,u){var f=a&&u!==void 0?this._getNewPixelOrigin(a,u):this.getPixelOrigin();return f.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,u){var f=this.getSize()._divideBy(2);return this.project(a,u)._subtract(f)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,u,f){var _=this._getNewPixelOrigin(f,u);return this.project(a,u)._subtract(_)},_latLngBoundsToNewLayerBounds:function(a,u,f){var _=this._getNewPixelOrigin(f,u);return ut([this.project(a.getSouthWest(),u)._subtract(_),this.project(a.getNorthWest(),u)._subtract(_),this.project(a.getSouthEast(),u)._subtract(_),this.project(a.getNorthEast(),u)._subtract(_)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,u,f){if(!f)return a;var _=this.project(a,u),w=this.getSize().divideBy(2),C=new lt(_.subtract(w),_.add(w)),F=this._getBoundsOffset(C,f,u);return Math.abs(F.x)<=1&&Math.abs(F.y)<=1?a:this.unproject(_.add(F),u)},_limitOffset:function(a,u){if(!u)return a;var f=this.getPixelBounds(),_=new lt(f.min.add(a),f.max.add(a));return a.add(this._getBoundsOffset(_,u))},_getBoundsOffset:function(a,u,f){var _=ut(this.project(u.getNorthEast(),f),this.project(u.getSouthWest(),f)),w=_.min.subtract(a.min),C=_.max.subtract(a.max),F=this._rebound(w.x,-C.x),W=this._rebound(w.y,-C.y);return new K(F,W)},_rebound:function(a,u){return a+u>0?Math.round(a-u)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(u))},_limitZoom:function(a){var u=this.getMinZoom(),f=this.getMaxZoom(),_=ot.any3d?this.options.zoomSnap:1;return _&&(a=Math.round(a/_)*_),Math.max(u,Math.min(f,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Jt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,u){var f=this._getCenterOffset(a)._trunc();return(u&&u.animate)!==!0&&!this.getSize().contains(f)?!1:(this.panBy(f,u),!0)},_createAnimProxy:function(){var a=this._proxy=Ct("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(u){var f=Vs,_=this._proxy.style[f];xi(this._proxy,this.project(u.center,u.zoom),this.getZoomScale(u.zoom,1)),_===this._proxy.style[f]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){qt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var a=this.getCenter(),u=this.getZoom();xi(this._proxy,this.project(a,u),this.getZoomScale(u,1))},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,u,f){if(this._animatingZoom)return!0;if(f=f||{},!this._zoomAnimated||f.animate===!1||this._nothingToAnimate()||Math.abs(u-this._zoom)>this.options.zoomAnimationThreshold)return!1;var _=this.getZoomScale(u),w=this._getCenterOffset(a)._divideBy(1-1/_);return f.animate!==!0&&!this.getSize().contains(w)?!1:(O(function(){this._moveStart(!0,f.noMoveStart||!1)._animateZoom(a,u,!0)},this),!0)},_animateZoom:function(a,u,f,_){this._mapPane&&(f&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=u,xt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:u,noUpdate:_}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Jt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Jo(a,u){return new Pt(a,u)}var hn=Rt.extend({options:{position:"topright"},initialize:function(a){S(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var u=this._map;return u&&u.removeControl(this),this.options.position=a,u&&u.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var u=this._container=this.onAdd(a),f=this.getPosition(),_=a._controlCorners[f];return xt(u,"leaflet-control"),f.indexOf("bottom")!==-1?_.insertBefore(u,_.firstChild):_.appendChild(u),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(qt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),nn=function(a){return new hn(a)};Pt.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var a=this._controlCorners={},u="leaflet-",f=this._controlContainer=Ct("div",u+"control-container",this._container);function _(w,C){var F=u+w+" "+u+C;a[w+C]=Ct("div",F,f)}_("top","left"),_("top","right"),_("bottom","left"),_("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)qt(this._controlCorners[a]);qt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Wl=hn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,u,f,_){return f<_?-1:_<f?1:0}},initialize:function(a,u,f){S(this,f),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var _ in a)this._addLayer(a[_],_);for(_ in u)this._addLayer(u[_],_,!0)},onAdd:function(a){this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return hn.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,u){return this._addLayer(a,u),this._map?this._update():this},addOverlay:function(a,u){return this._addLayer(a,u,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var u=this._getLayer(c(a));return u&&this._layers.splice(this._layers.indexOf(u),1),this._map?this._update():this},expand:function(){xt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(xt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):Jt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Jt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",u=this._container=Ct("div",a),f=this.options.collapsed;u.setAttribute("aria-haspopup",!0),Rr(u),Ar(u);var _=this._section=Ct("section",a+"-list");f&&(this._map.on("click",this.collapse,this),ht(u,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var w=this._layersLink=Ct("a",a+"-toggle",u);w.href="#",w.title="Layers",w.setAttribute("role","button"),ht(w,{keydown:function(C){C.keyCode===13&&this._expandSafely()},click:function(C){ie(C),this._expandSafely()}},this),f||this.expand(),this._baseLayersList=Ct("div",a+"-base",_),this._separator=Ct("div",a+"-separator",_),this._overlaysList=Ct("div",a+"-overlays",_),u.appendChild(_)},_getLayer:function(a){for(var u=0;u<this._layers.length;u++)if(this._layers[u]&&c(this._layers[u].layer)===a)return this._layers[u]},_addLayer:function(a,u,f){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:u,overlay:f}),this.options.sortLayers&&this._layers.sort(o(function(_,w){return this.options.sortFunction(_.layer,w.layer,_.name,w.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;zs(this._baseLayersList),zs(this._overlaysList),this._layerControlInputs=[];var a,u,f,_,w=0;for(f=0;f<this._layers.length;f++)_=this._layers[f],this._addItem(_),u=u||_.overlay,a=a||!_.overlay,w+=_.overlay?0:1;return this.options.hideSingleBase&&(a=a&&w>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=u&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var u=this._getLayer(c(a.target)),f=u.overlay?a.type==="add"?"overlayadd":"overlayremove":a.type==="add"?"baselayerchange":null;f&&this._map.fire(f,u)},_createRadioElement:function(a,u){var f='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(u?' checked="checked"':"")+"/>",_=document.createElement("div");return _.innerHTML=f,_.firstChild},_addItem:function(a){var u=document.createElement("label"),f=this._map.hasLayer(a.layer),_;a.overlay?(_=document.createElement("input"),_.type="checkbox",_.className="leaflet-control-layers-selector",_.defaultChecked=f):_=this._createRadioElement("leaflet-base-layers_"+c(this),f),this._layerControlInputs.push(_),_.layerId=c(a.layer),ht(_,"click",this._onInputClick,this);var w=document.createElement("span");w.innerHTML=" "+a.name;var C=document.createElement("span");u.appendChild(C),C.appendChild(_),C.appendChild(w);var F=a.overlay?this._overlaysList:this._baseLayersList;return F.appendChild(u),this._checkDisabledLayers(),u},_onInputClick:function(){if(!this._preventClick){var a=this._layerControlInputs,u,f,_=[],w=[];this._handlingClick=!0;for(var C=a.length-1;C>=0;C--)u=a[C],f=this._getLayer(u.layerId).layer,u.checked?_.push(f):u.checked||w.push(f);for(C=0;C<w.length;C++)this._map.hasLayer(w[C])&&this._map.removeLayer(w[C]);for(C=0;C<_.length;C++)this._map.hasLayer(_[C])||this._map.addLayer(_[C]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var a=this._layerControlInputs,u,f,_=this._map.getZoom(),w=a.length-1;w>=0;w--)u=a[w],f=this._getLayer(u.layerId).layer,u.disabled=f.options.minZoom!==void 0&&_<f.options.minZoom||f.options.maxZoom!==void 0&&_>f.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var a=this._section;this._preventClick=!0,ht(a,"click",ie),this.expand();var u=this;setTimeout(function(){Wt(a,"click",ie),u._preventClick=!1})}}),qp=function(a,u,f){return new Wl(a,u,f)},Gi=hn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(a){var u="leaflet-control-zoom",f=Ct("div",u+" leaflet-bar"),_=this.options;return this._zoomInButton=this._createButton(_.zoomInText,_.zoomInTitle,u+"-in",f,this._zoomIn),this._zoomOutButton=this._createButton(_.zoomOutText,_.zoomOutTitle,u+"-out",f,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),f},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,u,f,_,w){var C=Ct("a",f,_);return C.innerHTML=a,C.href="#",C.title=u,C.setAttribute("role","button"),C.setAttribute("aria-label",u),Rr(C),ht(C,"click",bn),ht(C,"click",w,this),ht(C,"click",this._refocusOnMap,this),C},_updateDisabled:function(){var a=this._map,u="leaflet-disabled";Jt(this._zoomInButton,u),Jt(this._zoomOutButton,u),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||a._zoom===a.getMinZoom())&&(xt(this._zoomOutButton,u),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||a._zoom===a.getMaxZoom())&&(xt(this._zoomInButton,u),this._zoomInButton.setAttribute("aria-disabled","true"))}});Pt.mergeOptions({zoomControl:!0}),Pt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Gi,this.addControl(this.zoomControl))});var bh=function(a){return new Gi(a)},ta=hn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var u="leaflet-control-scale",f=Ct("div",u),_=this.options;return this._addScales(_,u+"-line",f),a.on(_.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),f},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,u,f){a.metric&&(this._mScale=Ct("div",u,f)),a.imperial&&(this._iScale=Ct("div",u,f))},_update:function(){var a=this._map,u=a.getSize().y/2,f=a.distance(a.containerPointToLatLng([0,u]),a.containerPointToLatLng([this.options.maxWidth,u]));this._updateScales(f)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var u=this._getRoundNum(a),f=u<1e3?u+" m":u/1e3+" km";this._updateScale(this._mScale,f,u/a)},_updateImperial:function(a){var u=a*3.2808399,f,_,w;u>5280?(f=u/5280,_=this._getRoundNum(f),this._updateScale(this._iScale,_+" mi",_/f)):(w=this._getRoundNum(u),this._updateScale(this._iScale,w+" ft",w/u))},_updateScale:function(a,u,f){a.style.width=Math.round(this.options.maxWidth*f)+"px",a.innerHTML=u},_getRoundNum:function(a){var u=Math.pow(10,(Math.floor(a)+"").length-1),f=a/u;return f=f>=10?10:f>=5?5:f>=3?3:f>=2?2:1,u*f}}),ea=function(a){return new ta(a)},Th='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Nr=hn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ot.inlineSvg?Th+" ":"")+"Leaflet</a>"},initialize:function(a){S(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=Ct("div","leaflet-control-attribution"),Rr(this._container);for(var u in a._layers)a._layers[u].getAttribution&&this.addAttribution(a._layers[u].getAttribution());return this._update(),a.on("layeradd",this._addAttribution,this),this._container},onRemove:function(a){a.off("layeradd",this._addAttribution,this)},_addAttribution:function(a){a.layer.getAttribution&&(this.addAttribution(a.layer.getAttribution()),a.layer.once("remove",function(){this.removeAttribution(a.layer.getAttribution())},this))},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var u in this._attributions)this._attributions[u]&&a.push(u);var f=[];this.options.prefix&&f.push(this.options.prefix),a.length&&f.push(a.join(", ")),this._container.innerHTML=f.join(' <span aria-hidden="true">|</span> ')}}});Pt.mergeOptions({attributionControl:!0}),Pt.addInitHook(function(){this.options.attributionControl&&new Nr().addTo(this)});var Gp=function(a){return new Nr(a)};hn.Layers=Wl,hn.Zoom=Gi,hn.Scale=ta,hn.Attribution=Nr,nn.layers=qp,nn.zoom=bh,nn.scale=ea,nn.attribution=Gp;var Tn=Rt.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Tn.addTo=function(a,u){return a.addHandler(u,this),this};var Bs={Events:Et},$l=ot.touch?"touchstart mousedown":"mousedown",ri=bt.extend({options:{clickTolerance:3},initialize:function(a,u,f,_){S(this,_),this._element=a,this._dragStartTarget=u||a,this._preventOutline=f},enable:function(){this._enabled||(ht(this._dragStartTarget,$l,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ri._dragging===this&&this.finishDrag(!0),Wt(this._dragStartTarget,$l,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(this._enabled&&(this._moved=!1,!Nl(this._element,"leaflet-zoom-anim"))){if(a.touches&&a.touches.length!==1){ri._dragging===this&&this.finishDrag();return}if(!(ri._dragging||a.shiftKey||a.which!==1&&a.button!==1&&!a.touches)&&(ri._dragging=this,this._preventOutline&&qi(this._element),Dl(),ni(),!this._moving)){this.fire("down");var u=a.touches?a.touches[0]:a,f=Vl(this._element);this._startPoint=new K(u.clientX,u.clientY),this._startPos=Dn(this._element),this._parentScale=Yo(f);var _=a.type==="mousedown";ht(document,_?"mousemove":"touchmove",this._onMove,this),ht(document,_?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(a){if(this._enabled){if(a.touches&&a.touches.length>1){this._moved=!0;return}var u=a.touches&&a.touches.length===1?a.touches[0]:a,f=new K(u.clientX,u.clientY)._subtract(this._startPoint);!f.x&&!f.y||Math.abs(f.x)+Math.abs(f.y)<this.options.clickTolerance||(f.x/=this._parentScale.x,f.y/=this._parentScale.y,ie(a),this._moved||(this.fire("dragstart"),this._moved=!0,xt(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),xt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(f),this._moving=!0,this._lastEvent=a,this._updatePosition())}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),mt(this._element,this._newPos),this.fire("drag",a)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(a){Jt(document.body,"leaflet-dragging"),this._lastTarget&&(Jt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Wt(document,"mousemove touchmove",this._onMove,this),Wt(document,"mouseup touchend touchcancel",this._onUp,this),Ol(),ii();var u=this._moved&&this._moving;this._moving=!1,ri._dragging=!1,u&&this.fire("dragend",{noInertia:a,distance:this._newPos.distanceTo(this._startPos)})}});function na(a,u,f){var _,w=[1,4,2,8],C,F,W,q,Q,et,dt,kt;for(C=0,et=a.length;C<et;C++)a[C]._code=wi(a[C],u);for(W=0;W<4;W++){for(dt=w[W],_=[],C=0,et=a.length,F=et-1;C<et;F=C++)q=a[C],Q=a[F],q._code&dt?Q._code&dt||(kt=Re(Q,q,dt,u,f),kt._code=wi(kt,u),_.push(kt)):(Q._code&dt&&(kt=Re(Q,q,dt,u,f),kt._code=wi(kt,u),_.push(kt)),_.push(q));a=_}return a}function ia(a,u){var f,_,w,C,F,W,q,Q,et;if(!a||a.length===0)throw new Error("latlngs not passed");d(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var dt=ct([0,0]),kt=St(a),rn=kt.getNorthWest().distanceTo(kt.getSouthWest())*kt.getNorthEast().distanceTo(kt.getNorthWest());rn<1700&&(dt=ra(a));var Ne=a.length,zn=[];for(f=0;f<Ne;f++){var dn=ct(a[f]);zn.push(u.project(ct([dn.lat-dt.lat,dn.lng-dt.lng])))}for(W=q=Q=0,f=0,_=Ne-1;f<Ne;_=f++)w=zn[f],C=zn[_],F=w.y*C.x-C.y*w.x,q+=(w.x+C.x)*F,Q+=(w.y+C.y)*F,W+=F*3;W===0?et=zn[0]:et=[q/W,Q/W];var ha=u.unproject(X(et));return ct([ha.lat+dt.lat,ha.lng+dt.lng])}function ra(a){for(var u=0,f=0,_=0,w=0;w<a.length;w++){var C=ct(a[w]);u+=C.lat,f+=C.lng,_++}return ct([u/_,f/_])}var sa={__proto__:null,clipPolygon:na,polygonCenter:ia,centroid:ra};function ql(a,u){if(!u||!a.length)return a.slice();var f=u*u;return a=Sh(a,f),a=Eh(a,f),a}function Gl(a,u,f){return Math.sqrt(Fn(a,u,f,!0))}function Ki(a,u,f){return Fn(a,u,f)}function Eh(a,u){var f=a.length,_=typeof Uint8Array<"u"?Uint8Array:Array,w=new _(f);w[0]=w[f-1]=1,oa(a,w,u,0,f-1);var C,F=[];for(C=0;C<f;C++)w[C]&&F.push(a[C]);return F}function oa(a,u,f,_,w){var C=0,F,W,q;for(W=_+1;W<=w-1;W++)q=Fn(a[W],a[_],a[w],!0),q>C&&(F=W,C=q);C>f&&(u[F]=1,oa(a,u,f,_,F),oa(a,u,f,F,w))}function Sh(a,u){for(var f=[a[0]],_=1,w=0,C=a.length;_<C;_++)kh(a[_],a[w])>u&&(f.push(a[_]),w=_);return w<C-1&&f.push(a[C-1]),f}var Kl;function Us(a,u,f,_,w){var C=_?Kl:wi(a,f),F=wi(u,f),W,q,Q;for(Kl=F;;){if(!(C|F))return[a,u];if(C&F)return!1;W=C||F,q=Re(a,u,W,f,w),Q=wi(q,f),W===C?(a=q,C=Q):(u=q,F=Q)}}function Re(a,u,f,_,w){var C=u.x-a.x,F=u.y-a.y,W=_.min,q=_.max,Q,et;return f&8?(Q=a.x+C*(q.y-a.y)/F,et=q.y):f&4?(Q=a.x+C*(W.y-a.y)/F,et=W.y):f&2?(Q=q.x,et=a.y+F*(q.x-a.x)/C):f&1&&(Q=W.x,et=a.y+F*(W.x-a.x)/C),new K(Q,et,w)}function wi(a,u){var f=0;return a.x<u.min.x?f|=1:a.x>u.max.x&&(f|=2),a.y<u.min.y?f|=4:a.y>u.max.y&&(f|=8),f}function kh(a,u){var f=u.x-a.x,_=u.y-a.y;return f*f+_*_}function Fn(a,u,f,_){var w=u.x,C=u.y,F=f.x-w,W=f.y-C,q=F*F+W*W,Q;return q>0&&(Q=((a.x-w)*F+(a.y-C)*W)/q,Q>1?(w=f.x,C=f.y):Q>0&&(w+=F*Q,C+=W*Q)),F=a.x-w,W=a.y-C,_?F*F+W*W:new K(w,C)}function d(a){return!R(a[0])||typeof a[0][0]!="object"&&typeof a[0][0]<"u"}function v(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),d(a)}function E(a,u){var f,_,w,C,F,W,q,Q;if(!a||a.length===0)throw new Error("latlngs not passed");d(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var et=ct([0,0]),dt=St(a),kt=dt.getNorthWest().distanceTo(dt.getSouthWest())*dt.getNorthEast().distanceTo(dt.getNorthWest());kt<1700&&(et=ra(a));var rn=a.length,Ne=[];for(f=0;f<rn;f++){var zn=ct(a[f]);Ne.push(u.project(ct([zn.lat-et.lat,zn.lng-et.lng])))}for(f=0,_=0;f<rn-1;f++)_+=Ne[f].distanceTo(Ne[f+1])/2;if(_===0)Q=Ne[0];else for(f=0,C=0;f<rn-1;f++)if(F=Ne[f],W=Ne[f+1],w=F.distanceTo(W),C+=w,C>_){q=(C-_)/w,Q=[W.x-q*(W.x-F.x),W.y-q*(W.y-F.y)];break}var dn=u.unproject(X(Q));return ct([dn.lat+et.lat,dn.lng+et.lng])}var M={__proto__:null,simplify:ql,pointToSegmentDistance:Gl,closestPointOnSegment:Ki,clipSegment:Us,_getEdgeIntersection:Re,_getBitCode:wi,_sqClosestPointOnSegment:Fn,isFlat:d,_flat:v,polylineCenter:E},U={project:function(a){return new K(a.lng,a.lat)},unproject:function(a){return new _t(a.y,a.x)},bounds:new lt([-180,-90],[180,90])},G={R:6378137,R_MINOR:6356752314245179e-9,bounds:new lt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(a){var u=Math.PI/180,f=this.R,_=a.lat*u,w=this.R_MINOR/f,C=Math.sqrt(1-w*w),F=C*Math.sin(_),W=Math.tan(Math.PI/4-_/2)/Math.pow((1-F)/(1+F),C/2);return _=-f*Math.log(Math.max(W,1e-10)),new K(a.lng*u*f,_)},unproject:function(a){for(var u=180/Math.PI,f=this.R,_=this.R_MINOR/f,w=Math.sqrt(1-_*_),C=Math.exp(-a.y/f),F=Math.PI/2-2*Math.atan(C),W=0,q=.1,Q;W<15&&Math.abs(q)>1e-7;W++)Q=w*Math.sin(F),Q=Math.pow((1-Q)/(1+Q),w/2),q=Math.PI/2-2*Math.atan(C*Q)-F,F+=q;return new _t(F*u,a.x*u/f)}},tt={__proto__:null,LonLat:U,Mercator:G,SphericalMercator:Er},zt=r({},vi,{code:"EPSG:3395",projection:G,transformation:function(){var a=.5/(Math.PI*G.R);return zi(a,.5,-a,.5)}()}),ve=r({},vi,{code:"EPSG:4326",projection:U,transformation:zi(1/180,1,-1/180,.5)}),Mt=r({},ke,{projection:U,transformation:zi(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,u){var f=u.lng-a.lng,_=u.lat-a.lat;return Math.sqrt(f*f+_*_)},infinite:!0});ke.Earth=vi,ke.EPSG3395=zt,ke.EPSG3857=Cs,ke.EPSG900913=_l,ke.EPSG4326=ve,ke.Simple=Mt;var $t=bt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[c(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[c(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var u=a.target;if(u.hasLayer(this)){if(this._map=u,this._zoomAnimated=u._zoomAnimated,this.getEvents){var f=this.getEvents();u.on(f,this),this.once("remove",function(){u.off(f,this)},this)}this.onAdd(u),this.fire("add"),u.fire("layeradd",{layer:this})}}});Pt.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var u=c(a);return this._layers[u]?this:(this._layers[u]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var u=c(a);return this._layers[u]?(this._loaded&&a.onRemove(this),delete this._layers[u],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return c(a)in this._layers},eachLayer:function(a,u){for(var f in this._layers)a.call(u,this._layers[f]);return this},_addLayers:function(a){a=a?R(a)?a:[a]:[];for(var u=0,f=a.length;u<f;u++)this.addLayer(a[u])},_addZoomLimit:function(a){(!isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[c(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var u=c(a);this._zoomBoundLayers[u]&&(delete this._zoomBoundLayers[u],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,u=-1/0,f=this._getZoomSpan();for(var _ in this._zoomBoundLayers){var w=this._zoomBoundLayers[_].options;a=w.minZoom===void 0?a:Math.min(a,w.minZoom),u=w.maxZoom===void 0?u:Math.max(u,w.maxZoom)}this._layersMaxZoom=u===-1/0?void 0:u,this._layersMinZoom=a===1/0?void 0:a,f!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var re=$t.extend({initialize:function(a,u){S(this,u),this._layers={};var f,_;if(a)for(f=0,_=a.length;f<_;f++)this.addLayer(a[f])},addLayer:function(a){var u=this.getLayerId(a);return this._layers[u]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var u=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[u]&&this._map.removeLayer(this._layers[u]),delete this._layers[u],this},hasLayer:function(a){var u=typeof a=="number"?a:this.getLayerId(a);return u in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(a){var u=Array.prototype.slice.call(arguments,1),f,_;for(f in this._layers)_=this._layers[f],_[a]&&_[a].apply(_,u);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,u){for(var f in this._layers)a.call(u,this._layers[f]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return c(a)}}),Lr=function(a,u){return new re(a,u)},pe=re.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),re.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),re.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new wt;for(var u in this._layers){var f=this._layers[u];a.extend(f.getBounds?f.getBounds():f.getLatLng())}return a}}),aa=function(a,u){return new pe(a,u)},bi=Rt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(a){S(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,u){var f=this._getIconUrl(a);if(!f){if(a==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var _=this._createImg(f,u&&u.tagName==="IMG"?u:null);return this._setIconStyles(_,a),(this.options.crossOrigin||this.options.crossOrigin==="")&&(_.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),_},_setIconStyles:function(a,u){var f=this.options,_=f[u+"Size"];typeof _=="number"&&(_=[_,_]);var w=X(_),C=X(u==="shadow"&&f.shadowAnchor||f.iconAnchor||w&&w.divideBy(2,!0));a.className="leaflet-marker-"+u+" "+(f.className||""),C&&(a.style.marginLeft=-C.x+"px",a.style.marginTop=-C.y+"px"),w&&(a.style.width=w.x+"px",a.style.height=w.y+"px")},_createImg:function(a,u){return u=u||document.createElement("img"),u.src=a,u},_getIconUrl:function(a){return ot.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}});function WI(a){return new bi(a)}var Zl=bi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return typeof Zl.imagePath!="string"&&(Zl.imagePath=this._detectIconPath()),(this.options.imagePath||Zl.imagePath)+bi.prototype._getIconUrl.call(this,a)},_stripUrl:function(a){var u=function(f,_,w){var C=_.exec(f);return C&&C[w]};return a=u(a,/^url\((['"])?(.+)\1\)$/,2),a&&u(a,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var a=Ct("div","leaflet-default-icon-path",document.body),u=Pr(a,"background-image")||Pr(a,"backgroundImage");if(document.body.removeChild(a),u=this._stripUrl(u),u)return u;var f=document.querySelector('link[href$="leaflet.css"]');return f?f.href.substring(0,f.href.length-11-1):""}}),Yv=Tn.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new ri(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),xt(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Jt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var u=this._marker,f=u._map,_=this._marker.options.autoPanSpeed,w=this._marker.options.autoPanPadding,C=Dn(u._icon),F=f.getPixelBounds(),W=f.getPixelOrigin(),q=ut(F.min._subtract(W).add(w),F.max._subtract(W).subtract(w));if(!q.contains(C)){var Q=X((Math.max(q.max.x,C.x)-q.max.x)/(F.max.x-q.max.x)-(Math.min(q.min.x,C.x)-q.min.x)/(F.min.x-q.min.x),(Math.max(q.max.y,C.y)-q.max.y)/(F.max.y-q.max.y)-(Math.min(q.min.y,C.y)-q.min.y)/(F.min.y-q.min.y)).multiplyBy(_);f.panBy(Q,{animate:!1}),this._draggable._newPos._add(Q),this._draggable._startPos._add(Q),mt(u._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=O(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&(z(this._panRequest),this._panRequest=O(this._adjustPan.bind(this,a)))},_onDrag:function(a){var u=this._marker,f=u._shadow,_=Dn(u._icon),w=u._map.layerPointToLatLng(_);f&&mt(f,_),u._latlng=w,a.latlng=w,a.oldLatLng=this._oldLatLng,u.fire("move",a).fire("drag",a)},_onDragEnd:function(a){z(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),Ph=$t.extend({options:{icon:new Zl,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,u){S(this,u),this._latlng=ct(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var u=this._latlng;return this._latlng=ct(a),this.update(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,u="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),f=a.icon.createIcon(this._icon),_=!1;f!==this._icon&&(this._icon&&this._removeIcon(),_=!0,a.title&&(f.title=a.title),f.tagName==="IMG"&&(f.alt=a.alt||"")),xt(f,u),a.keyboard&&(f.tabIndex="0",f.setAttribute("role","button")),this._icon=f,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ht(f,"focus",this._panOnFocus,this);var w=a.icon.createShadow(this._shadow),C=!1;w!==this._shadow&&(this._removeShadow(),C=!0),w&&(xt(w,u),w.alt=""),this._shadow=w,a.opacity<1&&this._updateOpacity(),_&&this.getPane().appendChild(this._icon),this._initInteraction(),w&&C&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Wt(this._icon,"focus",this._panOnFocus,this),qt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&qt(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&mt(this._icon,a),this._shadow&&mt(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var u=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(u)},_initInteraction:function(){if(this.options.interactive&&(xt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Yv)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Yv(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&ce(this._icon,a),this._shadow&&ce(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var a=this._map;if(a){var u=this.options.icon.options,f=u.iconSize?X(u.iconSize):X(0,0),_=u.iconAnchor?X(u.iconAnchor):X(0,0);a.panInside(this._latlng,{paddingTopLeft:_,paddingBottomRight:f.subtract(_)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function $I(a,u){return new Ph(a,u)}var Mr=$t.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return S(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&Object.prototype.hasOwnProperty.call(a,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Ih=Mr.extend({options:{fill:!0,radius:10},initialize:function(a,u){S(this,u),this._latlng=ct(a),this._radius=this.options.radius},setLatLng:function(a){var u=this._latlng;return this._latlng=ct(a),this.redraw(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var u=a&&a.radius||this._radius;return Mr.prototype.setStyle.call(this,a),this.setRadius(u),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,u=this._radiusY||a,f=this._clickTolerance(),_=[a+f,u+f];this._pxBounds=new lt(this._point.subtract(_),this._point.add(_))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function qI(a,u){return new Ih(a,u)}var Kp=Ih.extend({initialize:function(a,u,f){if(typeof u=="number"&&(u=r({},f,{radius:u})),S(this,u),this._latlng=ct(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new wt(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:Mr.prototype.setStyle,_project:function(){var a=this._latlng.lng,u=this._latlng.lat,f=this._map,_=f.options.crs;if(_.distance===vi.distance){var w=Math.PI/180,C=this._mRadius/vi.R/w,F=f.project([u+C,a]),W=f.project([u-C,a]),q=F.add(W).divideBy(2),Q=f.unproject(q).lat,et=Math.acos((Math.cos(C*w)-Math.sin(u*w)*Math.sin(Q*w))/(Math.cos(u*w)*Math.cos(Q*w)))/w;(isNaN(et)||et===0)&&(et=C/Math.cos(Math.PI/180*u)),this._point=q.subtract(f.getPixelOrigin()),this._radius=isNaN(et)?0:q.x-f.project([Q,a-et]).x,this._radiusY=q.y-F.y}else{var dt=_.unproject(_.project(this._latlng).subtract([this._mRadius,0]));this._point=f.latLngToLayerPoint(this._latlng),this._radius=this._point.x-f.latLngToLayerPoint(dt).x}this._updateBounds()}});function GI(a,u,f){return new Kp(a,u,f)}var Zi=Mr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,u){S(this,u),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var u=1/0,f=null,_=Fn,w,C,F=0,W=this._parts.length;F<W;F++)for(var q=this._parts[F],Q=1,et=q.length;Q<et;Q++){w=q[Q-1],C=q[Q];var dt=_(a,w,C,!0);dt<u&&(u=dt,f=_(a,w,C))}return f&&(f.distance=Math.sqrt(u)),f},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return E(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(a,u){return u=u||this._defaultShape(),a=ct(a),u.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new wt,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return d(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var u=[],f=d(a),_=0,w=a.length;_<w;_++)f?(u[_]=ct(a[_]),this._bounds.extend(u[_])):u[_]=this._convertLatLngs(a[_]);return u},_project:function(){var a=new lt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),u=new K(a,a);this._rawPxBounds&&(this._pxBounds=new lt([this._rawPxBounds.min.subtract(u),this._rawPxBounds.max.add(u)]))},_projectLatlngs:function(a,u,f){var _=a[0]instanceof _t,w=a.length,C,F;if(_){for(F=[],C=0;C<w;C++)F[C]=this._map.latLngToLayerPoint(a[C]),f.extend(F[C]);u.push(F)}else for(C=0;C<w;C++)this._projectLatlngs(a[C],u,f)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}var u=this._parts,f,_,w,C,F,W,q;for(f=0,w=0,C=this._rings.length;f<C;f++)for(q=this._rings[f],_=0,F=q.length;_<F-1;_++)W=Us(q[_],q[_+1],a,_,!0),W&&(u[w]=u[w]||[],u[w].push(W[0]),(W[1]!==q[_+1]||_===F-2)&&(u[w].push(W[1]),w++))}},_simplifyPoints:function(){for(var a=this._parts,u=this.options.smoothFactor,f=0,_=a.length;f<_;f++)a[f]=ql(a[f],u)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,u){var f,_,w,C,F,W,q=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(f=0,C=this._parts.length;f<C;f++)for(W=this._parts[f],_=0,F=W.length,w=F-1;_<F;w=_++)if(!(!u&&_===0)&&Gl(a,W[w],W[_])<=q)return!0;return!1}});function KI(a,u){return new Zi(a,u)}Zi._flat=v;var la=Zi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ia(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(a){var u=Zi.prototype._convertLatLngs.call(this,a),f=u.length;return f>=2&&u[0]instanceof _t&&u[0].equals(u[f-1])&&u.pop(),u},_setLatLngs:function(a){Zi.prototype._setLatLngs.call(this,a),d(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return d(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,u=this.options.weight,f=new K(u,u);if(a=new lt(a.min.subtract(f),a.max.add(f)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}for(var _=0,w=this._rings.length,C;_<w;_++)C=na(this._rings[_],a,!0),C.length&&this._parts.push(C)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var u=!1,f,_,w,C,F,W,q,Q;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(C=0,q=this._parts.length;C<q;C++)for(f=this._parts[C],F=0,Q=f.length,W=Q-1;F<Q;W=F++)_=f[F],w=f[W],_.y>a.y!=w.y>a.y&&a.x<(w.x-_.x)*(a.y-_.y)/(w.y-_.y)+_.x&&(u=!u);return u||Zi.prototype._containsPoint.call(this,a,!0)}});function ZI(a,u){return new la(a,u)}var Qi=pe.extend({initialize:function(a,u){S(this,u),this._layers={},a&&this.addData(a)},addData:function(a){var u=R(a)?a:a.features,f,_,w;if(u){for(f=0,_=u.length;f<_;f++)w=u[f],(w.geometries||w.geometry||w.features||w.coordinates)&&this.addData(w);return this}var C=this.options;if(C.filter&&!C.filter(a))return this;var F=Ch(a,C);return F?(F.feature=Nh(a),F.defaultOptions=F.options,this.resetStyle(F),C.onEachFeature&&C.onEachFeature(a,F),this.addLayer(F)):this},resetStyle:function(a){return a===void 0?this.eachLayer(this.resetStyle,this):(a.options=r({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(u){this._setLayerStyle(u,a)},this)},_setLayerStyle:function(a,u){a.setStyle&&(typeof u=="function"&&(u=u(a.feature)),a.setStyle(u))}});function Ch(a,u){var f=a.type==="Feature"?a.geometry:a,_=f?f.coordinates:null,w=[],C=u&&u.pointToLayer,F=u&&u.coordsToLatLng||Zp,W,q,Q,et;if(!_&&!f)return null;switch(f.type){case"Point":return W=F(_),Xv(C,a,W,u);case"MultiPoint":for(Q=0,et=_.length;Q<et;Q++)W=F(_[Q]),w.push(Xv(C,a,W,u));return new pe(w);case"LineString":case"MultiLineString":return q=Ah(_,f.type==="LineString"?0:1,F),new Zi(q,u);case"Polygon":case"MultiPolygon":return q=Ah(_,f.type==="Polygon"?1:2,F),new la(q,u);case"GeometryCollection":for(Q=0,et=f.geometries.length;Q<et;Q++){var dt=Ch({geometry:f.geometries[Q],type:"Feature",properties:a.properties},u);dt&&w.push(dt)}return new pe(w);case"FeatureCollection":for(Q=0,et=f.features.length;Q<et;Q++){var kt=Ch(f.features[Q],u);kt&&w.push(kt)}return new pe(w);default:throw new Error("Invalid GeoJSON object.")}}function Xv(a,u,f,_){return a?a(u,f):new Ph(f,_&&_.markersInheritOptions&&_)}function Zp(a){return new _t(a[1],a[0],a[2])}function Ah(a,u,f){for(var _=[],w=0,C=a.length,F;w<C;w++)F=u?Ah(a[w],u-1,f):(f||Zp)(a[w]),_.push(F);return _}function Qp(a,u){return a=ct(a),a.alt!==void 0?[y(a.lng,u),y(a.lat,u),y(a.alt,u)]:[y(a.lng,u),y(a.lat,u)]}function Rh(a,u,f,_){for(var w=[],C=0,F=a.length;C<F;C++)w.push(u?Rh(a[C],d(a[C])?0:u-1,f,_):Qp(a[C],_));return!u&&f&&w.length>0&&w.push(w[0].slice()),w}function ca(a,u){return a.feature?r({},a.feature,{geometry:u}):Nh(u)}function Nh(a){return a.type==="Feature"||a.type==="FeatureCollection"?a:{type:"Feature",properties:{},geometry:a}}var Yp={toGeoJSON:function(a){return ca(this,{type:"Point",coordinates:Qp(this.getLatLng(),a)})}};Ph.include(Yp),Kp.include(Yp),Ih.include(Yp),Zi.include({toGeoJSON:function(a){var u=!d(this._latlngs),f=Rh(this._latlngs,u?1:0,!1,a);return ca(this,{type:(u?"Multi":"")+"LineString",coordinates:f})}}),la.include({toGeoJSON:function(a){var u=!d(this._latlngs),f=u&&!d(this._latlngs[0]),_=Rh(this._latlngs,f?2:u?1:0,!0,a);return u||(_=[_]),ca(this,{type:(f?"Multi":"")+"Polygon",coordinates:_})}}),re.include({toMultiPoint:function(a){var u=[];return this.eachLayer(function(f){u.push(f.toGeoJSON(a).geometry.coordinates)}),ca(this,{type:"MultiPoint",coordinates:u})},toGeoJSON:function(a){var u=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(u==="MultiPoint")return this.toMultiPoint(a);var f=u==="GeometryCollection",_=[];return this.eachLayer(function(w){if(w.toGeoJSON){var C=w.toGeoJSON(a);if(f)_.push(C.geometry);else{var F=Nh(C);F.type==="FeatureCollection"?_.push.apply(_,F.features):_.push(F)}}}),f?ca(this,{geometries:_,type:"GeometryCollection"}):{type:"FeatureCollection",features:_}}});function Jv(a,u){return new Qi(a,u)}var QI=Jv,Lh=$t.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,u,f){this._url=a,this._bounds=St(u),S(this,f)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(xt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){qt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&Wi(this._image),this},bringToBack:function(){return this._map&&Ir(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=St(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._url.tagName==="IMG",u=this._image=a?this._url:Ct("img");if(xt(u,"leaflet-image-layer"),this._zoomAnimated&&xt(u,"leaflet-zoom-animated"),this.options.className&&xt(u,this.options.className),u.onselectstart=g,u.onmousemove=g,u.onload=o(this.fire,this,"load"),u.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a){this._url=u.src;return}u.src=this._url,u.alt=this.options.alt},_animateZoom:function(a){var u=this._map.getZoomScale(a.zoom),f=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;xi(this._image,f,u)},_reset:function(){var a=this._image,u=new lt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),f=u.getSize();mt(a,u.min),a.style.width=f.x+"px",a.style.height=f.y+"px"},_updateOpacity:function(){ce(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)},getCenter:function(){return this._bounds.getCenter()}}),YI=function(a,u,f){return new Lh(a,u,f)},t0=Lh.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var a=this._url.tagName==="VIDEO",u=this._image=a?this._url:Ct("video");if(xt(u,"leaflet-image-layer"),this._zoomAnimated&&xt(u,"leaflet-zoom-animated"),this.options.className&&xt(u,this.options.className),u.onselectstart=g,u.onmousemove=g,u.onloadeddata=o(this.fire,this,"load"),a){for(var f=u.getElementsByTagName("source"),_=[],w=0;w<f.length;w++)_.push(f[w].src);this._url=f.length>0?_:[u.src];return}R(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(u.style,"objectFit")&&(u.style.objectFit="fill"),u.autoplay=!!this.options.autoplay,u.loop=!!this.options.loop,u.muted=!!this.options.muted,u.playsInline=!!this.options.playsInline;for(var C=0;C<this._url.length;C++){var F=Ct("source");F.src=this._url[C],u.appendChild(F)}}});function XI(a,u,f){return new t0(a,u,f)}var e0=Lh.extend({_initImage:function(){var a=this._image=this._url;xt(a,"leaflet-image-layer"),this._zoomAnimated&&xt(a,"leaflet-zoom-animated"),this.options.className&&xt(a,this.options.className),a.onselectstart=g,a.onmousemove=g}});function JI(a,u,f){return new e0(a,u,f)}var Ti=$t.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(a,u){a&&(a instanceof _t||R(a))?(this._latlng=ct(a),S(this,u)):(S(this,a),this._source=u),this.options.content&&(this._content=this.options.content)},openOn:function(a){return a=arguments.length?a:this._source._map,a.hasLayer(this)||a.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(a){return this._map?this.close():(arguments.length?this._source=a:a=this._source,this._prepareOpen(),this.openOn(a._map)),this},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&ce(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&ce(this._container,1),this.bringToFront(),this.options.interactive&&(xt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(a){a._fadeAnimated?(ce(this._container,0),this._removeTimeout=setTimeout(o(qt,void 0,this._container),200)):qt(this._container),this.options.interactive&&(Jt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=ct(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Wi(this._container),this},bringToBack:function(){return this._map&&Ir(this._container),this},_prepareOpen:function(a){var u=this._source;if(!u._map)return!1;if(u instanceof pe){u=null;var f=this._source._layers;for(var _ in f)if(f[_]._map){u=f[_];break}if(!u)return!1;this._source=u}if(!a)if(u.getCenter)a=u.getCenter();else if(u.getLatLng)a=u.getLatLng();else if(u.getBounds)a=u.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(a),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var a=this._contentNode,u=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof u=="string")a.innerHTML=u;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(u)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),u=X(this.options.offset),f=this._getAnchor();this._zoomAnimated?mt(this._container,a.add(f)):u=u.add(a).add(f);var _=this._containerBottom=-u.y,w=this._containerLeft=-Math.round(this._containerWidth/2)+u.x;this._container.style.bottom=_+"px",this._container.style.left=w+"px"}},_getAnchor:function(){return[0,0]}});Pt.include({_initOverlay:function(a,u,f,_){var w=u;return w instanceof a||(w=new a(_).setContent(u)),f&&w.setLatLng(f),w}}),$t.include({_initOverlay:function(a,u,f,_){var w=f;return w instanceof a?(S(w,_),w._source=this):(w=u&&!_?u:new a(_,this),w.setContent(f)),w}});var Mh=Ti.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return a=arguments.length?a:this._source._map,!a.hasLayer(this)&&a._popup&&a._popup.options.autoClose&&a.removeLayer(a._popup),a._popup=this,Ti.prototype.openOn.call(this,a)},onAdd:function(a){Ti.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Mr||this._source.on("preclick",Vn))},onRemove:function(a){Ti.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Mr||this._source.off("preclick",Vn))},getEvents:function(){var a=Ti.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this.close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_initLayout:function(){var a="leaflet-popup",u=this._container=Ct("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),f=this._wrapper=Ct("div",a+"-content-wrapper",u);if(this._contentNode=Ct("div",a+"-content",f),Rr(u),Ar(this._contentNode),ht(u,"contextmenu",Vn),this._tipContainer=Ct("div",a+"-tip-container",u),this._tip=Ct("div",a+"-tip",this._tipContainer),this.options.closeButton){var _=this._closeButton=Ct("a",a+"-close-button",u);_.setAttribute("role","button"),_.setAttribute("aria-label","Close popup"),_.href="#close",_.innerHTML='<span aria-hidden="true">&#215;</span>',ht(_,"click",function(w){ie(w),this.close()},this)}},_updateLayout:function(){var a=this._contentNode,u=a.style;u.width="",u.whiteSpace="nowrap";var f=a.offsetWidth;f=Math.min(f,this.options.maxWidth),f=Math.max(f,this.options.minWidth),u.width=f+1+"px",u.whiteSpace="",u.height="";var _=a.offsetHeight,w=this.options.maxHeight,C="leaflet-popup-scrolled";w&&_>w?(u.height=w+"px",xt(a,C)):Jt(a,C),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var u=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),f=this._getAnchor();mt(this._container,u.add(f))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var a=this._map,u=parseInt(Pr(this._container,"marginBottom"),10)||0,f=this._container.offsetHeight+u,_=this._containerWidth,w=new K(this._containerLeft,-f-this._containerBottom);w._add(Dn(this._container));var C=a.layerPointToContainerPoint(w),F=X(this.options.autoPanPadding),W=X(this.options.autoPanPaddingTopLeft||F),q=X(this.options.autoPanPaddingBottomRight||F),Q=a.getSize(),et=0,dt=0;C.x+_+q.x>Q.x&&(et=C.x+_-Q.x+q.x),C.x-et-W.x<0&&(et=C.x-W.x),C.y+f+q.y>Q.y&&(dt=C.y+f-Q.y+q.y),C.y-dt-W.y<0&&(dt=C.y-W.y),(et||dt)&&(this.options.keepInView&&(this._autopanning=!0),a.fire("autopanstart").panBy([et,dt]))}},_getAnchor:function(){return X(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),tC=function(a,u){return new Mh(a,u)};Pt.mergeOptions({closePopupOnClick:!0}),Pt.include({openPopup:function(a,u,f){return this._initOverlay(Mh,a,u,f).openOn(this),this},closePopup:function(a){return a=arguments.length?a:this._popup,a&&a.close(),this}}),$t.include({bindPopup:function(a,u){return this._popup=this._initOverlay(Mh,this._popup,a,u),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a){return this._popup&&(this instanceof pe||(this._popup._source=this),this._popup._prepareOpen(a||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){if(!(!this._popup||!this._map)){bn(a);var u=a.layer||a.target;if(this._popup._source===u&&!(u instanceof Mr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(a.latlng);return}this._popup._source=u,this.openPopup(a.latlng)}},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){a.originalEvent.keyCode===13&&this._openPopup(a)}});var Dh=Ti.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(a){Ti.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(a){Ti.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var a=Ti.prototype.getEvents.call(this);return this.options.permanent||(a.preclick=this.close),a},_initLayout:function(){var a="leaflet-tooltip",u=a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ct("div",u),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+c(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var u,f,_=this._map,w=this._container,C=_.latLngToContainerPoint(_.getCenter()),F=_.layerPointToContainerPoint(a),W=this.options.direction,q=w.offsetWidth,Q=w.offsetHeight,et=X(this.options.offset),dt=this._getAnchor();W==="top"?(u=q/2,f=Q):W==="bottom"?(u=q/2,f=0):W==="center"?(u=q/2,f=Q/2):W==="right"?(u=0,f=Q/2):W==="left"?(u=q,f=Q/2):F.x<C.x?(W="right",u=0,f=Q/2):(W="left",u=q+(et.x+dt.x)*2,f=Q/2),a=a.subtract(X(u,f,!0)).add(et).add(dt),Jt(w,"leaflet-tooltip-right"),Jt(w,"leaflet-tooltip-left"),Jt(w,"leaflet-tooltip-top"),Jt(w,"leaflet-tooltip-bottom"),xt(w,"leaflet-tooltip-"+W),mt(w,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&ce(this._container,a)},_animateZoom:function(a){var u=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(u)},_getAnchor:function(){return X(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),eC=function(a,u){return new Dh(a,u)};Pt.include({openTooltip:function(a,u,f){return this._initOverlay(Dh,a,u,f).openOn(this),this},closeTooltip:function(a){return a.close(),this}}),$t.include({bindTooltip:function(a,u){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Dh,this._tooltip,a,u),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(!(!a&&this._tooltipHandlersAdded)){var u=a?"off":"on",f={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?f.add=this._openTooltip:(f.mouseover=this._openTooltip,f.mouseout=this.closeTooltip,f.click=this._openTooltip,this._map?this._addFocusListeners():f.add=this._addFocusListeners),this._tooltip.options.sticky&&(f.mousemove=this._moveTooltip),this[u](f),this._tooltipHandlersAdded=!a}},openTooltip:function(a){return this._tooltip&&(this instanceof pe||(this._tooltip._source=this),this._tooltip._prepareOpen(a)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(a){var u=typeof a.getElement=="function"&&a.getElement();u&&(ht(u,"focus",function(){this._tooltip._source=a,this.openTooltip()},this),ht(u,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(a){var u=typeof a.getElement=="function"&&a.getElement();u&&u.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(a){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var u=this;this._map.once("moveend",function(){u._openOnceFlag=!1,u._openTooltip(a)});return}this._tooltip._source=a.layer||a.target,this.openTooltip(this._tooltip.options.sticky?a.latlng:void 0)}},_moveTooltip:function(a){var u=a.latlng,f,_;this._tooltip.options.sticky&&a.originalEvent&&(f=this._map.mouseEventToContainerPoint(a.originalEvent),_=this._map.containerPointToLayerPoint(f),u=this._map.layerPointToLatLng(_)),this._tooltip.setLatLng(u)}});var n0=bi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var u=a&&a.tagName==="DIV"?a:document.createElement("div"),f=this.options;if(f.html instanceof Element?(zs(u),u.appendChild(f.html)):u.innerHTML=f.html!==!1?f.html:"",f.bgPos){var _=X(f.bgPos);u.style.backgroundPosition=-_.x+"px "+-_.y+"px"}return this._setIconStyles(u,"icon"),u},createShadow:function(){return null}});function nC(a){return new n0(a)}bi.Default=Zl;var Ql=$t.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ot.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){S(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),qt(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Wi(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ir(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var a=this._clampZoom(this._map.getZoom());a!==this._tileZoom&&(this._tileZoom=a,this._updateLevels()),this._update()}return this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=h(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof K?a:new K(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var u=this.getPane().children,f=-a(-1/0,1/0),_=0,w=u.length,C;_<w;_++)C=u[_].style.zIndex,u[_]!==this._container&&C&&(f=a(f,+C));isFinite(f)&&(this.options.zIndex=f+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ot.ielt9){ce(this._container,this.options.opacity);var a=+new Date,u=!1,f=!1;for(var _ in this._tiles){var w=this._tiles[_];if(!(!w.current||!w.loaded)){var C=Math.min(1,(a-w.loaded)/200);ce(w.el,C),C<1?u=!0:(w.active?f=!0:this._onOpaqueTile(w),w.active=!0)}}f&&!this._noPrune&&this._pruneTiles(),u&&(z(this._fadeFrame),this._fadeFrame=O(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=Ct("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,u=this.options.maxZoom;if(a!==void 0){for(var f in this._levels)f=Number(f),this._levels[f].el.children.length||f===a?(this._levels[f].el.style.zIndex=u-Math.abs(a-f),this._onUpdateLevel(f)):(qt(this._levels[f].el),this._removeTilesAtZoom(f),this._onRemoveLevel(f),delete this._levels[f]);var _=this._levels[a],w=this._map;return _||(_=this._levels[a]={},_.el=Ct("div","leaflet-tile-container leaflet-zoom-animated",this._container),_.el.style.zIndex=u,_.origin=w.project(w.unproject(w.getPixelOrigin()),a).round(),_.zoom=a,this._setZoomTransform(_,w.getCenter(),w.getZoom()),g(_.el.offsetWidth),this._onCreateLevel(_)),this._level=_,_}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var a,u,f=this._map.getZoom();if(f>this.options.maxZoom||f<this.options.minZoom){this._removeAllTiles();return}for(a in this._tiles)u=this._tiles[a],u.retain=u.current;for(a in this._tiles)if(u=this._tiles[a],u.current&&!u.active){var _=u.coords;this._retainParent(_.x,_.y,_.z,_.z-5)||this._retainChildren(_.x,_.y,_.z,_.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var u in this._tiles)this._tiles[u].coords.z===a&&this._removeTile(u)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)qt(this._levels[a].el),this._onRemoveLevel(Number(a)),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,u,f,_){var w=Math.floor(a/2),C=Math.floor(u/2),F=f-1,W=new K(+w,+C);W.z=+F;var q=this._tileCoordsToKey(W),Q=this._tiles[q];return Q&&Q.active?(Q.retain=!0,!0):(Q&&Q.loaded&&(Q.retain=!0),F>_?this._retainParent(w,C,F,_):!1)},_retainChildren:function(a,u,f,_){for(var w=2*a;w<2*a+2;w++)for(var C=2*u;C<2*u+2;C++){var F=new K(w,C);F.z=f+1;var W=this._tileCoordsToKey(F),q=this._tiles[W];if(q&&q.active){q.retain=!0;continue}else q&&q.loaded&&(q.retain=!0);f+1<_&&this._retainChildren(w,C,f+1,_)}},_resetView:function(a){var u=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),u,u)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var u=this.options;return u.minNativeZoom!==void 0&&a<u.minNativeZoom?u.minNativeZoom:u.maxNativeZoom!==void 0&&u.maxNativeZoom<a?u.maxNativeZoom:a},_setView:function(a,u,f,_){var w=Math.round(u);this.options.maxZoom!==void 0&&w>this.options.maxZoom||this.options.minZoom!==void 0&&w<this.options.minZoom?w=void 0:w=this._clampZoom(w);var C=this.options.updateWhenZooming&&w!==this._tileZoom;(!_||C)&&(this._tileZoom=w,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),w!==void 0&&this._update(a),f||this._pruneTiles(),this._noPrune=!!f),this._setZoomTransforms(a,u)},_setZoomTransforms:function(a,u){for(var f in this._levels)this._setZoomTransform(this._levels[f],a,u)},_setZoomTransform:function(a,u,f){var _=this._map.getZoomScale(f,a.zoom),w=a.origin.multiplyBy(_).subtract(this._map._getNewPixelOrigin(u,f)).round();ot.any3d?xi(a.el,w,_):mt(a.el,w)},_resetGrid:function(){var a=this._map,u=a.options.crs,f=this._tileSize=this.getTileSize(),_=this._tileZoom,w=this._map.getPixelWorldBounds(this._tileZoom);w&&(this._globalTileRange=this._pxBoundsToTileRange(w)),this._wrapX=u.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,u.wrapLng[0]],_).x/f.x),Math.ceil(a.project([0,u.wrapLng[1]],_).x/f.y)],this._wrapY=u.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([u.wrapLat[0],0],_).y/f.x),Math.ceil(a.project([u.wrapLat[1],0],_).y/f.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(a){var u=this._map,f=u._animatingZoom?Math.max(u._animateToZoom,u.getZoom()):u.getZoom(),_=u.getZoomScale(f,this._tileZoom),w=u.project(a,this._tileZoom).floor(),C=u.getSize().divideBy(_*2);return new lt(w.subtract(C),w.add(C))},_update:function(a){var u=this._map;if(u){var f=this._clampZoom(u.getZoom());if(a===void 0&&(a=u.getCenter()),this._tileZoom!==void 0){var _=this._getTiledPixelBounds(a),w=this._pxBoundsToTileRange(_),C=w.getCenter(),F=[],W=this.options.keepBuffer,q=new lt(w.getBottomLeft().subtract([W,-W]),w.getTopRight().add([W,-W]));if(!(isFinite(w.min.x)&&isFinite(w.min.y)&&isFinite(w.max.x)&&isFinite(w.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Q in this._tiles){var et=this._tiles[Q].coords;(et.z!==this._tileZoom||!q.contains(new K(et.x,et.y)))&&(this._tiles[Q].current=!1)}if(Math.abs(f-this._tileZoom)>1){this._setView(a,f);return}for(var dt=w.min.y;dt<=w.max.y;dt++)for(var kt=w.min.x;kt<=w.max.x;kt++){var rn=new K(kt,dt);if(rn.z=this._tileZoom,!!this._isValidTile(rn)){var Ne=this._tiles[this._tileCoordsToKey(rn)];Ne?Ne.current=!0:F.push(rn)}}if(F.sort(function(dn,ha){return dn.distanceTo(C)-ha.distanceTo(C)}),F.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var zn=document.createDocumentFragment();for(kt=0;kt<F.length;kt++)this._addTile(F[kt],zn);this._level.el.appendChild(zn)}}}},_isValidTile:function(a){var u=this._map.options.crs;if(!u.infinite){var f=this._globalTileRange;if(!u.wrapLng&&(a.x<f.min.x||a.x>f.max.x)||!u.wrapLat&&(a.y<f.min.y||a.y>f.max.y))return!1}if(!this.options.bounds)return!0;var _=this._tileCoordsToBounds(a);return St(this.options.bounds).overlaps(_)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var u=this._map,f=this.getTileSize(),_=a.scaleBy(f),w=_.add(f),C=u.unproject(_,a.z),F=u.unproject(w,a.z);return[C,F]},_tileCoordsToBounds:function(a){var u=this._tileCoordsToNwSe(a),f=new wt(u[0],u[1]);return this.options.noWrap||(f=this._map.wrapLatLngBounds(f)),f},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var u=a.split(":"),f=new K(+u[0],+u[1]);return f.z=+u[2],f},_removeTile:function(a){var u=this._tiles[a];u&&(qt(u.el),delete this._tiles[a],this.fire("tileunload",{tile:u.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){xt(a,"leaflet-tile");var u=this.getTileSize();a.style.width=u.x+"px",a.style.height=u.y+"px",a.onselectstart=g,a.onmousemove=g,ot.ielt9&&this.options.opacity<1&&ce(a,this.options.opacity)},_addTile:function(a,u){var f=this._getTilePos(a),_=this._tileCoordsToKey(a),w=this.createTile(this._wrapCoords(a),o(this._tileReady,this,a));this._initTile(w),this.createTile.length<2&&O(o(this._tileReady,this,a,null,w)),mt(w,f),this._tiles[_]={el:w,coords:a,current:!0},u.appendChild(w),this.fire("tileloadstart",{tile:w,coords:a})},_tileReady:function(a,u,f){u&&this.fire("tileerror",{error:u,tile:f,coords:a});var _=this._tileCoordsToKey(a);f=this._tiles[_],f&&(f.loaded=+new Date,this._map._fadeAnimated?(ce(f.el,0),z(this._fadeFrame),this._fadeFrame=O(this._updateOpacity,this)):(f.active=!0,this._pruneTiles()),u||(xt(f.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:f.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ot.ielt9||!this._map._fadeAnimated?O(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var u=new K(this._wrapX?p(a.x,this._wrapX):a.x,this._wrapY?p(a.y,this._wrapY):a.y);return u.z=a.z,u},_pxBoundsToTileRange:function(a){var u=this.getTileSize();return new lt(a.min.unscaleBy(u).floor(),a.max.unscaleBy(u).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});function iC(a){return new Ql(a)}var ua=Ql.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(a,u){this._url=a,u=S(this,u),u.detectRetina&&ot.retina&&u.maxZoom>0?(u.tileSize=Math.floor(u.tileSize/2),u.zoomReverse?(u.zoomOffset--,u.minZoom=Math.min(u.maxZoom,u.minZoom+1)):(u.zoomOffset++,u.maxZoom=Math.max(u.minZoom,u.maxZoom-1)),u.minZoom=Math.max(0,u.minZoom)):u.zoomReverse?u.minZoom=Math.min(u.maxZoom,u.minZoom):u.maxZoom=Math.max(u.minZoom,u.maxZoom),typeof u.subdomains=="string"&&(u.subdomains=u.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(a,u){return this._url===a&&u===void 0&&(u=!0),this._url=a,u||this.redraw(),this},createTile:function(a,u){var f=document.createElement("img");return ht(f,"load",o(this._tileOnLoad,this,u,f)),ht(f,"error",o(this._tileOnError,this,u,f)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(f.referrerPolicy=this.options.referrerPolicy),f.alt="",f.src=this.getTileUrl(a),f},getTileUrl:function(a){var u={r:ot.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var f=this._globalTileRange.max.y-a.y;this.options.tms&&(u.y=f),u["-y"]=f}return I(this._url,r(u,this.options))},_tileOnLoad:function(a,u){ot.ielt9?setTimeout(o(a,this,null,u),0):a(null,u)},_tileOnError:function(a,u,f){var _=this.options.errorTileUrl;_&&u.getAttribute("src")!==_&&(u.src=_),a(f,u)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,u=this.options.maxZoom,f=this.options.zoomReverse,_=this.options.zoomOffset;return f&&(a=u-a),a+_},_getSubdomain:function(a){var u=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[u]},_abortLoading:function(){var a,u;for(a in this._tiles)if(this._tiles[a].coords.z!==this._tileZoom&&(u=this._tiles[a].el,u.onload=g,u.onerror=g,!u.complete)){u.src=B;var f=this._tiles[a].coords;qt(u),delete this._tiles[a],this.fire("tileabort",{tile:u,coords:f})}},_removeTile:function(a){var u=this._tiles[a];if(u)return u.el.setAttribute("src",B),Ql.prototype._removeTile.call(this,a)},_tileReady:function(a,u,f){if(!(!this._map||f&&f.getAttribute("src")===B))return Ql.prototype._tileReady.call(this,a,u,f)}});function i0(a,u){return new ua(a,u)}var r0=ua.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,u){this._url=a;var f=r({},this.defaultWmsParams);for(var _ in u)_ in this.options||(f[_]=u[_]);u=S(this,u);var w=u.detectRetina&&ot.retina?2:1,C=this.getTileSize();f.width=C.x*w,f.height=C.y*w,this.wmsParams=f},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var u=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[u]=this._crs.code,ua.prototype.onAdd.call(this,a)},getTileUrl:function(a){var u=this._tileCoordsToNwSe(a),f=this._crs,_=ut(f.project(u[0]),f.project(u[1])),w=_.min,C=_.max,F=(this._wmsVersion>=1.3&&this._crs===ve?[w.y,w.x,C.y,C.x]:[w.x,w.y,C.x,C.y]).join(","),W=ua.prototype.getTileUrl.call(this,a);return W+k(this.wmsParams,W,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+F},setParams:function(a,u){return r(this.wmsParams,a),u||this.redraw(),this}});function rC(a,u){return new r0(a,u)}ua.WMS=r0,i0.wms=rC;var Yi=$t.extend({options:{padding:.1},initialize:function(a){S(this,a),c(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),xt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,u){var f=this._map.getZoomScale(u,this._zoom),_=this._map.getSize().multiplyBy(.5+this.options.padding),w=this._map.project(this._center,u),C=_.multiplyBy(-f).add(w).subtract(this._map._getNewPixelOrigin(a,u));ot.any3d?xi(this._container,C,f):mt(this._container,C)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,u=this._map.getSize(),f=this._map.containerPointToLayerPoint(u.multiplyBy(-a)).round();this._bounds=new lt(f,f.add(u.multiplyBy(1+a*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),s0=Yi.extend({options:{tolerance:0},getEvents:function(){var a=Yi.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Yi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");ht(a,"mousemove",this._onMouseMove,this),ht(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ht(a,"mouseout",this._handleMouseOut,this),a._leaflet_disable_events=!0,this._ctx=a.getContext("2d")},_destroyContainer:function(){z(this._redrawRequest),delete this._ctx,qt(this._container),Wt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var a;this._redrawBounds=null;for(var u in this._layers)a=this._layers[u],a._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Yi.prototype._update.call(this);var a=this._bounds,u=this._container,f=a.getSize(),_=ot.retina?2:1;mt(u,a.min),u.width=_*f.x,u.height=_*f.y,u.style.width=f.x+"px",u.style.height=f.y+"px",ot.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){Yi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[c(a)]=a;var u=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=u),this._drawLast=u,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var u=a._order,f=u.next,_=u.prev;f?f.prev=_:this._drawLast=_,_?_.next=f:this._drawFirst=f,delete a._order,delete this._layers[c(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if(typeof a.options.dashArray=="string"){var u=a.options.dashArray.split(/[, ]+/),f=[],_,w;for(w=0;w<u.length;w++){if(_=Number(u[w]),isNaN(_))return;f.push(_)}a.options._dashArray=f}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||O(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var u=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new lt,this._redrawBounds.extend(a._pxBounds.min.subtract([u,u])),this._redrawBounds.extend(a._pxBounds.max.add([u,u]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var u=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,u.x,u.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var a,u=this._redrawBounds;if(this._ctx.save(),u){var f=u.getSize();this._ctx.beginPath(),this._ctx.rect(u.min.x,u.min.y,f.x,f.y),this._ctx.clip()}this._drawing=!0;for(var _=this._drawFirst;_;_=_.next)a=_.layer,(!u||a._pxBounds&&a._pxBounds.intersects(u))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,u){if(this._drawing){var f,_,w,C,F=a._parts,W=F.length,q=this._ctx;if(W){for(q.beginPath(),f=0;f<W;f++){for(_=0,w=F[f].length;_<w;_++)C=F[f][_],q[_?"lineTo":"moveTo"](C.x,C.y);u&&q.closePath()}this._fillStroke(q,a)}}},_updateCircle:function(a){if(!(!this._drawing||a._empty())){var u=a._point,f=this._ctx,_=Math.max(Math.round(a._radius),1),w=(Math.max(Math.round(a._radiusY),1)||_)/_;w!==1&&(f.save(),f.scale(1,w)),f.beginPath(),f.arc(u.x,u.y/w,_,0,Math.PI*2,!1),w!==1&&f.restore(),this._fillStroke(f,a)}},_fillStroke:function(a,u){var f=u.options;f.fill&&(a.globalAlpha=f.fillOpacity,a.fillStyle=f.fillColor||f.color,a.fill(f.fillRule||"evenodd")),f.stroke&&f.weight!==0&&(a.setLineDash&&a.setLineDash(u.options&&u.options._dashArray||[]),a.globalAlpha=f.opacity,a.lineWidth=f.weight,a.strokeStyle=f.color,a.lineCap=f.lineCap,a.lineJoin=f.lineJoin,a.stroke())},_onClick:function(a){for(var u=this._map.mouseEventToLayerPoint(a),f,_,w=this._drawFirst;w;w=w.next)f=w.layer,f.options.interactive&&f._containsPoint(u)&&(!(a.type==="click"||a.type==="preclick")||!this._map._draggableMoved(f))&&(_=f);this._fireEvent(_?[_]:!1,a)},_onMouseMove:function(a){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var u=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,u)}},_handleMouseOut:function(a){var u=this._hoveredLayer;u&&(Jt(this._container,"leaflet-interactive"),this._fireEvent([u],a,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(a,u){if(!this._mouseHoverThrottled){for(var f,_,w=this._drawFirst;w;w=w.next)f=w.layer,f.options.interactive&&f._containsPoint(u)&&(_=f);_!==this._hoveredLayer&&(this._handleMouseOut(a),_&&(xt(this._container,"leaflet-interactive"),this._fireEvent([_],a,"mouseover"),this._hoveredLayer=_)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,a),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(a,u,f){this._map._fireDOMEvent(u,f||u.type,a)},_bringToFront:function(a){var u=a._order;if(u){var f=u.next,_=u.prev;if(f)f.prev=_;else return;_?_.next=f:f&&(this._drawFirst=f),u.prev=this._drawLast,this._drawLast.next=u,u.next=null,this._drawLast=u,this._requestRedraw(a)}},_bringToBack:function(a){var u=a._order;if(u){var f=u.next,_=u.prev;if(_)_.next=f;else return;f?f.prev=_:_&&(this._drawLast=_),u.prev=null,u.next=this._drawFirst,this._drawFirst.prev=u,this._drawFirst=u,this._requestRedraw(a)}}});function o0(a){return ot.canvas?new s0(a):null}var Yl=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch{}return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),sC={_initContainer:function(){this._container=Ct("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Yi.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var u=a._container=Yl("shape");xt(u,"leaflet-vml-shape "+(this.options.className||"")),u.coordsize="1 1",a._path=Yl("path"),u.appendChild(a._path),this._updateStyle(a),this._layers[c(a)]=a},_addPath:function(a){var u=a._container;this._container.appendChild(u),a.options.interactive&&a.addInteractiveTarget(u)},_removePath:function(a){var u=a._container;qt(u),a.removeInteractiveTarget(u),delete this._layers[c(a)]},_updateStyle:function(a){var u=a._stroke,f=a._fill,_=a.options,w=a._container;w.stroked=!!_.stroke,w.filled=!!_.fill,_.stroke?(u||(u=a._stroke=Yl("stroke")),w.appendChild(u),u.weight=_.weight+"px",u.color=_.color,u.opacity=_.opacity,_.dashArray?u.dashStyle=R(_.dashArray)?_.dashArray.join(" "):_.dashArray.replace(/( *, *)/g," "):u.dashStyle="",u.endcap=_.lineCap.replace("butt","flat"),u.joinstyle=_.lineJoin):u&&(w.removeChild(u),a._stroke=null),_.fill?(f||(f=a._fill=Yl("fill")),w.appendChild(f),f.color=_.fillColor||_.color,f.opacity=_.fillOpacity):f&&(w.removeChild(f),a._fill=null)},_updateCircle:function(a){var u=a._point.round(),f=Math.round(a._radius),_=Math.round(a._radiusY||f);this._setPath(a,a._empty()?"M0 0":"AL "+u.x+","+u.y+" "+f+","+_+" 0,"+65535*360)},_setPath:function(a,u){a._path.v=u},_bringToFront:function(a){Wi(a._container)},_bringToBack:function(a){Ir(a._container)}},Oh=ot.vml?Yl:Do,Xl=Yi.extend({_initContainer:function(){this._container=Oh("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Oh("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){qt(this._container),Wt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Yi.prototype._update.call(this);var a=this._bounds,u=a.getSize(),f=this._container;(!this._svgSize||!this._svgSize.equals(u))&&(this._svgSize=u,f.setAttribute("width",u.x),f.setAttribute("height",u.y)),mt(f,a.min),f.setAttribute("viewBox",[a.min.x,a.min.y,u.x,u.y].join(" ")),this.fire("update")}},_initPath:function(a){var u=a._path=Oh("path");a.options.className&&xt(u,a.options.className),a.options.interactive&&xt(u,"leaflet-interactive"),this._updateStyle(a),this._layers[c(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){qt(a._path),a.removeInteractiveTarget(a._path),delete this._layers[c(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var u=a._path,f=a.options;u&&(f.stroke?(u.setAttribute("stroke",f.color),u.setAttribute("stroke-opacity",f.opacity),u.setAttribute("stroke-width",f.weight),u.setAttribute("stroke-linecap",f.lineCap),u.setAttribute("stroke-linejoin",f.lineJoin),f.dashArray?u.setAttribute("stroke-dasharray",f.dashArray):u.removeAttribute("stroke-dasharray"),f.dashOffset?u.setAttribute("stroke-dashoffset",f.dashOffset):u.removeAttribute("stroke-dashoffset")):u.setAttribute("stroke","none"),f.fill?(u.setAttribute("fill",f.fillColor||f.color),u.setAttribute("fill-opacity",f.fillOpacity),u.setAttribute("fill-rule",f.fillRule||"evenodd")):u.setAttribute("fill","none"))},_updatePoly:function(a,u){this._setPath(a,yl(a._parts,u))},_updateCircle:function(a){var u=a._point,f=Math.max(Math.round(a._radius),1),_=Math.max(Math.round(a._radiusY),1)||f,w="a"+f+","+_+" 0 1,0 ",C=a._empty()?"M0 0":"M"+(u.x-f)+","+u.y+w+f*2+",0 "+w+-f*2+",0 ";this._setPath(a,C)},_setPath:function(a,u){a._path.setAttribute("d",u)},_bringToFront:function(a){Wi(a._path)},_bringToBack:function(a){Ir(a._path)}});ot.vml&&Xl.include(sC);function a0(a){return ot.svg||ot.vml?new Xl(a):null}Pt.include({getRenderer:function(a){var u=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return u||(u=this._renderer=this._createRenderer()),this.hasLayer(u)||this.addLayer(u),u},_getPaneRenderer:function(a){if(a==="overlayPane"||a===void 0)return!1;var u=this._paneRenderers[a];return u===void 0&&(u=this._createRenderer({pane:a}),this._paneRenderers[a]=u),u},_createRenderer:function(a){return this.options.preferCanvas&&o0(a)||a0(a)}});var l0=la.extend({initialize:function(a,u){la.prototype.initialize.call(this,this._boundsToLatLngs(a),u)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=St(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});function oC(a,u){return new l0(a,u)}Xl.create=Oh,Xl.pointsToPath=yl,Qi.geometryToLayer=Ch,Qi.coordsToLatLng=Zp,Qi.coordsToLatLngs=Ah,Qi.latLngToCoords=Qp,Qi.latLngsToCoords=Rh,Qi.getFeature=ca,Qi.asFeature=Nh,Pt.mergeOptions({boxZoom:!0});var c0=Tn.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){ht(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Wt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){qt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||a.which!==1&&a.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ni(),Dl(),this._startPoint=this._map.mouseEventToContainerPoint(a),ht(document,{contextmenu:bn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=Ct("div","leaflet-zoom-box",this._container),xt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var u=new lt(this._point,this._startPoint),f=u.getSize();mt(this._box,u.min),this._box.style.width=f.x+"px",this._box.style.height=f.y+"px"},_finish:function(){this._moved&&(qt(this._box),Jt(this._container,"leaflet-crosshair")),ii(),Ol(),Wt(document,{contextmenu:bn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if(!(a.which!==1&&a.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var u=new wt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(u).fire("boxzoomend",{boxZoomBounds:u})}},_onKeyDown:function(a){a.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Pt.addInitHook("addHandler","boxZoom",c0),Pt.mergeOptions({doubleClickZoom:!0});var u0=Tn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var u=this._map,f=u.getZoom(),_=u.options.zoomDelta,w=a.originalEvent.shiftKey?f-_:f+_;u.options.doubleClickZoom==="center"?u.setZoom(w):u.setZoomAround(a.containerPoint,w)}});Pt.addInitHook("addHandler","doubleClickZoom",u0),Pt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var h0=Tn.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new ri(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}xt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Jt(this._map._container,"leaflet-grab"),Jt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var u=St(this._map.options.maxBounds);this._offsetLimit=ut(this._map.latLngToContainerPoint(u.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(u.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var u=this._lastTime=+new Date,f=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(f),this._times.push(u),this._prunePositions(u)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;this._positions.length>1&&a-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),u=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=u.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,u){return a-(a-u)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var a=this._draggable._newPos.subtract(this._draggable._startPos),u=this._offsetLimit;a.x<u.min.x&&(a.x=this._viscousLimit(a.x,u.min.x)),a.y<u.min.y&&(a.y=this._viscousLimit(a.y,u.min.y)),a.x>u.max.x&&(a.x=this._viscousLimit(a.x,u.max.x)),a.y>u.max.y&&(a.y=this._viscousLimit(a.y,u.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,u=Math.round(a/2),f=this._initialWorldOffset,_=this._draggable._newPos.x,w=(_-u+f)%a+u-f,C=(_+u+f)%a-u-f,F=Math.abs(w+f)<Math.abs(C+f)?w:C;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=F},_onDragEnd:function(a){var u=this._map,f=u.options,_=!f.inertia||a.noInertia||this._times.length<2;if(u.fire("dragend",a),_)u.fire("moveend");else{this._prunePositions(+new Date);var w=this._lastPos.subtract(this._positions[0]),C=(this._lastTime-this._times[0])/1e3,F=f.easeLinearity,W=w.multiplyBy(F/C),q=W.distanceTo([0,0]),Q=Math.min(f.inertiaMaxSpeed,q),et=W.multiplyBy(Q/q),dt=Q/(f.inertiaDeceleration*F),kt=et.multiplyBy(-dt/2).round();!kt.x&&!kt.y?u.fire("moveend"):(kt=u._limitOffset(kt,u.options.maxBounds),O(function(){u.panBy(kt,{duration:dt,easeLinearity:F,noMoveStart:!0,animate:!0})}))}}});Pt.addInitHook("addHandler","dragging",h0),Pt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var d0=Tn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),ht(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Wt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,u=document.documentElement,f=a.scrollTop||u.scrollTop,_=a.scrollLeft||u.scrollLeft;this._map._container.focus(),window.scrollTo(_,f)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var u=this._panKeys={},f=this.keyCodes,_,w;for(_=0,w=f.left.length;_<w;_++)u[f.left[_]]=[-1*a,0];for(_=0,w=f.right.length;_<w;_++)u[f.right[_]]=[a,0];for(_=0,w=f.down.length;_<w;_++)u[f.down[_]]=[0,a];for(_=0,w=f.up.length;_<w;_++)u[f.up[_]]=[0,-1*a]},_setZoomDelta:function(a){var u=this._zoomKeys={},f=this.keyCodes,_,w;for(_=0,w=f.zoomIn.length;_<w;_++)u[f.zoomIn[_]]=a;for(_=0,w=f.zoomOut.length;_<w;_++)u[f.zoomOut[_]]=-a},_addHooks:function(){ht(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Wt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var u=a.keyCode,f=this._map,_;if(u in this._panKeys){if(!f._panAnim||!f._panAnim._inProgress)if(_=this._panKeys[u],a.shiftKey&&(_=X(_).multiplyBy(3)),f.options.maxBounds&&(_=f._limitOffset(X(_),f.options.maxBounds)),f.options.worldCopyJump){var w=f.wrapLatLng(f.unproject(f.project(f.getCenter()).add(_)));f.panTo(w)}else f.panBy(_)}else if(u in this._zoomKeys)f.setZoom(f.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[u]);else if(u===27&&f._popup&&f._popup.options.closeOnEscapeKey)f.closePopup();else return;bn(a)}}});Pt.addInitHook("addHandler","keyboard",d0),Pt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var f0=Tn.extend({addHooks:function(){ht(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Wt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var u=xh(a),f=this._map.options.wheelDebounceTime;this._delta+=u,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var _=Math.max(f-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),_),bn(a)},_performZoom:function(){var a=this._map,u=a.getZoom(),f=this._map.options.zoomSnap||0;a._stop();var _=this._delta/(this._map.options.wheelPxPerZoomLevel*4),w=4*Math.log(2/(1+Math.exp(-Math.abs(_))))/Math.LN2,C=f?Math.ceil(w/f)*f:w,F=a._limitZoom(u+(this._delta>0?C:-C))-u;this._delta=0,this._startTime=null,F&&(a.options.scrollWheelZoom==="center"?a.setZoom(u+F):a.setZoomAround(this._lastMousePos,u+F))}});Pt.addInitHook("addHandler","scrollWheelZoom",f0);var aC=600;Pt.mergeOptions({tapHold:ot.touchNative&&ot.safari&&ot.mobile,tapTolerance:15});var p0=Tn.extend({addHooks:function(){ht(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Wt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(clearTimeout(this._holdTimeout),a.touches.length===1){var u=a.touches[0];this._startPos=this._newPos=new K(u.clientX,u.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(ht(document,"touchend",ie),ht(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",u))},this),aC),ht(document,"touchend touchcancel contextmenu",this._cancel,this),ht(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function a(){Wt(document,"touchend",ie),Wt(document,"touchend touchcancel",a)},_cancel:function(){clearTimeout(this._holdTimeout),Wt(document,"touchend touchcancel contextmenu",this._cancel,this),Wt(document,"touchmove",this._onMove,this)},_onMove:function(a){var u=a.touches[0];this._newPos=new K(u.clientX,u.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(a,u){var f=new MouseEvent(a,{bubbles:!0,cancelable:!0,view:window,screenX:u.screenX,screenY:u.screenY,clientX:u.clientX,clientY:u.clientY});f._simulated=!0,u.target.dispatchEvent(f)}});Pt.addInitHook("addHandler","tapHold",p0),Pt.mergeOptions({touchZoom:ot.touch,bounceAtZoomLimits:!0});var m0=Tn.extend({addHooks:function(){xt(this._map._container,"leaflet-touch-zoom"),ht(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Jt(this._map._container,"leaflet-touch-zoom"),Wt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var u=this._map;if(!(!a.touches||a.touches.length!==2||u._animatingZoom||this._zooming)){var f=u.mouseEventToContainerPoint(a.touches[0]),_=u.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=u.getSize()._divideBy(2),this._startLatLng=u.containerPointToLatLng(this._centerPoint),u.options.touchZoom!=="center"&&(this._pinchStartLatLng=u.containerPointToLatLng(f.add(_)._divideBy(2))),this._startDist=f.distanceTo(_),this._startZoom=u.getZoom(),this._moved=!1,this._zooming=!0,u._stop(),ht(document,"touchmove",this._onTouchMove,this),ht(document,"touchend touchcancel",this._onTouchEnd,this),ie(a)}},_onTouchMove:function(a){if(!(!a.touches||a.touches.length!==2||!this._zooming)){var u=this._map,f=u.mouseEventToContainerPoint(a.touches[0]),_=u.mouseEventToContainerPoint(a.touches[1]),w=f.distanceTo(_)/this._startDist;if(this._zoom=u.getScaleZoom(w,this._startZoom),!u.options.bounceAtZoomLimits&&(this._zoom<u.getMinZoom()&&w<1||this._zoom>u.getMaxZoom()&&w>1)&&(this._zoom=u._limitZoom(this._zoom)),u.options.touchZoom==="center"){if(this._center=this._startLatLng,w===1)return}else{var C=f._add(_)._divideBy(2)._subtract(this._centerPoint);if(w===1&&C.x===0&&C.y===0)return;this._center=u.unproject(u.project(this._pinchStartLatLng,this._zoom).subtract(C),this._zoom)}this._moved||(u._moveStart(!0,!1),this._moved=!0),z(this._animRequest);var F=o(u._move,u,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=O(F,this,!0),ie(a)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,z(this._animRequest),Wt(document,"touchmove",this._onTouchMove,this),Wt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Pt.addInitHook("addHandler","touchZoom",m0),Pt.BoxZoom=c0,Pt.DoubleClickZoom=u0,Pt.Drag=h0,Pt.Keyboard=d0,Pt.ScrollWheelZoom=f0,Pt.TapHold=p0,Pt.TouchZoom=m0,n.Bounds=lt,n.Browser=ot,n.CRS=ke,n.Canvas=s0,n.Circle=Kp,n.CircleMarker=Ih,n.Class=Rt,n.Control=hn,n.DivIcon=n0,n.DivOverlay=Ti,n.DomEvent=wh,n.DomUtil=yh,n.Draggable=ri,n.Evented=bt,n.FeatureGroup=pe,n.GeoJSON=Qi,n.GridLayer=Ql,n.Handler=Tn,n.Icon=bi,n.ImageOverlay=Lh,n.LatLng=_t,n.LatLngBounds=wt,n.Layer=$t,n.LayerGroup=re,n.LineUtil=M,n.Map=Pt,n.Marker=Ph,n.Mixin=Bs,n.Path=Mr,n.Point=K,n.PolyUtil=sa,n.Polygon=la,n.Polyline=Zi,n.Popup=Mh,n.PosAnimation=Hl,n.Projection=tt,n.Rectangle=l0,n.Renderer=Yi,n.SVG=Xl,n.SVGOverlay=e0,n.TileLayer=ua,n.Tooltip=Dh,n.Transformation=Sr,n.Util=j,n.VideoOverlay=t0,n.bind=o,n.bounds=ut,n.canvas=o0,n.circle=GI,n.circleMarker=qI,n.control=nn,n.divIcon=nC,n.extend=r,n.featureGroup=aa,n.geoJSON=Jv,n.geoJson=QI,n.gridLayer=iC,n.icon=WI,n.imageOverlay=YI,n.latLng=ct,n.latLngBounds=St,n.layerGroup=Lr,n.map=Jo,n.marker=$I,n.point=X,n.polygon=ZI,n.polyline=KI,n.popup=tC,n.rectangle=oC,n.setOptions=S,n.stamp=c,n.svg=a0,n.svgOverlay=JI,n.tileLayer=i0,n.tooltip=eC,n.transformation=zi,n.version=i,n.videoOverlay=XI;var lC=window.L;n.noConflict=function(){return window.L=lC,this},window.L=n})})(x_,x_.exports);var ez=x_.exports;const Un=N_(ez),nz=({route:e,interactive:t=!1})=>{const n=$.useRef(null),i=$.useRef(null);return $.useEffect(()=>{if(!n.current)return;const r=Un.map(n.current,{attributionControl:t,zoomControl:t,dragging:t,scrollWheelZoom:t,doubleClickZoom:t,boxZoom:t,keyboard:t,touchZoom:t});Un.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:t?'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors':"",maxZoom:t?19:17}).addTo(r),e.segments.forEach(o=>{const l=o.points.map(c=>[c.position.lat,c.position.lon]);Un.polyline(l,{color:"#0F7BFF",weight:t?4:3,opacity:.8}).addTo(r)});const s=Un.latLngBounds([e.bounds.minLat,e.bounds.minLon],[e.bounds.maxLat,e.bounds.maxLon]);return r.fitBounds(s,{padding:[10,10]}),i.current=r,()=>{i.current&&(i.current.remove(),i.current=null)}},[e,t]),$.useEffect(()=>{const r=()=>{i.current&&i.current.invalidateSize()};return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),m.jsx("div",{ref:n,className:"w-full h-full",style:{backgroundColor:"#f2f4f8"}})},iz=({route:e})=>m.jsxs("div",{className:"card overflow-hidden group hover:shadow-lg transition-all duration-300",children:[m.jsxs("div",{className:"h-36 w-full relative",children:[m.jsx(nz,{route:e}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"}),m.jsxs("div",{className:"absolute bottom-3 left-3 flex items-center gap-1.5 text-white",children:[m.jsx(Iy,{size:14}),m.jsx("span",{className:"text-sm font-medium",children:Ov(new Date(e.date))})]})]}),m.jsxs("div",{className:"p-4",children:[m.jsx("h3",{className:"font-bold text-lg mb-1 truncate group-hover:text-primary transition-colors",children:e.name}),m.jsx("p",{className:"text-text-light text-sm mb-3 line-clamp-2 h-10",children:e.description||"No description provided"}),m.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[m.jsxs("div",{className:"flex flex-col items-center text-center p-1",children:[m.jsx("div",{className:"flex items-center gap-1 text-text-light mb-1",children:m.jsx(iS,{size:14})}),m.jsxs("span",{className:"font-semibold text-sm",children:[e.totalElevationGain.toFixed(0),"m"]}),m.jsx("span",{className:"text-xs text-text-light",children:"Elevation"})]}),m.jsxs("div",{className:"flex flex-col items-center text-center p-1 border-x border-border",children:[m.jsx("div",{className:"flex items-center gap-1 text-text-light mb-1",children:m.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{d:"M12 2L4 9H11L3 22H21L13 9H20L12 2Z",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round"})})}),m.jsx("span",{className:"font-semibold text-sm",children:il(e.totalDistance)}),m.jsx("span",{className:"text-xs text-text-light",children:"Distance"})]}),m.jsxs("div",{className:"flex flex-col items-center text-center p-1",children:[m.jsx("div",{className:"flex items-center gap-1 text-text-light mb-1",children:m.jsx(cS,{size:14})}),m.jsx("span",{className:"font-semibold text-sm",children:zf(e.totalDuration).split(" ")[0]}),m.jsx("span",{className:"text-xs text-text-light",children:"Duration"})]})]})]})]}),rz=()=>m.jsx("div",{className:"h-[calc(100vh-12rem)] flex flex-col items-center justify-center p-4",children:m.jsxs("div",{className:"text-center max-w-md mx-auto",children:[m.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center mx-auto mb-6",children:m.jsx(Wr,{size:32,className:"text-primary"})}),m.jsx("h2",{className:"text-2xl font-bold mb-3",children:"No routes yet"}),m.jsx("p",{className:"text-text-light mb-8",children:"Upload your first GPX file to start tracking and visualizing your routes"}),m.jsxs(be,{to:"/upload",className:"btn btn-primary flex items-center justify-center gap-2 w-full max-w-xs mx-auto",children:[m.jsx(Vu,{size:18}),m.jsx("span",{children:"Upload GPX File"})]}),m.jsxs("div",{className:"mt-8 p-4 bg-background rounded-lg",children:[m.jsx("h3",{className:"font-semibold mb-2",children:"What is a GPX file?"}),m.jsx("p",{className:"text-text-light text-sm",children:"GPX (GPS Exchange Format) files contain GPS data such as waypoints, tracks, and routes. These are commonly exported from fitness apps, GPS devices, and mapping software."})]})]})}),sz=()=>{const{routes:e}=zp(),[t,n]=$.useState(""),[i,r]=$.useState("date"),[s,o]=$.useState("desc"),[l,c]=$.useState("grid"),[h,p]=$.useState("all"),[g,y]=$.useState(!1),[x,T]=$.useState(""),[S,k]=$.useState("#0F7BFF"),[P,I]=$.useState(()=>{const b=localStorage.getItem("routeGroups");return b?JSON.parse(b):[{id:"recent",name:"Recent Routes",color:"#0F7BFF",routeIds:[]},{id:"favorites",name:"Favorites",color:"#F59E0B",routeIds:[]}]});Nu.useEffect(()=>{localStorage.setItem("routeGroups",JSON.stringify(P))},[P]);const R=$.useMemo(()=>{let b=e;if(h!=="all"){const A=P.find(D=>D.id===h);A&&(b=b.filter(D=>A.routeIds.includes(D.id)))}if(t){const A=t.toLowerCase();b=b.filter(D=>D.name.toLowerCase().includes(A)||D.description.toLowerCase().includes(A))}return[...b].sort((A,D)=>{let O=0;switch(i){case"date":O=new Date(A.date).getTime()-new Date(D.date).getTime();break;case"distance":O=A.totalDistance-D.totalDistance;break;case"duration":O=A.totalDuration-D.totalDuration;break}return s==="asc"?O:-O})},[e,t,i,s,h,P]),V=$.useMemo(()=>e.reduce((b,A)=>(b.distance+=A.totalDistance,b.duration+=A.totalDuration,b.elevationGain+=A.totalElevationGain,b),{distance:0,duration:0,elevationGain:0}),[e]),B=b=>{i===b?o(s==="asc"?"desc":"asc"):(r(b),o("desc"))},H=()=>{if(x.trim()){const b={id:Date.now().toString(),name:x.trim(),color:S,routeIds:[]};I([...P,b]),T(""),k("#0F7BFF"),y(!1)}},N=["#0F7BFF","#F59E0B","#10B981","#EF4444","#8B5CF6","#F97316","#06B6D4","#84CC16","#EC4899","#6366F1"];return e.length===0?m.jsx(rz,{}):m.jsxs("div",{className:"fade-in",children:[m.jsxs("div",{className:"mb-6",children:[m.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Your Routes"}),m.jsx("p",{className:"text-text-light",children:"View and manage your GPS route activities"})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[m.jsxs("div",{className:"card p-4",children:[m.jsx("p",{className:"text-text-light text-sm mb-1",children:"Total Distance"}),m.jsx("p",{className:"text-2xl font-bold",children:il(V.distance)})]}),m.jsxs("div",{className:"card p-4",children:[m.jsx("p",{className:"text-text-light text-sm mb-1",children:"Total Duration"}),m.jsx("p",{className:"text-2xl font-bold",children:zf(V.duration)})]}),m.jsxs("div",{className:"card p-4",children:[m.jsx("p",{className:"text-text-light text-sm mb-1",children:"Total Elevation Gain"}),m.jsxs("p",{className:"text-2xl font-bold",children:[V.elevationGain.toFixed(0),"m"]})]})]}),m.jsxs("div",{className:"card p-4 mb-6",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsx("h2",{className:"font-semibold",children:"Route Groups"}),m.jsxs("button",{onClick:()=>y(!0),className:"btn btn-outline text-sm",children:[m.jsx(sN,{size:16,className:"mr-2"}),"New Group"]})]}),m.jsxs("div",{className:"flex flex-wrap gap-2",children:[m.jsxs("button",{onClick:()=>p("all"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${h==="all"?"bg-primary text-white":"bg-background text-text-light hover:text-text"}`,children:["All Routes (",e.length,")"]}),P.map(b=>m.jsxs("button",{onClick:()=>p(b.id),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors flex items-center gap-2 ${h===b.id?"text-white":"bg-background text-text-light hover:text-text"}`,style:{backgroundColor:h===b.id?b.color:void 0},children:[m.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:b.color}}),b.name," (",b.routeIds.length,")"]},b.id))]})]}),m.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[m.jsxs("div",{className:"relative flex-grow",children:[m.jsx(pN,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-text-light",size:18}),m.jsx("input",{type:"text",placeholder:"Search routes...",value:t,onChange:b=>n(b.target.value),className:"input-field pl-10"})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsxs("div",{className:"flex border border-border rounded-lg",children:[m.jsx("button",{className:`p-2 rounded-l-lg transition-colors ${l==="grid"?"bg-primary text-white":"hover:bg-background"}`,onClick:()=>c("grid"),children:m.jsx(aN,{size:16})}),m.jsx("button",{className:`p-2 rounded-r-lg transition-colors ${l==="list"?"bg-primary text-white":"hover:bg-background"}`,onClick:()=>c("list"),children:m.jsx(lN,{size:16})})]}),m.jsx("button",{className:`btn ${i==="date"?"btn-primary":"btn-outline"}`,onClick:()=>B("date"),children:m.jsxs("span",{className:"flex items-center gap-1",children:[m.jsx(Iy,{size:16}),"Date ",i==="date"&&(s==="asc"?"":"")]})}),m.jsx("button",{className:`btn ${i==="distance"?"btn-primary":"btn-outline"}`,onClick:()=>B("distance"),children:m.jsxs("span",{className:"flex items-center gap-1",children:[m.jsx(rN,{size:16}),"Distance ",i==="distance"&&(s==="asc"?"":"")]})})]})]}),l==="grid"?m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:R.map(b=>m.jsx(be,{to:`/routes/${b.id}`,children:m.jsx(iz,{route:b})},b.id))}):m.jsx("div",{className:"space-y-4",children:R.map(b=>m.jsx(be,{to:`/routes/${b.id}`,children:m.jsx("div",{className:"card p-4 hover:shadow-lg transition-all duration-300 group",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("h3",{className:"font-bold text-lg mb-1 group-hover:text-primary transition-colors",children:b.name}),m.jsx("p",{className:"text-text-light text-sm mb-2",children:Ov(new Date(b.date))}),m.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[m.jsx("span",{children:il(b.totalDistance)}),m.jsx("span",{children:zf(b.totalDuration)}),m.jsxs("span",{children:[b.totalElevationGain.toFixed(0),"m elevation"]})]})]}),m.jsx(XR,{size:20,className:"text-text-light group-hover:text-primary transition-colors"})]})})},b.id))}),R.length===0&&m.jsxs("div",{className:"text-center py-12",children:[m.jsx(oN,{size:48,className:"mx-auto text-text-light mb-4"}),m.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No routes found"}),m.jsx("p",{className:"text-text-light",children:h==="all"?"Try adjusting your search terms":"This group is empty. Add some routes to get started."})]}),g&&m.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:m.jsxs("div",{className:"card max-w-md w-full p-6 fade-in slide-up",children:[m.jsx("h3",{className:"text-xl font-bold mb-4",children:"Create New Group"}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"Group Name"}),m.jsx("input",{type:"text",value:x,onChange:b=>T(b.target.value),placeholder:"e.g., Mountain Hikes",className:"input-field"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"Color"}),m.jsx("div",{className:"flex gap-2 flex-wrap",children:N.map(b=>m.jsx("button",{onClick:()=>k(b),className:`w-8 h-8 rounded-full border-2 transition-all ${S===b?"border-text scale-110":"border-border"}`,style:{backgroundColor:b}},b))})]})]}),m.jsxs("div",{className:"flex gap-3 justify-end mt-6",children:[m.jsx("button",{className:"btn text-text-light hover:bg-background",onClick:()=>y(!1),children:"Cancel"}),m.jsx("button",{className:"btn btn-primary",onClick:H,disabled:!x.trim(),children:"Create Group"})]})]})})]})},oz=({route:e,showMarkers:t=!0})=>{const n=$.useRef(null),i=$.useRef(null);return $.useEffect(()=>{if(!n.current)return;const r=Un.map(n.current);if(Un.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:19}).addTo(r),e.segments.forEach(o=>{const l=o.points.map(y=>[y.position.lat,y.position.lon]),c=o.points.map(y=>y.position.ele),h=Math.min(...c),g=Math.max(...c)-h;for(let y=1;y<l.length;y++){const x=o.points[y-1].position.ele,T=o.points[y].position.ele,S=(x+T)/2;let k=g?(S-h)/g:0;k=Math.max(0,Math.min(1,k));const P=Math.round(k*255),I=Math.round(Math.abs(k-.5)*255),R=Math.round((1-k)*255);Un.polyline([l[y-1],l[y]],{color:`rgb(${P}, ${I}, ${R})`,weight:4,opacity:.8}).addTo(r)}}),t){const o=Un.divIcon({html:'<div class="bg-green-500 w-4 h-4 rounded-full border-2 border-white"></div>',className:"custom-div-icon",iconSize:[10,10],iconAnchor:[5,5]}),l=Un.divIcon({html:'<div class="bg-red-500 w-4 h-4 rounded-full border-2 border-white"></div>',className:"custom-div-icon",iconSize:[10,10],iconAnchor:[5,5]});Un.marker([e.startPoint.lat,e.startPoint.lon],{icon:o}).addTo(r).bindTooltip("Start",{permanent:!1,direction:"right"}),Un.marker([e.endPoint.lat,e.endPoint.lon],{icon:l}).addTo(r).bindTooltip("End",{permanent:!1,direction:"right"})}const s=Un.latLngBounds([e.bounds.minLat,e.bounds.minLon],[e.bounds.maxLat,e.bounds.maxLon]);return r.fitBounds(s,{padding:[30,30]}),i.current=r,()=>{i.current&&(i.current.remove(),i.current=null)}},[e,t]),$.useEffect(()=>{const r=()=>{i.current&&i.current.invalidateSize()};window.addEventListener("resize",r);const s=setTimeout(()=>{r()},300);return()=>{window.removeEventListener("resize",r),clearTimeout(s)}},[]),m.jsx("div",{ref:n,className:"w-full h-full",style:{backgroundColor:"#f2f4f8"}})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Ju(e){return e+.5|0}const Jr=(e,t,n)=>Math.max(Math.min(e,n),t);function Sc(e){return Jr(Ju(e*2.55),0,255)}function ds(e){return Jr(Ju(e*255),0,255)}function ir(e){return Jr(Ju(e/2.55)/100,0,1)}function f1(e){return Jr(Ju(e*100),0,100)}const Bn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},w_=[..."0123456789ABCDEF"],az=e=>w_[e&15],lz=e=>w_[(e&240)>>4]+w_[e&15],cd=e=>(e&240)>>4===(e&15),cz=e=>cd(e.r)&&cd(e.g)&&cd(e.b)&&cd(e.a);function uz(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&Bn[e[1]]*17,g:255&Bn[e[2]]*17,b:255&Bn[e[3]]*17,a:t===5?Bn[e[4]]*17:255}:(t===7||t===9)&&(n={r:Bn[e[1]]<<4|Bn[e[2]],g:Bn[e[3]]<<4|Bn[e[4]],b:Bn[e[5]]<<4|Bn[e[6]],a:t===9?Bn[e[7]]<<4|Bn[e[8]]:255})),n}const hz=(e,t)=>e<255?t(e):"";function dz(e){var t=cz(e)?az:lz;return e?"#"+t(e.r)+t(e.g)+t(e.b)+hz(e.a,t):void 0}const fz=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function KP(e,t,n){const i=t*Math.min(n,1-n),r=(s,o=(s+e/30)%12)=>n-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function pz(e,t,n){const i=(r,s=(r+e/60)%6)=>n-n*t*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function mz(e,t,n){const i=KP(e,1,.5);let r;for(t+n>1&&(r=1/(t+n),t*=r,n*=r),r=0;r<3;r++)i[r]*=1-t-n,i[r]+=t;return i}function gz(e,t,n,i,r){return e===r?(t-n)/i+(t<n?6:0):t===r?(n-e)/i+2:(e-t)/i+4}function jv(e){const n=e.r/255,i=e.g/255,r=e.b/255,s=Math.max(n,i,r),o=Math.min(n,i,r),l=(s+o)/2;let c,h,p;return s!==o&&(p=s-o,h=l>.5?p/(2-s-o):p/(s+o),c=gz(n,i,r,p,s),c=c*60+.5),[c|0,h||0,l]}function Vv(e,t,n,i){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,i)).map(ds)}function Fv(e,t,n){return Vv(KP,e,t,n)}function _z(e,t,n){return Vv(mz,e,t,n)}function yz(e,t,n){return Vv(pz,e,t,n)}function ZP(e){return(e%360+360)%360}function vz(e){const t=fz.exec(e);let n=255,i;if(!t)return;t[5]!==i&&(n=t[6]?Sc(+t[5]):ds(+t[5]));const r=ZP(+t[2]),s=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?i=_z(r,s,o):t[1]==="hsv"?i=yz(r,s,o):i=Fv(r,s,o),{r:i[0],g:i[1],b:i[2],a:n}}function xz(e,t){var n=jv(e);n[0]=ZP(n[0]+t),n=Fv(n),e.r=n[0],e.g=n[1],e.b=n[2]}function wz(e){if(!e)return;const t=jv(e),n=t[0],i=f1(t[1]),r=f1(t[2]);return e.a<255?`hsla(${n}, ${i}%, ${r}%, ${ir(e.a)})`:`hsl(${n}, ${i}%, ${r}%)`}const p1={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},m1={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function bz(){const e={},t=Object.keys(m1),n=Object.keys(p1);let i,r,s,o,l;for(i=0;i<t.length;i++){for(o=l=t[i],r=0;r<n.length;r++)s=n[r],l=l.replace(s,p1[s]);s=parseInt(m1[o],16),e[l]=[s>>16&255,s>>8&255,s&255]}return e}let ud;function Tz(e){ud||(ud=bz(),ud.transparent=[0,0,0,0]);const t=ud[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const Ez=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Sz(e){const t=Ez.exec(e);let n=255,i,r,s;if(t){if(t[7]!==i){const o=+t[7];n=t[8]?Sc(o):Jr(o*255,0,255)}return i=+t[1],r=+t[3],s=+t[5],i=255&(t[2]?Sc(i):Jr(i,0,255)),r=255&(t[4]?Sc(r):Jr(r,0,255)),s=255&(t[6]?Sc(s):Jr(s,0,255)),{r:i,g:r,b:s,a:n}}}function kz(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${ir(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const Hm=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,fa=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function Pz(e,t,n){const i=fa(ir(e.r)),r=fa(ir(e.g)),s=fa(ir(e.b));return{r:ds(Hm(i+n*(fa(ir(t.r))-i))),g:ds(Hm(r+n*(fa(ir(t.g))-r))),b:ds(Hm(s+n*(fa(ir(t.b))-s))),a:e.a+n*(t.a-e.a)}}function hd(e,t,n){if(e){let i=jv(e);i[t]=Math.max(0,Math.min(i[t]+i[t]*n,t===0?360:1)),i=Fv(i),e.r=i[0],e.g=i[1],e.b=i[2]}}function QP(e,t){return e&&Object.assign(t||{},e)}function g1(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=ds(e[3]))):(t=QP(e,{r:0,g:0,b:0,a:1}),t.a=ds(t.a)),t}function Iz(e){return e.charAt(0)==="r"?Sz(e):vz(e)}class Su{constructor(t){if(t instanceof Su)return t;const n=typeof t;let i;n==="object"?i=g1(t):n==="string"&&(i=uz(t)||Tz(t)||Iz(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=QP(this._rgb);return t&&(t.a=ir(t.a)),t}set rgb(t){this._rgb=g1(t)}rgbString(){return this._valid?kz(this._rgb):void 0}hexString(){return this._valid?dz(this._rgb):void 0}hslString(){return this._valid?wz(this._rgb):void 0}mix(t,n){if(t){const i=this.rgb,r=t.rgb;let s;const o=n===s?.5:n,l=2*o-1,c=i.a-r.a,h=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;s=1-h,i.r=255&h*i.r+s*r.r+.5,i.g=255&h*i.g+s*r.g+.5,i.b=255&h*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(t,n){return t&&(this._rgb=Pz(this._rgb,t._rgb,n)),this}clone(){return new Su(this.rgb)}alpha(t){return this._rgb.a=ds(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=Ju(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return hd(this._rgb,2,t),this}darken(t){return hd(this._rgb,2,-t),this}saturate(t){return hd(this._rgb,1,t),this}desaturate(t){return hd(this._rgb,1,-t),this}rotate(t){return xz(this._rgb,t),this}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Xi(){}const Cz=(()=>{let e=0;return()=>e++})();function Kt(e){return e==null}function Ie(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Ot(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function en(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function Si(e,t){return en(e)?e:t}function Lt(e,t){return typeof e>"u"?t:e}const Az=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Qt(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function Bt(e,t,n,i){let r,s,o;if(Ie(e))for(s=e.length,r=0;r<s;r++)t.call(n,e[r],r);else if(Ot(e))for(o=Object.keys(e),s=o.length,r=0;r<s;r++)t.call(n,e[o[r]],o[r])}function Bf(e,t){let n,i,r,s;if(!e||!t||e.length!==t.length)return!1;for(n=0,i=e.length;n<i;++n)if(r=e[n],s=t[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function Uf(e){if(Ie(e))return e.map(Uf);if(Ot(e)){const t=Object.create(null),n=Object.keys(e),i=n.length;let r=0;for(;r<i;++r)t[n[r]]=Uf(e[n[r]]);return t}return e}function YP(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function Rz(e,t,n,i){if(!YP(e))return;const r=t[e],s=n[e];Ot(r)&&Ot(s)?ku(r,s,i):t[e]=Uf(s)}function ku(e,t,n){const i=Ie(t)?t:[t],r=i.length;if(!Ot(e))return e;n=n||{};const s=n.merger||Rz;let o;for(let l=0;l<r;++l){if(o=i[l],!Ot(o))continue;const c=Object.keys(o);for(let h=0,p=c.length;h<p;++h)s(c[h],e,o,n)}return e}function Wc(e,t){return ku(e,t,{merger:Nz})}function Nz(e,t,n){if(!YP(e))return;const i=t[e],r=n[e];Ot(i)&&Ot(r)?Wc(i,r):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Uf(r))}const _1={"":e=>e,x:e=>e.x,y:e=>e.y};function Lz(e){const t=e.split("."),n=[];let i="";for(const r of t)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function Mz(e){const t=Lz(e);return n=>{for(const i of t){if(i==="")break;n=n&&n[i]}return n}}function Hf(e,t){return(_1[t]||(_1[t]=Mz(t)))(e)}function zv(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Wf=e=>typeof e<"u",vs=e=>typeof e=="function",y1=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function Dz(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Oe=Math.PI,mi=2*Oe,Oz=mi+Oe,$f=Number.POSITIVE_INFINITY,jz=Oe/180,hi=Oe/2,Ws=Oe/4,v1=Oe*2/3,b_=Math.log10,rl=Math.sign;function $c(e,t,n){return Math.abs(e-t)<n}function x1(e){const t=Math.round(e);e=$c(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(b_(e))),i=e/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function Vz(e){const t=[],n=Math.sqrt(e);let i;for(i=1;i<n;i++)e%i===0&&(t.push(i),t.push(e/i));return n===(n|0)&&t.push(n),t.sort((r,s)=>r-s).pop(),t}function Fz(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function Pu(e){return!Fz(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function zz(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function Bz(e,t,n){let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i][n],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function ro(e){return e*(Oe/180)}function Uz(e){return e*(180/Oe)}function w1(e){if(!en(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function Hz(e,t){const n=t.x-e.x,i=t.y-e.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*Oe&&(s+=mi),{angle:s,distance:r}}function T_(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Wz(e,t){return(e-t+Oz)%mi-Oe}function Ci(e){return(e%mi+mi)%mi}function XP(e,t,n,i){const r=Ci(e),s=Ci(t),o=Ci(n),l=Ci(s-r),c=Ci(o-r),h=Ci(r-s),p=Ci(r-o);return r===s||r===o||i&&s===o||l>c&&h<p}function qn(e,t,n){return Math.max(t,Math.min(n,e))}function $z(e){return qn(e,-32768,32767)}function Ca(e,t,n,i=1e-6){return e>=Math.min(t,n)-i&&e<=Math.max(t,n)+i}function Bv(e,t,n){n=n||(o=>e[o]<t);let i=e.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,n(s)?r=s:i=s;return{lo:r,hi:i}}const so=(e,t,n,i)=>Bv(e,n,i?r=>{const s=e[r][t];return s<n||s===n&&e[r+1][t]===n}:r=>e[r][t]<n),qz=(e,t,n)=>Bv(e,n,i=>e[i][t]>=n);function Gz(e,t,n){let i=0,r=e.length;for(;i<r&&e[i]<t;)i++;for(;r>i&&e[r-1]>n;)r--;return i>0||r<e.length?e.slice(i,r):e}const JP=["push","pop","shift","splice","unshift"];function Kz(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),JP.forEach(n=>{const i="_onData"+zv(n),r=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return e._chartjs.listeners.forEach(l=>{typeof l[i]=="function"&&l[i](...s)}),o}})})}function b1(e,t){const n=e._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(t);r!==-1&&i.splice(r,1),!(i.length>0)&&(JP.forEach(s=>{delete e[s]}),delete e._chartjs)}function Zz(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const tI=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function eI(e,t){let n=[],i=!1;return function(...r){n=r,i||(i=!0,tI.call(window,()=>{i=!1,e.apply(t,n)}))}}function Qz(e,t){let n;return function(...i){return t?(clearTimeout(n),n=setTimeout(e,t,i)):e.apply(this,i),t}}const Uv=e=>e==="start"?"left":e==="end"?"right":"center",Ke=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,Yz=(e,t,n,i)=>e===(i?"left":"right")?n:e==="center"?(t+n)/2:t;function Xz(e,t,n){const i=t.length;let r=0,s=i;if(e._sorted){const{iScale:o,vScale:l,_parsed:c}=e,h=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,p=o.axis,{min:g,max:y,minDefined:x,maxDefined:T}=o.getUserBounds();if(x){if(r=Math.min(so(c,p,g).lo,n?i:so(t,p,o.getPixelForValue(g)).lo),h){const S=c.slice(0,r+1).reverse().findIndex(k=>!Kt(k[l.axis]));r-=Math.max(0,S)}r=qn(r,0,i-1)}if(T){let S=Math.max(so(c,o.axis,y,!0).hi+1,n?0:so(t,p,o.getPixelForValue(y),!0).hi+1);if(h){const k=c.slice(S-1).findIndex(P=>!Kt(P[l.axis]));S+=Math.max(0,k)}s=qn(S,r,i)-r}else s=i-r}return{start:r,count:s}}function Jz(e){const{xScale:t,yScale:n,_scaleRanges:i}=e,r={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!i)return e._scaleRanges=r,!0;const s=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),s}const dd=e=>e===0||e===1,T1=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*mi/n)),E1=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*mi/n)+1,qc={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*hi)+1,easeOutSine:e=>Math.sin(e*hi),easeInOutSine:e=>-.5*(Math.cos(Oe*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>dd(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>dd(e)?e:T1(e,.075,.3),easeOutElastic:e=>dd(e)?e:E1(e,.075,.3),easeInOutElastic(e){return dd(e)?e:e<.5?.5*T1(e*2,.1125,.45):.5+.5*E1(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-qc.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?qc.easeInBounce(e*2)*.5:qc.easeOutBounce(e*2-1)*.5+.5};function Hv(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function S1(e){return Hv(e)?e:new Su(e)}function Wm(e){return Hv(e)?e:new Su(e).saturate(.5).darken(.1).hexString()}const tB=["x","y","borderWidth","radius","tension"],eB=["color","borderColor","backgroundColor"];function nB(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:eB},numbers:{type:"number",properties:tB}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function iB(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const k1=new Map;function rB(e,t){t=t||{};const n=e+JSON.stringify(t);let i=k1.get(n);return i||(i=new Intl.NumberFormat(e,t),k1.set(n,i)),i}function nI(e,t,n){return rB(t,n).format(e)}const iI={values(e){return Ie(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const i=this.chart.options.locale;let r,s=e;if(n.length>1){const h=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(h<1e-4||h>1e15)&&(r="scientific"),s=sB(e,n)}const o=b_(Math.abs(s)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:r,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),nI(e,i,c)},logarithmic(e,t,n){if(e===0)return"0";const i=n[t].significand||e/Math.pow(10,Math.floor(b_(e)));return[1,2,3,5,10,15].includes(i)||t>.8*n.length?iI.numeric.call(this,e,t,n):""}};function sB(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var rI={formatters:iI};function oB(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:rI.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Eo=Object.create(null),E_=Object.create(null);function Gc(e,t){if(!t)return e;const n=t.split(".");for(let i=0,r=n.length;i<r;++i){const s=n[i];e=e[s]||(e[s]=Object.create(null))}return e}function $m(e,t,n){return typeof t=="string"?ku(Gc(e,t),n):ku(Gc(e,""),t)}class aB{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>Wm(r.backgroundColor),this.hoverBorderColor=(i,r)=>Wm(r.borderColor),this.hoverColor=(i,r)=>Wm(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return $m(this,t,n)}get(t){return Gc(this,t)}describe(t,n){return $m(E_,t,n)}override(t,n){return $m(Eo,t,n)}route(t,n,i,r){const s=Gc(this,t),o=Gc(this,i),l="_"+n;Object.defineProperties(s,{[l]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const c=this[l],h=o[r];return Ot(c)?Object.assign({},h,c):Lt(c,h)},set(c){this[l]=c}}})}apply(t){t.forEach(n=>n(this))}}var _e=new aB({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[nB,iB,oB]);function lB(e){return!e||Kt(e.size)||Kt(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function P1(e,t,n,i,r){let s=t[r];return s||(s=t[r]=e.measureText(r).width,n.push(r)),s>i&&(i=s),i}function $s(e,t,n){const i=e.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((t-r)*i)/i+r}function I1(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function S_(e,t,n,i){sI(e,t,n,i,null)}function sI(e,t,n,i,r){let s,o,l,c,h,p,g,y;const x=t.pointStyle,T=t.rotation,S=t.radius;let k=(T||0)*jz;if(x&&typeof x=="object"&&(s=x.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){e.save(),e.translate(n,i),e.rotate(k),e.drawImage(x,-x.width/2,-x.height/2,x.width,x.height),e.restore();return}if(!(isNaN(S)||S<=0)){switch(e.beginPath(),x){default:r?e.ellipse(n,i,r/2,S,0,0,mi):e.arc(n,i,S,0,mi),e.closePath();break;case"triangle":p=r?r/2:S,e.moveTo(n+Math.sin(k)*p,i-Math.cos(k)*S),k+=v1,e.lineTo(n+Math.sin(k)*p,i-Math.cos(k)*S),k+=v1,e.lineTo(n+Math.sin(k)*p,i-Math.cos(k)*S),e.closePath();break;case"rectRounded":h=S*.516,c=S-h,o=Math.cos(k+Ws)*c,g=Math.cos(k+Ws)*(r?r/2-h:c),l=Math.sin(k+Ws)*c,y=Math.sin(k+Ws)*(r?r/2-h:c),e.arc(n-g,i-l,h,k-Oe,k-hi),e.arc(n+y,i-o,h,k-hi,k),e.arc(n+g,i+l,h,k,k+hi),e.arc(n-y,i+o,h,k+hi,k+Oe),e.closePath();break;case"rect":if(!T){c=Math.SQRT1_2*S,p=r?r/2:c,e.rect(n-p,i-c,2*p,2*c);break}k+=Ws;case"rectRot":g=Math.cos(k)*(r?r/2:S),o=Math.cos(k)*S,l=Math.sin(k)*S,y=Math.sin(k)*(r?r/2:S),e.moveTo(n-g,i-l),e.lineTo(n+y,i-o),e.lineTo(n+g,i+l),e.lineTo(n-y,i+o),e.closePath();break;case"crossRot":k+=Ws;case"cross":g=Math.cos(k)*(r?r/2:S),o=Math.cos(k)*S,l=Math.sin(k)*S,y=Math.sin(k)*(r?r/2:S),e.moveTo(n-g,i-l),e.lineTo(n+g,i+l),e.moveTo(n+y,i-o),e.lineTo(n-y,i+o);break;case"star":g=Math.cos(k)*(r?r/2:S),o=Math.cos(k)*S,l=Math.sin(k)*S,y=Math.sin(k)*(r?r/2:S),e.moveTo(n-g,i-l),e.lineTo(n+g,i+l),e.moveTo(n+y,i-o),e.lineTo(n-y,i+o),k+=Ws,g=Math.cos(k)*(r?r/2:S),o=Math.cos(k)*S,l=Math.sin(k)*S,y=Math.sin(k)*(r?r/2:S),e.moveTo(n-g,i-l),e.lineTo(n+g,i+l),e.moveTo(n+y,i-o),e.lineTo(n-y,i+o);break;case"line":o=r?r/2:Math.cos(k)*S,l=Math.sin(k)*S,e.moveTo(n-o,i-l),e.lineTo(n+o,i+l);break;case"dash":e.moveTo(n,i),e.lineTo(n+Math.cos(k)*(r?r/2:S),i+Math.sin(k)*S);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function Iu(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function Bp(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Up(e){e.restore()}function cB(e,t,n,i,r){if(!t)return e.lineTo(n.x,n.y);if(r==="middle"){const s=(t.x+n.x)/2;e.lineTo(s,t.y),e.lineTo(s,n.y)}else r==="after"!=!!i?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function uB(e,t,n,i){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function hB(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),Kt(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function dB(e,t,n,i,r){if(r.strikethrough||r.underline){const s=e.measureText(i),o=t-s.actualBoundingBoxLeft,l=t+s.actualBoundingBoxRight,c=n-s.actualBoundingBoxAscent,h=n+s.actualBoundingBoxDescent,p=r.strikethrough?(c+h)/2:h;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=r.decorationWidth||2,e.moveTo(o,p),e.lineTo(l,p),e.stroke()}}function fB(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function Cu(e,t,n,i,r,s={}){const o=Ie(t)?t:[t],l=s.strokeWidth>0&&s.strokeColor!=="";let c,h;for(e.save(),e.font=r.string,hB(e,s),c=0;c<o.length;++c)h=o[c],s.backdrop&&fB(e,s.backdrop),l&&(s.strokeColor&&(e.strokeStyle=s.strokeColor),Kt(s.strokeWidth)||(e.lineWidth=s.strokeWidth),e.strokeText(h,n,i,s.maxWidth)),e.fillText(h,n,i,s.maxWidth),dB(e,n,i,h,s),i+=Number(r.lineHeight);e.restore()}function k_(e,t){const{x:n,y:i,w:r,h:s,radius:o}=t;e.arc(n+o.topLeft,i+o.topLeft,o.topLeft,1.5*Oe,Oe,!0),e.lineTo(n,i+s-o.bottomLeft),e.arc(n+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,Oe,hi,!0),e.lineTo(n+r-o.bottomRight,i+s),e.arc(n+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,hi,0,!0),e.lineTo(n+r,i+o.topRight),e.arc(n+r-o.topRight,i+o.topRight,o.topRight,0,-hi,!0),e.lineTo(n+o.topLeft,i)}const pB=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,mB=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function gB(e,t){const n=(""+e).match(pB);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const _B=e=>+e||0;function oI(e,t){const n={},i=Ot(t),r=i?Object.keys(t):t,s=Ot(e)?i?o=>Lt(e[o],e[t[o]]):o=>e[o]:()=>e;for(const o of r)n[o]=_B(s(o));return n}function yB(e){return oI(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Kc(e){return oI(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Jn(e){const t=yB(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Xe(e,t){e=e||{},t=t||_e.font;let n=Lt(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let i=Lt(e.style,t.style);i&&!(""+i).match(mB)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:Lt(e.family,t.family),lineHeight:gB(Lt(e.lineHeight,t.lineHeight),n),size:n,style:i,weight:Lt(e.weight,t.weight),string:""};return r.string=lB(r),r}function fd(e,t,n,i){let r,s,o;for(r=0,s=e.length;r<s;++r)if(o=e[r],o!==void 0&&o!==void 0)return o}function vB(e,t,n){const{min:i,max:r}=e,s=Az(t,(r-i)/2),o=(l,c)=>n&&l===0?0:l+c;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function Lo(e,t){return Object.assign(Object.create(e),t)}function Wv(e,t=[""],n,i,r=()=>e[0]){const s=n||e;typeof i>"u"&&(i=uI("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:s,_fallback:i,_getTarget:r,override:l=>Wv([l,...e],t,s,i)};return new Proxy(o,{deleteProperty(l,c){return delete l[c],delete l._keys,delete e[0][c],!0},get(l,c){return lI(l,c,()=>PB(c,t,e,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(l,c){return A1(l).includes(c)},ownKeys(l){return A1(l)},set(l,c,h){const p=l._storage||(l._storage=r());return l[c]=p[c]=h,delete l._keys,!0}})}function sl(e,t,n,i){const r={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:aI(e,i),setContext:s=>sl(e,s,n,i),override:s=>sl(e.override(s),t,n,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete e[o],!0},get(s,o,l){return lI(s,o,()=>wB(s,o,l))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(s,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(s,o,l){return e[o]=l,delete s[o],!0}})}function aI(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:i=t.indexable,_allKeys:r=t.allKeys}=e;return{allKeys:r,scriptable:n,indexable:i,isScriptable:vs(n)?n:()=>n,isIndexable:vs(i)?i:()=>i}}const xB=(e,t)=>e?e+zv(t):t,$v=(e,t)=>Ot(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function lI(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const i=n();return e[t]=i,i}function wB(e,t,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=e;let l=i[t];return vs(l)&&o.isScriptable(t)&&(l=bB(t,l,e,n)),Ie(l)&&l.length&&(l=TB(t,l,e,o.isIndexable)),$v(t,l)&&(l=sl(l,r,s&&s[t],o)),l}function bB(e,t,n,i){const{_proxy:r,_context:s,_subProxy:o,_stack:l}=n;if(l.has(e))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+e);l.add(e);let c=t(s,o||i);return l.delete(e),$v(e,c)&&(c=qv(r._scopes,r,e,c)),c}function TB(e,t,n,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:l}=n;if(typeof s.index<"u"&&i(e))return t[s.index%t.length];if(Ot(t[0])){const c=t,h=r._scopes.filter(p=>p!==c);t=[];for(const p of c){const g=qv(h,r,e,p);t.push(sl(g,s,o&&o[e],l))}}return t}function cI(e,t,n){return vs(e)?e(t,n):e}const EB=(e,t)=>e===!0?t:typeof e=="string"?Hf(t,e):void 0;function SB(e,t,n,i,r){for(const s of t){const o=EB(n,s);if(o){e.add(o);const l=cI(o._fallback,n,r);if(typeof l<"u"&&l!==n&&l!==i)return l}else if(o===!1&&typeof i<"u"&&n!==i)return null}return!1}function qv(e,t,n,i){const r=t._rootScopes,s=cI(t._fallback,n,i),o=[...e,...r],l=new Set;l.add(i);let c=C1(l,o,n,s||n,i);return c===null||typeof s<"u"&&s!==n&&(c=C1(l,o,s,c,i),c===null)?!1:Wv(Array.from(l),[""],r,s,()=>kB(t,n,i))}function C1(e,t,n,i,r){for(;n;)n=SB(e,t,n,i,r);return n}function kB(e,t,n){const i=e._getTarget();t in i||(i[t]={});const r=i[t];return Ie(r)&&Ot(n)?n:r||{}}function PB(e,t,n,i){let r;for(const s of t)if(r=uI(xB(s,e),n),typeof r<"u")return $v(e,r)?qv(n,i,e,r):r}function uI(e,t){for(const n of t){if(!n)continue;const i=n[e];if(typeof i<"u")return i}}function A1(e){let t=e._keys;return t||(t=e._keys=IB(e._scopes)),t}function IB(e){const t=new Set;for(const n of e)for(const i of Object.keys(n).filter(r=>!r.startsWith("_")))t.add(i);return Array.from(t)}const CB=Number.EPSILON||1e-14,ol=(e,t)=>t<e.length&&!e[t].skip&&e[t],hI=e=>e==="x"?"y":"x";function AB(e,t,n,i){const r=e.skip?t:e,s=t,o=n.skip?t:n,l=T_(s,r),c=T_(o,s);let h=l/(l+c),p=c/(l+c);h=isNaN(h)?0:h,p=isNaN(p)?0:p;const g=i*h,y=i*p;return{previous:{x:s.x-g*(o.x-r.x),y:s.y-g*(o.y-r.y)},next:{x:s.x+y*(o.x-r.x),y:s.y+y*(o.y-r.y)}}}function RB(e,t,n){const i=e.length;let r,s,o,l,c,h=ol(e,0);for(let p=0;p<i-1;++p)if(c=h,h=ol(e,p+1),!(!c||!h)){if($c(t[p],0,CB)){n[p]=n[p+1]=0;continue}r=n[p]/t[p],s=n[p+1]/t[p],l=Math.pow(r,2)+Math.pow(s,2),!(l<=9)&&(o=3/Math.sqrt(l),n[p]=r*o*t[p],n[p+1]=s*o*t[p])}}function NB(e,t,n="x"){const i=hI(n),r=e.length;let s,o,l,c=ol(e,0);for(let h=0;h<r;++h){if(o=l,l=c,c=ol(e,h+1),!l)continue;const p=l[n],g=l[i];o&&(s=(p-o[n])/3,l[`cp1${n}`]=p-s,l[`cp1${i}`]=g-s*t[h]),c&&(s=(c[n]-p)/3,l[`cp2${n}`]=p+s,l[`cp2${i}`]=g+s*t[h])}}function LB(e,t="x"){const n=hI(t),i=e.length,r=Array(i).fill(0),s=Array(i);let o,l,c,h=ol(e,0);for(o=0;o<i;++o)if(l=c,c=h,h=ol(e,o+1),!!c){if(h){const p=h[t]-c[t];r[o]=p!==0?(h[n]-c[n])/p:0}s[o]=l?h?rl(r[o-1])!==rl(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}RB(e,r,s),NB(e,s,t)}function pd(e,t,n){return Math.max(Math.min(e,n),t)}function MB(e,t){let n,i,r,s,o,l=Iu(e[0],t);for(n=0,i=e.length;n<i;++n)o=s,s=l,l=n<i-1&&Iu(e[n+1],t),s&&(r=e[n],o&&(r.cp1x=pd(r.cp1x,t.left,t.right),r.cp1y=pd(r.cp1y,t.top,t.bottom)),l&&(r.cp2x=pd(r.cp2x,t.left,t.right),r.cp2y=pd(r.cp2y,t.top,t.bottom)))}function DB(e,t,n,i,r){let s,o,l,c;if(t.spanGaps&&(e=e.filter(h=>!h.skip)),t.cubicInterpolationMode==="monotone")LB(e,r);else{let h=i?e[e.length-1]:e[0];for(s=0,o=e.length;s<o;++s)l=e[s],c=AB(h,l,e[Math.min(s+1,o-(i?0:1))%o],t.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,h=l}t.capBezierPoints&&MB(e,n)}function Gv(){return typeof window<"u"&&typeof document<"u"}function Kv(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function qf(e,t,n){let i;return typeof e=="string"?(i=parseInt(e,10),e.indexOf("%")!==-1&&(i=i/100*t.parentNode[n])):i=e,i}const Hp=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function OB(e,t){return Hp(e).getPropertyValue(t)}const jB=["top","right","bottom","left"];function uo(e,t,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=jB[r];i[s]=parseFloat(e[t+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const VB=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function FB(e,t){const n=e.touches,i=n&&n.length?n[0]:e,{offsetX:r,offsetY:s}=i;let o=!1,l,c;if(VB(r,s,e.target))l=r,c=s;else{const h=t.getBoundingClientRect();l=i.clientX-h.left,c=i.clientY-h.top,o=!0}return{x:l,y:c,box:o}}function Ys(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:i}=t,r=Hp(n),s=r.boxSizing==="border-box",o=uo(r,"padding"),l=uo(r,"border","width"),{x:c,y:h,box:p}=FB(e,n),g=o.left+(p&&l.left),y=o.top+(p&&l.top);let{width:x,height:T}=t;return s&&(x-=o.width+l.width,T-=o.height+l.height),{x:Math.round((c-g)/x*n.width/i),y:Math.round((h-y)/T*n.height/i)}}function zB(e,t,n){let i,r;if(t===void 0||n===void 0){const s=e&&Kv(e);if(!s)t=e.clientWidth,n=e.clientHeight;else{const o=s.getBoundingClientRect(),l=Hp(s),c=uo(l,"border","width"),h=uo(l,"padding");t=o.width-h.width-c.width,n=o.height-h.height-c.height,i=qf(l.maxWidth,s,"clientWidth"),r=qf(l.maxHeight,s,"clientHeight")}}return{width:t,height:n,maxWidth:i||$f,maxHeight:r||$f}}const md=e=>Math.round(e*10)/10;function BB(e,t,n,i){const r=Hp(e),s=uo(r,"margin"),o=qf(r.maxWidth,e,"clientWidth")||$f,l=qf(r.maxHeight,e,"clientHeight")||$f,c=zB(e,t,n);let{width:h,height:p}=c;if(r.boxSizing==="content-box"){const y=uo(r,"border","width"),x=uo(r,"padding");h-=x.width+y.width,p-=x.height+y.height}return h=Math.max(0,h-s.width),p=Math.max(0,i?h/i:p-s.height),h=md(Math.min(h,o,c.maxWidth)),p=md(Math.min(p,l,c.maxHeight)),h&&!p&&(p=md(h/2)),(t!==void 0||n!==void 0)&&i&&c.height&&p>c.height&&(p=c.height,h=md(Math.floor(p*i))),{width:h,height:p}}function R1(e,t,n){const i=t||1,r=Math.floor(e.height*i),s=Math.floor(e.width*i);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const o=e.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(e.currentDevicePixelRatio=i,o.height=r,o.width=s,e.ctx.setTransform(i,0,0,i,0,0),!0):!1}const UB=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};Gv()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function N1(e,t){const n=OB(e,t),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Xs(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function HB(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:i==="middle"?n<.5?e.y:t.y:i==="after"?n<1?e.y:t.y:n>0?t.y:e.y}}function WB(e,t,n,i){const r={x:e.cp2x,y:e.cp2y},s={x:t.cp1x,y:t.cp1y},o=Xs(e,r,n),l=Xs(r,s,n),c=Xs(s,t,n),h=Xs(o,l,n),p=Xs(l,c,n);return Xs(h,p,n)}const $B=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},qB=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function za(e,t,n){return e?$B(t,n):qB()}function dI(e,t){let n,i;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=i)}function fI(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function pI(e){return e==="angle"?{between:XP,compare:Wz,normalize:Ci}:{between:Ca,compare:(t,n)=>t-n,normalize:t=>t}}function L1({start:e,end:t,count:n,loop:i,style:r}){return{start:e%n,end:t%n,loop:i&&(t-e+1)%n===0,style:r}}function GB(e,t,n){const{property:i,start:r,end:s}=n,{between:o,normalize:l}=pI(i),c=t.length;let{start:h,end:p,loop:g}=e,y,x;if(g){for(h+=c,p+=c,y=0,x=c;y<x&&o(l(t[h%c][i]),r,s);++y)h--,p--;h%=c,p%=c}return p<h&&(p+=c),{start:h,end:p,loop:g,style:e.style}}function mI(e,t,n){if(!n)return[e];const{property:i,start:r,end:s}=n,o=t.length,{compare:l,between:c,normalize:h}=pI(i),{start:p,end:g,loop:y,style:x}=GB(e,t,n),T=[];let S=!1,k=null,P,I,R;const V=()=>c(r,R,P)&&l(r,R)!==0,B=()=>l(s,P)===0||c(s,R,P),H=()=>S||V(),N=()=>!S||B();for(let b=p,A=p;b<=g;++b)I=t[b%o],!I.skip&&(P=h(I[i]),P!==R&&(S=c(P,r,s),k===null&&H()&&(k=l(P,r)===0?b:A),k!==null&&N()&&(T.push(L1({start:k,end:b,loop:y,count:o,style:x})),k=null),A=b,R=P));return k!==null&&T.push(L1({start:k,end:g,loop:y,count:o,style:x})),T}function gI(e,t){const n=[],i=e.segments;for(let r=0;r<i.length;r++){const s=mI(i[r],e.points,t);s.length&&n.push(...s)}return n}function KB(e,t,n,i){let r=0,s=t-1;if(n&&!i)for(;r<t&&!e[r].skip;)r++;for(;r<t&&e[r].skip;)r++;for(r%=t,n&&(s+=r);s>r&&e[s%t].skip;)s--;return s%=t,{start:r,end:s}}function ZB(e,t,n,i){const r=e.length,s=[];let o=t,l=e[t],c;for(c=t+1;c<=n;++c){const h=e[c%r];h.skip||h.stop?l.skip||(i=!1,s.push({start:t%r,end:(c-1)%r,loop:i}),t=o=h.stop?c:null):(o=c,l.skip&&(t=c)),l=h}return o!==null&&s.push({start:t%r,end:o%r,loop:i}),s}function QB(e,t){const n=e.points,i=e.options.spanGaps,r=n.length;if(!r)return[];const s=!!e._loop,{start:o,end:l}=KB(n,r,s,i);if(i===!0)return M1(e,[{start:o,end:l,loop:s}],n,t);const c=l<o?l+r:l,h=!!e._fullLoop&&o===0&&l===r-1;return M1(e,ZB(n,o,c,h),n,t)}function M1(e,t,n,i){return!i||!i.setContext||!n?t:YB(e,t,n,i)}function YB(e,t,n,i){const r=e._chart.getContext(),s=D1(e.options),{_datasetIndex:o,options:{spanGaps:l}}=e,c=n.length,h=[];let p=s,g=t[0].start,y=g;function x(T,S,k,P){const I=l?-1:1;if(T!==S){for(T+=c;n[T%c].skip;)T-=I;for(;n[S%c].skip;)S+=I;T%c!==S%c&&(h.push({start:T%c,end:S%c,loop:k,style:P}),p=P,g=S%c)}}for(const T of t){g=l?g:T.start;let S=n[g%c],k;for(y=g+1;y<=T.end;y++){const P=n[y%c];k=D1(i.setContext(Lo(r,{type:"segment",p0:S,p1:P,p0DataIndex:(y-1)%c,p1DataIndex:y%c,datasetIndex:o}))),XB(k,p)&&x(g,y-1,T.loop,p),S=P,p=k}g<y-1&&x(g,y-1,T.loop,p)}return h}function D1(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function XB(e,t){if(!t)return!1;const n=[],i=function(r,s){return Hv(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(e,i)!==JSON.stringify(t,i)}function gd(e,t,n){return e.options.clip?e[n]:t[n]}function JB(e,t){const{xScale:n,yScale:i}=e;return n&&i?{left:gd(n,t,"left"),right:gd(n,t,"right"),top:gd(i,t,"top"),bottom:gd(i,t,"bottom")}:t}function _I(e,t){const n=t._clip;if(n.disabled)return!1;const i=JB(t,e.chartArea);return{left:n.left===!1?0:i.left-(n.left===!0?0:n.left),right:n.right===!1?e.width:i.right+(n.right===!0?0:n.right),top:n.top===!1?0:i.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?e.height:i.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class t3{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,i,r){const s=n.listeners[r],o=n.duration;s.forEach(l=>l({chart:t,initial:n.initial,numSteps:o,currentStep:Math.min(i-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=tI.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let o=s.length-1,l=!1,c;for(;o>=0;--o)c=s[o],c._active?(c._total>i.duration&&(i.duration=c._total),c.tick(t),l=!0):(s[o]=s[s.length-1],s.pop());l&&(r.draw(),this._notify(r,i,t,"progress")),s.length||(i.running=!1,this._notify(r,i,t,"complete"),i.initial=!1),n+=s.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let i=n.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,i)),i}listen(t,n,i){this._getAnims(t).listeners[n].push(i)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const i=n.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Ji=new t3;const O1="transparent",e3={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const i=S1(e||O1),r=i.valid&&S1(t||O1);return r&&r.valid?r.mix(i,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class n3{constructor(t,n,i,r){const s=n[i];r=fd([t.to,r,s,t.from]);const o=fd([t.from,s,r]);this._active=!0,this._fn=t.fn||e3[t.type||typeof o],this._easing=qc[t.easing]||qc.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(t,n,i){if(this._active){this._notify(!1);const r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=s,this._loop=!!t.loop,this._to=fd([t.to,n,r,t.from]),this._from=fd([t.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,l=this._to;let c;if(this._active=s!==l&&(o||n<i),!this._active){this._target[r]=l,this._notify(!0);return}if(n<0){this._target[r]=s;return}c=n/i%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[r]=this._fn(s,l,c)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,i)=>{t.push({res:n,rej:i})})}_notify(t){const n=t?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][n]()}}class yI{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!Ot(t))return;const n=Object.keys(_e.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const s=t[r];if(!Ot(s))return;const o={};for(const l of n)o[l]=s[l];(Ie(s.properties)&&s.properties||[r]).forEach(l=>{(l===r||!i.has(l))&&i.set(l,o)})})}_animateOptions(t,n){const i=n.options,r=r3(t,i);if(!r)return[];const s=this._createAnimations(r,i);return i.$shared&&i3(t.options.$animations,i).then(()=>{t.options=i},()=>{}),s}_createAnimations(t,n){const i=this._properties,r=[],s=t.$animations||(t.$animations={}),o=Object.keys(n),l=Date.now();let c;for(c=o.length-1;c>=0;--c){const h=o[c];if(h.charAt(0)==="$")continue;if(h==="options"){r.push(...this._animateOptions(t,n));continue}const p=n[h];let g=s[h];const y=i.get(h);if(g)if(y&&g.active()){g.update(y,p,l);continue}else g.cancel();if(!y||!y.duration){t[h]=p;continue}s[h]=g=new n3(y,t,h,p),r.push(g)}return r}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const i=this._createAnimations(t,n);if(i.length)return Ji.add(this._chart,i),!0}}function i3(e,t){const n=[],i=Object.keys(t);for(let r=0;r<i.length;r++){const s=e[i[r]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function r3(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function j1(e,t){const n=e&&e.options||{},i=n.reverse,r=n.min===void 0?t:0,s=n.max===void 0?t:0;return{start:i?s:r,end:i?r:s}}function s3(e,t,n){if(n===!1)return!1;const i=j1(e,n),r=j1(t,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function o3(e){let t,n,i,r;return Ot(e)?(t=e.top,n=e.right,i=e.bottom,r=e.left):t=n=i=r=e,{top:t,right:n,bottom:i,left:r,disabled:e===!1}}function vI(e,t){const n=[],i=e._getSortedDatasetMetas(t);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function V1(e,t,n,i={}){const r=e.keys,s=i.mode==="single";let o,l,c,h;if(t===null)return;let p=!1;for(o=0,l=r.length;o<l;++o){if(c=+r[o],c===n){if(p=!0,i.all)continue;break}h=e.values[c],en(h)&&(s||t===0||rl(t)===rl(h))&&(t+=h)}return!p&&!i.all?0:t}function a3(e,t){const{iScale:n,vScale:i}=t,r=n.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",o=Object.keys(e),l=new Array(o.length);let c,h,p;for(c=0,h=o.length;c<h;++c)p=o[c],l[c]={[r]:p,[s]:e[p]};return l}function qm(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function l3(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function c3(e){const{min:t,max:n,minDefined:i,maxDefined:r}=e.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function u3(e,t,n){const i=e[t]||(e[t]={});return i[n]||(i[n]={})}function F1(e,t,n,i){for(const r of t.getMatchingVisibleMetas(i).reverse()){const s=e[r.index];if(n&&s>0||!n&&s<0)return r.index}return null}function z1(e,t){const{chart:n,_cachedMeta:i}=e,r=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:l}=i,c=s.axis,h=o.axis,p=l3(s,o,i),g=t.length;let y;for(let x=0;x<g;++x){const T=t[x],{[c]:S,[h]:k}=T,P=T._stacks||(T._stacks={});y=P[h]=u3(r,p,S),y[l]=k,y._top=F1(y,o,!0,i.type),y._bottom=F1(y,o,!1,i.type);const I=y._visualValues||(y._visualValues={});I[l]=k}}function Gm(e,t){const n=e.scales;return Object.keys(n).filter(i=>n[i].axis===t).shift()}function h3(e,t){return Lo(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function d3(e,t,n){return Lo(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function cc(e,t){const n=e.controller.index,i=e.vScale&&e.vScale.axis;if(i){t=t||e._parsed;for(const r of t){const s=r._stacks;if(!s||s[i]===void 0||s[i][n]===void 0)return;delete s[i][n],s[i]._visualValues!==void 0&&s[i]._visualValues[n]!==void 0&&delete s[i]._visualValues[n]}}}const Km=e=>e==="reset"||e==="none",B1=(e,t)=>t?e:Object.assign({},e),f3=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:vI(n,!0),values:null};class Zc{constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=qm(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&cc(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,i=this.getDataset(),r=(g,y,x,T)=>g==="x"?y:g==="r"?T:x,s=n.xAxisID=Lt(i.xAxisID,Gm(t,"x")),o=n.yAxisID=Lt(i.yAxisID,Gm(t,"y")),l=n.rAxisID=Lt(i.rAxisID,Gm(t,"r")),c=n.indexAxis,h=n.iAxisID=r(c,s,o,l),p=n.vAxisID=r(c,o,s,l);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(l),n.iScale=this.getScaleForId(h),n.vScale=this.getScaleForId(p)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&b1(this._data,this),t._stacked&&cc(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),i=this._data;if(Ot(n)){const r=this._cachedMeta;this._data=a3(n,r)}else if(i!==n){if(i){b1(i,this);const r=this._cachedMeta;cc(r),r._parsed=[]}n&&Object.isExtensible(n)&&Kz(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const s=n._stacked;n._stacked=qm(n.vScale,n),n.stack!==i.stack&&(r=!0,cc(n),n.stack=i.stack),this._resyncElements(t),(r||s!==n._stacked)&&(z1(this,n._parsed),n._stacked=qm(n.vScale,n))}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:i,_data:r}=this,{iScale:s,_stacked:o}=i,l=s.axis;let c=t===0&&n===r.length?!0:i._sorted,h=t>0&&i._parsed[t-1],p,g,y;if(this._parsing===!1)i._parsed=r,i._sorted=!0,y=r;else{Ie(r[t])?y=this.parseArrayData(i,r,t,n):Ot(r[t])?y=this.parseObjectData(i,r,t,n):y=this.parsePrimitiveData(i,r,t,n);const x=()=>g[l]===null||h&&g[l]<h[l];for(p=0;p<n;++p)i._parsed[p+t]=g=y[p],c&&(x()&&(c=!1),h=g);i._sorted=c}o&&z1(this,y)}parsePrimitiveData(t,n,i,r){const{iScale:s,vScale:o}=t,l=s.axis,c=o.axis,h=s.getLabels(),p=s===o,g=new Array(r);let y,x,T;for(y=0,x=r;y<x;++y)T=y+i,g[y]={[l]:p||s.parse(h[T],T),[c]:o.parse(n[T],T)};return g}parseArrayData(t,n,i,r){const{xScale:s,yScale:o}=t,l=new Array(r);let c,h,p,g;for(c=0,h=r;c<h;++c)p=c+i,g=n[p],l[c]={x:s.parse(g[0],p),y:o.parse(g[1],p)};return l}parseObjectData(t,n,i,r){const{xScale:s,yScale:o}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,h=new Array(r);let p,g,y,x;for(p=0,g=r;p<g;++p)y=p+i,x=n[y],h[p]={x:s.parse(Hf(x,l),y),y:o.parse(Hf(x,c),y)};return h}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,i){const r=this.chart,s=this._cachedMeta,o=n[t.axis],l={keys:vI(r,!0),values:n._stacks[t.axis]._visualValues};return V1(l,o,s.index,{mode:i})}updateRangeFromParsed(t,n,i,r){const s=i[n.axis];let o=s===null?NaN:s;const l=r&&i._stacks[n.axis];r&&l&&(r.values=l,o=V1(r,s,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,n){const i=this._cachedMeta,r=i._parsed,s=i._sorted&&t===i.iScale,o=r.length,l=this._getOtherScale(t),c=f3(n,i,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:p,max:g}=c3(l);let y,x;function T(){x=r[y];const S=x[l.axis];return!en(x[t.axis])||p>S||g<S}for(y=0;y<o&&!(!T()&&(this.updateRangeFromParsed(h,t,x,c),s));++y);if(s){for(y=o-1;y>=0;--y)if(!T()){this.updateRangeFromParsed(h,t,x,c);break}}return h}getAllParsedValues(t){const n=this._cachedMeta._parsed,i=[];let r,s,o;for(r=0,s=n.length;r<s;++r)o=n[r][t.axis],en(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,i=n.iScale,r=n.vScale,s=this.getParsed(t);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=o3(Lt(this.options.clip,s3(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,i=this._cachedMeta,r=i.data||[],s=n.chartArea,o=[],l=this._drawStart||0,c=this._drawCount||r.length-l,h=this.options.drawActiveElementsOnTop;let p;for(i.dataset&&i.dataset.draw(t,s,l,c),p=l;p<l+c;++p){const g=r[p];g.hidden||(g.active&&h?o.push(g):g.draw(t,s))}for(p=0;p<o.length;++p)o[p].draw(t,s)}getStyle(t,n){const i=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,n,i){const r=this.getDataset();let s;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];s=o.$context||(o.$context=d3(this.getContext(),t,o)),s.parsed=this.getParsed(t),s.raw=r.data[t],s.index=s.dataIndex=t}else s=this.$context||(this.$context=h3(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=i,s}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",i){const r=n==="active",s=this._cachedDataOpts,o=t+"-"+n,l=s[o],c=this.enableOptionSharing&&Wf(i);if(l)return B1(l,c);const h=this.chart.config,p=h.datasetElementScopeKeys(this._type,t),g=r?[`${t}Hover`,"hover",t,""]:[t,""],y=h.getOptionScopes(this.getDataset(),p),x=Object.keys(_e.elements[t]),T=()=>this.getContext(i,r,n),S=h.resolveNamedOptions(y,x,T,g);return S.$shared&&(S.$shared=c,s[o]=Object.freeze(B1(S,c))),S}_resolveAnimations(t,n,i){const r=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,l=s[o];if(l)return l;let c;if(r.options.animation!==!1){const p=this.chart.config,g=p.datasetAnimationScopeKeys(this._type,n),y=p.getOptionScopes(this.getDataset(),g);c=p.createResolver(y,this.getContext(t,i,n))}const h=new yI(r,c&&c.animations);return c&&c._cacheable&&(s[o]=Object.freeze(h)),h}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||Km(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const i=this.resolveDataElementOptions(t,n),r=this._sharedOptions,s=this.getSharedOptions(i),o=this.includeOptions(n,s)||s!==r;return this.updateSharedOptions(s,n,i),{sharedOptions:s,includeOptions:o}}updateElement(t,n,i,r){Km(r)?Object.assign(t,i):this._resolveAnimations(n,r).update(t,i)}updateSharedOptions(t,n,i){t&&!Km(n)&&this._resolveAnimations(void 0,n).update(t,i)}_setStyle(t,n,i,r){t.active=r;const s=this.getStyle(n,r);this._resolveAnimations(n,i,r).update(t,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(t,n,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,n,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,i=this._cachedMeta.data;for(const[l,c,h]of this._syncList)this[l](c,h);this._syncList=[];const r=i.length,s=n.length,o=Math.min(s,r);o&&this.parse(0,o),s>r?this._insertElements(r,s-r,t):s<r&&this._removeElements(s,r-s)}_insertElements(t,n,i=!0){const r=this._cachedMeta,s=r.data,o=t+n;let l;const c=h=>{for(h.length+=n,l=h.length-1;l>=o;l--)h[l]=h[l-n]};for(c(s),l=t;l<o;++l)s[l]=new this.dataElementType;this._parsing&&c(r._parsed),this.parse(t,n),i&&this.updateElements(s,t,n,"reset")}updateElements(t,n,i,r){}_removeElements(t,n){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(t,n);i._stacked&&cc(i,r)}i.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,i,r]=t;this[n](i,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Tt(Zc,"defaults",{}),Tt(Zc,"datasetElementType",null),Tt(Zc,"dataElementType",null);class $d extends Zc{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const n=this._cachedMeta,{dataset:i,data:r=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:l,count:c}=Xz(n,r,o);this._drawStart=l,this._drawCount=c,Jz(n)&&(l=0,c=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=r;const h=this.resolveDatasetElementOptions(t);this.options.showLine||(h.borderWidth=0),h.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:h},t),this.updateElements(r,l,c,t)}updateElements(t,n,i,r){const s=r==="reset",{iScale:o,vScale:l,_stacked:c,_dataset:h}=this._cachedMeta,{sharedOptions:p,includeOptions:g}=this._getSharedOptions(n,r),y=o.axis,x=l.axis,{spanGaps:T,segment:S}=this.options,k=Pu(T)?T:Number.POSITIVE_INFINITY,P=this.chart._animationsDisabled||s||r==="none",I=n+i,R=t.length;let V=n>0&&this.getParsed(n-1);for(let B=0;B<R;++B){const H=t[B],N=P?H:{};if(B<n||B>=I){N.skip=!0;continue}const b=this.getParsed(B),A=Kt(b[x]),D=N[y]=o.getPixelForValue(b[y],B),O=N[x]=s||A?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,b,c):b[x],B);N.skip=isNaN(D)||isNaN(O)||A,N.stop=B>0&&Math.abs(b[y]-V[y])>k,S&&(N.parsed=b,N.raw=h.data[B]),g&&(N.options=p||this.resolveDataElementOptions(B,H.active?"active":r)),P||this.updateElement(H,B,N,r),V=b}}getMaxOverflow(){const t=this._cachedMeta,n=t.dataset,i=n.options&&n.options.borderWidth||0,r=t.data||[];if(!r.length)return i;const s=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,s,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}Tt($d,"id","line"),Tt($d,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Tt($d,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function qs(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Zv{constructor(t){Tt(this,"options");this.options=t||{}}static override(t){Object.assign(Zv.prototype,t)}init(){}formats(){return qs()}parse(){return qs()}format(){return qs()}add(){return qs()}diff(){return qs()}startOf(){return qs()}endOf(){return qs()}}var p3={_date:Zv};function m3(e,t,n,i){const{controller:r,data:s,_sorted:o}=e,l=r._cachedMeta.iScale,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(l&&t===l.axis&&t!=="r"&&o&&s.length){const h=l._reversePixels?qz:so;if(i){if(r._sharedOptions){const p=s[0],g=typeof p.getRange=="function"&&p.getRange(t);if(g){const y=h(s,t,n-g),x=h(s,t,n+g);return{lo:y.lo,hi:x.hi}}}}else{const p=h(s,t,n);if(c){const{vScale:g}=r._cachedMeta,{_parsed:y}=e,x=y.slice(0,p.lo+1).reverse().findIndex(S=>!Kt(S[g.axis]));p.lo-=Math.max(0,x);const T=y.slice(p.hi).findIndex(S=>!Kt(S[g.axis]));p.hi+=Math.max(0,T)}return p}}return{lo:0,hi:s.length-1}}function th(e,t,n,i,r){const s=e.getSortedVisibleDatasetMetas(),o=n[t];for(let l=0,c=s.length;l<c;++l){const{index:h,data:p}=s[l],{lo:g,hi:y}=m3(s[l],t,o,r);for(let x=g;x<=y;++x){const T=p[x];T.skip||i(T,h,x)}}}function g3(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(i,r){const s=t?Math.abs(i.x-r.x):0,o=n?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function Zm(e,t,n,i,r){const s=[];return!r&&!e.isPointInArea(t)||th(e,n,t,function(l,c,h){!r&&!Iu(l,e.chartArea,0)||l.inRange(t.x,t.y,i)&&s.push({element:l,datasetIndex:c,index:h})},!0),s}function _3(e,t,n,i){let r=[];function s(o,l,c){const{startAngle:h,endAngle:p}=o.getProps(["startAngle","endAngle"],i),{angle:g}=Hz(o,{x:t.x,y:t.y});XP(g,h,p)&&r.push({element:o,datasetIndex:l,index:c})}return th(e,n,t,s),r}function y3(e,t,n,i,r,s){let o=[];const l=g3(n);let c=Number.POSITIVE_INFINITY;function h(p,g,y){const x=p.inRange(t.x,t.y,r);if(i&&!x)return;const T=p.getCenterPoint(r);if(!(!!s||e.isPointInArea(T))&&!x)return;const k=l(t,T);k<c?(o=[{element:p,datasetIndex:g,index:y}],c=k):k===c&&o.push({element:p,datasetIndex:g,index:y})}return th(e,n,t,h),o}function Qm(e,t,n,i,r,s){return!s&&!e.isPointInArea(t)?[]:n==="r"&&!i?_3(e,t,n,r):y3(e,t,n,i,r,s)}function U1(e,t,n,i,r){const s=[],o=n==="x"?"inXRange":"inYRange";let l=!1;return th(e,n,t,(c,h,p)=>{c[o]&&c[o](t[n],r)&&(s.push({element:c,datasetIndex:h,index:p}),l=l||c.inRange(t.x,t.y,r))}),i&&!l?[]:s}var v3={evaluateInteractionItems:th,modes:{index(e,t,n,i){const r=Ys(t,e),s=n.axis||"x",o=n.includeInvisible||!1,l=n.intersect?Zm(e,r,s,i,o):Qm(e,r,s,!1,i,o),c=[];return l.length?(e.getSortedVisibleDatasetMetas().forEach(h=>{const p=l[0].index,g=h.data[p];g&&!g.skip&&c.push({element:g,datasetIndex:h.index,index:p})}),c):[]},dataset(e,t,n,i){const r=Ys(t,e),s=n.axis||"xy",o=n.includeInvisible||!1;let l=n.intersect?Zm(e,r,s,i,o):Qm(e,r,s,!1,i,o);if(l.length>0){const c=l[0].datasetIndex,h=e.getDatasetMeta(c).data;l=[];for(let p=0;p<h.length;++p)l.push({element:h[p],datasetIndex:c,index:p})}return l},point(e,t,n,i){const r=Ys(t,e),s=n.axis||"xy",o=n.includeInvisible||!1;return Zm(e,r,s,i,o)},nearest(e,t,n,i){const r=Ys(t,e),s=n.axis||"xy",o=n.includeInvisible||!1;return Qm(e,r,s,n.intersect,i,o)},x(e,t,n,i){const r=Ys(t,e);return U1(e,r,"x",n.intersect,i)},y(e,t,n,i){const r=Ys(t,e);return U1(e,r,"y",n.intersect,i)}}};const xI=["left","top","right","bottom"];function uc(e,t){return e.filter(n=>n.pos===t)}function H1(e,t){return e.filter(n=>xI.indexOf(n.pos)===-1&&n.box.axis===t)}function hc(e,t){return e.sort((n,i)=>{const r=t?i:n,s=t?n:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function x3(e){const t=[];let n,i,r,s,o,l;for(n=0,i=(e||[]).length;n<i;++n)r=e[n],{position:s,options:{stack:o,stackWeight:l=1}}=r,t.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:l});return t}function w3(e){const t={};for(const n of e){const{stack:i,pos:r,stackWeight:s}=n;if(!i||!xI.includes(r))continue;const o=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return t}function b3(e,t){const n=w3(e),{vBoxMaxWidth:i,hBoxMaxHeight:r}=t;let s,o,l;for(s=0,o=e.length;s<o;++s){l=e[s];const{fullSize:c}=l.box,h=n[l.stack],p=h&&l.stackWeight/h.weight;l.horizontal?(l.width=p?p*i:c&&t.availableWidth,l.height=r):(l.width=i,l.height=p?p*r:c&&t.availableHeight)}return n}function T3(e){const t=x3(e),n=hc(t.filter(h=>h.box.fullSize),!0),i=hc(uc(t,"left"),!0),r=hc(uc(t,"right")),s=hc(uc(t,"top"),!0),o=hc(uc(t,"bottom")),l=H1(t,"x"),c=H1(t,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(c).concat(o).concat(l),chartArea:uc(t,"chartArea"),vertical:i.concat(r).concat(c),horizontal:s.concat(o).concat(l)}}function W1(e,t,n,i){return Math.max(e[n],t[n])+Math.max(e[i],t[i])}function wI(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function E3(e,t,n,i){const{pos:r,box:s}=n,o=e.maxPadding;if(!Ot(r)){n.size&&(e[r]-=n.size);const g=i[n.stack]||{size:0,count:1};g.size=Math.max(g.size,n.horizontal?s.height:s.width),n.size=g.size/g.count,e[r]+=n.size}s.getPadding&&wI(o,s.getPadding());const l=Math.max(0,t.outerWidth-W1(o,e,"left","right")),c=Math.max(0,t.outerHeight-W1(o,e,"top","bottom")),h=l!==e.w,p=c!==e.h;return e.w=l,e.h=c,n.horizontal?{same:h,other:p}:{same:p,other:h}}function S3(e){const t=e.maxPadding;function n(i){const r=Math.max(t[i]-e[i],0);return e[i]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function k3(e,t){const n=t.maxPadding;function i(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(t[o],n[o])}),s}return i(e?["left","right"]:["top","bottom"])}function kc(e,t,n,i){const r=[];let s,o,l,c,h,p;for(s=0,o=e.length,h=0;s<o;++s){l=e[s],c=l.box,c.update(l.width||t.w,l.height||t.h,k3(l.horizontal,t));const{same:g,other:y}=E3(t,n,l,i);h|=g&&r.length,p=p||y,c.fullSize||r.push(l)}return h&&kc(r,t,n,i)||p}function _d(e,t,n,i,r){e.top=n,e.left=t,e.right=t+i,e.bottom=n+r,e.width=i,e.height=r}function $1(e,t,n,i){const r=n.padding;let{x:s,y:o}=t;for(const l of e){const c=l.box,h=i[l.stack]||{count:1,placed:0,weight:1},p=l.stackWeight/h.weight||1;if(l.horizontal){const g=t.w*p,y=h.size||c.height;Wf(h.start)&&(o=h.start),c.fullSize?_d(c,r.left,o,n.outerWidth-r.right-r.left,y):_d(c,t.left+h.placed,o,g,y),h.start=o,h.placed+=g,o=c.bottom}else{const g=t.h*p,y=h.size||c.width;Wf(h.start)&&(s=h.start),c.fullSize?_d(c,s,r.top,y,n.outerHeight-r.bottom-r.top):_d(c,s,t.top+h.placed,y,g),h.start=s,h.placed+=g,s=c.right}}t.x=s,t.y=o}var Gn={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,i){if(!e)return;const r=Jn(e.options.layout.padding),s=Math.max(t-r.width,0),o=Math.max(n-r.height,0),l=T3(e.boxes),c=l.vertical,h=l.horizontal;Bt(e.boxes,S=>{typeof S.beforeLayout=="function"&&S.beforeLayout()});const p=c.reduce((S,k)=>k.box.options&&k.box.options.display===!1?S:S+1,0)||1,g=Object.freeze({outerWidth:t,outerHeight:n,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/p,hBoxMaxHeight:o/2}),y=Object.assign({},r);wI(y,Jn(i));const x=Object.assign({maxPadding:y,w:s,h:o,x:r.left,y:r.top},r),T=b3(c.concat(h),g);kc(l.fullSize,x,g,T),kc(c,x,g,T),kc(h,x,g,T)&&kc(c,x,g,T),S3(x),$1(l.leftAndTop,x,g,T),x.x+=x.w,x.y+=x.h,$1(l.rightAndBottom,x,g,T),e.chartArea={left:x.left,top:x.top,right:x.left+x.w,bottom:x.top+x.h,height:x.h,width:x.w},Bt(l.chartArea,S=>{const k=S.box;Object.assign(k,e.chartArea),k.update(x.w,x.h,{left:0,top:0,right:0,bottom:0})})}};class bI{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,i){}removeEventListener(t,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,i,r){return n=Math.max(0,n||t.width),i=i||t.height,{width:n,height:Math.max(0,r?Math.floor(n/r):i)}}isAttached(t){return!0}updateConfig(t){}}class P3 extends bI{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const qd="$chartjs",I3={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},q1=e=>e===null||e==="";function C3(e,t){const n=e.style,i=e.getAttribute("height"),r=e.getAttribute("width");if(e[qd]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",q1(r)){const s=N1(e,"width");s!==void 0&&(e.width=s)}if(q1(i))if(e.style.height==="")e.height=e.width/(t||2);else{const s=N1(e,"height");s!==void 0&&(e.height=s)}return e}const TI=UB?{passive:!0}:!1;function A3(e,t,n){e&&e.addEventListener(t,n,TI)}function R3(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,TI)}function N3(e,t){const n=I3[e.type]||e.type,{x:i,y:r}=Ys(e,t);return{type:n,chart:t,native:e,x:i!==void 0?i:null,y:r!==void 0?r:null}}function Gf(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function L3(e,t,n){const i=e.canvas,r=new MutationObserver(s=>{let o=!1;for(const l of s)o=o||Gf(l.addedNodes,i),o=o&&!Gf(l.removedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function M3(e,t,n){const i=e.canvas,r=new MutationObserver(s=>{let o=!1;for(const l of s)o=o||Gf(l.removedNodes,i),o=o&&!Gf(l.addedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const Au=new Map;let G1=0;function EI(){const e=window.devicePixelRatio;e!==G1&&(G1=e,Au.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function D3(e,t){Au.size||window.addEventListener("resize",EI),Au.set(e,t)}function O3(e){Au.delete(e),Au.size||window.removeEventListener("resize",EI)}function j3(e,t,n){const i=e.canvas,r=i&&Kv(i);if(!r)return;const s=eI((l,c)=>{const h=r.clientWidth;n(l,c),h<r.clientWidth&&n()},window),o=new ResizeObserver(l=>{const c=l[0],h=c.contentRect.width,p=c.contentRect.height;h===0&&p===0||s(h,p)});return o.observe(r),D3(e,s),o}function Ym(e,t,n){n&&n.disconnect(),t==="resize"&&O3(e)}function V3(e,t,n){const i=e.canvas,r=eI(s=>{e.ctx!==null&&n(N3(s,e))},e);return A3(i,t,r),r}class F3 extends bI{acquireContext(t,n){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(C3(t,n),i):null}releaseContext(t){const n=t.canvas;if(!n[qd])return!1;const i=n[qd].initial;["height","width"].forEach(s=>{const o=i[s];Kt(o)?n.removeAttribute(s):n.setAttribute(s,o)});const r=i.style||{};return Object.keys(r).forEach(s=>{n.style[s]=r[s]}),n.width=n.width,delete n[qd],!0}addEventListener(t,n,i){this.removeEventListener(t,n);const r=t.$proxies||(t.$proxies={}),o={attach:L3,detach:M3,resize:j3}[n]||V3;r[n]=o(t,n,i)}removeEventListener(t,n){const i=t.$proxies||(t.$proxies={}),r=i[n];if(!r)return;({attach:Ym,detach:Ym,resize:Ym}[n]||R3)(t,n,r),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,i,r){return BB(t,n,i,r)}isAttached(t){const n=t&&Kv(t);return!!(n&&n.isConnected)}}function z3(e){return!Gv()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?P3:F3}var Td;let Mo=(Td=class{constructor(){Tt(this,"x");Tt(this,"y");Tt(this,"active",!1);Tt(this,"options");Tt(this,"$animations")}tooltipPosition(t){const{x:n,y:i}=this.getProps(["x","y"],t);return{x:n,y:i}}hasValue(){return Pu(this.x)&&Pu(this.y)}getProps(t,n){const i=this.$animations;if(!n||!i)return this;const r={};return t.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}},Tt(Td,"defaults",{}),Tt(Td,"defaultRoutes"),Td);function B3(e,t){const n=e.options.ticks,i=U3(e),r=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?W3(t):[],o=s.length,l=s[0],c=s[o-1],h=[];if(o>r)return $3(t,h,s,o/r),h;const p=H3(s,t,r);if(o>0){let g,y;const x=o>1?Math.round((c-l)/(o-1)):null;for(yd(t,h,p,Kt(x)?0:l-x,l),g=0,y=o-1;g<y;g++)yd(t,h,p,s[g],s[g+1]);return yd(t,h,p,c,Kt(x)?t.length:c+x),h}return yd(t,h,p),h}function U3(e){const t=e.options.offset,n=e._tickSize(),i=e._length/n+(t?0:1),r=e._maxLength/n;return Math.floor(Math.min(i,r))}function H3(e,t,n){const i=q3(e),r=t.length/n;if(!i)return Math.max(r,1);const s=Vz(i);for(let o=0,l=s.length-1;o<l;o++){const c=s[o];if(c>r)return c}return Math.max(r,1)}function W3(e){const t=[];let n,i;for(n=0,i=e.length;n<i;n++)e[n].major&&t.push(n);return t}function $3(e,t,n,i){let r=0,s=n[0],o;for(i=Math.ceil(i),o=0;o<e.length;o++)o===s&&(t.push(e[o]),r++,s=n[r*i])}function yd(e,t,n,i,r){const s=Lt(i,0),o=Math.min(Lt(r,e.length),e.length);let l=0,c,h,p;for(n=Math.ceil(n),r&&(c=r-i,n=c/Math.floor(c/n)),p=s;p<0;)l++,p=Math.round(s+l*n);for(h=Math.max(s,0);h<o;h++)h===p&&(t.push(e[h]),l++,p=Math.round(s+l*n))}function q3(e){const t=e.length;let n,i;if(t<2)return!1;for(i=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==i)return!1;return i}const G3=e=>e==="left"?"right":e==="right"?"left":e,K1=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,Z1=(e,t)=>Math.min(t||e,e);function Q1(e,t){const n=[],i=e.length/t,r=e.length;let s=0;for(;s<r;s+=i)n.push(e[Math.floor(s)]);return n}function K3(e,t,n){const i=e.ticks.length,r=Math.min(t,i-1),s=e._startPixel,o=e._endPixel,l=1e-6;let c=e.getPixelForTick(r),h;if(!(n&&(i===1?h=Math.max(c-s,o-c):t===0?h=(e.getPixelForTick(1)-c)/2:h=(c-e.getPixelForTick(r-1))/2,c+=r<t?h:-h,c<s-l||c>o+l)))return c}function Z3(e,t){Bt(e,n=>{const i=n.gc,r=i.length/2;let s;if(r>t){for(s=0;s<r;++s)delete n.data[i[s]];i.splice(0,r)}})}function dc(e){return e.drawTicks?e.tickLength:0}function Y1(e,t){if(!e.display)return 0;const n=Xe(e.font,t),i=Jn(e.padding);return(Ie(e.text)?e.text.length:1)*n.lineHeight+i.height}function Q3(e,t){return Lo(e,{scale:t,type:"scale"})}function Y3(e,t,n){return Lo(e,{tick:n,index:t,type:"tick"})}function X3(e,t,n){let i=Uv(e);return(n&&t!=="right"||!n&&t==="right")&&(i=G3(i)),i}function J3(e,t,n,i){const{top:r,left:s,bottom:o,right:l,chart:c}=e,{chartArea:h,scales:p}=c;let g=0,y,x,T;const S=o-r,k=l-s;if(e.isHorizontal()){if(x=Ke(i,s,l),Ot(n)){const P=Object.keys(n)[0],I=n[P];T=p[P].getPixelForValue(I)+S-t}else n==="center"?T=(h.bottom+h.top)/2+S-t:T=K1(e,n,t);y=l-s}else{if(Ot(n)){const P=Object.keys(n)[0],I=n[P];x=p[P].getPixelForValue(I)-k+t}else n==="center"?x=(h.left+h.right)/2-k+t:x=K1(e,n,t);T=Ke(i,o,r),g=n==="left"?-hi:hi}return{titleX:x,titleY:T,maxWidth:y,rotation:g}}class gl extends Mo{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:i,_suggestedMax:r}=this;return t=Si(t,Number.POSITIVE_INFINITY),n=Si(n,Number.NEGATIVE_INFINITY),i=Si(i,Number.POSITIVE_INFINITY),r=Si(r,Number.NEGATIVE_INFINITY),{min:Si(t,i),max:Si(n,r),minDefined:en(t),maxDefined:en(n)}}getMinMax(t){let{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:n,max:i};const l=this.getMatchingVisibleMetas();for(let c=0,h=l.length;c<h;++c)o=l[c].controller.getMinMax(this,t),r||(n=Math.min(n,o.min)),s||(i=Math.max(i,o.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:Si(n,Si(i,n)),max:Si(i,Si(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Qt(this.options.beforeUpdate,[this])}update(t,n,i){const{beginAtZero:r,grace:s,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=vB(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?Q1(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=B3(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,t=!t),this._startPixel=n,this._endPixel=i,this._reversePixels=t,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Qt(this.options.afterUpdate,[this])}beforeSetDimensions(){Qt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Qt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Qt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Qt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i],s.label=Qt(n.callback,[s.value,i,t],this)}afterTickToLabelConversion(){Qt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Qt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,i=Z1(this.ticks.length,t.ticks.maxTicksLimit),r=n.minRotation||0,s=n.maxRotation;let o=r,l,c,h;if(!this._isVisible()||!n.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const p=this._getLabelSizes(),g=p.widest.width,y=p.highest.height,x=qn(this.chart.width-g,0,this.maxWidth);l=t.offset?this.maxWidth/i:x/(i-1),g+6>l&&(l=x/(i-(t.offset?.5:1)),c=this.maxHeight-dc(t.grid)-n.padding-Y1(t.title,this.chart.options.font),h=Math.sqrt(g*g+y*y),o=Uz(Math.min(Math.asin(qn((p.highest.height+6)/l,-1,1)),Math.asin(qn(c/h,-1,1))-Math.asin(qn(y/h,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Qt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Qt(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const c=Y1(r,n.options.font);if(l?(t.width=this.maxWidth,t.height=dc(s)+c):(t.height=this.maxHeight,t.width=dc(s)+c),i.display&&this.ticks.length){const{first:h,last:p,widest:g,highest:y}=this._getLabelSizes(),x=i.padding*2,T=ro(this.labelRotation),S=Math.cos(T),k=Math.sin(T);if(l){const P=i.mirror?0:k*g.width+S*y.height;t.height=Math.min(this.maxHeight,t.height+P+x)}else{const P=i.mirror?0:S*g.width+k*y.height;t.width=Math.min(this.maxWidth,t.width+P+x)}this._calculatePadding(h,p,k,S)}}this._handleMargins(),l?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,i,r){const{ticks:{align:s,padding:o},position:l}=this.options,c=this.labelRotation!==0,h=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const p=this.getPixelForTick(0)-this.left,g=this.right-this.getPixelForTick(this.ticks.length-1);let y=0,x=0;c?h?(y=r*t.width,x=i*n.height):(y=i*t.height,x=r*n.width):s==="start"?x=n.width:s==="end"?y=t.width:s!=="inner"&&(y=t.width/2,x=n.width/2),this.paddingLeft=Math.max((y-p+o)*this.width/(this.width-p),0),this.paddingRight=Math.max((x-g+o)*this.width/(this.width-g),0)}else{let p=n.height/2,g=t.height/2;s==="start"?(p=0,g=t.height):s==="end"&&(p=n.height,g=0),this.paddingTop=p+o,this.paddingBottom=g+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Qt(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,i;for(n=0,i=t.length;n<i;n++)Kt(t[n].label)&&(t.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=Q1(i,n)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,i){const{ctx:r,_longestTextCache:s}=this,o=[],l=[],c=Math.floor(n/Z1(n,i));let h=0,p=0,g,y,x,T,S,k,P,I,R,V,B;for(g=0;g<n;g+=c){if(T=t[g].label,S=this._resolveTickFontOptions(g),r.font=k=S.string,P=s[k]=s[k]||{data:{},gc:[]},I=S.lineHeight,R=V=0,!Kt(T)&&!Ie(T))R=P1(r,P.data,P.gc,R,T),V=I;else if(Ie(T))for(y=0,x=T.length;y<x;++y)B=T[y],!Kt(B)&&!Ie(B)&&(R=P1(r,P.data,P.gc,R,B),V+=I);o.push(R),l.push(V),h=Math.max(R,h),p=Math.max(V,p)}Z3(s,n);const H=o.indexOf(h),N=l.indexOf(p),b=A=>({width:o[A]||0,height:l[A]||0});return{first:b(0),last:b(n-1),widest:b(H),highest:b(N),widths:o,heights:l}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return $z(this._alignToPixels?$s(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const i=n[t];return i.$context||(i.$context=Y3(this.getContext(),t,i))}return this.$context||(this.$context=Q3(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=ro(this.labelRotation),i=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=t.autoSkipPadding||0,l=s?s.widest.width+o:0,c=s?s.highest.height+o:0;return this.isHorizontal()?c*i>l*r?l/i:c/r:c*r<l*i?c/i:l/r}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:l}=r,c=s.offset,h=this.isHorizontal(),g=this.ticks.length+(c?1:0),y=dc(s),x=[],T=l.setContext(this.getContext()),S=T.display?T.width:0,k=S/2,P=function(Et){return $s(i,Et,S)};let I,R,V,B,H,N,b,A,D,O,z,j;if(o==="top")I=P(this.bottom),N=this.bottom-y,A=I-k,O=P(t.top)+k,j=t.bottom;else if(o==="bottom")I=P(this.top),O=t.top,j=P(t.bottom)-k,N=I+k,A=this.top+y;else if(o==="left")I=P(this.right),H=this.right-y,b=I-k,D=P(t.left)+k,z=t.right;else if(o==="right")I=P(this.left),D=t.left,z=P(t.right)-k,H=I+k,b=this.left+y;else if(n==="x"){if(o==="center")I=P((t.top+t.bottom)/2+.5);else if(Ot(o)){const Et=Object.keys(o)[0],bt=o[Et];I=P(this.chart.scales[Et].getPixelForValue(bt))}O=t.top,j=t.bottom,N=I+k,A=N+y}else if(n==="y"){if(o==="center")I=P((t.left+t.right)/2);else if(Ot(o)){const Et=Object.keys(o)[0],bt=o[Et];I=P(this.chart.scales[Et].getPixelForValue(bt))}H=I-k,b=H-y,D=t.left,z=t.right}const Rt=Lt(r.ticks.maxTicksLimit,g),Vt=Math.max(1,Math.ceil(g/Rt));for(R=0;R<g;R+=Vt){const Et=this.getContext(R),bt=s.setContext(Et),K=l.setContext(Et),st=bt.lineWidth,X=bt.color,lt=K.dash||[],ut=K.dashOffset,wt=bt.tickWidth,St=bt.tickColor,_t=bt.tickBorderDash||[],ct=bt.tickBorderDashOffset;V=K3(this,R,c),V!==void 0&&(B=$s(i,V,st),h?H=b=D=z=B:N=A=O=j=B,x.push({tx1:H,ty1:N,tx2:b,ty2:A,x1:D,y1:O,x2:z,y2:j,width:st,color:X,borderDash:lt,borderDashOffset:ut,tickWidth:wt,tickColor:St,tickBorderDash:_t,tickBorderDashOffset:ct}))}return this._ticksLength=g,this._borderValue=I,x}_computeLabelItems(t){const n=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:h,padding:p,mirror:g}=s,y=dc(i.grid),x=y+p,T=g?-p:x,S=-ro(this.labelRotation),k=[];let P,I,R,V,B,H,N,b,A,D,O,z,j="middle";if(r==="top")H=this.bottom-T,N=this._getXAxisLabelAlignment();else if(r==="bottom")H=this.top+T,N=this._getXAxisLabelAlignment();else if(r==="left"){const Vt=this._getYAxisLabelAlignment(y);N=Vt.textAlign,B=Vt.x}else if(r==="right"){const Vt=this._getYAxisLabelAlignment(y);N=Vt.textAlign,B=Vt.x}else if(n==="x"){if(r==="center")H=(t.top+t.bottom)/2+x;else if(Ot(r)){const Vt=Object.keys(r)[0],Et=r[Vt];H=this.chart.scales[Vt].getPixelForValue(Et)+x}N=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")B=(t.left+t.right)/2-x;else if(Ot(r)){const Vt=Object.keys(r)[0],Et=r[Vt];B=this.chart.scales[Vt].getPixelForValue(Et)}N=this._getYAxisLabelAlignment(y).textAlign}n==="y"&&(c==="start"?j="top":c==="end"&&(j="bottom"));const Rt=this._getLabelSizes();for(P=0,I=l.length;P<I;++P){R=l[P],V=R.label;const Vt=s.setContext(this.getContext(P));b=this.getPixelForTick(P)+s.labelOffset,A=this._resolveTickFontOptions(P),D=A.lineHeight,O=Ie(V)?V.length:1;const Et=O/2,bt=Vt.color,K=Vt.textStrokeColor,st=Vt.textStrokeWidth;let X=N;o?(B=b,N==="inner"&&(P===I-1?X=this.options.reverse?"left":"right":P===0?X=this.options.reverse?"right":"left":X="center"),r==="top"?h==="near"||S!==0?z=-O*D+D/2:h==="center"?z=-Rt.highest.height/2-Et*D+D:z=-Rt.highest.height+D/2:h==="near"||S!==0?z=D/2:h==="center"?z=Rt.highest.height/2-Et*D:z=Rt.highest.height-O*D,g&&(z*=-1),S!==0&&!Vt.showLabelBackdrop&&(B+=D/2*Math.sin(S))):(H=b,z=(1-O)*D/2);let lt;if(Vt.showLabelBackdrop){const ut=Jn(Vt.backdropPadding),wt=Rt.heights[P],St=Rt.widths[P];let _t=z-ut.top,ct=0-ut.left;switch(j){case"middle":_t-=wt/2;break;case"bottom":_t-=wt;break}switch(N){case"center":ct-=St/2;break;case"right":ct-=St;break;case"inner":P===I-1?ct-=St:P>0&&(ct-=St/2);break}lt={left:ct,top:_t,width:St+ut.width,height:wt+ut.height,color:Vt.backdropColor}}k.push({label:V,font:A,textOffset:z,options:{rotation:S,color:bt,strokeColor:K,strokeWidth:st,textAlign:X,textBaseline:j,translation:[B,H],backdrop:lt}})}return k}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-ro(this.labelRotation))return t==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),l=t+s,c=o.widest.width;let h,p;return n==="left"?r?(p=this.right+s,i==="near"?h="left":i==="center"?(h="center",p+=c/2):(h="right",p+=c)):(p=this.right-l,i==="near"?h="right":i==="center"?(h="center",p-=c/2):(h="left",p=this.left)):n==="right"?r?(p=this.left+s,i==="near"?h="right":i==="center"?(h="center",p-=c/2):(h="left",p-=c)):(p=this.left+l,i==="near"?h="left":i==="center"?(h="center",p+=c/2):(h="right",p=this.right)):h="right",{textAlign:h,x:p}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:i,top:r,width:s,height:o}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(i,r,s,o),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(s=>s.value===t);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const n=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let s,o;const l=(c,h,p)=>{!p.width||!p.color||(i.save(),i.lineWidth=p.width,i.strokeStyle=p.color,i.setLineDash(p.borderDash||[]),i.lineDashOffset=p.borderDashOffset,i.beginPath(),i.moveTo(c.x,c.y),i.lineTo(h.x,h.y),i.stroke(),i.restore())};if(n.display)for(s=0,o=r.length;s<o;++s){const c=r[s];n.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),n.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;const l=r.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let h,p,g,y;this.isHorizontal()?(h=$s(t,this.left,o)-o/2,p=$s(t,this.right,l)+l/2,g=y=c):(g=$s(t,this.top,o)-o/2,y=$s(t,this.bottom,l)+l/2,h=p=c),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(h,g),n.lineTo(p,y),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&Bp(i,r);const s=this.getLabelItems(t);for(const o of s){const l=o.options,c=o.font,h=o.label,p=o.textOffset;Cu(i,h,0,p,c,l)}r&&Up(i)}drawTitle(){const{ctx:t,options:{position:n,title:i,reverse:r}}=this;if(!i.display)return;const s=Xe(i.font),o=Jn(i.padding),l=i.align;let c=s.lineHeight/2;n==="bottom"||n==="center"||Ot(n)?(c+=o.bottom,Ie(i.text)&&(c+=s.lineHeight*(i.text.length-1))):c+=o.top;const{titleX:h,titleY:p,maxWidth:g,rotation:y}=J3(this,c,n,l);Cu(t,i.text,0,0,s,{color:i.color,maxWidth:g,rotation:y,textAlign:X3(l,n,r),textBaseline:"middle",translation:[h,p]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,i=Lt(t.grid&&t.grid.z,-1),r=Lt(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==gl.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let s,o;for(s=0,o=n.length;s<o;++s){const l=n[s];l[i]===this.id&&(!t||l.type===t)&&r.push(l)}return r}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return Xe(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class vd{constructor(t,n,i){this.type=t,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let i;nU(n)&&(i=this.register(n));const r=this.items,s=t.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+t);return s in r||(r[s]=t,tU(t,o,i),this.override&&_e.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const n=this.items,i=t.id,r=this.scope;i in n&&delete n[i],r&&i in _e[r]&&(delete _e[r][i],this.override&&delete Eo[i])}}function tU(e,t,n){const i=ku(Object.create(null),[n?_e.get(n):{},_e.get(t),e.defaults]);_e.set(t,i),e.defaultRoutes&&eU(t,e.defaultRoutes),e.descriptors&&_e.describe(t,e.descriptors)}function eU(e,t){Object.keys(t).forEach(n=>{const i=n.split("."),r=i.pop(),s=[e].concat(i).join("."),o=t[n].split("."),l=o.pop(),c=o.join(".");_e.route(s,r,c,l)})}function nU(e){return"id"in e&&"defaults"in e}class iU{constructor(){this.controllers=new vd(Zc,"datasets",!0),this.elements=new vd(Mo,"elements"),this.plugins=new vd(Object,"plugins"),this.scales=new vd(gl,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,i){[...n].forEach(r=>{const s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(t,s,r):Bt(r,o=>{const l=i||this._getRegistryForType(o);this._exec(t,l,o)})})}_exec(t,n,i){const r=zv(t);Qt(i["before"+r],[],i),n[t](i),Qt(i["after"+r],[],i)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(t))return i}return this.plugins}_get(t,n,i){const r=n.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return r}}var Ii=new iU;class rU{constructor(){this._init=[]}notify(t,n,i,r){n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const s=r?this._descriptors(t).filter(r):this._descriptors(t),o=this._notify(s,t,n,i);return n==="afterDestroy"&&(this._notify(s,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,n,i,r){r=r||{};for(const s of t){const o=s.plugin,l=o[i],c=[n,r,s.options];if(Qt(l,c,o)===!1&&r.cancelable)return!1}return!0}invalidate(){Kt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const i=t&&t.config,r=Lt(i.options&&i.options.plugins,{}),s=sU(i);return r===!1&&!n?[]:aU(t,s,r,n)}_notifyStateChanges(t){const n=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(l=>!o.some(c=>l.plugin.id===c.plugin.id));this._notify(r(n,i),t,"stop"),this._notify(r(i,n),t,"start")}}function sU(e){const t={},n=[],i=Object.keys(Ii.plugins.items);for(let s=0;s<i.length;s++)n.push(Ii.getPlugin(i[s]));const r=e.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];n.indexOf(o)===-1&&(n.push(o),t[o.id]=!0)}return{plugins:n,localIds:t}}function oU(e,t){return!t&&e===!1?null:e===!0?{}:e}function aU(e,{plugins:t,localIds:n},i,r){const s=[],o=e.getContext();for(const l of t){const c=l.id,h=oU(i[c],r);h!==null&&s.push({plugin:l,options:lU(e.config,{plugin:l,local:n[c]},h,o)})}return s}function lU(e,{plugin:t,local:n},i,r){const s=e.pluginScopeKeys(t),o=e.getOptionScopes(i,s);return n&&t.defaults&&o.push(t.defaults),e.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function P_(e,t){const n=_e.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function cU(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function uU(e,t){return e===t?"_index_":"_value_"}function X1(e){if(e==="x"||e==="y"||e==="r")return e}function hU(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function I_(e,...t){if(X1(e))return e;for(const n of t){const i=n.axis||hU(n.position)||e.length>1&&X1(e[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function J1(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function dU(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(i=>i.xAxisID===e||i.yAxisID===e);if(n.length)return J1(e,"x",n[0])||J1(e,"y",n[0])}return{}}function fU(e,t){const n=Eo[e.type]||{scales:{}},i=t.scales||{},r=P_(e.type,t),s=Object.create(null);return Object.keys(i).forEach(o=>{const l=i[o];if(!Ot(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=I_(o,l,dU(o,e),_e.scales[l.type]),h=uU(c,r),p=n.scales||{};s[o]=Wc(Object.create(null),[{axis:c},l,p[c],p[h]])}),e.data.datasets.forEach(o=>{const l=o.type||e.type,c=o.indexAxis||P_(l,t),p=(Eo[l]||{}).scales||{};Object.keys(p).forEach(g=>{const y=cU(g,c),x=o[y+"AxisID"]||y;s[x]=s[x]||Object.create(null),Wc(s[x],[{axis:y},i[x],p[g]])})}),Object.keys(s).forEach(o=>{const l=s[o];Wc(l,[_e.scales[l.type],_e.scale])}),s}function SI(e){const t=e.options||(e.options={});t.plugins=Lt(t.plugins,{}),t.scales=fU(e,t)}function kI(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function pU(e){return e=e||{},e.data=kI(e.data),SI(e),e}const tb=new Map,PI=new Set;function xd(e,t){let n=tb.get(e);return n||(n=t(),tb.set(e,n),PI.add(n)),n}const fc=(e,t,n)=>{const i=Hf(t,n);i!==void 0&&e.add(i)};class mU{constructor(t){this._config=pU(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=kI(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),SI(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return xd(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return xd(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return xd(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,i=this.type;return xd(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const i=this._scopeCache;let r=i.get(t);return(!r||n)&&(r=new Map,i.set(t,r)),r}getOptionScopes(t,n,i){const{options:r,type:s}=this,o=this._cachedScopes(t,i),l=o.get(n);if(l)return l;const c=new Set;n.forEach(p=>{t&&(c.add(t),p.forEach(g=>fc(c,t,g))),p.forEach(g=>fc(c,r,g)),p.forEach(g=>fc(c,Eo[s]||{},g)),p.forEach(g=>fc(c,_e,g)),p.forEach(g=>fc(c,E_,g))});const h=Array.from(c);return h.length===0&&h.push(Object.create(null)),PI.has(n)&&o.set(n,h),h}chartOptionScopes(){const{options:t,type:n}=this;return[t,Eo[n]||{},_e.datasets[n]||{},{type:n},_e,E_]}resolveNamedOptions(t,n,i,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:l}=eb(this._resolverCache,t,r);let c=o;if(_U(o,n)){s.$shared=!1,i=vs(i)?i():i;const h=this.createResolver(t,i,l);c=sl(o,i,h)}for(const h of n)s[h]=c[h];return s}createResolver(t,n,i=[""],r){const{resolver:s}=eb(this._resolverCache,t,i);return Ot(n)?sl(s,n,void 0,r):s}}function eb(e,t,n){let i=e.get(t);i||(i=new Map,e.set(t,i));const r=n.join();let s=i.get(r);return s||(s={resolver:Wv(t,n),subPrefixes:n.filter(l=>!l.toLowerCase().includes("hover"))},i.set(r,s)),s}const gU=e=>Ot(e)&&Object.getOwnPropertyNames(e).some(t=>vs(e[t]));function _U(e,t){const{isScriptable:n,isIndexable:i}=aI(e);for(const r of t){const s=n(r),o=i(r),l=(o||s)&&e[r];if(s&&(vs(l)||gU(l))||o&&Ie(l))return!0}return!1}var yU="4.4.9";const vU=["top","bottom","left","right","chartArea"];function nb(e,t){return e==="top"||e==="bottom"||vU.indexOf(e)===-1&&t==="x"}function ib(e,t){return function(n,i){return n[e]===i[e]?n[t]-i[t]:n[e]-i[e]}}function rb(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),Qt(n&&n.onComplete,[e],t)}function xU(e){const t=e.chart,n=t.options.animation;Qt(n&&n.onProgress,[e],t)}function II(e){return Gv()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Gd={},sb=e=>{const t=II(e);return Object.values(Gd).filter(n=>n.canvas===t).pop()};function wU(e,t,n){const i=Object.keys(e);for(const r of i){const s=+r;if(s>=t){const o=e[r];delete e[r],(n>0||s>t)&&(e[s+n]=o)}}}function bU(e,t,n,i){return!n||e.type==="mouseout"?null:i?t:e}var Vr;let eh=(Vr=class{static register(...t){Ii.add(...t),ob()}static unregister(...t){Ii.remove(...t),ob()}constructor(t,n){const i=this.config=new mU(n),r=II(t),s=sb(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||z3(r)),this.platform.updateConfig(i);const l=this.platform.acquireContext(r,o.aspectRatio),c=l&&l.canvas,h=c&&c.height,p=c&&c.width;if(this.id=Cz(),this.ctx=l,this.canvas=c,this.width=p,this.height=h,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new rU,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Qz(g=>this.update(g),o.resizeDelay||0),this._dataChanges=[],Gd[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}Ji.listen(this,"complete",rb),Ji.listen(this,"progress",xU),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:i,height:r,_aspectRatio:s}=this;return Kt(t)?n&&s?s:r?i/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Ii}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():R1(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return I1(this.canvas,this.ctx),this}stop(){return Ji.stop(this),this}resize(t,n){Ji.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const i=this.options,r=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,t,n,s),l=i.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,R1(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),Qt(i.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Bt(n,(i,r)=>{i.id=r})}buildOrUpdateScales(){const t=this.options,n=t.scales,i=this.scales,r=Object.keys(i).reduce((o,l)=>(o[l]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const l=n[o],c=I_(o,l),h=c==="r",p=c==="x";return{options:l,dposition:h?"chartArea":p?"bottom":"left",dtype:h?"radialLinear":p?"category":"linear"}}))),Bt(s,o=>{const l=o.options,c=l.id,h=I_(c,l),p=Lt(l.type,o.dtype);(l.position===void 0||nb(l.position,h)!==nb(o.dposition))&&(l.position=o.dposition),r[c]=!0;let g=null;if(c in i&&i[c].type===p)g=i[c];else{const y=Ii.getScale(p);g=new y({id:c,type:p,ctx:this.ctx,chart:this}),i[g.id]=g}g.init(l,t)}),Bt(r,(o,l)=>{o||delete i[l]}),Bt(i,o=>{Gn.configure(this,o,o.options),Gn.addBox(this,o)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,i=t.length;if(t.sort((r,s)=>r.index-s.index),i>n){for(let r=n;r<i;++r)this._destroyDatasetMeta(r);t.splice(n,i-n)}this._sortedMetasets=t.slice(0).sort(ib("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((i,r)=>{n.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=n.length;i<r;i++){const s=n[i];let o=this.getDatasetMeta(i);const l=s.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=l,o.indexAxis=s.indexAxis||P_(l,this.options),o.order=s.order||0,o.index=i,o.label=""+s.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const c=Ii.getController(l),{datasetElementType:h,dataElementType:p}=_e.datasets[l];Object.assign(c,{dataElementType:Ii.getElement(p),datasetElementType:h&&Ii.getElement(h)}),o.controller=new c(this,i),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){Bt(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let h=0,p=this.data.datasets.length;h<p;h++){const{controller:g}=this.getDatasetMeta(h),y=!r&&s.indexOf(g)===-1;g.buildOrUpdateElements(y),o=Math.max(+g.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),r||Bt(s,h=>{h.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(ib("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){Bt(this.scales,t=>{Gn.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!y1(n,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:s}of n){const o=i==="_removeElements"?-s:s;wU(t,r,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=s=>new Set(t.filter(o=>o[0]===s).map((o,l)=>l+","+o.splice(1).join(","))),r=i(0);for(let s=1;s<n;s++)if(!y1(r,i(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Gn.update(this,this.width,this.height,t);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],Bt(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,vs(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const i=this.getDatasetMeta(t),r={meta:i,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ji.has(this)?this.attached&&!Ji.running(this)&&Ji.start(this):(this.draw(),rb({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,i=[];let r,s;for(r=0,s=n.length;r<s;++r){const o=n[r];(!t||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,i={meta:t,index:t.index,cancelable:!0},r=_I(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(r&&Bp(n,r),t.controller.draw(),r&&Up(n),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return Iu(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,i,r){const s=v3.modes[n];return typeof s=="function"?s(this,t,i,r):[]}getDatasetMeta(t){const n=this.data.datasets[t],i=this._metasets;let r=i.filter(s=>s&&s._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=Lo(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(t,n){const i=this.getDatasetMeta(t);i.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,i){const r=i?"show":"hide",s=this.getDatasetMeta(t),o=s.controller._resolveAnimations(void 0,r);Wf(n)?(s.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),o.update(s,{visible:i}),this.update(l=>l.datasetIndex===t?r:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),Ji.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),I1(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Gd[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,i=(s,o)=>{n.addEventListener(this,s,o),t[s]=o},r=(s,o,l)=>{s.offsetX=o,s.offsetY=l,this._eventHandler(s)};Bt(this.options.events,s=>i(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,i=(c,h)=>{n.addEventListener(this,c,h),t[c]=h},r=(c,h)=>{t[c]&&(n.removeEventListener(this,c,h),delete t[c])},s=(c,h)=>{this.canvas&&this.resize(c,h)};let o;const l=()=>{r("attach",l),this.attached=!0,this.resize(),i("resize",s),i("detach",o)};o=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),i("attach",l)},n.isAttached(this.canvas)?l():o()}unbindEvents(){Bt(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},Bt(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,i){const r=i?"set":"remove";let s,o,l,c;for(n==="dataset"&&(s=this.getDatasetMeta(t[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),l=0,c=t.length;l<c;++l){o=t[l];const h=o&&this.getDatasetMeta(o.datasetIndex).controller;h&&h[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],i=t.map(({datasetIndex:s,index:o})=>{const l=this.getDatasetMeta(s);if(!l)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:l.data[o],index:o}});!Bf(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(t,n,i){return this._plugins.notify(this,t,n,i)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,i){const r=this.options.hover,s=(c,h)=>c.filter(p=>!h.some(g=>p.datasetIndex===g.datasetIndex&&p.index===g.index)),o=s(n,t),l=i?t:s(t,n);o.length&&this.updateHoverStyle(o,r.mode,!1),l.length&&r.mode&&this.updateHoverStyle(l,r.mode,!0)}_eventHandler(t,n){const i={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},r=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const s=this._handleEvent(t,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(s||i.changed)&&this.render(),this}_handleEvent(t,n,i){const{_active:r=[],options:s}=this,o=n,l=this._getActiveElements(t,r,i,o),c=Dz(t),h=bU(t,this._lastEvent,i,c);i&&(this._lastEvent=null,Qt(s.onHover,[t,l,this],this),c&&Qt(s.onClick,[t,l,this],this));const p=!Bf(l,r);return(p||n)&&(this._active=l,this._updateHoverStyles(l,r,n)),this._lastEvent=h,p}_getActiveElements(t,n,i,r){if(t.type==="mouseout")return[];if(!i)return n;const s=this.options.hover;return this.getElementsAtEventForMode(t,s.mode,s,r)}},Tt(Vr,"defaults",_e),Tt(Vr,"instances",Gd),Tt(Vr,"overrides",Eo),Tt(Vr,"registry",Ii),Tt(Vr,"version",yU),Tt(Vr,"getChart",sb),Vr);function ob(){return Bt(eh.instances,e=>e._plugins.invalidate())}function CI(e,t,n=t){e.lineCap=Lt(n.borderCapStyle,t.borderCapStyle),e.setLineDash(Lt(n.borderDash,t.borderDash)),e.lineDashOffset=Lt(n.borderDashOffset,t.borderDashOffset),e.lineJoin=Lt(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=Lt(n.borderWidth,t.borderWidth),e.strokeStyle=Lt(n.borderColor,t.borderColor)}function TU(e,t,n){e.lineTo(n.x,n.y)}function EU(e){return e.stepped?cB:e.tension||e.cubicInterpolationMode==="monotone"?uB:TU}function AI(e,t,n={}){const i=e.length,{start:r=0,end:s=i-1}=n,{start:o,end:l}=t,c=Math.max(r,o),h=Math.min(s,l),p=r<o&&s<o||r>l&&s>l;return{count:i,start:c,loop:t.loop,ilen:h<c&&!p?i+h-c:h-c}}function SU(e,t,n,i){const{points:r,options:s}=t,{count:o,start:l,loop:c,ilen:h}=AI(r,n,i),p=EU(s);let{move:g=!0,reverse:y}=i||{},x,T,S;for(x=0;x<=h;++x)T=r[(l+(y?h-x:x))%o],!T.skip&&(g?(e.moveTo(T.x,T.y),g=!1):p(e,S,T,y,s.stepped),S=T);return c&&(T=r[(l+(y?h:0))%o],p(e,S,T,y,s.stepped)),!!c}function kU(e,t,n,i){const r=t.points,{count:s,start:o,ilen:l}=AI(r,n,i),{move:c=!0,reverse:h}=i||{};let p=0,g=0,y,x,T,S,k,P;const I=V=>(o+(h?l-V:V))%s,R=()=>{S!==k&&(e.lineTo(p,k),e.lineTo(p,S),e.lineTo(p,P))};for(c&&(x=r[I(0)],e.moveTo(x.x,x.y)),y=0;y<=l;++y){if(x=r[I(y)],x.skip)continue;const V=x.x,B=x.y,H=V|0;H===T?(B<S?S=B:B>k&&(k=B),p=(g*p+V)/++g):(R(),e.lineTo(V,B),T=H,g=0,S=k=B),P=B}R()}function C_(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!n?kU:SU}function PU(e){return e.stepped?HB:e.tension||e.cubicInterpolationMode==="monotone"?WB:Xs}function IU(e,t,n,i){let r=t._path;r||(r=t._path=new Path2D,t.path(r,n,i)&&r.closePath()),CI(e,t.options),e.stroke(r)}function CU(e,t,n,i){const{segments:r,options:s}=t,o=C_(t);for(const l of r)CI(e,s,l.style),e.beginPath(),o(e,t,l,{start:n,end:n+i-1})&&e.closePath(),e.stroke()}const AU=typeof Path2D=="function";function RU(e,t,n,i){AU&&!t.options.segment?IU(e,t,n,i):CU(e,t,n,i)}class ur extends Mo{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;DB(this._points,i,t,r,n),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=QB(this,this.options.segment))}first(){const t=this.segments,n=this.points;return t.length&&n[t[0].start]}last(){const t=this.segments,n=this.points,i=t.length;return i&&n[t[i-1].end]}interpolate(t,n){const i=this.options,r=t[n],s=this.points,o=gI(this,{property:n,start:r,end:r});if(!o.length)return;const l=[],c=PU(i);let h,p;for(h=0,p=o.length;h<p;++h){const{start:g,end:y}=o[h],x=s[g],T=s[y];if(x===T){l.push(x);continue}const S=Math.abs((r-x[n])/(T[n]-x[n])),k=c(x,T,S,i.stepped);k[n]=t[n],l.push(k)}return l.length===1?l[0]:l}pathSegment(t,n,i){return C_(this)(t,this,n,i)}path(t,n,i){const r=this.segments,s=C_(this);let o=this._loop;n=n||0,i=i||this.points.length-n;for(const l of r)o&=s(t,this,l,{start:n,end:n+i-1});return!!o}draw(t,n,i,r){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(t.save(),RU(t,this,i,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Tt(ur,"id","line"),Tt(ur,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Tt(ur,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Tt(ur,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function ab(e,t,n,i){const r=e.options,{[n]:s}=e.getProps([n],i);return Math.abs(t-s)<r.radius+r.hitRadius}class Qc extends Mo{constructor(n){super();Tt(this,"parsed");Tt(this,"skip");Tt(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,i,r){const s=this.options,{x:o,y:l}=this.getProps(["x","y"],r);return Math.pow(n-o,2)+Math.pow(i-l,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,i){return ab(this,n,"x",i)}inYRange(n,i){return ab(this,n,"y",i)}getCenterPoint(n){const{x:i,y:r}=this.getProps(["x","y"],n);return{x:i,y:r}}size(n){n=n||this.options||{};let i=n.radius||0;i=Math.max(i,i&&n.hoverRadius||0);const r=i&&n.borderWidth||0;return(i+r)*2}draw(n,i){const r=this.options;this.skip||r.radius<.1||!Iu(this,i,this.size(r)/2)||(n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.fillStyle=r.backgroundColor,S_(n,r,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}Tt(Qc,"id","point"),Tt(Qc,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Tt(Qc,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function NU(e,t,n){const i=e.segments,r=e.points,s=t.points,o=[];for(const l of i){let{start:c,end:h}=l;h=Qv(c,h,r);const p=A_(n,r[c],r[h],l.loop);if(!t.segments){o.push({source:l,target:p,start:r[c],end:r[h]});continue}const g=gI(t,p);for(const y of g){const x=A_(n,s[y.start],s[y.end],y.loop),T=mI(l,r,x);for(const S of T)o.push({source:S,target:y,start:{[n]:lb(p,x,"start",Math.max)},end:{[n]:lb(p,x,"end",Math.min)}})}}return o}function A_(e,t,n,i){if(i)return;let r=t[e],s=n[e];return e==="angle"&&(r=Ci(r),s=Ci(s)),{property:e,start:r,end:s}}function LU(e,t){const{x:n=null,y:i=null}=e||{},r=t.points,s=[];return t.segments.forEach(({start:o,end:l})=>{l=Qv(o,l,r);const c=r[o],h=r[l];i!==null?(s.push({x:c.x,y:i}),s.push({x:h.x,y:i})):n!==null&&(s.push({x:n,y:c.y}),s.push({x:n,y:h.y}))}),s}function Qv(e,t,n){for(;t>e;t--){const i=n[t];if(!isNaN(i.x)&&!isNaN(i.y))break}return t}function lb(e,t,n,i){return e&&t?i(e[n],t[n]):e?e[n]:t?t[n]:0}function RI(e,t){let n=[],i=!1;return Ie(e)?(i=!0,n=e):n=LU(e,t),n.length?new ur({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function cb(e){return e&&e.fill!==!1}function MU(e,t,n){let r=e[t].fill;const s=[t];let o;if(!n)return r;for(;r!==!1&&s.indexOf(r)===-1;){if(!en(r))return r;if(o=e[r],!o)return!1;if(o.visible)return r;s.push(r),r=o.fill}return!1}function DU(e,t,n){const i=FU(e);if(Ot(i))return isNaN(i.value)?!1:i;let r=parseFloat(i);return en(r)&&Math.floor(r)===r?OU(i[0],t,r,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function OU(e,t,n,i){return(e==="-"||e==="+")&&(n=t+n),n===t||n<0||n>=i?!1:n}function jU(e,t){let n=null;return e==="start"?n=t.bottom:e==="end"?n=t.top:Ot(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}function VU(e,t,n){let i;return e==="start"?i=n:e==="end"?i=t.options.reverse?t.min:t.max:Ot(e)?i=e.value:i=t.getBaseValue(),i}function FU(e){const t=e.options,n=t.fill;let i=Lt(n&&n.target,n);return i===void 0&&(i=!!t.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function zU(e){const{scale:t,index:n,line:i}=e,r=[],s=i.segments,o=i.points,l=BU(t,n);l.push(RI({x:null,y:t.bottom},i));for(let c=0;c<s.length;c++){const h=s[c];for(let p=h.start;p<=h.end;p++)UU(r,o[p],l)}return new ur({points:r,options:{}})}function BU(e,t){const n=[],i=e.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){const s=i[r];if(s.index===t)break;s.hidden||n.unshift(s.dataset)}return n}function UU(e,t,n){const i=[];for(let r=0;r<n.length;r++){const s=n[r],{first:o,last:l,point:c}=HU(s,t,"x");if(!(!c||o&&l)){if(o)i.unshift(c);else if(e.push(c),!l)break}}e.push(...i)}function HU(e,t,n){const i=e.interpolate(t,n);if(!i)return{};const r=i[n],s=e.segments,o=e.points;let l=!1,c=!1;for(let h=0;h<s.length;h++){const p=s[h],g=o[p.start][n],y=o[p.end][n];if(Ca(r,g,y)){l=r===g,c=r===y;break}}return{first:l,last:c,point:i}}class NI{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,n,i){const{x:r,y:s,radius:o}=this;return n=n||{start:0,end:mi},t.arc(r,s,o,n.end,n.start,!0),!i.bounds}interpolate(t){const{x:n,y:i,radius:r}=this,s=t.angle;return{x:n+Math.cos(s)*r,y:i+Math.sin(s)*r,angle:s}}}function WU(e){const{chart:t,fill:n,line:i}=e;if(en(n))return $U(t,n);if(n==="stack")return zU(e);if(n==="shape")return!0;const r=qU(e);return r instanceof NI?r:RI(r,i)}function $U(e,t){const n=e.getDatasetMeta(t);return n&&e.isDatasetVisible(t)?n.dataset:null}function qU(e){return(e.scale||{}).getPointPositionForValue?KU(e):GU(e)}function GU(e){const{scale:t={},fill:n}=e,i=jU(n,t);if(en(i)){const r=t.isHorizontal();return{x:r?i:null,y:r?null:i}}return null}function KU(e){const{scale:t,fill:n}=e,i=t.options,r=t.getLabels().length,s=i.reverse?t.max:t.min,o=VU(n,t,s),l=[];if(i.grid.circular){const c=t.getPointPositionForValue(0,s);return new NI({x:c.x,y:c.y,radius:t.getDistanceFromCenterForValue(o)})}for(let c=0;c<r;++c)l.push(t.getPointPositionForValue(c,o));return l}function Xm(e,t,n){const i=WU(t),{chart:r,index:s,line:o,scale:l,axis:c}=t,h=o.options,p=h.fill,g=h.backgroundColor,{above:y=g,below:x=g}=p||{},T=r.getDatasetMeta(s),S=_I(r,T);i&&o.points.length&&(Bp(e,n),ZU(e,{line:o,target:i,above:y,below:x,area:n,scale:l,axis:c,clip:S}),Up(e))}function ZU(e,t){const{line:n,target:i,above:r,below:s,area:o,scale:l,clip:c}=t,h=n._loop?"angle":t.axis;e.save(),h==="x"&&s!==r&&(ub(e,i,o.top),hb(e,{line:n,target:i,color:r,scale:l,property:h,clip:c}),e.restore(),e.save(),ub(e,i,o.bottom)),hb(e,{line:n,target:i,color:s,scale:l,property:h,clip:c}),e.restore()}function ub(e,t,n){const{segments:i,points:r}=t;let s=!0,o=!1;e.beginPath();for(const l of i){const{start:c,end:h}=l,p=r[c],g=r[Qv(c,h,r)];s?(e.moveTo(p.x,p.y),s=!1):(e.lineTo(p.x,n),e.lineTo(p.x,p.y)),o=!!t.pathSegment(e,l,{move:o}),o?e.closePath():e.lineTo(g.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function hb(e,t){const{line:n,target:i,property:r,color:s,scale:o,clip:l}=t,c=NU(n,i,r);for(const{source:h,target:p,start:g,end:y}of c){const{style:{backgroundColor:x=s}={}}=h,T=i!==!0;e.save(),e.fillStyle=x,QU(e,o,l,T&&A_(r,g,y)),e.beginPath();const S=!!n.pathSegment(e,h);let k;if(T){S?e.closePath():db(e,i,y,r);const P=!!i.pathSegment(e,p,{move:S,reverse:!0});k=S&&P,k||db(e,i,g,r)}e.closePath(),e.fill(k?"evenodd":"nonzero"),e.restore()}}function QU(e,t,n,i){const r=t.chart.chartArea,{property:s,start:o,end:l}=i||{};if(s==="x"||s==="y"){let c,h,p,g;s==="x"?(c=o,h=r.top,p=l,g=r.bottom):(c=r.left,h=o,p=r.right,g=l),e.beginPath(),n&&(c=Math.max(c,n.left),p=Math.min(p,n.right),h=Math.max(h,n.top),g=Math.min(g,n.bottom)),e.rect(c,h,p-c,g-h),e.clip()}}function db(e,t,n,i){const r=t.interpolate(n,i);r&&e.lineTo(r.x,r.y)}var YU={id:"filler",afterDatasetsUpdate(e,t,n){const i=(e.data.datasets||[]).length,r=[];let s,o,l,c;for(o=0;o<i;++o)s=e.getDatasetMeta(o),l=s.dataset,c=null,l&&l.options&&l instanceof ur&&(c={visible:e.isDatasetVisible(o),index:o,fill:DU(l,o,i),chart:e,axis:s.controller.options.indexAxis,scale:s.vScale,line:l}),s.$filler=c,r.push(c);for(o=0;o<i;++o)c=r[o],!(!c||c.fill===!1)&&(c.fill=MU(r,o,n.propagate))},beforeDraw(e,t,n){const i=n.drawTime==="beforeDraw",r=e.getSortedVisibleDatasetMetas(),s=e.chartArea;for(let o=r.length-1;o>=0;--o){const l=r[o].$filler;l&&(l.line.updateControlPoints(s,l.axis),i&&l.fill&&Xm(e.ctx,l,s))}},beforeDatasetsDraw(e,t,n){if(n.drawTime!=="beforeDatasetsDraw")return;const i=e.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){const s=i[r].$filler;cb(s)&&Xm(e.ctx,s,e.chartArea)}},beforeDatasetDraw(e,t,n){const i=t.meta.$filler;!cb(i)||n.drawTime!=="beforeDatasetDraw"||Xm(e.ctx,i,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const fb=(e,t)=>{let{boxHeight:n=t,boxWidth:i=t}=e;return e.usePointStyle&&(n=Math.min(n,t),i=e.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(t,n)}},XU=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class pb extends Mo{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,i){this.maxWidth=t,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=Qt(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(i=>t.filter(i,this.chart.data))),t.sort&&(n=n.sort((i,r)=>t.sort(i,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,r=Xe(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=fb(i,s);let h,p;n.font=r.string,this.isHorizontal()?(h=this.maxWidth,p=this._fitRows(o,s,l,c)+10):(p=this.maxHeight,h=this._fitCols(o,r,l,c)+10),this.width=Math.min(h,t.maxWidth||this.maxWidth),this.height=Math.min(p,t.maxHeight||this.maxHeight)}_fitRows(t,n,i,r){const{ctx:s,maxWidth:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],h=this.lineWidths=[0],p=r+l;let g=t;s.textAlign="left",s.textBaseline="middle";let y=-1,x=-p;return this.legendItems.forEach((T,S)=>{const k=i+n/2+s.measureText(T.text).width;(S===0||h[h.length-1]+k+2*l>o)&&(g+=p,h[h.length-(S>0?0:1)]=0,x+=p,y++),c[S]={left:0,top:x,row:y,width:k,height:r},h[h.length-1]+=k+l}),g}_fitCols(t,n,i,r){const{ctx:s,maxHeight:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],h=this.columnSizes=[],p=o-t;let g=l,y=0,x=0,T=0,S=0;return this.legendItems.forEach((k,P)=>{const{itemWidth:I,itemHeight:R}=JU(i,n,s,k,r);P>0&&x+R+2*l>p&&(g+=y+l,h.push({width:y,height:x}),T+=y+l,S++,y=x=0),c[P]={left:T,top:x,col:S,width:I,height:R},y=Math.max(y,I),x+=R+l}),g+=y,h.push({width:y,height:x}),g}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:r},rtl:s}}=this,o=za(s,this.left,this.width);if(this.isHorizontal()){let l=0,c=Ke(i,this.left+r,this.right-this.lineWidths[l]);for(const h of n)l!==h.row&&(l=h.row,c=Ke(i,this.left+r,this.right-this.lineWidths[l])),h.top+=this.top+t+r,h.left=o.leftForLtr(o.x(c),h.width),c+=h.width+r}else{let l=0,c=Ke(i,this.top+t+r,this.bottom-this.columnSizes[l].height);for(const h of n)h.col!==l&&(l=h.col,c=Ke(i,this.top+t+r,this.bottom-this.columnSizes[l].height)),h.top=c,h.left+=this.left+r,h.left=o.leftForLtr(o.x(h.left),h.width),c+=h.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Bp(t,this),this._draw(),Up(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:i,ctx:r}=this,{align:s,labels:o}=t,l=_e.color,c=za(t.rtl,this.left,this.width),h=Xe(o.font),{padding:p}=o,g=h.size,y=g/2;let x;this.drawTitle(),r.textAlign=c.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=h.string;const{boxWidth:T,boxHeight:S,itemHeight:k}=fb(o,g),P=function(H,N,b){if(isNaN(T)||T<=0||isNaN(S)||S<0)return;r.save();const A=Lt(b.lineWidth,1);if(r.fillStyle=Lt(b.fillStyle,l),r.lineCap=Lt(b.lineCap,"butt"),r.lineDashOffset=Lt(b.lineDashOffset,0),r.lineJoin=Lt(b.lineJoin,"miter"),r.lineWidth=A,r.strokeStyle=Lt(b.strokeStyle,l),r.setLineDash(Lt(b.lineDash,[])),o.usePointStyle){const D={radius:S*Math.SQRT2/2,pointStyle:b.pointStyle,rotation:b.rotation,borderWidth:A},O=c.xPlus(H,T/2),z=N+y;sI(r,D,O,z,o.pointStyleWidth&&T)}else{const D=N+Math.max((g-S)/2,0),O=c.leftForLtr(H,T),z=Kc(b.borderRadius);r.beginPath(),Object.values(z).some(j=>j!==0)?k_(r,{x:O,y:D,w:T,h:S,radius:z}):r.rect(O,D,T,S),r.fill(),A!==0&&r.stroke()}r.restore()},I=function(H,N,b){Cu(r,b.text,H,N+k/2,h,{strikethrough:b.hidden,textAlign:c.textAlign(b.textAlign)})},R=this.isHorizontal(),V=this._computeTitleHeight();R?x={x:Ke(s,this.left+p,this.right-i[0]),y:this.top+p+V,line:0}:x={x:this.left+p,y:Ke(s,this.top+V+p,this.bottom-n[0].height),line:0},dI(this.ctx,t.textDirection);const B=k+p;this.legendItems.forEach((H,N)=>{r.strokeStyle=H.fontColor,r.fillStyle=H.fontColor;const b=r.measureText(H.text).width,A=c.textAlign(H.textAlign||(H.textAlign=o.textAlign)),D=T+y+b;let O=x.x,z=x.y;c.setWidth(this.width),R?N>0&&O+D+p>this.right&&(z=x.y+=B,x.line++,O=x.x=Ke(s,this.left+p,this.right-i[x.line])):N>0&&z+B>this.bottom&&(O=x.x=O+n[x.line].width+p,x.line++,z=x.y=Ke(s,this.top+V+p,this.bottom-n[x.line].height));const j=c.x(O);if(P(j,z,H),O=Yz(A,O+T+y,R?O+D:this.right,t.rtl),I(c.x(O),z,H),R)x.x+=D+p;else if(typeof H.text!="string"){const Rt=h.lineHeight;x.y+=LI(H,Rt)+p}else x.y+=B}),fI(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,i=Xe(n.font),r=Jn(n.padding);if(!n.display)return;const s=za(t.rtl,this.left,this.width),o=this.ctx,l=n.position,c=i.size/2,h=r.top+c;let p,g=this.left,y=this.width;if(this.isHorizontal())y=Math.max(...this.lineWidths),p=this.top+h,g=Ke(t.align,g,this.right-y);else{const T=this.columnSizes.reduce((S,k)=>Math.max(S,k.height),0);p=h+Ke(t.align,this.top,this.bottom-T-t.labels.padding-this._computeTitleHeight())}const x=Ke(l,g,g+y);o.textAlign=s.textAlign(Uv(l)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=i.string,Cu(o,n.text,x,p,i)}_computeTitleHeight(){const t=this.options.title,n=Xe(t.font),i=Jn(t.padding);return t.display?n.lineHeight+i.height:0}_getLegendItemAt(t,n){let i,r,s;if(Ca(t,this.left,this.right)&&Ca(n,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],Ca(t,r.left,r.left+r.width)&&Ca(n,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(t){const n=this.options;if(!n5(t.type,n))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const r=this._hoveredItem,s=XU(r,i);r&&!s&&Qt(n.onLeave,[t,r,this],this),this._hoveredItem=i,i&&!s&&Qt(n.onHover,[t,i,this],this)}else i&&Qt(n.onClick,[t,i,this],this)}}function JU(e,t,n,i,r){const s=t5(i,e,t,n),o=e5(r,i,t.lineHeight);return{itemWidth:s,itemHeight:o}}function t5(e,t,n,i){let r=e.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),t+n.size/2+i.measureText(r).width}function e5(e,t,n){let i=e;return typeof t.text!="string"&&(i=LI(t,n)),i}function LI(e,t){const n=e.text?e.text.length:0;return t*n}function n5(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var MI={id:"legend",_element:pb,start(e,t,n){const i=e.legend=new pb({ctx:e.ctx,options:n,chart:e});Gn.configure(e,i,n),Gn.addBox(e,i)},stop(e){Gn.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const i=e.legend;Gn.configure(e,i,n),i.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const i=t.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),t.hidden=!0):(r.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:l}}=e.legend.options;return e._getSortedDatasetMetas().map(c=>{const h=c.controller.getStyle(n?0:void 0),p=Jn(h.borderWidth);return{text:t[c.index].label,fillStyle:h.backgroundColor,fontColor:s,hidden:!c.visible,lineCap:h.borderCapStyle,lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:(p.width+p.height)/4,strokeStyle:h.borderColor,pointStyle:i||h.pointStyle,rotation:h.rotation,textAlign:r||h.textAlign,borderRadius:o&&(l||h.borderRadius),datasetIndex:c.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class DI extends Mo{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const r=Ie(i.text)?i.text.length:1;this._padding=Jn(i.padding);const s=r*Xe(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:i,bottom:r,right:s,options:o}=this,l=o.align;let c=0,h,p,g;return this.isHorizontal()?(p=Ke(l,i,s),g=n+t,h=s-i):(o.position==="left"?(p=i+t,g=Ke(l,r,n),c=Oe*-.5):(p=s-t,g=Ke(l,n,r),c=Oe*.5),h=r-n),{titleX:p,titleY:g,maxWidth:h,rotation:c}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const i=Xe(n.font),s=i.lineHeight/2+this._padding.top,{titleX:o,titleY:l,maxWidth:c,rotation:h}=this._drawArgs(s);Cu(t,n.text,0,0,i,{color:n.color,maxWidth:c,rotation:h,textAlign:Uv(n.align),textBaseline:"middle",translation:[o,l]})}}function i5(e,t){const n=new DI({ctx:e.ctx,options:t,chart:e});Gn.configure(e,n,t),Gn.addBox(e,n),e.titleBlock=n}var OI={id:"title",_element:DI,start(e,t,n){i5(e,n)},stop(e){const t=e.titleBlock;Gn.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const i=e.titleBlock;Gn.configure(e,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Pc={average(e){if(!e.length)return!1;let t,n,i=new Set,r=0,s=0;for(t=0,n=e.length;t<n;++t){const l=e[t].element;if(l&&l.hasValue()){const c=l.tooltipPosition();i.add(c.x),r+=c.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((l,c)=>l+c)/i.size,y:r/s}},nearest(e,t){if(!e.length)return!1;let n=t.x,i=t.y,r=Number.POSITIVE_INFINITY,s,o,l;for(s=0,o=e.length;s<o;++s){const c=e[s].element;if(c&&c.hasValue()){const h=c.getCenterPoint(),p=T_(t,h);p<r&&(r=p,l=c)}}if(l){const c=l.tooltipPosition();n=c.x,i=c.y}return{x:n,y:i}}};function ki(e,t){return t&&(Ie(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function tr(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function r5(e,t){const{element:n,datasetIndex:i,index:r}=t,s=e.getDatasetMeta(i).controller,{label:o,value:l}=s.getLabelAndValue(r);return{chart:e,label:o,parsed:s.getParsed(r),raw:e.data.datasets[i].data[r],formattedValue:l,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function mb(e,t){const n=e.chart.ctx,{body:i,footer:r,title:s}=e,{boxWidth:o,boxHeight:l}=t,c=Xe(t.bodyFont),h=Xe(t.titleFont),p=Xe(t.footerFont),g=s.length,y=r.length,x=i.length,T=Jn(t.padding);let S=T.height,k=0,P=i.reduce((V,B)=>V+B.before.length+B.lines.length+B.after.length,0);if(P+=e.beforeBody.length+e.afterBody.length,g&&(S+=g*h.lineHeight+(g-1)*t.titleSpacing+t.titleMarginBottom),P){const V=t.displayColors?Math.max(l,c.lineHeight):c.lineHeight;S+=x*V+(P-x)*c.lineHeight+(P-1)*t.bodySpacing}y&&(S+=t.footerMarginTop+y*p.lineHeight+(y-1)*t.footerSpacing);let I=0;const R=function(V){k=Math.max(k,n.measureText(V).width+I)};return n.save(),n.font=h.string,Bt(e.title,R),n.font=c.string,Bt(e.beforeBody.concat(e.afterBody),R),I=t.displayColors?o+2+t.boxPadding:0,Bt(i,V=>{Bt(V.before,R),Bt(V.lines,R),Bt(V.after,R)}),I=0,n.font=p.string,Bt(e.footer,R),n.restore(),k+=T.width,{width:k,height:S}}function s5(e,t){const{y:n,height:i}=t;return n<i/2?"top":n>e.height-i/2?"bottom":"center"}function o5(e,t,n,i){const{x:r,width:s}=i,o=n.caretSize+n.caretPadding;if(e==="left"&&r+s+o>t.width||e==="right"&&r-s-o<0)return!0}function a5(e,t,n,i){const{x:r,width:s}=n,{width:o,chartArea:{left:l,right:c}}=e;let h="center";return i==="center"?h=r<=(l+c)/2?"left":"right":r<=s/2?h="left":r>=o-s/2&&(h="right"),o5(h,e,t,n)&&(h="center"),h}function gb(e,t,n){const i=n.yAlign||t.yAlign||s5(e,n);return{xAlign:n.xAlign||t.xAlign||a5(e,t,n,i),yAlign:i}}function l5(e,t){let{x:n,width:i}=e;return t==="right"?n-=i:t==="center"&&(n-=i/2),n}function c5(e,t,n){let{y:i,height:r}=e;return t==="top"?i+=n:t==="bottom"?i-=r+n:i-=r/2,i}function _b(e,t,n,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=e,{xAlign:l,yAlign:c}=n,h=r+s,{topLeft:p,topRight:g,bottomLeft:y,bottomRight:x}=Kc(o);let T=l5(t,l);const S=c5(t,c,h);return c==="center"?l==="left"?T+=h:l==="right"&&(T-=h):l==="left"?T-=Math.max(p,y)+r:l==="right"&&(T+=Math.max(g,x)+r),{x:qn(T,0,i.width-t.width),y:qn(S,0,i.height-t.height)}}function wd(e,t,n){const i=Jn(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-i.right:e.x+i.left}function yb(e){return ki([],tr(e))}function u5(e,t,n){return Lo(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function vb(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const jI={beforeTitle:Xi,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return n[t.dataIndex]}return""},afterTitle:Xi,beforeBody:Xi,beforeLabel:Xi,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return Kt(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Xi,afterBody:Xi,beforeFooter:Xi,footer:Xi,afterFooter:Xi};function fn(e,t,n,i){const r=e[t].call(n,i);return typeof r>"u"?jI[t].call(n,i):r}class R_ extends Mo{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&n.options.animation&&i.animations,s=new yI(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=u5(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:i}=n,r=fn(i,"beforeTitle",this,t),s=fn(i,"title",this,t),o=fn(i,"afterTitle",this,t);let l=[];return l=ki(l,tr(r)),l=ki(l,tr(s)),l=ki(l,tr(o)),l}getBeforeBody(t,n){return yb(fn(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:i}=n,r=[];return Bt(t,s=>{const o={before:[],lines:[],after:[]},l=vb(i,s);ki(o.before,tr(fn(l,"beforeLabel",this,s))),ki(o.lines,fn(l,"label",this,s)),ki(o.after,tr(fn(l,"afterLabel",this,s))),r.push(o)}),r}getAfterBody(t,n){return yb(fn(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:i}=n,r=fn(i,"beforeFooter",this,t),s=fn(i,"footer",this,t),o=fn(i,"afterFooter",this,t);let l=[];return l=ki(l,tr(r)),l=ki(l,tr(s)),l=ki(l,tr(o)),l}_createItems(t){const n=this._active,i=this.chart.data,r=[],s=[],o=[];let l=[],c,h;for(c=0,h=n.length;c<h;++c)l.push(r5(this.chart,n[c]));return t.filter&&(l=l.filter((p,g,y)=>t.filter(p,g,y,i))),t.itemSort&&(l=l.sort((p,g)=>t.itemSort(p,g,i))),Bt(l,p=>{const g=vb(t.callbacks,p);r.push(fn(g,"labelColor",this,p)),s.push(fn(g,"labelPointStyle",this,p)),o.push(fn(g,"labelTextColor",this,p))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=l,l}update(t,n){const i=this.options.setContext(this.getContext()),r=this._active;let s,o=[];if(!r.length)this.opacity!==0&&(s={opacity:0});else{const l=Pc[i.position].call(this,r,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const c=this._size=mb(this,i),h=Object.assign({},l,c),p=gb(this.chart,i,h),g=_b(i,h,p,this.chart);this.xAlign=p.xAlign,this.yAlign=p.yAlign,s={opacity:1,x:g.x,y:g.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,i,r){const s=this.getCaretPosition(t,i,r);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(t,n,i){const{xAlign:r,yAlign:s}=this,{caretSize:o,cornerRadius:l}=i,{topLeft:c,topRight:h,bottomLeft:p,bottomRight:g}=Kc(l),{x:y,y:x}=t,{width:T,height:S}=n;let k,P,I,R,V,B;return s==="center"?(V=x+S/2,r==="left"?(k=y,P=k-o,R=V+o,B=V-o):(k=y+T,P=k+o,R=V-o,B=V+o),I=k):(r==="left"?P=y+Math.max(c,p)+o:r==="right"?P=y+T-Math.max(h,g)-o:P=this.caretX,s==="top"?(R=x,V=R-o,k=P-o,I=P+o):(R=x+S,V=R+o,k=P+o,I=P-o),B=R),{x1:k,x2:P,x3:I,y1:R,y2:V,y3:B}}drawTitle(t,n,i){const r=this.title,s=r.length;let o,l,c;if(s){const h=za(i.rtl,this.x,this.width);for(t.x=wd(this,i.titleAlign,i),n.textAlign=h.textAlign(i.titleAlign),n.textBaseline="middle",o=Xe(i.titleFont),l=i.titleSpacing,n.fillStyle=i.titleColor,n.font=o.string,c=0;c<s;++c)n.fillText(r[c],h.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+l,c+1===s&&(t.y+=i.titleMarginBottom-l)}}_drawColorBox(t,n,i,r,s){const o=this.labelColors[i],l=this.labelPointStyles[i],{boxHeight:c,boxWidth:h}=s,p=Xe(s.bodyFont),g=wd(this,"left",s),y=r.x(g),x=c<p.lineHeight?(p.lineHeight-c)/2:0,T=n.y+x;if(s.usePointStyle){const S={radius:Math.min(h,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},k=r.leftForLtr(y,h)+h/2,P=T+c/2;t.strokeStyle=s.multiKeyBackground,t.fillStyle=s.multiKeyBackground,S_(t,S,k,P),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,S_(t,S,k,P)}else{t.lineWidth=Ot(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const S=r.leftForLtr(y,h),k=r.leftForLtr(r.xPlus(y,1),h-2),P=Kc(o.borderRadius);Object.values(P).some(I=>I!==0)?(t.beginPath(),t.fillStyle=s.multiKeyBackground,k_(t,{x:S,y:T,w:h,h:c,radius:P}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),k_(t,{x:k,y:T+1,w:h-2,h:c-2,radius:P}),t.fill()):(t.fillStyle=s.multiKeyBackground,t.fillRect(S,T,h,c),t.strokeRect(S,T,h,c),t.fillStyle=o.backgroundColor,t.fillRect(k,T+1,h-2,c-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,n,i){const{body:r}=this,{bodySpacing:s,bodyAlign:o,displayColors:l,boxHeight:c,boxWidth:h,boxPadding:p}=i,g=Xe(i.bodyFont);let y=g.lineHeight,x=0;const T=za(i.rtl,this.x,this.width),S=function(b){n.fillText(b,T.x(t.x+x),t.y+y/2),t.y+=y+s},k=T.textAlign(o);let P,I,R,V,B,H,N;for(n.textAlign=o,n.textBaseline="middle",n.font=g.string,t.x=wd(this,k,i),n.fillStyle=i.bodyColor,Bt(this.beforeBody,S),x=l&&k!=="right"?o==="center"?h/2+p:h+2+p:0,V=0,H=r.length;V<H;++V){for(P=r[V],I=this.labelTextColors[V],n.fillStyle=I,Bt(P.before,S),R=P.lines,l&&R.length&&(this._drawColorBox(n,t,V,T,i),y=Math.max(g.lineHeight,c)),B=0,N=R.length;B<N;++B)S(R[B]),y=g.lineHeight;Bt(P.after,S)}x=0,y=g.lineHeight,Bt(this.afterBody,S),t.y-=s}drawFooter(t,n,i){const r=this.footer,s=r.length;let o,l;if(s){const c=za(i.rtl,this.x,this.width);for(t.x=wd(this,i.footerAlign,i),t.y+=i.footerMarginTop,n.textAlign=c.textAlign(i.footerAlign),n.textBaseline="middle",o=Xe(i.footerFont),n.fillStyle=i.footerColor,n.font=o.string,l=0;l<s;++l)n.fillText(r[l],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+i.footerSpacing}}drawBackground(t,n,i,r){const{xAlign:s,yAlign:o}=this,{x:l,y:c}=t,{width:h,height:p}=i,{topLeft:g,topRight:y,bottomLeft:x,bottomRight:T}=Kc(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(l+g,c),o==="top"&&this.drawCaret(t,n,i,r),n.lineTo(l+h-y,c),n.quadraticCurveTo(l+h,c,l+h,c+y),o==="center"&&s==="right"&&this.drawCaret(t,n,i,r),n.lineTo(l+h,c+p-T),n.quadraticCurveTo(l+h,c+p,l+h-T,c+p),o==="bottom"&&this.drawCaret(t,n,i,r),n.lineTo(l+x,c+p),n.quadraticCurveTo(l,c+p,l,c+p-x),o==="center"&&s==="left"&&this.drawCaret(t,n,i,r),n.lineTo(l,c+g),n.quadraticCurveTo(l,c,l+g,c),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,i=this.$animations,r=i&&i.x,s=i&&i.y;if(r||s){const o=Pc[t.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=mb(this,t),c=Object.assign({},o,this._size),h=gb(n,t,c),p=_b(t,c,h,n);(r._to!==p.x||s._to!==p.y)&&(this.xAlign=h.xAlign,this.yAlign=h.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,p))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=Jn(n.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&l&&(t.save(),t.globalAlpha=i,this.drawBackground(s,t,r,n),dI(t,n.textDirection),s.y+=o.top,this.drawTitle(s,t,n),this.drawBody(s,t,n),this.drawFooter(s,t,n),fI(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const i=this._active,r=t.map(({datasetIndex:l,index:c})=>{const h=this.chart.getDatasetMeta(l);if(!h)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:h.data[c],index:c}}),s=!Bf(i,r),o=this._positionChanged(r,n);(s||o)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],o=this._getActiveElements(t,s,n,i),l=this._positionChanged(o,t),c=n||!Bf(o,s)||l;return c&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),c}_getActiveElements(t,n,i,r){const s=this.options;if(t.type==="mouseout")return[];if(!r)return n.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,s.mode,s,i);return s.reverse&&o.reverse(),o}_positionChanged(t,n){const{caretX:i,caretY:r,options:s}=this,o=Pc[s.position].call(this,t,n);return o!==!1&&(i!==o.x||r!==o.y)}}Tt(R_,"positioners",Pc);var VI={id:"tooltip",_element:R_,positioners:Pc,afterInit(e,t,n){n&&(e.tooltip=new R_({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:jI},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const h5=(e,t,n,i)=>(typeof t=="string"?(n=e.push(t)-1,i.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function d5(e,t,n,i){const r=e.indexOf(t);if(r===-1)return h5(e,t,n,i);const s=e.lastIndexOf(t);return r!==s?n:r}const f5=(e,t)=>e===null?null:qn(Math.round(e),0,t);function xb(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class Kf extends gl{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:r,label:s}of n)i[r]===s&&i.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(Kt(t))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===t?n:d5(i,t,Lt(n,t),this._addedLabels),f5(n,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),n||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const t=this.min,n=this.max,i=this.options.offset,r=[];let s=this.getLabels();s=t===0&&n===s.length-1?s:s.slice(t,n+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=t;o<=n;o++)r.push({value:o});return r}getLabelForValue(t){return xb.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}Tt(Kf,"id","category"),Tt(Kf,"defaults",{ticks:{callback:xb}});function p5(e,t){const n=[],{bounds:r,step:s,min:o,max:l,precision:c,count:h,maxTicks:p,maxDigits:g,includeBounds:y}=e,x=s||1,T=p-1,{min:S,max:k}=t,P=!Kt(o),I=!Kt(l),R=!Kt(h),V=(k-S)/(g+1);let B=x1((k-S)/T/x)*x,H,N,b,A;if(B<1e-14&&!P&&!I)return[{value:S},{value:k}];A=Math.ceil(k/B)-Math.floor(S/B),A>T&&(B=x1(A*B/T/x)*x),Kt(c)||(H=Math.pow(10,c),B=Math.ceil(B*H)/H),r==="ticks"?(N=Math.floor(S/B)*B,b=Math.ceil(k/B)*B):(N=S,b=k),P&&I&&s&&zz((l-o)/s,B/1e3)?(A=Math.round(Math.min((l-o)/B,p)),B=(l-o)/A,N=o,b=l):R?(N=P?o:N,b=I?l:b,A=h-1,B=(b-N)/A):(A=(b-N)/B,$c(A,Math.round(A),B/1e3)?A=Math.round(A):A=Math.ceil(A));const D=Math.max(w1(B),w1(N));H=Math.pow(10,Kt(c)?D:c),N=Math.round(N*H)/H,b=Math.round(b*H)/H;let O=0;for(P&&(y&&N!==o?(n.push({value:o}),N<o&&O++,$c(Math.round((N+O*B)*H)/H,o,wb(o,V,e))&&O++):N<o&&O++);O<A;++O){const z=Math.round((N+O*B)*H)/H;if(I&&z>l)break;n.push({value:z})}return I&&y&&b!==l?n.length&&$c(n[n.length-1].value,l,wb(l,V,e))?n[n.length-1].value=l:n.push({value:l}):(!I||b===l)&&n.push({value:b}),n}function wb(e,t,{horizontal:n,minRotation:i}){const r=ro(i),s=(n?Math.sin(r):Math.cos(r))||.001,o=.75*t*(""+e).length;return Math.min(t/s,o)}class m5 extends gl{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return Kt(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this;const o=c=>r=n?r:c,l=c=>s=i?s:c;if(t){const c=rl(r),h=rl(s);c<0&&h<0?l(0):c>0&&h>0&&o(0)}if(r===s){let c=s===0?1:Math.abs(s*.05);l(s+c),t||o(r-c)}this.min=r,this.max=s}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=t,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=p5(r,s);return t.bounds==="ticks"&&Bz(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const r=(i-n)/Math.max(t.length-1,1)/2;n-=r,i+=r}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(t){return nI(t,this.chart.options.locale,this.options.ticks.format)}}class Zf extends m5{determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=en(t)?t:0,this.max=en(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,i=ro(this.options.ticks.minRotation),r=(t?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}Tt(Zf,"id","linear"),Tt(Zf,"defaults",{ticks:{callback:rI.formatters.numeric}});const Wp={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},gn=Object.keys(Wp);function bb(e,t){return e-t}function Tb(e,t){if(Kt(t))return null;const n=e._adapter,{parser:i,round:r,isoWeekday:s}=e._parseOpts;let o=t;return typeof i=="function"&&(o=i(o)),en(o)||(o=typeof i=="string"?n.parse(o,i):n.parse(o)),o===null?null:(r&&(o=r==="week"&&(Pu(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,r)),+o)}function Eb(e,t,n,i){const r=gn.length;for(let s=gn.indexOf(e);s<r-1;++s){const o=Wp[gn[s]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-t)/(l*o.size))<=i)return gn[s]}return gn[r-1]}function g5(e,t,n,i,r){for(let s=gn.length-1;s>=gn.indexOf(n);s--){const o=gn[s];if(Wp[o].common&&e._adapter.diff(r,i,o)>=t-1)return o}return gn[n?gn.indexOf(n):0]}function _5(e){for(let t=gn.indexOf(e)+1,n=gn.length;t<n;++t)if(Wp[gn[t]].common)return gn[t]}function Sb(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:i,hi:r}=Bv(n,t),s=n[i]>=t?n[i]:n[r];e[s]=!0}}function y5(e,t,n,i){const r=e._adapter,s=+r.startOf(t[0].value,i),o=t[t.length-1].value;let l,c;for(l=s;l<=o;l=+r.add(l,1,i))c=n[l],c>=0&&(t[c].major=!0);return t}function kb(e,t,n){const i=[],r={},s=t.length;let o,l;for(o=0;o<s;++o)l=t[o],r[l]=o,i.push({value:l,major:!1});return s===0||!n?i:y5(e,i,r,n)}class Qf extends gl{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const i=t.time||(t.time={}),r=this._adapter=new p3._date(t.adapters.date);r.init(n),Wc(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:Tb(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,i=t.time.unit||"day";let{min:r,max:s,minDefined:o,maxDefined:l}=this.getUserBounds();function c(h){!o&&!isNaN(h.min)&&(r=Math.min(r,h.min)),!l&&!isNaN(h.max)&&(s=Math.max(s,h.max))}(!o||!l)&&(c(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&c(this.getMinMax(!1))),r=en(r)&&!isNaN(r)?r:+n.startOf(Date.now(),i),s=en(s)&&!isNaN(s)?s:+n.endOf(Date.now(),i)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],i=t[t.length-1]),{min:n,max:i}}buildTicks(){const t=this.options,n=t.time,i=t.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,o=this.max,l=Gz(r,s,o);return this._unit=n.unit||(i.autoSkip?Eb(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):g5(this,l.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:_5(this._unit),this.initOffsets(r),t.reverse&&l.reverse(),kb(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,i=0,r,s;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),t.length===1?n=1-r:n=(this.getDecimalForValue(t[1])-r)/2,s=this.getDecimalForValue(t[t.length-1]),t.length===1?i=s:i=(s-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;n=qn(n,0,o),i=qn(i,0,o),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const t=this._adapter,n=this.min,i=this.max,r=this.options,s=r.time,o=s.unit||Eb(s.minUnit,n,i,this._getLabelCapacity(n)),l=Lt(r.ticks.stepSize,1),c=o==="week"?s.isoWeekday:!1,h=Pu(c)||c===!0,p={};let g=n,y,x;if(h&&(g=+t.startOf(g,"isoWeek",c)),g=+t.startOf(g,h?"day":o),t.diff(i,n,o)>1e5*l)throw new Error(n+" and "+i+" are too far apart with stepSize of "+l+" "+o);const T=r.ticks.source==="data"&&this.getDataTimestamps();for(y=g,x=0;y<i;y=+t.add(y,l,o),x++)Sb(p,y,T);return(y===i||r.bounds==="ticks"||x===1)&&Sb(p,y,T),Object.keys(p).sort(bb).map(S=>+S)}getLabelForValue(t){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(t,i.tooltipFormat):n.format(t,i.displayFormats.datetime)}format(t,n){const r=this.options.time.displayFormats,s=this._unit,o=n||r[s];return this._adapter.format(t,o)}_tickFormatFunction(t,n,i,r){const s=this.options,o=s.ticks.callback;if(o)return Qt(o,[t,n,i],this);const l=s.time.displayFormats,c=this._unit,h=this._majorUnit,p=c&&l[c],g=h&&l[h],y=i[n],x=h&&g&&y&&y.major;return this._adapter.format(t,r||(x?g:p))}generateTickLabels(t){let n,i,r;for(n=0,i=t.length;n<i;++n)r=t[n],r.label=this._tickFormatFunction(r.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(t){const n=this._offsets,i=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,i=this.ctx.measureText(t).width,r=ro(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(r),o=Math.sin(r),l=this._resolveTickFontOptions(0).size;return{w:i*s+l*o,h:i*o+l*s}}_getLabelCapacity(t){const n=this.options.time,i=n.displayFormats,r=i[n.unit]||i.millisecond,s=this._tickFormatFunction(t,0,kb(this,[t],this._majorUnit),r),o=this._getLabelSize(s),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let t=this._cache.data||[],n,i;if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,i=r.length;n<i;++n)t=t.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,i;if(t.length)return t;const r=this.getLabels();for(n=0,i=r.length;n<i;++n)t.push(Tb(this,r[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Zz(t.sort(bb))}}Tt(Qf,"id","time"),Tt(Qf,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function bd(e,t,n){let i=0,r=e.length-1,s,o,l,c;n?(t>=e[i].pos&&t<=e[r].pos&&({lo:i,hi:r}=so(e,"pos",t)),{pos:s,time:l}=e[i],{pos:o,time:c}=e[r]):(t>=e[i].time&&t<=e[r].time&&({lo:i,hi:r}=so(e,"time",t)),{time:s,pos:l}=e[i],{time:o,pos:c}=e[r]);const h=o-s;return h?l+(c-l)*(t-s)/h:l}class Pb extends Qf{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=bd(n,this.min),this._tableRange=bd(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:i}=this,r=[],s=[];let o,l,c,h,p;for(o=0,l=t.length;o<l;++o)h=t[o],h>=n&&h<=i&&r.push(h);if(r.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(o=0,l=r.length;o<l;++o)p=r[o+1],c=r[o-1],h=r[o],Math.round((p+c)/2)!==h&&s.push({time:h,pos:o/(l-1)});return s}_generate(){const t=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?t=this.normalize(n.concat(i)):t=n.length?n:i,t=this._cache.all=t,t}getDecimalForValue(t){return(bd(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,i=this.getDecimalForPixel(t)/n.factor-n.end;return bd(this._table,i*this._tableRange+this._minPos,!0)}}Tt(Pb,"id","timeseries"),Tt(Pb,"defaults",Qf.defaults);const FI="label";function Ib(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function v5(e,t){const n=e.options;n&&t&&Object.assign(n,t)}function zI(e,t){e.labels=t}function BI(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:FI;const i=[];e.datasets=t.map(r=>{const s=e.datasets.find(o=>o[n]===r[n]);return!s||!r.data||i.includes(s)?{...r}:(i.push(s),Object.assign(s,r),s)})}function x5(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:FI;const n={labels:[],datasets:[]};return zI(n,e.labels),BI(n,e.datasets,t),n}function w5(e,t){const{height:n=150,width:i=300,redraw:r=!1,datasetIdKey:s,type:o,data:l,options:c,plugins:h=[],fallbackContent:p,updateMode:g,...y}=e,x=$.useRef(null),T=$.useRef(null),S=()=>{x.current&&(T.current=new eh(x.current,{type:o,data:x5(l,s),options:c&&{...c},plugins:h}),Ib(t,T.current))},k=()=>{Ib(t,null),T.current&&(T.current.destroy(),T.current=null)};return $.useEffect(()=>{!r&&T.current&&c&&v5(T.current,c)},[r,c]),$.useEffect(()=>{!r&&T.current&&zI(T.current.config.data,l.labels)},[r,l.labels]),$.useEffect(()=>{!r&&T.current&&l.datasets&&BI(T.current.config.data,l.datasets,s)},[r,l.datasets]),$.useEffect(()=>{T.current&&(r?(k(),setTimeout(S)):T.current.update(g))},[r,c,l.labels,l.datasets,g]),$.useEffect(()=>{T.current&&(k(),setTimeout(S))},[o]),$.useEffect(()=>(S(),()=>k()),[]),Nu.createElement("canvas",{ref:x,role:"img",height:n,width:i,...y},p)}const b5=$.forwardRef(w5);function T5(e,t){return eh.register(t),$.forwardRef((n,i)=>Nu.createElement(b5,{...n,ref:i,type:e}))}const UI=T5("line",$d);eh.register(Kf,Zf,Qc,ur,OI,VI,MI,YU);const E5=({route:e})=>{const{theme:t}=gp(),n=t==="dark",i=e.segments.flatMap(g=>g.points),r=Math.max(1,Math.floor(i.length/100)),s=i.filter((g,y)=>y%r===0);let o=0;const l=[],c=[];s.forEach((g,y)=>{if(y>0){const x=s[y-1],T=x.position.lat,S=x.position.lon,k=g.position.lat,P=g.position.lon,I=6371e3,R=T*Math.PI/180,V=k*Math.PI/180,B=(k-T)*Math.PI/180,H=(P-S)*Math.PI/180,N=Math.sin(B/2)*Math.sin(B/2)+Math.cos(R)*Math.cos(V)*Math.sin(H/2)*Math.sin(H/2),b=2*Math.atan2(Math.sqrt(N),Math.sqrt(1-N)),A=I*b;o+=A}l.push(o),c.push(g.position.ele)});const h={labels:l.map(g=>il(g)),datasets:[{label:"Elevation (m)",data:c,borderColor:"#0F7BFF",backgroundColor:"rgba(15, 123, 255, 0.2)",borderWidth:2,fill:!0,tension:.4,pointRadius:0,pointHoverRadius:5}]},p={responsive:!0,maintainAspectRatio:!1,scales:{x:{display:!0,title:{display:!0,text:"Distance",color:n?"#9CA3AF":"#6B7280"},ticks:{maxTicksLimit:8,color:n?"#9CA3AF":"#6B7280"},grid:{display:!1}},y:{display:!0,title:{display:!0,text:"Elevation (m)",color:n?"#9CA3AF":"#6B7280"},ticks:{color:n?"#9CA3AF":"#6B7280"},grid:{color:n?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.05)"}}},plugins:{legend:{display:!1},tooltip:{backgroundColor:n?"#1E293B":"#FFFFFF",titleColor:n?"#F9FAFB":"#1A1A1A",bodyColor:n?"#F9FAFB":"#1A1A1A",borderColor:n?"#334155":"#E5E7EB",borderWidth:1,callbacks:{label:function(g){return`Elevation: ${g.raw}m`}}}},interaction:{mode:"nearest",axis:"x",intersect:!1}};return m.jsx(UI,{data:h,options:p})};eh.register(Kf,Zf,Qc,ur,OI,VI,MI);const S5=({route:e})=>{const{theme:t}=gp(),n=t==="dark",i=$.useMemo(()=>{const s=e.segments.flatMap(y=>y.points),o=Math.max(1,Math.floor(s.length/100)),l=s.filter((y,x)=>x%o===0);let c=0;const h=[],p=[],g=[];return l.forEach((y,x)=>{if(x>0){const T=l[x-1],S=T.position.lat,k=T.position.lon,P=y.position.lat,I=y.position.lon,R=6371e3,V=S*Math.PI/180,B=P*Math.PI/180,H=(P-S)*Math.PI/180,N=(I-k)*Math.PI/180,b=Math.sin(H/2)*Math.sin(H/2)+Math.cos(V)*Math.cos(B)*Math.sin(N/2)*Math.sin(N/2),A=2*Math.atan2(Math.sqrt(b),Math.sqrt(1-b)),D=R*A;c+=D}h.push(c),p.push(y.speed?y.speed*3.6:0),g.push(y.heartRate||0)}),{labels:h.map(y=>il(y)),datasets:[{label:"Speed (km/h)",data:p,borderColor:"#0F7BFF",backgroundColor:"#0F7BFF",borderWidth:2,yAxisID:"y",tension:.3,pointRadius:0},{label:"Heart Rate (bpm)",data:g.some(y=>y>0)?g:[],borderColor:"#F97316",backgroundColor:"#F97316",borderWidth:2,yAxisID:"y1",tension:.3,pointRadius:0,hidden:!g.some(y=>y>0)}]}},[e]),r={responsive:!0,maintainAspectRatio:!1,scales:{x:{display:!0,title:{display:!0,text:"Distance",color:n?"#9CA3AF":"#6B7280"},ticks:{maxTicksLimit:8,color:n?"#9CA3AF":"#6B7280"},grid:{display:!1}},y:{type:"linear",display:!0,position:"left",title:{display:!0,text:"Speed (km/h)",color:"#0F7BFF"},ticks:{color:n?"#9CA3AF":"#6B7280"},grid:{color:n?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.05)"}},y1:{type:"linear",display:i.datasets[1].data.some(s=>s>0),position:"right",title:{display:!0,text:"Heart Rate (bpm)",color:"#F97316"},ticks:{color:n?"#9CA3AF":"#6B7280"},grid:{drawOnChartArea:!1}}},plugins:{legend:{position:"top",labels:{color:n?"#F9FAFB":"#1A1A1A",usePointStyle:!0,pointStyle:"circle"}},tooltip:{backgroundColor:n?"#1E293B":"#FFFFFF",titleColor:n?"#F9FAFB":"#1A1A1A",bodyColor:n?"#F9FAFB":"#1A1A1A",borderColor:n?"#334155":"#E5E7EB",borderWidth:1}},interaction:{mode:"nearest",axis:"x",intersect:!1}};return m.jsx(UI,{data:i,options:r})},k5=()=>{const{id:e}=wR(),t=ul(),{getRoute:n,deleteRoute:i}=zp(),[r,s]=$.useState(e?n(e):void 0),[o,l]=$.useState(!1);if($.useEffect(()=>{if(e){const p=n(e);p?s(p):t("/")}},[e,n,t]),!r)return m.jsx("div",{className:"p-6",children:"Loading route..."});const c=()=>{e&&(i(e),t("/dashboard"))},h=async()=>{if(navigator.share)try{await navigator.share({title:r.name,text:`Check out my route: ${r.name}`,url:window.location.href})}catch(p){console.log("Error sharing:",p)}else navigator.clipboard.writeText(window.location.href),alert("Link copied to clipboard!")};return m.jsxs("div",{className:"fade-in pb-16 md:pb-8",children:[m.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{onClick:()=>t(-1),className:"p-2 rounded-full hover:bg-background",children:m.jsx(YR,{size:20})}),m.jsx("h1",{className:"text-2xl font-bold",children:r.name})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{onClick:h,className:"btn btn-outline",children:m.jsx(aS,{size:18})}),m.jsx("button",{onClick:()=>l(!0),className:"btn text-text-light hover:text-white hover:bg-red-500 transition-colors",children:m.jsx(Ay,{size:18})})]})]}),m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[m.jsxs("div",{className:"card p-4 flex items-center gap-4",children:[m.jsx("div",{className:"p-3 rounded-full bg-blue-100 dark:bg-blue-900/30",children:m.jsx(Iy,{className:"text-primary",size:20})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-text-light text-sm",children:"Date"}),m.jsx("p",{className:"font-semibold",children:Ov(new Date(r.date))})]})]}),m.jsxs("div",{className:"card p-4 flex items-center gap-4",children:[m.jsx("div",{className:"p-3 rounded-full bg-green-100 dark:bg-green-900/30",children:m.jsx("svg",{className:"text-accent",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:m.jsx("path",{d:"M12 2L4 9H11L3 22H21L13 9H20L12 2Z",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round"})})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-text-light text-sm",children:"Distance"}),m.jsx("p",{className:"font-semibold",children:il(r.totalDistance)})]})]}),m.jsxs("div",{className:"card p-4 flex items-center gap-4",children:[m.jsx("div",{className:"p-3 rounded-full bg-purple-100 dark:bg-purple-900/30",children:m.jsx(cS,{className:"text-purple-500",size:20})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-text-light text-sm",children:"Duration"}),m.jsx("p",{className:"font-semibold",children:zf(r.totalDuration)})]})]}),m.jsxs("div",{className:"card p-4 flex items-center gap-4",children:[m.jsx("div",{className:"p-3 rounded-full bg-orange-100 dark:bg-orange-900/30",children:m.jsx(iS,{className:"text-orange-500",size:20})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-text-light text-sm",children:"Elevation"}),m.jsx("p",{className:"font-semibold",children:X4(r.totalElevationGain)})]})]})]}),m.jsx("div",{className:"card mb-6 overflow-hidden",children:m.jsx("div",{className:"h-72 sm:h-96 w-full",children:m.jsx(oz,{route:r})})}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[m.jsxs("div",{className:"card p-4",children:[m.jsx("h3",{className:"font-bold mb-3",children:"Elevation Profile"}),m.jsx("div",{className:"h-48 md:h-64",children:m.jsx(E5,{route:r})})]}),m.jsxs("div",{className:"card p-4",children:[m.jsx("h3",{className:"font-bold mb-3",children:"Speed & Heart Rate"}),m.jsx("div",{className:"h-48 md:h-64",children:m.jsx(S5,{route:r})})]})]}),o&&m.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black/50 p-4",children:m.jsxs("div",{className:"card max-w-md w-full p-6 fade-in slide-up",children:[m.jsx("h3",{className:"text-xl font-bold mb-3",children:"Delete Route?"}),m.jsxs("p",{className:"text-text-light mb-6",children:["Are you sure you want to delete ",m.jsx("span",{className:"font-medium",children:r.name}),"? This action cannot be undone."]}),m.jsxs("div",{className:"flex gap-3 justify-end",children:[m.jsx("button",{className:"btn text-text-light hover:bg-background",onClick:()=>l(!1),children:"Cancel"}),m.jsx("button",{className:"btn bg-red-500 text-white hover:bg-red-600",onClick:c,children:"Delete"})]})]})})]})},P5=()=>{const e=ul(),{addRoute:t,loading:n}=zp(),[i,r]=$.useState(!1),[s,o]=$.useState(null),[l,c]=$.useState(null),h=$.useRef(null),p=k=>{k.preventDefault(),k.stopPropagation(),k.type==="dragenter"||k.type==="dragover"?r(!0):k.type==="dragleave"&&r(!1)},g=k=>k.name.toLowerCase().endsWith(".gpx")?k.size>10*1024*1024?(c("File size exceeds 10MB limit"),!1):!0:(c("Only GPX files are supported"),!1),y=async k=>{if(k.preventDefault(),k.stopPropagation(),r(!1),c(null),k.dataTransfer.files&&k.dataTransfer.files.length>0){const P=k.dataTransfer.files[0];g(P)&&o(P)}},x=k=>{if(k.preventDefault(),c(null),k.target.files&&k.target.files.length>0){const P=k.target.files[0];g(P)&&o(P)}},T=async()=>{if(s)try{await t(s)?e("/dashboard"):c("Failed to parse GPX file")}catch(k){c("An error occurred while processing the file"),console.error(k)}},S=()=>{h.current&&h.current.click()};return m.jsxs("div",{className:"fade-in max-w-2xl mx-auto",children:[m.jsxs("div",{className:"mb-6",children:[m.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Upload Route"}),m.jsx("p",{className:"text-text-light",children:"Upload a GPX file to add a new route"})]}),m.jsx("div",{className:"card mb-6",children:m.jsx("div",{className:`
            p-8 border-2 border-dashed rounded-xl flex flex-col items-center justify-center text-center
            ${i?"border-primary bg-primary/5":"border-border"}
            ${l?"border-red-500 bg-red-50 dark:bg-red-900/10":""}
            transition-all duration-200
          `,onDragEnter:p,onDragOver:p,onDragLeave:p,onDrop:y,style:{minHeight:"16rem"},children:s?m.jsxs("div",{className:"fade-in",children:[m.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:m.jsx(iN,{size:28,className:"text-primary"})}),m.jsx("h3",{className:"text-lg font-semibold mb-1",children:s.name}),m.jsxs("p",{className:"text-text-light mb-4",children:[(s.size/1024).toFixed(1)," KB"]}),m.jsx("button",{className:"btn btn-primary",onClick:T,disabled:n,children:n?m.jsxs(m.Fragment,{children:[m.jsx(cN,{size:18,className:"animate-spin mr-2"}),"Processing..."]}):"Upload Route"})]}):m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:m.jsx(Vu,{size:28,className:"text-primary"})}),l?m.jsxs("div",{className:"mb-4 text-red-500 flex items-center gap-2 font-medium",children:[m.jsx(tS,{size:18}),m.jsx("span",{children:l})]}):m.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Drag & Drop your GPX file here"}),m.jsx("p",{className:"text-text-light mb-6",children:"or click to browse your files"}),m.jsx("button",{className:"btn btn-primary",onClick:S,children:"Browse Files"}),m.jsx("input",{ref:h,type:"file",accept:".gpx",className:"hidden",onChange:x})]})})}),m.jsxs("div",{className:"card p-6",children:[m.jsx("h3",{className:"text-lg font-semibold mb-4",children:"About GPX Files"}),m.jsx("p",{className:"text-text-light mb-4",children:"GPX (GPS Exchange Format) is a common file format for GPS data. You can export GPX files from popular fitness apps and GPS devices such as:"}),m.jsxs("ul",{className:"list-disc pl-6 text-text-light space-y-2",children:[m.jsx("li",{children:"Garmin Connect"}),m.jsx("li",{children:"Strava"}),m.jsx("li",{children:"Komoot"}),m.jsx("li",{children:"MapMyRun"}),m.jsx("li",{children:"RunKeeper"}),m.jsx("li",{children:"Most GPS watches and bike computers"})]})]})]})},I5=()=>{const{theme:e,toggleTheme:t}=gp(),{routes:n}=zp(),{syncStatus:i,isOnline:r,isSyncing:s,performSync:o,markForSync:l}=Dv();ul();const[c,h]=$.useState(!1),[p,g]=$.useState(!1),[y,x]=$.useState(""),[T,S]=$.useState(""),[k,P]=$.useState(()=>{const b=localStorage.getItem("trackers");return b?JSON.parse(b):[]});$.useState(null),Nu.useEffect(()=>{localStorage.setItem("trackers",JSON.stringify(k))},[k]);const I=()=>{if(y.length!==4||!/^\d+$/.test(y)){alert("Please enter a valid 4-digit code");return}const b={id:Date.now().toString(),code:y,label:T||`Tracker ${y}`,lastSync:new Date,settings:{updateInterval:60,powerSaveMode:!1,geofenceRadius:100}};P([...k,b]),x(""),S(""),g(!1),l("tracker",b.id)},R=(b,A)=>{P(k.map(D=>D.id===b?{...D,settings:{...D.settings,...A}}:D)),l("tracker",b)},V=b=>{confirm("Are you sure you want to delete this tracker?")&&P(k.filter(A=>A.id!==b))},B=()=>{try{const b=localStorage.getItem("gpxRoutes");if(!b)return"0 KB";const A=new Blob([b]).size;return A<1024?`${A} B`:A<1048576?`${(A/1024).toFixed(1)} KB`:`${(A/1048576).toFixed(1)} MB`}catch{return"Unknown"}},H=()=>{localStorage.removeItem("gpxRoutes"),localStorage.removeItem("trackers"),localStorage.removeItem("pendingSync"),window.location.href="/dashboard"},N=b=>{const D=new Date().getTime()-b.getTime(),O=Math.floor(D/6e4);if(O<1)return"Just now";if(O<60)return`${O}m ago`;const z=Math.floor(O/60);return z<24?`${z}h ago`:`${Math.floor(z/24)}d ago`};return m.jsxs("div",{className:"max-w-2xl mx-auto fade-in",children:[m.jsxs("div",{className:"mb-6",children:[m.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Settings"}),m.jsx("p",{className:"text-text-light",children:"Customize your GPS Route Tracker experience"})]}),m.jsxs("div",{className:"card mb-6",children:[m.jsxs("div",{className:"p-6 border-b border-border",children:[m.jsx("h2",{className:"text-lg font-semibold",children:"Sync Status"}),m.jsx("p",{className:"text-text-light text-sm",children:"Data synchronization with cloud services"})]}),m.jsxs("div",{className:"p-6",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[r?m.jsx(hS,{size:20,className:"text-green-500"}):m.jsx(uS,{size:20,className:"text-red-500"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:r?"Online":"Offline"}),m.jsxs("p",{className:"text-sm text-text-light",children:["Last sync: ",N(i.lastSync)]})]})]}),m.jsxs("button",{onClick:o,disabled:!r||s,className:"btn btn-outline disabled:opacity-50",children:[m.jsx(sS,{size:18,className:s?"animate-spin":""}),s?"Syncing...":"Sync Now"]})]}),i.pending>0&&m.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-3",children:m.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[i.pending," items pending sync"]})}),i.failed>0&&m.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3",children:m.jsxs("p",{className:"text-sm text-red-800 dark:text-red-200",children:[i.failed," items failed to sync"]})})]})]}),m.jsxs("div",{className:"card mb-6",children:[m.jsx("div",{className:"p-6 border-b border-border",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-lg font-semibold",children:"GPS Trackers"}),m.jsx("p",{className:"text-text-light text-sm",children:"Manage your connected tracking devices"})]}),m.jsxs("button",{onClick:()=>g(!0),className:"btn btn-primary",children:[m.jsx(rS,{size:18,className:"mr-2"}),"Add Tracker"]})]})}),m.jsxs("div",{className:"divide-y divide-border",children:[k.map(b=>m.jsxs("div",{className:"p-6",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:m.jsx(_N,{size:20,className:"text-primary"})}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-medium",children:b.label}),m.jsxs("p",{className:"text-sm text-text-light",children:["Code: ",b.code]}),m.jsxs("p",{className:"text-xs text-text-light",children:["Last sync: ",new Date(b.lastSync).toLocaleString()]})]})]}),m.jsx("button",{onClick:()=>V(b.id),className:"p-2 text-text-light hover:text-red-500 transition-colors","aria-label":"Delete tracker",children:m.jsx(yN,{size:18})})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Update Interval (seconds)"}),m.jsx("input",{type:"number",value:b.settings.updateInterval,onChange:A=>R(b.id,{updateInterval:parseInt(A.target.value)}),className:"input-field",min:"30",max:"3600"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Geofence Radius (meters)"}),m.jsx("input",{type:"number",value:b.settings.geofenceRadius,onChange:A=>R(b.id,{geofenceRadius:parseInt(A.target.value)}),className:"input-field",min:"50",max:"1000"})]}),m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("label",{className:"text-sm font-medium",children:"Power Save Mode"}),m.jsx("p",{className:"text-xs text-text-light",children:"Extends battery life by reducing update frequency"})]}),m.jsx("button",{onClick:()=>R(b.id,{powerSaveMode:!b.settings.powerSaveMode}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${b.settings.powerSaveMode?"bg-primary":"bg-gray-200 dark:bg-gray-700"}`,children:m.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${b.settings.powerSaveMode?"translate-x-6":"translate-x-1"}`})})]})]})]},b.id)),k.length===0&&m.jsxs("div",{className:"p-6 text-center text-text-light",children:[m.jsx(Wr,{size:24,className:"mx-auto mb-2"}),m.jsx("p",{children:"No trackers added yet"})]})]})]}),m.jsxs("div",{className:"card mb-6",children:[m.jsxs("div",{className:"p-6 border-b border-border",children:[m.jsx("h2",{className:"text-lg font-semibold",children:"Appearance"}),m.jsx("p",{className:"text-text-light text-sm",children:"Customize the app appearance"})]}),m.jsx("div",{className:"p-6",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[e==="dark"?m.jsx(nS,{size:20,className:"text-text-light"}):m.jsx(lS,{size:20,className:"text-text-light"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:"Theme"}),m.jsxs("p",{className:"text-sm text-text-light",children:["Current: ",e==="dark"?"Dark Mode":"Light Mode"]})]})]}),m.jsx("button",{onClick:t,className:"btn btn-outline","aria-label":"Toggle theme",children:e==="dark"?"Light Mode":"Dark Mode"})]})})]}),m.jsxs("div",{className:"card mb-6",children:[m.jsxs("div",{className:"p-6 border-b border-border",children:[m.jsx("h2",{className:"text-lg font-semibold",children:"Data Management"}),m.jsx("p",{className:"text-text-light text-sm",children:"Manage your route data"})]}),m.jsx("div",{className:"p-6 border-b border-border",children:m.jsx("div",{className:"flex items-center justify-between",children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(tN,{size:20,className:"text-text-light"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:"Storage Usage"}),m.jsxs("p",{className:"text-sm text-text-light",children:[B(),"  ",n.length," routes  ",k.length," trackers"]})]})]})})}),m.jsx("div",{className:"p-6",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(Ay,{size:20,className:"text-red-500"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:"Clear All Data"}),m.jsx("p",{className:"text-sm text-text-light",children:"Delete all saved routes, trackers, and reset app"})]})]}),m.jsx("button",{onClick:()=>h(!0),className:"btn bg-red-500 text-white hover:bg-red-600",disabled:n.length===0&&k.length===0,"aria-label":"Clear all data",children:"Clear Data"})]})})]}),m.jsxs("div",{className:"card mb-6",children:[m.jsxs("div",{className:"p-6 border-b border-border",children:[m.jsx("h2",{className:"text-lg font-semibold",children:"About"}),m.jsx("p",{className:"text-text-light text-sm",children:"Application information"})]}),m.jsxs("div",{className:"p-6 flex items-start gap-4",children:[m.jsx("div",{className:"bg-primary text-white p-2.5 rounded-lg mt-1",children:m.jsx(Cy,{size:24})}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold text-lg mb-1",children:"GPS Route Tracker"}),m.jsx("p",{className:"text-text-light mb-4",children:"A Progressive Web App for visualizing and analyzing your GPS routes from GPX files with cloud synchronization."}),m.jsxs("div",{className:"text-sm text-text-light",children:[m.jsx("p",{children:"Version 0.1.0"}),m.jsx("p",{children:"Created with React, TypeScript, and Vite"}),m.jsx("p",{children:"Maps powered by Leaflet and OpenStreetMap"}),m.jsx("p",{children:"Cloud sync with REST API integration"})]})]})]})]}),p&&m.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black/50 p-4",children:m.jsxs("div",{className:"card max-w-md w-full p-6 fade-in slide-up",children:[m.jsx("h3",{className:"text-xl font-bold mb-4",children:"Add New Tracker"}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tracker Code"}),m.jsx("input",{type:"text",maxLength:4,value:y,onChange:b=>x(b.target.value.replace(/\D/g,"")),placeholder:"Enter 4-digit code",className:"input-field"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"Label (Optional)"}),m.jsx("input",{type:"text",value:T,onChange:b=>S(b.target.value),placeholder:"e.g., Car Tracker",className:"input-field"})]})]}),m.jsxs("div",{className:"flex gap-3 justify-end mt-6",children:[m.jsx("button",{className:"btn text-text-light hover:bg-background",onClick:()=>g(!1),children:"Cancel"}),m.jsx("button",{className:"btn btn-primary",onClick:I,children:"Add Tracker"})]})]})}),c&&m.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black/50 p-4",children:m.jsxs("div",{className:"card max-w-md w-full p-6 fade-in slide-up",children:[m.jsx("div",{className:"text-red-500 mb-4",children:m.jsx(C5,{size:32})}),m.jsx("h3",{className:"text-xl font-bold mb-2",children:"Clear All Data?"}),m.jsx("p",{className:"text-text-light mb-6",children:"This will permanently delete all your routes, trackers, and reset the app. This action cannot be undone."}),m.jsxs("div",{className:"flex gap-3 justify-end",children:[m.jsx("button",{className:"btn text-text-light hover:bg-background",onClick:()=>h(!1),children:"Cancel"}),m.jsx("button",{className:"btn bg-red-500 text-white hover:bg-red-600",onClick:H,children:"Yes, Clear All Data"})]})]})})]})},C5=({size:e})=>m.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 dark:bg-red-900/20 flex items-center justify-center",children:m.jsx(Ay,{size:e*.5,className:"text-red-500"})}),A5=()=>{const[e,t]=$.useState("monthly"),{user:n,userProfile:i}=Xu(),r=[{name:"Free",description:"Perfect for casual users and getting started",price:{monthly:0,yearly:0},popular:!1,features:["Up to 10 GPX routes","100MB storage","Basic route visualization","Export to common formats","Mobile app access","Community support"],limitations:["No advanced analytics","No hardware tracker support","No route sharing","No API access"],cta:"Get Started Free",current:(i==null?void 0:i.plan)==="free"},{name:"Pro",description:"For serious adventurers and professionals",price:{monthly:9.99,yearly:99.99},popular:!0,features:["Unlimited GPX routes","10GB storage","Advanced analytics & insights","Hardware tracker support","Route sharing & collaboration","Priority support","API access","Custom route planning","Offline map downloads","Export to all formats"],limitations:[],cta:"Upgrade to Pro",current:(i==null?void 0:i.plan)==="pro"},{name:"Enterprise",description:"For teams and organizations",price:{monthly:49.99,yearly:499.99},popular:!1,features:["Everything in Pro","Unlimited storage","Team management","Advanced security","Custom integrations","Dedicated support","SLA guarantee","White-label options","Bulk hardware discounts","Custom analytics"],limitations:[],cta:"Contact Sales",current:!1}],s=l=>l===0?"Free":`$${l.toFixed(2)}`,o=(l,c)=>{if(l===0)return 0;const h=l*12;return Math.round((h-c)/h*100)};return m.jsxs("div",{className:"min-h-screen bg-background",children:[m.jsx("nav",{className:"sticky top-0 z-50 bg-card/80 backdrop-blur-md border-b border-border",children:m.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:m.jsxs("div",{className:"flex justify-between items-center h-16",children:[m.jsxs(be,{to:"/",className:"flex items-center gap-2",children:[m.jsx("div",{className:"bg-primary text-white p-2 rounded-lg",children:m.jsx(Wr,{size:20})}),m.jsx("span",{className:"text-xl font-bold",children:"TracSync"})]}),m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx(be,{to:"/",className:"text-text-light hover:text-text transition-colors",children:"Home"}),m.jsx(be,{to:"/dashboard",className:"text-text-light hover:text-text transition-colors",children:"Dashboard"}),n?m.jsx(be,{to:"/dashboard",className:"btn btn-primary",children:"Go to App"}):m.jsx(be,{to:"/",className:"btn btn-primary",children:"Sign In"})]})]})})}),m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20",children:[m.jsxs("div",{className:"text-center mb-16",children:[m.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-6",children:"Choose Your Adventure Plan"}),m.jsx("p",{className:"text-xl text-text-light max-w-3xl mx-auto mb-8",children:"Start free and upgrade as your tracking needs grow. All plans include our core features with no hidden fees or long-term commitments."}),m.jsxs("div",{className:"flex items-center justify-center gap-4 mb-8",children:[m.jsx("span",{className:`text-sm ${e==="monthly"?"text-text":"text-text-light"}`,children:"Monthly"}),m.jsx("button",{onClick:()=>t(e==="monthly"?"yearly":"monthly"),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${e==="yearly"?"bg-primary":"bg-gray-200 dark:bg-gray-700"}`,children:m.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${e==="yearly"?"translate-x-6":"translate-x-1"}`})}),m.jsx("span",{className:`text-sm ${e==="yearly"?"text-text":"text-text-light"}`,children:"Yearly"}),e==="yearly"&&m.jsx("span",{className:"bg-accent text-white text-xs px-2 py-1 rounded-full font-medium",children:"Save up to 17%"})]})]}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-16",children:r.map((l,c)=>m.jsxs("div",{className:`card relative overflow-hidden ${l.popular?"ring-2 ring-primary shadow-xl scale-105":""}`,children:[l.popular&&m.jsx("div",{className:"absolute top-0 left-0 right-0 bg-primary text-white text-center py-2 text-sm font-medium",children:"Most Popular"}),m.jsxs("div",{className:`p-6 ${l.popular?"pt-12":""}`,children:[m.jsxs("div",{className:"text-center mb-6",children:[m.jsx("h3",{className:"text-2xl font-bold mb-2",children:l.name}),m.jsx("p",{className:"text-text-light text-sm mb-4",children:l.description}),m.jsxs("div",{className:"mb-4",children:[m.jsx("span",{className:"text-4xl font-bold",children:s(l.price[e])}),l.price[e]>0&&m.jsxs("span",{className:"text-text-light",children:["/",e==="monthly"?"month":"year"]})]}),e==="yearly"&&l.price.monthly>0&&m.jsxs("div",{className:"text-sm text-accent font-medium",children:["Save ",o(l.price.monthly,l.price.yearly),"% annually"]})]}),m.jsxs("div",{className:"space-y-3 mb-6",children:[l.features.map((h,p)=>m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(Or,{size:16,className:"text-green-500 mt-0.5 flex-shrink-0"}),m.jsx("span",{className:"text-sm",children:h})]},p)),l.limitations.map((h,p)=>m.jsxs("div",{className:"flex items-start gap-3 opacity-60",children:[m.jsx(Br,{size:16,className:"text-red-500 mt-0.5 flex-shrink-0"}),m.jsx("span",{className:"text-sm",children:h})]},p))]}),m.jsxs("button",{className:`btn w-full ${l.current?"bg-gray-200 dark:bg-gray-700 text-text-light cursor-not-allowed":l.popular?"btn-primary":"btn-outline"}`,disabled:l.current,children:[l.current?"Current Plan":l.cta,!l.current&&m.jsx(Kg,{size:18,className:"ml-2"})]})]})]},l.name))}),m.jsxs("div",{className:"card p-8 mb-16",children:[m.jsx("h2",{className:"text-2xl font-bold text-center mb-8",children:"Feature Comparison"}),m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"w-full",children:[m.jsx("thead",{children:m.jsxs("tr",{className:"border-b border-border",children:[m.jsx("th",{className:"text-left py-4 px-4",children:"Features"}),m.jsx("th",{className:"text-center py-4 px-4",children:"Free"}),m.jsx("th",{className:"text-center py-4 px-4",children:"Pro"}),m.jsx("th",{className:"text-center py-4 px-4",children:"Enterprise"})]})}),m.jsxs("tbody",{className:"divide-y divide-border",children:[m.jsxs("tr",{children:[m.jsx("td",{className:"py-4 px-4 font-medium",children:"GPX Routes"}),m.jsx("td",{className:"text-center py-4 px-4",children:"10"}),m.jsx("td",{className:"text-center py-4 px-4",children:"Unlimited"}),m.jsx("td",{className:"text-center py-4 px-4",children:"Unlimited"})]}),m.jsxs("tr",{children:[m.jsx("td",{className:"py-4 px-4 font-medium",children:"Storage"}),m.jsx("td",{className:"text-center py-4 px-4",children:"100MB"}),m.jsx("td",{className:"text-center py-4 px-4",children:"10GB"}),m.jsx("td",{className:"text-center py-4 px-4",children:"Unlimited"})]}),m.jsxs("tr",{children:[m.jsx("td",{className:"py-4 px-4 font-medium",children:"Hardware Trackers"}),m.jsx("td",{className:"text-center py-4 px-4",children:m.jsx(Br,{size:16,className:"text-red-500 mx-auto"})}),m.jsx("td",{className:"text-center py-4 px-4",children:m.jsx(Or,{size:16,className:"text-green-500 mx-auto"})}),m.jsx("td",{className:"text-center py-4 px-4",children:m.jsx(Or,{size:16,className:"text-green-500 mx-auto"})})]}),m.jsxs("tr",{children:[m.jsx("td",{className:"py-4 px-4 font-medium",children:"Advanced Analytics"}),m.jsx("td",{className:"text-center py-4 px-4",children:m.jsx(Br,{size:16,className:"text-red-500 mx-auto"})}),m.jsx("td",{className:"text-center py-4 px-4",children:m.jsx(Or,{size:16,className:"text-green-500 mx-auto"})}),m.jsx("td",{className:"text-center py-4 px-4",children:m.jsx(Or,{size:16,className:"text-green-500 mx-auto"})})]}),m.jsxs("tr",{children:[m.jsx("td",{className:"py-4 px-4 font-medium",children:"API Access"}),m.jsx("td",{className:"text-center py-4 px-4",children:m.jsx(Br,{size:16,className:"text-red-500 mx-auto"})}),m.jsx("td",{className:"text-center py-4 px-4",children:m.jsx(Or,{size:16,className:"text-green-500 mx-auto"})}),m.jsx("td",{className:"text-center py-4 px-4",children:m.jsx(Or,{size:16,className:"text-green-500 mx-auto"})})]}),m.jsxs("tr",{children:[m.jsx("td",{className:"py-4 px-4 font-medium",children:"Team Management"}),m.jsx("td",{className:"text-center py-4 px-4",children:m.jsx(Br,{size:16,className:"text-red-500 mx-auto"})}),m.jsx("td",{className:"text-center py-4 px-4",children:m.jsx(Br,{size:16,className:"text-red-500 mx-auto"})}),m.jsx("td",{className:"text-center py-4 px-4",children:m.jsx(Or,{size:16,className:"text-green-500 mx-auto"})})]})]})]})})]}),m.jsxs("div",{className:"text-center mb-16",children:[m.jsx("h2",{className:"text-3xl font-bold mb-8",children:"Frequently Asked Questions"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 text-left",children:[m.jsxs("div",{className:"card p-6",children:[m.jsx("h3",{className:"font-semibold mb-3",children:"Can I change plans anytime?"}),m.jsx("p",{className:"text-text-light text-sm",children:"Yes! You can upgrade or downgrade your plan at any time. Changes take effect immediately, and we'll prorate any billing differences."})]}),m.jsxs("div",{className:"card p-6",children:[m.jsx("h3",{className:"font-semibold mb-3",children:"What happens to my data if I downgrade?"}),m.jsx("p",{className:"text-text-light text-sm",children:"Your data is never deleted. If you exceed the new plan's limits, you'll have read-only access until you upgrade or remove some routes."})]}),m.jsxs("div",{className:"card p-6",children:[m.jsx("h3",{className:"font-semibold mb-3",children:"Do you offer refunds?"}),m.jsx("p",{className:"text-text-light text-sm",children:"We offer a 30-day money-back guarantee for all paid plans. No questions asked."})]}),m.jsxs("div",{className:"card p-6",children:[m.jsx("h3",{className:"font-semibold mb-3",children:"Is my data secure?"}),m.jsx("p",{className:"text-text-light text-sm",children:"Absolutely. We use enterprise-grade encryption and security measures to protect your data. Your routes are private by default."})]})]})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Ready to Start Tracking?"}),m.jsx("p",{className:"text-xl text-text-light mb-8",children:"Join thousands of adventurers who trust TracSync for their journey analytics."}),m.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[m.jsxs(be,{to:"/",className:"btn btn-primary text-lg px-8 py-3",children:["Start Free Trial",m.jsx(Kg,{size:20,className:"ml-2"})]}),m.jsx(be,{to:"/",className:"btn btn-outline text-lg px-8 py-3",children:"Contact Sales"})]})]})]})]})},R5=()=>{const e=[{title:"Dashboard",path:"/",icon:m.jsx(eS,{size:20})},{title:"Upload",path:"/upload",icon:m.jsx(Vu,{size:20})},{title:"Settings",path:"/settings",icon:m.jsx(oS,{size:20})}];return m.jsx("footer",{className:"fixed bottom-0 left-0 right-0 h-16 bg-card border-t border-border md:hidden z-10",children:m.jsx("div",{className:"grid grid-cols-3 h-full",children:e.map(t=>m.jsxs(JE,{to:t.path,className:({isActive:n})=>`
              flex flex-col items-center justify-center transition-colors
              ${n?"text-primary":"text-text-light hover:text-text"}
            `,end:t.path==="/",children:[t.icon,m.jsx("span",{className:"text-xs mt-1",children:t.title})]},t.path))})})};function N5(){const[e,t]=$.useState(!1),n=Io(),i=["/","/pricing"].includes(n.pathname);return $.useEffect(()=>{t(!1)},[n.pathname]),m.jsx(vN,{children:m.jsx(D4,{children:i?m.jsxs(Nx,{children:[m.jsx(Zs,{path:"/",element:m.jsx(W4,{})}),m.jsx(Zs,{path:"/pricing",element:m.jsx(A5,{})})]}):m.jsx(V4,{children:m.jsx(tz,{children:m.jsxs("div",{className:"flex h-screen overflow-hidden",children:[m.jsx(B4,{isOpen:e,setIsOpen:t}),m.jsxs("div",{className:"flex flex-col flex-1 h-screen overflow-y-auto",children:[m.jsx(z4,{onMenuClick:()=>t(!e)}),m.jsx("main",{className:"flex-1 p-4 md:p-6 pb-24 bg-background transition-colors duration-300",children:m.jsxs(Nx,{children:[m.jsx(Zs,{path:"/dashboard",element:m.jsx(sz,{})}),m.jsx(Zs,{path:"/routes/:id",element:m.jsx(k5,{})}),m.jsx(Zs,{path:"/upload",element:m.jsx(P5,{})}),m.jsx(Zs,{path:"/settings",element:m.jsx(I5,{})})]})}),m.jsx(R5,{})]})]})})})})})}const HI=()=>{"serviceWorker"in navigator&&window.addEventListener("load",()=>{HI()})};BE(document.getElementById("root")).render(m.jsx($.StrictMode,{children:m.jsx(HR,{children:m.jsx(N5,{})})}));HI();
