var sI=Object.defineProperty;var rI=(e,t,n)=>t in e?sI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Tt=(e,t,n)=>rI(e,typeof t!="symbol"?t+"":t,n);function oI(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in e)){const r=Object.getOwnPropertyDescriptor(i,s);r&&Object.defineProperty(e,s,r.get?r:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();var aI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function o_(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var O1={exports:{}},Vf={},D1={exports:{}},It={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vu=Symbol.for("react.element"),lI=Symbol.for("react.portal"),cI=Symbol.for("react.fragment"),uI=Symbol.for("react.strict_mode"),hI=Symbol.for("react.profiler"),dI=Symbol.for("react.provider"),fI=Symbol.for("react.context"),pI=Symbol.for("react.forward_ref"),mI=Symbol.for("react.suspense"),gI=Symbol.for("react.memo"),_I=Symbol.for("react.lazy"),Dv=Symbol.iterator;function yI(e){return e===null||typeof e!="object"?null:(e=Dv&&e[Dv]||e["@@iterator"],typeof e=="function"?e:null)}var j1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V1=Object.assign,F1={};function Ya(e,t,n){this.props=e,this.context=t,this.refs=F1,this.updater=n||j1}Ya.prototype.isReactComponent={};Ya.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ya.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function z1(){}z1.prototype=Ya.prototype;function a_(e,t,n){this.props=e,this.context=t,this.refs=F1,this.updater=n||j1}var l_=a_.prototype=new z1;l_.constructor=a_;V1(l_,Ya.prototype);l_.isPureReactComponent=!0;var jv=Array.isArray,B1=Object.prototype.hasOwnProperty,c_={current:null},U1={key:!0,ref:!0,__self:!0,__source:!0};function H1(e,t,n){var i,s={},r=null,a=null;if(t!=null)for(i in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(r=""+t.key),t)B1.call(t,i)&&!U1.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];s.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps,l)s[i]===void 0&&(s[i]=l[i]);return{$$typeof:vu,type:e,key:r,ref:a,props:s,_owner:c_.current}}function vI(e,t){return{$$typeof:vu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function u_(e){return typeof e=="object"&&e!==null&&e.$$typeof===vu}function xI(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Vv=/\/+/g;function Np(e,t){return typeof e=="object"&&e!==null&&e.key!=null?xI(""+e.key):t.toString(36)}function ud(e,t,n,i,s){var r=typeof e;(r==="undefined"||r==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(r){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case vu:case lI:a=!0}}if(a)return a=e,s=s(a),e=i===""?"."+Np(a,0):i,jv(s)?(n="",e!=null&&(n=e.replace(Vv,"$&/")+"/"),ud(s,t,n,"",function(h){return h})):s!=null&&(u_(s)&&(s=vI(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Vv,"$&/")+"/")+e)),t.push(s)),1;if(a=0,i=i===""?".":i+":",jv(e))for(var l=0;l<e.length;l++){r=e[l];var u=i+Np(r,l);a+=ud(r,t,n,u,s)}else if(u=yI(e),typeof u=="function")for(e=u.call(e),l=0;!(r=e.next()).done;)r=r.value,u=i+Np(r,l++),a+=ud(r,t,n,u,s);else if(r==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Sh(e,t,n){if(e==null)return e;var i=[],s=0;return ud(e,i,"","",function(r){return t.call(n,r,s++)}),i}function wI(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var rn={current:null},hd={transition:null},bI={ReactCurrentDispatcher:rn,ReactCurrentBatchConfig:hd,ReactCurrentOwner:c_};function W1(){throw Error("act(...) is not supported in production builds of React.")}It.Children={map:Sh,forEach:function(e,t,n){Sh(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Sh(e,function(){t++}),t},toArray:function(e){return Sh(e,function(t){return t})||[]},only:function(e){if(!u_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};It.Component=Ya;It.Fragment=cI;It.Profiler=hI;It.PureComponent=a_;It.StrictMode=uI;It.Suspense=mI;It.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bI;It.act=W1;It.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=V1({},e.props),s=e.key,r=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(r=t.ref,a=c_.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)B1.call(t,u)&&!U1.hasOwnProperty(u)&&(i[u]=t[u]===void 0&&l!==void 0?l[u]:t[u])}var u=arguments.length-2;if(u===1)i.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];i.children=l}return{$$typeof:vu,type:e.type,key:s,ref:r,props:i,_owner:a}};It.createContext=function(e){return e={$$typeof:fI,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:dI,_context:e},e.Consumer=e};It.createElement=H1;It.createFactory=function(e){var t=H1.bind(null,e);return t.type=e,t};It.createRef=function(){return{current:null}};It.forwardRef=function(e){return{$$typeof:pI,render:e}};It.isValidElement=u_;It.lazy=function(e){return{$$typeof:_I,_payload:{_status:-1,_result:e},_init:wI}};It.memo=function(e,t){return{$$typeof:gI,type:e,compare:t===void 0?null:t}};It.startTransition=function(e){var t=hd.transition;hd.transition={};try{e()}finally{hd.transition=t}};It.unstable_act=W1;It.useCallback=function(e,t){return rn.current.useCallback(e,t)};It.useContext=function(e){return rn.current.useContext(e)};It.useDebugValue=function(){};It.useDeferredValue=function(e){return rn.current.useDeferredValue(e)};It.useEffect=function(e,t){return rn.current.useEffect(e,t)};It.useId=function(){return rn.current.useId()};It.useImperativeHandle=function(e,t,n){return rn.current.useImperativeHandle(e,t,n)};It.useInsertionEffect=function(e,t){return rn.current.useInsertionEffect(e,t)};It.useLayoutEffect=function(e,t){return rn.current.useLayoutEffect(e,t)};It.useMemo=function(e,t){return rn.current.useMemo(e,t)};It.useReducer=function(e,t,n){return rn.current.useReducer(e,t,n)};It.useRef=function(e){return rn.current.useRef(e)};It.useState=function(e){return rn.current.useState(e)};It.useSyncExternalStore=function(e,t,n){return rn.current.useSyncExternalStore(e,t,n)};It.useTransition=function(){return rn.current.useTransition()};It.version="18.3.1";D1.exports=It;var $=D1.exports;const xu=o_($),TI=oI({__proto__:null,default:xu},[$]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EI=$,SI=Symbol.for("react.element"),kI=Symbol.for("react.fragment"),PI=Object.prototype.hasOwnProperty,II=EI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,CI={key:!0,ref:!0,__self:!0,__source:!0};function $1(e,t,n){var i,s={},r=null,a=null;n!==void 0&&(r=""+n),t.key!==void 0&&(r=""+t.key),t.ref!==void 0&&(a=t.ref);for(i in t)PI.call(t,i)&&!CI.hasOwnProperty(i)&&(s[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)s[i]===void 0&&(s[i]=t[i]);return{$$typeof:SI,type:e,key:r,ref:a,props:s,_owner:II.current}}Vf.Fragment=kI;Vf.jsx=$1;Vf.jsxs=$1;O1.exports=Vf;var m=O1.exports,q1={exports:{}},Tn={},G1={exports:{}},K1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(K,st){var Y=K.length;K.push(st);t:for(;0<Y;){var ot=Y-1>>>1,ut=K[ot];if(0<s(ut,st))K[ot]=st,K[Y]=ut,Y=ot;else break t}}function n(K){return K.length===0?null:K[0]}function i(K){if(K.length===0)return null;var st=K[0],Y=K.pop();if(Y!==st){K[0]=Y;t:for(var ot=0,ut=K.length,wt=ut>>>1;ot<wt;){var St=2*(ot+1)-1,_t=K[St],at=St+1,we=K[at];if(0>s(_t,Y))at<ut&&0>s(we,_t)?(K[ot]=we,K[at]=Y,ot=at):(K[ot]=_t,K[St]=Y,ot=St);else if(at<ut&&0>s(we,Y))K[ot]=we,K[at]=Y,ot=at;else break t}}return st}function s(K,st){var Y=K.sortIndex-st.sortIndex;return Y!==0?Y:K.id-st.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;e.unstable_now=function(){return r.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var u=[],h=[],p=1,_=null,y=3,w=!1,E=!1,S=!1,k=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(K){for(var st=n(h);st!==null;){if(st.callback===null)i(h);else if(st.startTime<=K)i(h),st.sortIndex=st.expirationTime,t(u,st);else break;st=n(h)}}function V(K){if(S=!1,R(K),!E)if(n(u)!==null)E=!0,Et(B);else{var st=n(h);st!==null&&bt(V,st.startTime-K)}}function B(K,st){E=!1,S&&(S=!1,P(b),b=-1),w=!0;var Y=y;try{for(R(st),_=n(u);_!==null&&(!(_.expirationTime>st)||K&&!D());){var ot=_.callback;if(typeof ot=="function"){_.callback=null,y=_.priorityLevel;var ut=ot(_.expirationTime<=st);st=e.unstable_now(),typeof ut=="function"?_.callback=ut:_===n(u)&&i(u),R(st)}else i(u);_=n(u)}if(_!==null)var wt=!0;else{var St=n(h);St!==null&&bt(V,St.startTime-st),wt=!1}return wt}finally{_=null,y=Y,w=!1}}var H=!1,N=null,b=-1,A=5,O=-1;function D(){return!(e.unstable_now()-O<A)}function z(){if(N!==null){var K=e.unstable_now();O=K;var st=!0;try{st=N(!0,K)}finally{st?j():(H=!1,N=null)}}else H=!1}var j;if(typeof I=="function")j=function(){I(z)};else if(typeof MessageChannel<"u"){var Rt=new MessageChannel,Vt=Rt.port2;Rt.port1.onmessage=z,j=function(){Vt.postMessage(null)}}else j=function(){k(z,0)};function Et(K){N=K,H||(H=!0,j())}function bt(K,st){b=k(function(){K(e.unstable_now())},st)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(K){K.callback=null},e.unstable_continueExecution=function(){E||w||(E=!0,Et(B))},e.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<K?Math.floor(1e3/K):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(K){switch(y){case 1:case 2:case 3:var st=3;break;default:st=y}var Y=y;y=st;try{return K()}finally{y=Y}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(K,st){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var Y=y;y=K;try{return st()}finally{y=Y}},e.unstable_scheduleCallback=function(K,st,Y){var ot=e.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?ot+Y:ot):Y=ot,K){case 1:var ut=-1;break;case 2:ut=250;break;case 5:ut=1073741823;break;case 4:ut=1e4;break;default:ut=5e3}return ut=Y+ut,K={id:p++,callback:st,priorityLevel:K,startTime:Y,expirationTime:ut,sortIndex:-1},Y>ot?(K.sortIndex=Y,t(h,K),n(u)===null&&K===n(h)&&(S?(P(b),b=-1):S=!0,bt(V,Y-ot))):(K.sortIndex=ut,t(u,K),E||w||(E=!0,Et(B))),K},e.unstable_shouldYield=D,e.unstable_wrapCallback=function(K){var st=y;return function(){var Y=y;y=st;try{return K.apply(this,arguments)}finally{y=Y}}}})(K1);G1.exports=K1;var AI=G1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RI=$,bn=AI;function J(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Z1=new Set,Vc={};function po(e,t){Ra(e,t),Ra(e+"Capture",t)}function Ra(e,t){for(Vc[e]=t,e=0;e<t.length;e++)Z1.add(t[e])}var ls=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cm=Object.prototype.hasOwnProperty,NI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Fv={},zv={};function LI(e){return Cm.call(zv,e)?!0:Cm.call(Fv,e)?!1:NI.test(e)?zv[e]=!0:(Fv[e]=!0,!1)}function MI(e,t,n,i){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function OI(e,t,n,i){if(t===null||typeof t>"u"||MI(e,t,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function on(e,t,n,i,s,r,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=r,this.removeEmptyString=a}var ze={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ze[e]=new on(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ze[t]=new on(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ze[e]=new on(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ze[e]=new on(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ze[e]=new on(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ze[e]=new on(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ze[e]=new on(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ze[e]=new on(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ze[e]=new on(e,5,!1,e.toLowerCase(),null,!1,!1)});var h_=/[\-:]([a-z])/g;function d_(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(h_,d_);ze[t]=new on(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(h_,d_);ze[t]=new on(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(h_,d_);ze[t]=new on(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ze[e]=new on(e,1,!1,e.toLowerCase(),null,!1,!1)});ze.xlinkHref=new on("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ze[e]=new on(e,1,!1,e.toLowerCase(),null,!0,!0)});function f_(e,t,n,i){var s=ze.hasOwnProperty(t)?ze[t]:null;(s!==null?s.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(OI(t,n,s,i)&&(n=null),i||s===null?LI(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,i=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}var gs=RI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,kh=Symbol.for("react.element"),aa=Symbol.for("react.portal"),la=Symbol.for("react.fragment"),p_=Symbol.for("react.strict_mode"),Am=Symbol.for("react.profiler"),Q1=Symbol.for("react.provider"),Y1=Symbol.for("react.context"),m_=Symbol.for("react.forward_ref"),Rm=Symbol.for("react.suspense"),Nm=Symbol.for("react.suspense_list"),g_=Symbol.for("react.memo"),Ls=Symbol.for("react.lazy"),X1=Symbol.for("react.offscreen"),Bv=Symbol.iterator;function Hl(e){return e===null||typeof e!="object"?null:(e=Bv&&e[Bv]||e["@@iterator"],typeof e=="function"?e:null)}var re=Object.assign,Lp;function ic(e){if(Lp===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Lp=t&&t[1]||""}return`
`+Lp+e}var Mp=!1;function Op(e,t){if(!e||Mp)return"";Mp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(h){var i=h}Reflect.construct(e,[],t)}else{try{t.call()}catch(h){i=h}e.call(t.prototype)}else{try{throw Error()}catch(h){i=h}e()}}catch(h){if(h&&i&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),r=i.stack.split(`
`),a=s.length-1,l=r.length-1;1<=a&&0<=l&&s[a]!==r[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==r[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==r[l]){var u=`
`+s[a].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=a&&0<=l);break}}}finally{Mp=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ic(e):""}function DI(e){switch(e.tag){case 5:return ic(e.type);case 16:return ic("Lazy");case 13:return ic("Suspense");case 19:return ic("SuspenseList");case 0:case 2:case 15:return e=Op(e.type,!1),e;case 11:return e=Op(e.type.render,!1),e;case 1:return e=Op(e.type,!0),e;default:return""}}function Lm(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case la:return"Fragment";case aa:return"Portal";case Am:return"Profiler";case p_:return"StrictMode";case Rm:return"Suspense";case Nm:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Y1:return(e.displayName||"Context")+".Consumer";case Q1:return(e._context.displayName||"Context")+".Provider";case m_:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case g_:return t=e.displayName||null,t!==null?t:Lm(e.type)||"Memo";case Ls:t=e._payload,e=e._init;try{return Lm(e(t))}catch{}}return null}function jI(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Lm(t);case 8:return t===p_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function or(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function J1(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function VI(e){var t=J1(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,r=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){i=""+a,r.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ph(e){e._valueTracker||(e._valueTracker=VI(e))}function tb(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=J1(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function Ld(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Mm(e,t){var n=t.checked;return re({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Uv(e,t){var n=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;n=or(t.value!=null?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function eb(e,t){t=t.checked,t!=null&&f_(e,"checked",t,!1)}function Om(e,t){eb(e,t);var n=or(t.value),i=t.type;if(n!=null)i==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Dm(e,t.type,n):t.hasOwnProperty("defaultValue")&&Dm(e,t.type,or(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Hv(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Dm(e,t,n){(t!=="number"||Ld(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var sc=Array.isArray;function xa(e,t,n,i){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&i&&(e[n].defaultSelected=!0)}else{for(n=""+or(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,i&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function jm(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(J(91));return re({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Wv(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(J(92));if(sc(n)){if(1<n.length)throw Error(J(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:or(n)}}function nb(e,t){var n=or(t.value),i=or(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),i!=null&&(e.defaultValue=""+i)}function $v(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ib(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vm(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ib(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ih,sb=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,i,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,i,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ih=Ih||document.createElement("div"),Ih.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ih.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Fc(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var gc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},FI=["Webkit","ms","Moz","O"];Object.keys(gc).forEach(function(e){FI.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),gc[t]=gc[e]})});function rb(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||gc.hasOwnProperty(e)&&gc[e]?(""+t).trim():t+"px"}function ob(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var i=n.indexOf("--")===0,s=rb(n,t[n],i);n==="float"&&(n="cssFloat"),i?e.setProperty(n,s):e[n]=s}}var zI=re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Fm(e,t){if(t){if(zI[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(J(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(J(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(J(61))}if(t.style!=null&&typeof t.style!="object")throw Error(J(62))}}function zm(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bm=null;function __(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Um=null,wa=null,ba=null;function qv(e){if(e=Tu(e)){if(typeof Um!="function")throw Error(J(280));var t=e.stateNode;t&&(t=Hf(t),Um(e.stateNode,e.type,t))}}function ab(e){wa?ba?ba.push(e):ba=[e]:wa=e}function lb(){if(wa){var e=wa,t=ba;if(ba=wa=null,qv(e),t)for(e=0;e<t.length;e++)qv(t[e])}}function cb(e,t){return e(t)}function ub(){}var Dp=!1;function hb(e,t,n){if(Dp)return e(t,n);Dp=!0;try{return cb(e,t,n)}finally{Dp=!1,(wa!==null||ba!==null)&&(ub(),lb())}}function zc(e,t){var n=e.stateNode;if(n===null)return null;var i=Hf(n);if(i===null)return null;n=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break t;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(J(231,t,typeof n));return n}var Hm=!1;if(ls)try{var Wl={};Object.defineProperty(Wl,"passive",{get:function(){Hm=!0}}),window.addEventListener("test",Wl,Wl),window.removeEventListener("test",Wl,Wl)}catch{Hm=!1}function BI(e,t,n,i,s,r,a,l,u){var h=Array.prototype.slice.call(arguments,3);try{t.apply(n,h)}catch(p){this.onError(p)}}var _c=!1,Md=null,Od=!1,Wm=null,UI={onError:function(e){_c=!0,Md=e}};function HI(e,t,n,i,s,r,a,l,u){_c=!1,Md=null,BI.apply(UI,arguments)}function WI(e,t,n,i,s,r,a,l,u){if(HI.apply(this,arguments),_c){if(_c){var h=Md;_c=!1,Md=null}else throw Error(J(198));Od||(Od=!0,Wm=h)}}function mo(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function db(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Gv(e){if(mo(e)!==e)throw Error(J(188))}function $I(e){var t=e.alternate;if(!t){if(t=mo(e),t===null)throw Error(J(188));return t!==e?null:e}for(var n=e,i=t;;){var s=n.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===n)return Gv(s),e;if(r===i)return Gv(s),t;r=r.sibling}throw Error(J(188))}if(n.return!==i.return)n=s,i=r;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,i=r;break}if(l===i){a=!0,i=s,n=r;break}l=l.sibling}if(!a){for(l=r.child;l;){if(l===n){a=!0,n=r,i=s;break}if(l===i){a=!0,i=r,n=s;break}l=l.sibling}if(!a)throw Error(J(189))}}if(n.alternate!==i)throw Error(J(190))}if(n.tag!==3)throw Error(J(188));return n.stateNode.current===n?e:t}function fb(e){return e=$I(e),e!==null?pb(e):null}function pb(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=pb(e);if(t!==null)return t;e=e.sibling}return null}var mb=bn.unstable_scheduleCallback,Kv=bn.unstable_cancelCallback,qI=bn.unstable_shouldYield,GI=bn.unstable_requestPaint,fe=bn.unstable_now,KI=bn.unstable_getCurrentPriorityLevel,y_=bn.unstable_ImmediatePriority,gb=bn.unstable_UserBlockingPriority,Dd=bn.unstable_NormalPriority,ZI=bn.unstable_LowPriority,_b=bn.unstable_IdlePriority,Ff=null,Ti=null;function QI(e){if(Ti&&typeof Ti.onCommitFiberRoot=="function")try{Ti.onCommitFiberRoot(Ff,e,void 0,(e.current.flags&128)===128)}catch{}}var oi=Math.clz32?Math.clz32:JI,YI=Math.log,XI=Math.LN2;function JI(e){return e>>>=0,e===0?32:31-(YI(e)/XI|0)|0}var Ch=64,Ah=4194304;function rc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function jd(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,s=e.suspendedLanes,r=e.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?i=rc(l):(r&=a,r!==0&&(i=rc(r)))}else a=n&~s,a!==0?i=rc(a):r!==0&&(i=rc(r));if(i===0)return 0;if(t!==0&&t!==i&&!(t&s)&&(s=i&-i,r=t&-t,s>=r||s===16&&(r&4194240)!==0))return t;if(i&4&&(i|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)n=31-oi(t),s=1<<n,i|=e[n],t&=~s;return i}function tC(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function eC(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,s=e.expirationTimes,r=e.pendingLanes;0<r;){var a=31-oi(r),l=1<<a,u=s[a];u===-1?(!(l&n)||l&i)&&(s[a]=tC(l,t)):u<=t&&(e.expiredLanes|=l),r&=~l}}function $m(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function yb(){var e=Ch;return Ch<<=1,!(Ch&4194240)&&(Ch=64),e}function jp(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function wu(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-oi(t),e[t]=n}function nC(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-oi(n),r=1<<s;t[s]=0,i[s]=-1,e[s]=-1,n&=~r}}function v_(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-oi(n),s=1<<i;s&t|e[i]&t&&(e[i]|=t),n&=~s}}var Ut=0;function vb(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var xb,x_,wb,bb,Tb,qm=!1,Rh=[],Gs=null,Ks=null,Zs=null,Bc=new Map,Uc=new Map,Ds=[],iC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zv(e,t){switch(e){case"focusin":case"focusout":Gs=null;break;case"dragenter":case"dragleave":Ks=null;break;case"mouseover":case"mouseout":Zs=null;break;case"pointerover":case"pointerout":Bc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uc.delete(t.pointerId)}}function $l(e,t,n,i,s,r){return e===null||e.nativeEvent!==r?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},t!==null&&(t=Tu(t),t!==null&&x_(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function sC(e,t,n,i,s){switch(t){case"focusin":return Gs=$l(Gs,e,t,n,i,s),!0;case"dragenter":return Ks=$l(Ks,e,t,n,i,s),!0;case"mouseover":return Zs=$l(Zs,e,t,n,i,s),!0;case"pointerover":var r=s.pointerId;return Bc.set(r,$l(Bc.get(r)||null,e,t,n,i,s)),!0;case"gotpointercapture":return r=s.pointerId,Uc.set(r,$l(Uc.get(r)||null,e,t,n,i,s)),!0}return!1}function Eb(e){var t=Wr(e.target);if(t!==null){var n=mo(t);if(n!==null){if(t=n.tag,t===13){if(t=db(n),t!==null){e.blockedOn=t,Tb(e.priority,function(){wb(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function dd(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Gm(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);Bm=i,n.target.dispatchEvent(i),Bm=null}else return t=Tu(n),t!==null&&x_(t),e.blockedOn=n,!1;t.shift()}return!0}function Qv(e,t,n){dd(e)&&n.delete(t)}function rC(){qm=!1,Gs!==null&&dd(Gs)&&(Gs=null),Ks!==null&&dd(Ks)&&(Ks=null),Zs!==null&&dd(Zs)&&(Zs=null),Bc.forEach(Qv),Uc.forEach(Qv)}function ql(e,t){e.blockedOn===t&&(e.blockedOn=null,qm||(qm=!0,bn.unstable_scheduleCallback(bn.unstable_NormalPriority,rC)))}function Hc(e){function t(s){return ql(s,e)}if(0<Rh.length){ql(Rh[0],e);for(var n=1;n<Rh.length;n++){var i=Rh[n];i.blockedOn===e&&(i.blockedOn=null)}}for(Gs!==null&&ql(Gs,e),Ks!==null&&ql(Ks,e),Zs!==null&&ql(Zs,e),Bc.forEach(t),Uc.forEach(t),n=0;n<Ds.length;n++)i=Ds[n],i.blockedOn===e&&(i.blockedOn=null);for(;0<Ds.length&&(n=Ds[0],n.blockedOn===null);)Eb(n),n.blockedOn===null&&Ds.shift()}var Ta=gs.ReactCurrentBatchConfig,Vd=!0;function oC(e,t,n,i){var s=Ut,r=Ta.transition;Ta.transition=null;try{Ut=1,w_(e,t,n,i)}finally{Ut=s,Ta.transition=r}}function aC(e,t,n,i){var s=Ut,r=Ta.transition;Ta.transition=null;try{Ut=4,w_(e,t,n,i)}finally{Ut=s,Ta.transition=r}}function w_(e,t,n,i){if(Vd){var s=Gm(e,t,n,i);if(s===null)Gp(e,t,i,Fd,n),Zv(e,i);else if(sC(s,e,t,n,i))i.stopPropagation();else if(Zv(e,i),t&4&&-1<iC.indexOf(e)){for(;s!==null;){var r=Tu(s);if(r!==null&&xb(r),r=Gm(e,t,n,i),r===null&&Gp(e,t,i,Fd,n),r===s)break;s=r}s!==null&&i.stopPropagation()}else Gp(e,t,i,null,n)}}var Fd=null;function Gm(e,t,n,i){if(Fd=null,e=__(i),e=Wr(e),e!==null)if(t=mo(e),t===null)e=null;else if(n=t.tag,n===13){if(e=db(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Fd=e,null}function Sb(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(KI()){case y_:return 1;case gb:return 4;case Dd:case ZI:return 16;case _b:return 536870912;default:return 16}default:return 16}}var Us=null,b_=null,fd=null;function kb(){if(fd)return fd;var e,t=b_,n=t.length,i,s="value"in Us?Us.value:Us.textContent,r=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(i=1;i<=a&&t[n-i]===s[r-i];i++);return fd=s.slice(e,1<i?1-i:void 0)}function pd(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Nh(){return!0}function Yv(){return!1}function En(e){function t(n,i,s,r,a){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(r):r[l]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Nh:Yv,this.isPropagationStopped=Yv,this}return re(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Nh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Nh)},persist:function(){},isPersistent:Nh}),t}var Xa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},T_=En(Xa),bu=re({},Xa,{view:0,detail:0}),lC=En(bu),Vp,Fp,Gl,zf=re({},bu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:E_,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Gl&&(Gl&&e.type==="mousemove"?(Vp=e.screenX-Gl.screenX,Fp=e.screenY-Gl.screenY):Fp=Vp=0,Gl=e),Vp)},movementY:function(e){return"movementY"in e?e.movementY:Fp}}),Xv=En(zf),cC=re({},zf,{dataTransfer:0}),uC=En(cC),hC=re({},bu,{relatedTarget:0}),zp=En(hC),dC=re({},Xa,{animationName:0,elapsedTime:0,pseudoElement:0}),fC=En(dC),pC=re({},Xa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),mC=En(pC),gC=re({},Xa,{data:0}),Jv=En(gC),_C={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xC(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=vC[e])?!!t[e]:!1}function E_(){return xC}var wC=re({},bu,{key:function(e){if(e.key){var t=_C[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=pd(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?yC[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:E_,charCode:function(e){return e.type==="keypress"?pd(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?pd(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),bC=En(wC),TC=re({},zf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),t0=En(TC),EC=re({},bu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:E_}),SC=En(EC),kC=re({},Xa,{propertyName:0,elapsedTime:0,pseudoElement:0}),PC=En(kC),IC=re({},zf,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),CC=En(IC),AC=[9,13,27,32],S_=ls&&"CompositionEvent"in window,yc=null;ls&&"documentMode"in document&&(yc=document.documentMode);var RC=ls&&"TextEvent"in window&&!yc,Pb=ls&&(!S_||yc&&8<yc&&11>=yc),e0=" ",n0=!1;function Ib(e,t){switch(e){case"keyup":return AC.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cb(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ca=!1;function NC(e,t){switch(e){case"compositionend":return Cb(t);case"keypress":return t.which!==32?null:(n0=!0,e0);case"textInput":return e=t.data,e===e0&&n0?null:e;default:return null}}function LC(e,t){if(ca)return e==="compositionend"||!S_&&Ib(e,t)?(e=kb(),fd=b_=Us=null,ca=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Pb&&t.locale!=="ko"?null:t.data;default:return null}}var MC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function i0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!MC[e.type]:t==="textarea"}function Ab(e,t,n,i){ab(i),t=zd(t,"onChange"),0<t.length&&(n=new T_("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var vc=null,Wc=null;function OC(e){Bb(e,0)}function Bf(e){var t=da(e);if(tb(t))return e}function DC(e,t){if(e==="change")return t}var Rb=!1;if(ls){var Bp;if(ls){var Up="oninput"in document;if(!Up){var s0=document.createElement("div");s0.setAttribute("oninput","return;"),Up=typeof s0.oninput=="function"}Bp=Up}else Bp=!1;Rb=Bp&&(!document.documentMode||9<document.documentMode)}function r0(){vc&&(vc.detachEvent("onpropertychange",Nb),Wc=vc=null)}function Nb(e){if(e.propertyName==="value"&&Bf(Wc)){var t=[];Ab(t,Wc,e,__(e)),hb(OC,t)}}function jC(e,t,n){e==="focusin"?(r0(),vc=t,Wc=n,vc.attachEvent("onpropertychange",Nb)):e==="focusout"&&r0()}function VC(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Bf(Wc)}function FC(e,t){if(e==="click")return Bf(t)}function zC(e,t){if(e==="input"||e==="change")return Bf(t)}function BC(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ui=typeof Object.is=="function"?Object.is:BC;function $c(e,t){if(ui(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!Cm.call(t,s)||!ui(e[s],t[s]))return!1}return!0}function o0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function a0(e,t){var n=o0(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=o0(n)}}function Lb(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Lb(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Mb(){for(var e=window,t=Ld();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ld(e.document)}return t}function k_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function UC(e){var t=Mb(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Lb(n.ownerDocument.documentElement,n)){if(i!==null&&k_(n)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,r=Math.min(i.start,s);i=i.end===void 0?r:Math.min(i.end,s),!e.extend&&r>i&&(s=i,i=r,r=s),s=a0(n,r);var a=a0(n,i);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),r>i?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var HC=ls&&"documentMode"in document&&11>=document.documentMode,ua=null,Km=null,xc=null,Zm=!1;function l0(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Zm||ua==null||ua!==Ld(i)||(i=ua,"selectionStart"in i&&k_(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),xc&&$c(xc,i)||(xc=i,i=zd(Km,"onSelect"),0<i.length&&(t=new T_("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=ua)))}function Lh(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ha={animationend:Lh("Animation","AnimationEnd"),animationiteration:Lh("Animation","AnimationIteration"),animationstart:Lh("Animation","AnimationStart"),transitionend:Lh("Transition","TransitionEnd")},Hp={},Ob={};ls&&(Ob=document.createElement("div").style,"AnimationEvent"in window||(delete ha.animationend.animation,delete ha.animationiteration.animation,delete ha.animationstart.animation),"TransitionEvent"in window||delete ha.transitionend.transition);function Uf(e){if(Hp[e])return Hp[e];if(!ha[e])return e;var t=ha[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Ob)return Hp[e]=t[n];return e}var Db=Uf("animationend"),jb=Uf("animationiteration"),Vb=Uf("animationstart"),Fb=Uf("transitionend"),zb=new Map,c0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fr(e,t){zb.set(e,t),po(t,[e])}for(var Wp=0;Wp<c0.length;Wp++){var $p=c0[Wp],WC=$p.toLowerCase(),$C=$p[0].toUpperCase()+$p.slice(1);fr(WC,"on"+$C)}fr(Db,"onAnimationEnd");fr(jb,"onAnimationIteration");fr(Vb,"onAnimationStart");fr("dblclick","onDoubleClick");fr("focusin","onFocus");fr("focusout","onBlur");fr(Fb,"onTransitionEnd");Ra("onMouseEnter",["mouseout","mouseover"]);Ra("onMouseLeave",["mouseout","mouseover"]);Ra("onPointerEnter",["pointerout","pointerover"]);Ra("onPointerLeave",["pointerout","pointerover"]);po("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));po("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));po("onBeforeInput",["compositionend","keypress","textInput","paste"]);po("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));po("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));po("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qC=new Set("cancel close invalid load scroll toggle".split(" ").concat(oc));function u0(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,WI(i,t,void 0,e),e.currentTarget=null}function Bb(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],s=i.event;i=i.listeners;t:{var r=void 0;if(t)for(var a=i.length-1;0<=a;a--){var l=i[a],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==r&&s.isPropagationStopped())break t;u0(s,l,h),r=u}else for(a=0;a<i.length;a++){if(l=i[a],u=l.instance,h=l.currentTarget,l=l.listener,u!==r&&s.isPropagationStopped())break t;u0(s,l,h),r=u}}}if(Od)throw e=Wm,Od=!1,Wm=null,e}function Zt(e,t){var n=t[tg];n===void 0&&(n=t[tg]=new Set);var i=e+"__bubble";n.has(i)||(Ub(t,e,2,!1),n.add(i))}function qp(e,t,n){var i=0;t&&(i|=4),Ub(n,e,i,t)}var Mh="_reactListening"+Math.random().toString(36).slice(2);function qc(e){if(!e[Mh]){e[Mh]=!0,Z1.forEach(function(n){n!=="selectionchange"&&(qC.has(n)||qp(n,!1,e),qp(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Mh]||(t[Mh]=!0,qp("selectionchange",!1,t))}}function Ub(e,t,n,i){switch(Sb(t)){case 1:var s=oC;break;case 4:s=aC;break;default:s=w_}n=s.bind(null,t,n,e),s=void 0,!Hm||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),i?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Gp(e,t,n,i,s){var r=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=i.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;l!==null;){if(a=Wr(l),a===null)return;if(u=a.tag,u===5||u===6){i=r=a;continue t}l=l.parentNode}}i=i.return}hb(function(){var h=r,p=__(n),_=[];t:{var y=zb.get(e);if(y!==void 0){var w=T_,E=e;switch(e){case"keypress":if(pd(n)===0)break t;case"keydown":case"keyup":w=bC;break;case"focusin":E="focus",w=zp;break;case"focusout":E="blur",w=zp;break;case"beforeblur":case"afterblur":w=zp;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=Xv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=uC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=SC;break;case Db:case jb:case Vb:w=fC;break;case Fb:w=PC;break;case"scroll":w=lC;break;case"wheel":w=CC;break;case"copy":case"cut":case"paste":w=mC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=t0}var S=(t&4)!==0,k=!S&&e==="scroll",P=S?y!==null?y+"Capture":null:y;S=[];for(var I=h,R;I!==null;){R=I;var V=R.stateNode;if(R.tag===5&&V!==null&&(R=V,P!==null&&(V=zc(I,P),V!=null&&S.push(Gc(I,V,R)))),k)break;I=I.return}0<S.length&&(y=new w(y,E,null,n,p),_.push({event:y,listeners:S}))}}if(!(t&7)){t:{if(y=e==="mouseover"||e==="pointerover",w=e==="mouseout"||e==="pointerout",y&&n!==Bm&&(E=n.relatedTarget||n.fromElement)&&(Wr(E)||E[cs]))break t;if((w||y)&&(y=p.window===p?p:(y=p.ownerDocument)?y.defaultView||y.parentWindow:window,w?(E=n.relatedTarget||n.toElement,w=h,E=E?Wr(E):null,E!==null&&(k=mo(E),E!==k||E.tag!==5&&E.tag!==6)&&(E=null)):(w=null,E=h),w!==E)){if(S=Xv,V="onMouseLeave",P="onMouseEnter",I="mouse",(e==="pointerout"||e==="pointerover")&&(S=t0,V="onPointerLeave",P="onPointerEnter",I="pointer"),k=w==null?y:da(w),R=E==null?y:da(E),y=new S(V,I+"leave",w,n,p),y.target=k,y.relatedTarget=R,V=null,Wr(p)===h&&(S=new S(P,I+"enter",E,n,p),S.target=R,S.relatedTarget=k,V=S),k=V,w&&E)e:{for(S=w,P=E,I=0,R=S;R;R=ta(R))I++;for(R=0,V=P;V;V=ta(V))R++;for(;0<I-R;)S=ta(S),I--;for(;0<R-I;)P=ta(P),R--;for(;I--;){if(S===P||P!==null&&S===P.alternate)break e;S=ta(S),P=ta(P)}S=null}else S=null;w!==null&&h0(_,y,w,S,!1),E!==null&&k!==null&&h0(_,k,E,S,!0)}}t:{if(y=h?da(h):window,w=y.nodeName&&y.nodeName.toLowerCase(),w==="select"||w==="input"&&y.type==="file")var B=DC;else if(i0(y))if(Rb)B=zC;else{B=VC;var H=jC}else(w=y.nodeName)&&w.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(B=FC);if(B&&(B=B(e,h))){Ab(_,B,n,p);break t}H&&H(e,y,h),e==="focusout"&&(H=y._wrapperState)&&H.controlled&&y.type==="number"&&Dm(y,"number",y.value)}switch(H=h?da(h):window,e){case"focusin":(i0(H)||H.contentEditable==="true")&&(ua=H,Km=h,xc=null);break;case"focusout":xc=Km=ua=null;break;case"mousedown":Zm=!0;break;case"contextmenu":case"mouseup":case"dragend":Zm=!1,l0(_,n,p);break;case"selectionchange":if(HC)break;case"keydown":case"keyup":l0(_,n,p)}var N;if(S_)t:{switch(e){case"compositionstart":var b="onCompositionStart";break t;case"compositionend":b="onCompositionEnd";break t;case"compositionupdate":b="onCompositionUpdate";break t}b=void 0}else ca?Ib(e,n)&&(b="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(Pb&&n.locale!=="ko"&&(ca||b!=="onCompositionStart"?b==="onCompositionEnd"&&ca&&(N=kb()):(Us=p,b_="value"in Us?Us.value:Us.textContent,ca=!0)),H=zd(h,b),0<H.length&&(b=new Jv(b,e,null,n,p),_.push({event:b,listeners:H}),N?b.data=N:(N=Cb(n),N!==null&&(b.data=N)))),(N=RC?NC(e,n):LC(e,n))&&(h=zd(h,"onBeforeInput"),0<h.length&&(p=new Jv("onBeforeInput","beforeinput",null,n,p),_.push({event:p,listeners:h}),p.data=N))}Bb(_,t)})}function Gc(e,t,n){return{instance:e,listener:t,currentTarget:n}}function zd(e,t){for(var n=t+"Capture",i=[];e!==null;){var s=e,r=s.stateNode;s.tag===5&&r!==null&&(s=r,r=zc(e,n),r!=null&&i.unshift(Gc(e,r,s)),r=zc(e,t),r!=null&&i.push(Gc(e,r,s))),e=e.return}return i}function ta(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function h0(e,t,n,i,s){for(var r=t._reactName,a=[];n!==null&&n!==i;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===i)break;l.tag===5&&h!==null&&(l=h,s?(u=zc(n,r),u!=null&&a.unshift(Gc(n,u,l))):s||(u=zc(n,r),u!=null&&a.push(Gc(n,u,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var GC=/\r\n?/g,KC=/\u0000|\uFFFD/g;function d0(e){return(typeof e=="string"?e:""+e).replace(GC,`
`).replace(KC,"")}function Oh(e,t,n){if(t=d0(t),d0(e)!==t&&n)throw Error(J(425))}function Bd(){}var Qm=null,Ym=null;function Xm(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Jm=typeof setTimeout=="function"?setTimeout:void 0,ZC=typeof clearTimeout=="function"?clearTimeout:void 0,f0=typeof Promise=="function"?Promise:void 0,QC=typeof queueMicrotask=="function"?queueMicrotask:typeof f0<"u"?function(e){return f0.resolve(null).then(e).catch(YC)}:Jm;function YC(e){setTimeout(function(){throw e})}function Kp(e,t){var n=t,i=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(i===0){e.removeChild(s),Hc(t);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=s}while(n);Hc(t)}function Qs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function p0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ja=Math.random().toString(36).slice(2),bi="__reactFiber$"+Ja,Kc="__reactProps$"+Ja,cs="__reactContainer$"+Ja,tg="__reactEvents$"+Ja,XC="__reactListeners$"+Ja,JC="__reactHandles$"+Ja;function Wr(e){var t=e[bi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[cs]||n[bi]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=p0(e);e!==null;){if(n=e[bi])return n;e=p0(e)}return t}e=n,n=e.parentNode}return null}function Tu(e){return e=e[bi]||e[cs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function da(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(J(33))}function Hf(e){return e[Kc]||null}var eg=[],fa=-1;function pr(e){return{current:e}}function Yt(e){0>fa||(e.current=eg[fa],eg[fa]=null,fa--)}function Gt(e,t){fa++,eg[fa]=e.current,e.current=t}var ar={},Qe=pr(ar),fn=pr(!1),eo=ar;function Na(e,t){var n=e.type.contextTypes;if(!n)return ar;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var s={},r;for(r in n)s[r]=t[r];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function pn(e){return e=e.childContextTypes,e!=null}function Ud(){Yt(fn),Yt(Qe)}function m0(e,t,n){if(Qe.current!==ar)throw Error(J(168));Gt(Qe,t),Gt(fn,n)}function Hb(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var s in i)if(!(s in t))throw Error(J(108,jI(e)||"Unknown",s));return re({},n,i)}function Hd(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ar,eo=Qe.current,Gt(Qe,e),Gt(fn,fn.current),!0}function g0(e,t,n){var i=e.stateNode;if(!i)throw Error(J(169));n?(e=Hb(e,t,eo),i.__reactInternalMemoizedMergedChildContext=e,Yt(fn),Yt(Qe),Gt(Qe,e)):Yt(fn),Gt(fn,n)}var Qi=null,Wf=!1,Zp=!1;function Wb(e){Qi===null?Qi=[e]:Qi.push(e)}function t2(e){Wf=!0,Wb(e)}function mr(){if(!Zp&&Qi!==null){Zp=!0;var e=0,t=Ut;try{var n=Qi;for(Ut=1;e<n.length;e++){var i=n[e];do i=i(!0);while(i!==null)}Qi=null,Wf=!1}catch(s){throw Qi!==null&&(Qi=Qi.slice(e+1)),mb(y_,mr),s}finally{Ut=t,Zp=!1}}return null}var pa=[],ma=0,Wd=null,$d=0,On=[],Dn=0,no=null,Ji=1,ts="";function Vr(e,t){pa[ma++]=$d,pa[ma++]=Wd,Wd=e,$d=t}function $b(e,t,n){On[Dn++]=Ji,On[Dn++]=ts,On[Dn++]=no,no=e;var i=Ji;e=ts;var s=32-oi(i)-1;i&=~(1<<s),n+=1;var r=32-oi(t)+s;if(30<r){var a=s-s%5;r=(i&(1<<a)-1).toString(32),i>>=a,s-=a,Ji=1<<32-oi(t)+s|n<<s|i,ts=r+e}else Ji=1<<r|n<<s|i,ts=e}function P_(e){e.return!==null&&(Vr(e,1),$b(e,1,0))}function I_(e){for(;e===Wd;)Wd=pa[--ma],pa[ma]=null,$d=pa[--ma],pa[ma]=null;for(;e===no;)no=On[--Dn],On[Dn]=null,ts=On[--Dn],On[Dn]=null,Ji=On[--Dn],On[Dn]=null}var wn=null,xn=null,te=!1,ei=null;function qb(e,t){var n=Vn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function _0(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,wn=e,xn=Qs(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,wn=e,xn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=no!==null?{id:Ji,overflow:ts}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Vn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,wn=e,xn=null,!0):!1;default:return!1}}function ng(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ig(e){if(te){var t=xn;if(t){var n=t;if(!_0(e,t)){if(ng(e))throw Error(J(418));t=Qs(n.nextSibling);var i=wn;t&&_0(e,t)?qb(i,n):(e.flags=e.flags&-4097|2,te=!1,wn=e)}}else{if(ng(e))throw Error(J(418));e.flags=e.flags&-4097|2,te=!1,wn=e}}}function y0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;wn=e}function Dh(e){if(e!==wn)return!1;if(!te)return y0(e),te=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Xm(e.type,e.memoizedProps)),t&&(t=xn)){if(ng(e))throw Gb(),Error(J(418));for(;t;)qb(e,t),t=Qs(t.nextSibling)}if(y0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(J(317));t:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){xn=Qs(e.nextSibling);break t}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}xn=null}}else xn=wn?Qs(e.stateNode.nextSibling):null;return!0}function Gb(){for(var e=xn;e;)e=Qs(e.nextSibling)}function La(){xn=wn=null,te=!1}function C_(e){ei===null?ei=[e]:ei.push(e)}var e2=gs.ReactCurrentBatchConfig;function Kl(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(J(309));var i=n.stateNode}if(!i)throw Error(J(147,e));var s=i,r=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===r?t.ref:(t=function(a){var l=s.refs;a===null?delete l[r]:l[r]=a},t._stringRef=r,t)}if(typeof e!="string")throw Error(J(284));if(!n._owner)throw Error(J(290,e))}return e}function jh(e,t){throw e=Object.prototype.toString.call(t),Error(J(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function v0(e){var t=e._init;return t(e._payload)}function Kb(e){function t(P,I){if(e){var R=P.deletions;R===null?(P.deletions=[I],P.flags|=16):R.push(I)}}function n(P,I){if(!e)return null;for(;I!==null;)t(P,I),I=I.sibling;return null}function i(P,I){for(P=new Map;I!==null;)I.key!==null?P.set(I.key,I):P.set(I.index,I),I=I.sibling;return P}function s(P,I){return P=tr(P,I),P.index=0,P.sibling=null,P}function r(P,I,R){return P.index=R,e?(R=P.alternate,R!==null?(R=R.index,R<I?(P.flags|=2,I):R):(P.flags|=2,I)):(P.flags|=1048576,I)}function a(P){return e&&P.alternate===null&&(P.flags|=2),P}function l(P,I,R,V){return I===null||I.tag!==6?(I=nm(R,P.mode,V),I.return=P,I):(I=s(I,R),I.return=P,I)}function u(P,I,R,V){var B=R.type;return B===la?p(P,I,R.props.children,V,R.key):I!==null&&(I.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===Ls&&v0(B)===I.type)?(V=s(I,R.props),V.ref=Kl(P,I,R),V.return=P,V):(V=wd(R.type,R.key,R.props,null,P.mode,V),V.ref=Kl(P,I,R),V.return=P,V)}function h(P,I,R,V){return I===null||I.tag!==4||I.stateNode.containerInfo!==R.containerInfo||I.stateNode.implementation!==R.implementation?(I=im(R,P.mode,V),I.return=P,I):(I=s(I,R.children||[]),I.return=P,I)}function p(P,I,R,V,B){return I===null||I.tag!==7?(I=Xr(R,P.mode,V,B),I.return=P,I):(I=s(I,R),I.return=P,I)}function _(P,I,R){if(typeof I=="string"&&I!==""||typeof I=="number")return I=nm(""+I,P.mode,R),I.return=P,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case kh:return R=wd(I.type,I.key,I.props,null,P.mode,R),R.ref=Kl(P,null,I),R.return=P,R;case aa:return I=im(I,P.mode,R),I.return=P,I;case Ls:var V=I._init;return _(P,V(I._payload),R)}if(sc(I)||Hl(I))return I=Xr(I,P.mode,R,null),I.return=P,I;jh(P,I)}return null}function y(P,I,R,V){var B=I!==null?I.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return B!==null?null:l(P,I,""+R,V);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case kh:return R.key===B?u(P,I,R,V):null;case aa:return R.key===B?h(P,I,R,V):null;case Ls:return B=R._init,y(P,I,B(R._payload),V)}if(sc(R)||Hl(R))return B!==null?null:p(P,I,R,V,null);jh(P,R)}return null}function w(P,I,R,V,B){if(typeof V=="string"&&V!==""||typeof V=="number")return P=P.get(R)||null,l(I,P,""+V,B);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case kh:return P=P.get(V.key===null?R:V.key)||null,u(I,P,V,B);case aa:return P=P.get(V.key===null?R:V.key)||null,h(I,P,V,B);case Ls:var H=V._init;return w(P,I,R,H(V._payload),B)}if(sc(V)||Hl(V))return P=P.get(R)||null,p(I,P,V,B,null);jh(I,V)}return null}function E(P,I,R,V){for(var B=null,H=null,N=I,b=I=0,A=null;N!==null&&b<R.length;b++){N.index>b?(A=N,N=null):A=N.sibling;var O=y(P,N,R[b],V);if(O===null){N===null&&(N=A);break}e&&N&&O.alternate===null&&t(P,N),I=r(O,I,b),H===null?B=O:H.sibling=O,H=O,N=A}if(b===R.length)return n(P,N),te&&Vr(P,b),B;if(N===null){for(;b<R.length;b++)N=_(P,R[b],V),N!==null&&(I=r(N,I,b),H===null?B=N:H.sibling=N,H=N);return te&&Vr(P,b),B}for(N=i(P,N);b<R.length;b++)A=w(N,P,b,R[b],V),A!==null&&(e&&A.alternate!==null&&N.delete(A.key===null?b:A.key),I=r(A,I,b),H===null?B=A:H.sibling=A,H=A);return e&&N.forEach(function(D){return t(P,D)}),te&&Vr(P,b),B}function S(P,I,R,V){var B=Hl(R);if(typeof B!="function")throw Error(J(150));if(R=B.call(R),R==null)throw Error(J(151));for(var H=B=null,N=I,b=I=0,A=null,O=R.next();N!==null&&!O.done;b++,O=R.next()){N.index>b?(A=N,N=null):A=N.sibling;var D=y(P,N,O.value,V);if(D===null){N===null&&(N=A);break}e&&N&&D.alternate===null&&t(P,N),I=r(D,I,b),H===null?B=D:H.sibling=D,H=D,N=A}if(O.done)return n(P,N),te&&Vr(P,b),B;if(N===null){for(;!O.done;b++,O=R.next())O=_(P,O.value,V),O!==null&&(I=r(O,I,b),H===null?B=O:H.sibling=O,H=O);return te&&Vr(P,b),B}for(N=i(P,N);!O.done;b++,O=R.next())O=w(N,P,b,O.value,V),O!==null&&(e&&O.alternate!==null&&N.delete(O.key===null?b:O.key),I=r(O,I,b),H===null?B=O:H.sibling=O,H=O);return e&&N.forEach(function(z){return t(P,z)}),te&&Vr(P,b),B}function k(P,I,R,V){if(typeof R=="object"&&R!==null&&R.type===la&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case kh:t:{for(var B=R.key,H=I;H!==null;){if(H.key===B){if(B=R.type,B===la){if(H.tag===7){n(P,H.sibling),I=s(H,R.props.children),I.return=P,P=I;break t}}else if(H.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===Ls&&v0(B)===H.type){n(P,H.sibling),I=s(H,R.props),I.ref=Kl(P,H,R),I.return=P,P=I;break t}n(P,H);break}else t(P,H);H=H.sibling}R.type===la?(I=Xr(R.props.children,P.mode,V,R.key),I.return=P,P=I):(V=wd(R.type,R.key,R.props,null,P.mode,V),V.ref=Kl(P,I,R),V.return=P,P=V)}return a(P);case aa:t:{for(H=R.key;I!==null;){if(I.key===H)if(I.tag===4&&I.stateNode.containerInfo===R.containerInfo&&I.stateNode.implementation===R.implementation){n(P,I.sibling),I=s(I,R.children||[]),I.return=P,P=I;break t}else{n(P,I);break}else t(P,I);I=I.sibling}I=im(R,P.mode,V),I.return=P,P=I}return a(P);case Ls:return H=R._init,k(P,I,H(R._payload),V)}if(sc(R))return E(P,I,R,V);if(Hl(R))return S(P,I,R,V);jh(P,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,I!==null&&I.tag===6?(n(P,I.sibling),I=s(I,R),I.return=P,P=I):(n(P,I),I=nm(R,P.mode,V),I.return=P,P=I),a(P)):n(P,I)}return k}var Ma=Kb(!0),Zb=Kb(!1),qd=pr(null),Gd=null,ga=null,A_=null;function R_(){A_=ga=Gd=null}function N_(e){var t=qd.current;Yt(qd),e._currentValue=t}function sg(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Ea(e,t){Gd=e,A_=ga=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(dn=!0),e.firstContext=null)}function Hn(e){var t=e._currentValue;if(A_!==e)if(e={context:e,memoizedValue:t,next:null},ga===null){if(Gd===null)throw Error(J(308));ga=e,Gd.dependencies={lanes:0,firstContext:e}}else ga=ga.next=e;return t}var $r=null;function L_(e){$r===null?$r=[e]:$r.push(e)}function Qb(e,t,n,i){var s=t.interleaved;return s===null?(n.next=n,L_(t)):(n.next=s.next,s.next=n),t.interleaved=n,us(e,i)}function us(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ms=!1;function M_(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Yb(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function rs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ys(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,jt&2){var s=i.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),i.pending=t,us(e,n)}return s=i.interleaved,s===null?(t.next=t,L_(i)):(t.next=s.next,s.next=t),i.interleaved=t,us(e,n)}function md(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,v_(e,n)}}function x0(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};r===null?s=r=a:r=r.next=a,n=n.next}while(n!==null);r===null?s=r=t:r=r.next=t}else s=r=t;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,effects:i.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Kd(e,t,n,i){var s=e.updateQueue;Ms=!1;var r=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,h=u.next;u.next=null,a===null?r=h:a.next=h,a=u;var p=e.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==a&&(l===null?p.firstBaseUpdate=h:l.next=h,p.lastBaseUpdate=u))}if(r!==null){var _=s.baseState;a=0,p=h=u=null,l=r;do{var y=l.lane,w=l.eventTime;if((i&y)===y){p!==null&&(p=p.next={eventTime:w,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});t:{var E=e,S=l;switch(y=t,w=n,S.tag){case 1:if(E=S.payload,typeof E=="function"){_=E.call(w,_,y);break t}_=E;break t;case 3:E.flags=E.flags&-65537|128;case 0:if(E=S.payload,y=typeof E=="function"?E.call(w,_,y):E,y==null)break t;_=re({},_,y);break t;case 2:Ms=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,y=s.effects,y===null?s.effects=[l]:y.push(l))}else w={eventTime:w,lane:y,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(h=p=w,u=_):p=p.next=w,a|=y;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;y=l,l=y.next,y.next=null,s.lastBaseUpdate=y,s.shared.pending=null}}while(!0);if(p===null&&(u=_),s.baseState=u,s.firstBaseUpdate=h,s.lastBaseUpdate=p,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else r===null&&(s.shared.lanes=0);so|=a,e.lanes=a,e.memoizedState=_}}function w0(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],s=i.callback;if(s!==null){if(i.callback=null,i=n,typeof s!="function")throw Error(J(191,s));s.call(i)}}}var Eu={},Ei=pr(Eu),Zc=pr(Eu),Qc=pr(Eu);function qr(e){if(e===Eu)throw Error(J(174));return e}function O_(e,t){switch(Gt(Qc,t),Gt(Zc,e),Gt(Ei,Eu),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Vm(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Vm(t,e)}Yt(Ei),Gt(Ei,t)}function Oa(){Yt(Ei),Yt(Zc),Yt(Qc)}function Xb(e){qr(Qc.current);var t=qr(Ei.current),n=Vm(t,e.type);t!==n&&(Gt(Zc,e),Gt(Ei,n))}function D_(e){Zc.current===e&&(Yt(Ei),Yt(Zc))}var ie=pr(0);function Zd(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Qp=[];function j_(){for(var e=0;e<Qp.length;e++)Qp[e]._workInProgressVersionPrimary=null;Qp.length=0}var gd=gs.ReactCurrentDispatcher,Yp=gs.ReactCurrentBatchConfig,io=0,se=null,be=null,Re=null,Qd=!1,wc=!1,Yc=0,n2=0;function Ue(){throw Error(J(321))}function V_(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ui(e[n],t[n]))return!1;return!0}function F_(e,t,n,i,s,r){if(io=r,se=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,gd.current=e===null||e.memoizedState===null?o2:a2,e=n(i,s),wc){r=0;do{if(wc=!1,Yc=0,25<=r)throw Error(J(301));r+=1,Re=be=null,t.updateQueue=null,gd.current=l2,e=n(i,s)}while(wc)}if(gd.current=Yd,t=be!==null&&be.next!==null,io=0,Re=be=se=null,Qd=!1,t)throw Error(J(300));return e}function z_(){var e=Yc!==0;return Yc=0,e}function vi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Re===null?se.memoizedState=Re=e:Re=Re.next=e,Re}function Wn(){if(be===null){var e=se.alternate;e=e!==null?e.memoizedState:null}else e=be.next;var t=Re===null?se.memoizedState:Re.next;if(t!==null)Re=t,be=e;else{if(e===null)throw Error(J(310));be=e,e={memoizedState:be.memoizedState,baseState:be.baseState,baseQueue:be.baseQueue,queue:be.queue,next:null},Re===null?se.memoizedState=Re=e:Re=Re.next=e}return Re}function Xc(e,t){return typeof t=="function"?t(e):t}function Xp(e){var t=Wn(),n=t.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=e;var i=be,s=i.baseQueue,r=n.pending;if(r!==null){if(s!==null){var a=s.next;s.next=r.next,r.next=a}i.baseQueue=s=r,n.pending=null}if(s!==null){r=s.next,i=i.baseState;var l=a=null,u=null,h=r;do{var p=h.lane;if((io&p)===p)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),i=h.hasEagerState?h.eagerState:e(i,h.action);else{var _={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=_,a=i):u=u.next=_,se.lanes|=p,so|=p}h=h.next}while(h!==null&&h!==r);u===null?a=i:u.next=l,ui(i,t.memoizedState)||(dn=!0),t.memoizedState=i,t.baseState=a,t.baseQueue=u,n.lastRenderedState=i}if(e=n.interleaved,e!==null){s=e;do r=s.lane,se.lanes|=r,so|=r,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Jp(e){var t=Wn(),n=t.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=e;var i=n.dispatch,s=n.pending,r=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do r=e(r,a.action),a=a.next;while(a!==s);ui(r,t.memoizedState)||(dn=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),n.lastRenderedState=r}return[r,i]}function Jb(){}function tT(e,t){var n=se,i=Wn(),s=t(),r=!ui(i.memoizedState,s);if(r&&(i.memoizedState=s,dn=!0),i=i.queue,B_(iT.bind(null,n,i,e),[e]),i.getSnapshot!==t||r||Re!==null&&Re.memoizedState.tag&1){if(n.flags|=2048,Jc(9,nT.bind(null,n,i,s,t),void 0,null),Ne===null)throw Error(J(349));io&30||eT(n,t,s)}return s}function eT(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=se.updateQueue,t===null?(t={lastEffect:null,stores:null},se.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function nT(e,t,n,i){t.value=n,t.getSnapshot=i,sT(t)&&rT(e)}function iT(e,t,n){return n(function(){sT(t)&&rT(e)})}function sT(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ui(e,n)}catch{return!0}}function rT(e){var t=us(e,1);t!==null&&ai(t,e,1,-1)}function b0(e){var t=vi();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xc,lastRenderedState:e},t.queue=e,e=e.dispatch=r2.bind(null,se,e),[t.memoizedState,e]}function Jc(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},t=se.updateQueue,t===null?(t={lastEffect:null,stores:null},se.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e)),e}function oT(){return Wn().memoizedState}function _d(e,t,n,i){var s=vi();se.flags|=e,s.memoizedState=Jc(1|t,n,void 0,i===void 0?null:i)}function $f(e,t,n,i){var s=Wn();i=i===void 0?null:i;var r=void 0;if(be!==null){var a=be.memoizedState;if(r=a.destroy,i!==null&&V_(i,a.deps)){s.memoizedState=Jc(t,n,r,i);return}}se.flags|=e,s.memoizedState=Jc(1|t,n,r,i)}function T0(e,t){return _d(8390656,8,e,t)}function B_(e,t){return $f(2048,8,e,t)}function aT(e,t){return $f(4,2,e,t)}function lT(e,t){return $f(4,4,e,t)}function cT(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function uT(e,t,n){return n=n!=null?n.concat([e]):null,$f(4,4,cT.bind(null,t,e),n)}function U_(){}function hT(e,t){var n=Wn();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&V_(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function dT(e,t){var n=Wn();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&V_(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function fT(e,t,n){return io&21?(ui(n,t)||(n=yb(),se.lanes|=n,so|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,dn=!0),e.memoizedState=n)}function i2(e,t){var n=Ut;Ut=n!==0&&4>n?n:4,e(!0);var i=Yp.transition;Yp.transition={};try{e(!1),t()}finally{Ut=n,Yp.transition=i}}function pT(){return Wn().memoizedState}function s2(e,t,n){var i=Js(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},mT(e))gT(t,n);else if(n=Qb(e,t,n,i),n!==null){var s=nn();ai(n,e,i,s),_T(n,t,i)}}function r2(e,t,n){var i=Js(e),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(mT(e))gT(t,s);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var a=t.lastRenderedState,l=r(a,n);if(s.hasEagerState=!0,s.eagerState=l,ui(l,a)){var u=t.interleaved;u===null?(s.next=s,L_(t)):(s.next=u.next,u.next=s),t.interleaved=s;return}}catch{}finally{}n=Qb(e,t,s,i),n!==null&&(s=nn(),ai(n,e,i,s),_T(n,t,i))}}function mT(e){var t=e.alternate;return e===se||t!==null&&t===se}function gT(e,t){wc=Qd=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function _T(e,t,n){if(n&4194240){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,v_(e,n)}}var Yd={readContext:Hn,useCallback:Ue,useContext:Ue,useEffect:Ue,useImperativeHandle:Ue,useInsertionEffect:Ue,useLayoutEffect:Ue,useMemo:Ue,useReducer:Ue,useRef:Ue,useState:Ue,useDebugValue:Ue,useDeferredValue:Ue,useTransition:Ue,useMutableSource:Ue,useSyncExternalStore:Ue,useId:Ue,unstable_isNewReconciler:!1},o2={readContext:Hn,useCallback:function(e,t){return vi().memoizedState=[e,t===void 0?null:t],e},useContext:Hn,useEffect:T0,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,_d(4194308,4,cT.bind(null,t,e),n)},useLayoutEffect:function(e,t){return _d(4194308,4,e,t)},useInsertionEffect:function(e,t){return _d(4,2,e,t)},useMemo:function(e,t){var n=vi();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=vi();return t=n!==void 0?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=s2.bind(null,se,e),[i.memoizedState,e]},useRef:function(e){var t=vi();return e={current:e},t.memoizedState=e},useState:b0,useDebugValue:U_,useDeferredValue:function(e){return vi().memoizedState=e},useTransition:function(){var e=b0(!1),t=e[0];return e=i2.bind(null,e[1]),vi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=se,s=vi();if(te){if(n===void 0)throw Error(J(407));n=n()}else{if(n=t(),Ne===null)throw Error(J(349));io&30||eT(i,t,n)}s.memoizedState=n;var r={value:n,getSnapshot:t};return s.queue=r,T0(iT.bind(null,i,r,e),[e]),i.flags|=2048,Jc(9,nT.bind(null,i,r,n,t),void 0,null),n},useId:function(){var e=vi(),t=Ne.identifierPrefix;if(te){var n=ts,i=Ji;n=(i&~(1<<32-oi(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=Yc++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=n2++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},a2={readContext:Hn,useCallback:hT,useContext:Hn,useEffect:B_,useImperativeHandle:uT,useInsertionEffect:aT,useLayoutEffect:lT,useMemo:dT,useReducer:Xp,useRef:oT,useState:function(){return Xp(Xc)},useDebugValue:U_,useDeferredValue:function(e){var t=Wn();return fT(t,be.memoizedState,e)},useTransition:function(){var e=Xp(Xc)[0],t=Wn().memoizedState;return[e,t]},useMutableSource:Jb,useSyncExternalStore:tT,useId:pT,unstable_isNewReconciler:!1},l2={readContext:Hn,useCallback:hT,useContext:Hn,useEffect:B_,useImperativeHandle:uT,useInsertionEffect:aT,useLayoutEffect:lT,useMemo:dT,useReducer:Jp,useRef:oT,useState:function(){return Jp(Xc)},useDebugValue:U_,useDeferredValue:function(e){var t=Wn();return be===null?t.memoizedState=e:fT(t,be.memoizedState,e)},useTransition:function(){var e=Jp(Xc)[0],t=Wn().memoizedState;return[e,t]},useMutableSource:Jb,useSyncExternalStore:tT,useId:pT,unstable_isNewReconciler:!1};function Jn(e,t){if(e&&e.defaultProps){t=re({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function rg(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:re({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var qf={isMounted:function(e){return(e=e._reactInternals)?mo(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=nn(),s=Js(e),r=rs(i,s);r.payload=t,n!=null&&(r.callback=n),t=Ys(e,r,s),t!==null&&(ai(t,e,s,i),md(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=nn(),s=Js(e),r=rs(i,s);r.tag=1,r.payload=t,n!=null&&(r.callback=n),t=Ys(e,r,s),t!==null&&(ai(t,e,s,i),md(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=nn(),i=Js(e),s=rs(n,i);s.tag=2,t!=null&&(s.callback=t),t=Ys(e,s,i),t!==null&&(ai(t,e,i,n),md(t,e,i))}};function E0(e,t,n,i,s,r,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,r,a):t.prototype&&t.prototype.isPureReactComponent?!$c(n,i)||!$c(s,r):!0}function yT(e,t,n){var i=!1,s=ar,r=t.contextType;return typeof r=="object"&&r!==null?r=Hn(r):(s=pn(t)?eo:Qe.current,i=t.contextTypes,r=(i=i!=null)?Na(e,s):ar),t=new t(n,r),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=qf,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=r),t}function S0(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&qf.enqueueReplaceState(t,t.state,null)}function og(e,t,n,i){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},M_(e);var r=t.contextType;typeof r=="object"&&r!==null?s.context=Hn(r):(r=pn(t)?eo:Qe.current,s.context=Na(e,r)),s.state=e.memoizedState,r=t.getDerivedStateFromProps,typeof r=="function"&&(rg(e,t,r,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&qf.enqueueReplaceState(s,s.state,null),Kd(e,n,s,i),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Da(e,t){try{var n="",i=t;do n+=DI(i),i=i.return;while(i);var s=n}catch(r){s=`
Error generating stack: `+r.message+`
`+r.stack}return{value:e,source:t,stack:s,digest:null}}function tm(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function ag(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var c2=typeof WeakMap=="function"?WeakMap:Map;function vT(e,t,n){n=rs(-1,n),n.tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Jd||(Jd=!0,_g=i),ag(e,t)},n}function xT(e,t,n){n=rs(-1,n),n.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var s=t.value;n.payload=function(){return i(s)},n.callback=function(){ag(e,t)}}var r=e.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(n.callback=function(){ag(e,t),typeof i!="function"&&(Xs===null?Xs=new Set([this]):Xs.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function k0(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new c2;var s=new Set;i.set(t,s)}else s=i.get(t),s===void 0&&(s=new Set,i.set(t,s));s.has(n)||(s.add(n),e=T2.bind(null,e,t,n),t.then(e,e))}function P0(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function I0(e,t,n,i,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=rs(-1,1),t.tag=2,Ys(n,t,1))),n.lanes|=1),e)}var u2=gs.ReactCurrentOwner,dn=!1;function en(e,t,n,i){t.child=e===null?Zb(t,null,n,i):Ma(t,e.child,n,i)}function C0(e,t,n,i,s){n=n.render;var r=t.ref;return Ea(t,s),i=F_(e,t,n,i,r,s),n=z_(),e!==null&&!dn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,hs(e,t,s)):(te&&n&&P_(t),t.flags|=1,en(e,t,i,s),t.child)}function A0(e,t,n,i,s){if(e===null){var r=n.type;return typeof r=="function"&&!Q_(r)&&r.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=r,wT(e,t,r,i,s)):(e=wd(n.type,null,i,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(r=e.child,!(e.lanes&s)){var a=r.memoizedProps;if(n=n.compare,n=n!==null?n:$c,n(a,i)&&e.ref===t.ref)return hs(e,t,s)}return t.flags|=1,e=tr(r,i),e.ref=t.ref,e.return=t,t.child=e}function wT(e,t,n,i,s){if(e!==null){var r=e.memoizedProps;if($c(r,i)&&e.ref===t.ref)if(dn=!1,t.pendingProps=i=r,(e.lanes&s)!==0)e.flags&131072&&(dn=!0);else return t.lanes=e.lanes,hs(e,t,s)}return lg(e,t,n,i,s)}function bT(e,t,n){var i=t.pendingProps,s=i.children,r=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Gt(ya,vn),vn|=n;else{if(!(n&1073741824))return e=r!==null?r.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Gt(ya,vn),vn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=r!==null?r.baseLanes:n,Gt(ya,vn),vn|=i}else r!==null?(i=r.baseLanes|n,t.memoizedState=null):i=n,Gt(ya,vn),vn|=i;return en(e,t,s,n),t.child}function TT(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function lg(e,t,n,i,s){var r=pn(n)?eo:Qe.current;return r=Na(t,r),Ea(t,s),n=F_(e,t,n,i,r,s),i=z_(),e!==null&&!dn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,hs(e,t,s)):(te&&i&&P_(t),t.flags|=1,en(e,t,n,s),t.child)}function R0(e,t,n,i,s){if(pn(n)){var r=!0;Hd(t)}else r=!1;if(Ea(t,s),t.stateNode===null)yd(e,t),yT(t,n,i),og(t,n,i,s),i=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var u=a.context,h=n.contextType;typeof h=="object"&&h!==null?h=Hn(h):(h=pn(n)?eo:Qe.current,h=Na(t,h));var p=n.getDerivedStateFromProps,_=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function";_||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==i||u!==h)&&S0(t,a,i,h),Ms=!1;var y=t.memoizedState;a.state=y,Kd(t,i,a,s),u=t.memoizedState,l!==i||y!==u||fn.current||Ms?(typeof p=="function"&&(rg(t,n,p,i),u=t.memoizedState),(l=Ms||E0(t,n,l,i,y,u,h))?(_||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=u),a.props=i,a.state=u,a.context=h,i=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{a=t.stateNode,Yb(e,t),l=t.memoizedProps,h=t.type===t.elementType?l:Jn(t.type,l),a.props=h,_=t.pendingProps,y=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=Hn(u):(u=pn(n)?eo:Qe.current,u=Na(t,u));var w=n.getDerivedStateFromProps;(p=typeof w=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==_||y!==u)&&S0(t,a,i,u),Ms=!1,y=t.memoizedState,a.state=y,Kd(t,i,a,s);var E=t.memoizedState;l!==_||y!==E||fn.current||Ms?(typeof w=="function"&&(rg(t,n,w,i),E=t.memoizedState),(h=Ms||E0(t,n,h,i,y,E,u)||!1)?(p||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,E,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,E,u)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=E),a.props=i,a.state=E,a.context=u,i=h):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),i=!1)}return cg(e,t,n,i,r,s)}function cg(e,t,n,i,s,r){TT(e,t);var a=(t.flags&128)!==0;if(!i&&!a)return s&&g0(t,n,!1),hs(e,t,r);i=t.stateNode,u2.current=t;var l=a&&typeof n.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&a?(t.child=Ma(t,e.child,null,r),t.child=Ma(t,null,l,r)):en(e,t,l,r),t.memoizedState=i.state,s&&g0(t,n,!0),t.child}function ET(e){var t=e.stateNode;t.pendingContext?m0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&m0(e,t.context,!1),O_(e,t.containerInfo)}function N0(e,t,n,i,s){return La(),C_(s),t.flags|=256,en(e,t,n,i),t.child}var ug={dehydrated:null,treeContext:null,retryLane:0};function hg(e){return{baseLanes:e,cachePool:null,transitions:null}}function ST(e,t,n){var i=t.pendingProps,s=ie.current,r=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(r=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Gt(ie,s&1),e===null)return ig(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=i.children,e=i.fallback,r?(i=t.mode,r=t.child,a={mode:"hidden",children:a},!(i&1)&&r!==null?(r.childLanes=0,r.pendingProps=a):r=Zf(a,i,0,null),e=Xr(e,i,n,null),r.return=t,e.return=t,r.sibling=e,t.child=r,t.child.memoizedState=hg(n),t.memoizedState=ug,e):H_(t,a));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return h2(e,t,a,i,l,s,n);if(r){r=i.fallback,a=t.mode,s=e.child,l=s.sibling;var u={mode:"hidden",children:i.children};return!(a&1)&&t.child!==s?(i=t.child,i.childLanes=0,i.pendingProps=u,t.deletions=null):(i=tr(s,u),i.subtreeFlags=s.subtreeFlags&14680064),l!==null?r=tr(l,r):(r=Xr(r,a,n,null),r.flags|=2),r.return=t,i.return=t,i.sibling=r,t.child=i,i=r,r=t.child,a=e.child.memoizedState,a=a===null?hg(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},r.memoizedState=a,r.childLanes=e.childLanes&~n,t.memoizedState=ug,i}return r=e.child,e=r.sibling,i=tr(r,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=n),i.return=t,i.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function H_(e,t){return t=Zf({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Vh(e,t,n,i){return i!==null&&C_(i),Ma(t,e.child,null,n),e=H_(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function h2(e,t,n,i,s,r,a){if(n)return t.flags&256?(t.flags&=-257,i=tm(Error(J(422))),Vh(e,t,a,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(r=i.fallback,s=t.mode,i=Zf({mode:"visible",children:i.children},s,0,null),r=Xr(r,s,a,null),r.flags|=2,i.return=t,r.return=t,i.sibling=r,t.child=i,t.mode&1&&Ma(t,e.child,null,a),t.child.memoizedState=hg(a),t.memoizedState=ug,r);if(!(t.mode&1))return Vh(e,t,a,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var l=i.dgst;return i=l,r=Error(J(419)),i=tm(r,i,void 0),Vh(e,t,a,i)}if(l=(a&e.childLanes)!==0,dn||l){if(i=Ne,i!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|a)?0:s,s!==0&&s!==r.retryLane&&(r.retryLane=s,us(e,s),ai(i,e,s,-1))}return Z_(),i=tm(Error(J(421))),Vh(e,t,a,i)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=E2.bind(null,e),s._reactRetry=t,null):(e=r.treeContext,xn=Qs(s.nextSibling),wn=t,te=!0,ei=null,e!==null&&(On[Dn++]=Ji,On[Dn++]=ts,On[Dn++]=no,Ji=e.id,ts=e.overflow,no=t),t=H_(t,i.children),t.flags|=4096,t)}function L0(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),sg(e.return,t,n)}function em(e,t,n,i,s){var r=e.memoizedState;r===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=s)}function kT(e,t,n){var i=t.pendingProps,s=i.revealOrder,r=i.tail;if(en(e,t,i.children,n),i=ie.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&L0(e,n,t);else if(e.tag===19)L0(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Gt(ie,i),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Zd(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),em(t,!1,s,n,r);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Zd(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}em(t,!0,n,null,r);break;case"together":em(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function yd(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function hs(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),so|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(J(153));if(t.child!==null){for(e=t.child,n=tr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=tr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function d2(e,t,n){switch(t.tag){case 3:ET(t),La();break;case 5:Xb(t);break;case 1:pn(t.type)&&Hd(t);break;case 4:O_(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,s=t.memoizedProps.value;Gt(qd,i._currentValue),i._currentValue=s;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(Gt(ie,ie.current&1),t.flags|=128,null):n&t.child.childLanes?ST(e,t,n):(Gt(ie,ie.current&1),e=hs(e,t,n),e!==null?e.sibling:null);Gt(ie,ie.current&1);break;case 19:if(i=(n&t.childLanes)!==0,e.flags&128){if(i)return kT(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Gt(ie,ie.current),i)break;return null;case 22:case 23:return t.lanes=0,bT(e,t,n)}return hs(e,t,n)}var PT,dg,IT,CT;PT=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};dg=function(){};IT=function(e,t,n,i){var s=e.memoizedProps;if(s!==i){e=t.stateNode,qr(Ei.current);var r=null;switch(n){case"input":s=Mm(e,s),i=Mm(e,i),r=[];break;case"select":s=re({},s,{value:void 0}),i=re({},i,{value:void 0}),r=[];break;case"textarea":s=jm(e,s),i=jm(e,i),r=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=Bd)}Fm(n,i);var a;n=null;for(h in s)if(!i.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var l=s[h];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Vc.hasOwnProperty(h)?r||(r=[]):(r=r||[]).push(h,null));for(h in i){var u=i[h];if(l=s!=null?s[h]:void 0,i.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(r||(r=[]),r.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(r=r||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(r=r||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Vc.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&Zt("scroll",e),r||l===u||(r=[])):(r=r||[]).push(h,u))}n&&(r=r||[]).push("style",n);var h=r;(t.updateQueue=h)&&(t.flags|=4)}};CT=function(e,t,n,i){n!==i&&(t.flags|=4)};function Zl(e,t){if(!te)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function He(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function f2(e,t,n){var i=t.pendingProps;switch(I_(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return He(t),null;case 1:return pn(t.type)&&Ud(),He(t),null;case 3:return i=t.stateNode,Oa(),Yt(fn),Yt(Qe),j_(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Dh(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ei!==null&&(xg(ei),ei=null))),dg(e,t),He(t),null;case 5:D_(t);var s=qr(Qc.current);if(n=t.type,e!==null&&t.stateNode!=null)IT(e,t,n,i,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(J(166));return He(t),null}if(e=qr(Ei.current),Dh(t)){i=t.stateNode,n=t.type;var r=t.memoizedProps;switch(i[bi]=t,i[Kc]=r,e=(t.mode&1)!==0,n){case"dialog":Zt("cancel",i),Zt("close",i);break;case"iframe":case"object":case"embed":Zt("load",i);break;case"video":case"audio":for(s=0;s<oc.length;s++)Zt(oc[s],i);break;case"source":Zt("error",i);break;case"img":case"image":case"link":Zt("error",i),Zt("load",i);break;case"details":Zt("toggle",i);break;case"input":Uv(i,r),Zt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!r.multiple},Zt("invalid",i);break;case"textarea":Wv(i,r),Zt("invalid",i)}Fm(n,r),s=null;for(var a in r)if(r.hasOwnProperty(a)){var l=r[a];a==="children"?typeof l=="string"?i.textContent!==l&&(r.suppressHydrationWarning!==!0&&Oh(i.textContent,l,e),s=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(r.suppressHydrationWarning!==!0&&Oh(i.textContent,l,e),s=["children",""+l]):Vc.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Zt("scroll",i)}switch(n){case"input":Ph(i),Hv(i,r,!0);break;case"textarea":Ph(i),$v(i);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(i.onclick=Bd)}i=s,t.updateQueue=i,i!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ib(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=a.createElement(n,{is:i.is}):(e=a.createElement(n),n==="select"&&(a=e,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):e=a.createElementNS(e,n),e[bi]=t,e[Kc]=i,PT(e,t,!1,!1),t.stateNode=e;t:{switch(a=zm(n,i),n){case"dialog":Zt("cancel",e),Zt("close",e),s=i;break;case"iframe":case"object":case"embed":Zt("load",e),s=i;break;case"video":case"audio":for(s=0;s<oc.length;s++)Zt(oc[s],e);s=i;break;case"source":Zt("error",e),s=i;break;case"img":case"image":case"link":Zt("error",e),Zt("load",e),s=i;break;case"details":Zt("toggle",e),s=i;break;case"input":Uv(e,i),s=Mm(e,i),Zt("invalid",e);break;case"option":s=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},s=re({},i,{value:void 0}),Zt("invalid",e);break;case"textarea":Wv(e,i),s=jm(e,i),Zt("invalid",e);break;default:s=i}Fm(n,s),l=s;for(r in l)if(l.hasOwnProperty(r)){var u=l[r];r==="style"?ob(e,u):r==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&sb(e,u)):r==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Fc(e,u):typeof u=="number"&&Fc(e,""+u):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(Vc.hasOwnProperty(r)?u!=null&&r==="onScroll"&&Zt("scroll",e):u!=null&&f_(e,r,u,a))}switch(n){case"input":Ph(e),Hv(e,i,!1);break;case"textarea":Ph(e),$v(e);break;case"option":i.value!=null&&e.setAttribute("value",""+or(i.value));break;case"select":e.multiple=!!i.multiple,r=i.value,r!=null?xa(e,!!i.multiple,r,!1):i.defaultValue!=null&&xa(e,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Bd)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break t;case"img":i=!0;break t;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return He(t),null;case 6:if(e&&t.stateNode!=null)CT(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(J(166));if(n=qr(Qc.current),qr(Ei.current),Dh(t)){if(i=t.stateNode,n=t.memoizedProps,i[bi]=t,(r=i.nodeValue!==n)&&(e=wn,e!==null))switch(e.tag){case 3:Oh(i.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Oh(i.nodeValue,n,(e.mode&1)!==0)}r&&(t.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[bi]=t,t.stateNode=i}return He(t),null;case 13:if(Yt(ie),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(te&&xn!==null&&t.mode&1&&!(t.flags&128))Gb(),La(),t.flags|=98560,r=!1;else if(r=Dh(t),i!==null&&i.dehydrated!==null){if(e===null){if(!r)throw Error(J(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(J(317));r[bi]=t}else La(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;He(t),r=!1}else ei!==null&&(xg(ei),ei=null),r=!0;if(!r)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||ie.current&1?Se===0&&(Se=3):Z_())),t.updateQueue!==null&&(t.flags|=4),He(t),null);case 4:return Oa(),dg(e,t),e===null&&qc(t.stateNode.containerInfo),He(t),null;case 10:return N_(t.type._context),He(t),null;case 17:return pn(t.type)&&Ud(),He(t),null;case 19:if(Yt(ie),r=t.memoizedState,r===null)return He(t),null;if(i=(t.flags&128)!==0,a=r.rendering,a===null)if(i)Zl(r,!1);else{if(Se!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Zd(e),a!==null){for(t.flags|=128,Zl(r,!1),i=a.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;n!==null;)r=n,e=i,r.flags&=14680066,a=r.alternate,a===null?(r.childLanes=0,r.lanes=e,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=a.childLanes,r.lanes=a.lanes,r.child=a.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=a.memoizedProps,r.memoizedState=a.memoizedState,r.updateQueue=a.updateQueue,r.type=a.type,e=a.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Gt(ie,ie.current&1|2),t.child}e=e.sibling}r.tail!==null&&fe()>ja&&(t.flags|=128,i=!0,Zl(r,!1),t.lanes=4194304)}else{if(!i)if(e=Zd(a),e!==null){if(t.flags|=128,i=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Zl(r,!0),r.tail===null&&r.tailMode==="hidden"&&!a.alternate&&!te)return He(t),null}else 2*fe()-r.renderingStartTime>ja&&n!==1073741824&&(t.flags|=128,i=!0,Zl(r,!1),t.lanes=4194304);r.isBackwards?(a.sibling=t.child,t.child=a):(n=r.last,n!==null?n.sibling=a:t.child=a,r.last=a)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=fe(),t.sibling=null,n=ie.current,Gt(ie,i?n&1|2:n&1),t):(He(t),null);case 22:case 23:return K_(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?vn&1073741824&&(He(t),t.subtreeFlags&6&&(t.flags|=8192)):He(t),null;case 24:return null;case 25:return null}throw Error(J(156,t.tag))}function p2(e,t){switch(I_(t),t.tag){case 1:return pn(t.type)&&Ud(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Oa(),Yt(fn),Yt(Qe),j_(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return D_(t),null;case 13:if(Yt(ie),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(J(340));La()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Yt(ie),null;case 4:return Oa(),null;case 10:return N_(t.type._context),null;case 22:case 23:return K_(),null;case 24:return null;default:return null}}var Fh=!1,Ge=!1,m2=typeof WeakSet=="function"?WeakSet:Set,nt=null;function _a(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){le(e,t,i)}else n.current=null}function fg(e,t,n){try{n()}catch(i){le(e,t,i)}}var M0=!1;function g2(e,t){if(Qm=Vd,e=Mb(),k_(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else t:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break t}var a=0,l=-1,u=-1,h=0,p=0,_=e,y=null;e:for(;;){for(var w;_!==n||s!==0&&_.nodeType!==3||(l=a+s),_!==r||i!==0&&_.nodeType!==3||(u=a+i),_.nodeType===3&&(a+=_.nodeValue.length),(w=_.firstChild)!==null;)y=_,_=w;for(;;){if(_===e)break e;if(y===n&&++h===s&&(l=a),y===r&&++p===i&&(u=a),(w=_.nextSibling)!==null)break;_=y,y=_.parentNode}_=w}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ym={focusedElem:e,selectionRange:n},Vd=!1,nt=t;nt!==null;)if(t=nt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,nt=e;else for(;nt!==null;){t=nt;try{var E=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var S=E.memoizedProps,k=E.memoizedState,P=t.stateNode,I=P.getSnapshotBeforeUpdate(t.elementType===t.type?S:Jn(t.type,S),k);P.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var R=t.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(V){le(t,t.return,V)}if(e=t.sibling,e!==null){e.return=t.return,nt=e;break}nt=t.return}return E=M0,M0=!1,E}function bc(e,t,n){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&e)===e){var r=s.destroy;s.destroy=void 0,r!==void 0&&fg(t,n,r)}s=s.next}while(s!==i)}}function Gf(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function pg(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function AT(e){var t=e.alternate;t!==null&&(e.alternate=null,AT(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[bi],delete t[Kc],delete t[tg],delete t[XC],delete t[JC])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function RT(e){return e.tag===5||e.tag===3||e.tag===4}function O0(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||RT(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function mg(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Bd));else if(i!==4&&(e=e.child,e!==null))for(mg(e,t,n),e=e.sibling;e!==null;)mg(e,t,n),e=e.sibling}function gg(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(gg(e,t,n),e=e.sibling;e!==null;)gg(e,t,n),e=e.sibling}var Oe=null,ti=!1;function Cs(e,t,n){for(n=n.child;n!==null;)NT(e,t,n),n=n.sibling}function NT(e,t,n){if(Ti&&typeof Ti.onCommitFiberUnmount=="function")try{Ti.onCommitFiberUnmount(Ff,n)}catch{}switch(n.tag){case 5:Ge||_a(n,t);case 6:var i=Oe,s=ti;Oe=null,Cs(e,t,n),Oe=i,ti=s,Oe!==null&&(ti?(e=Oe,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Oe.removeChild(n.stateNode));break;case 18:Oe!==null&&(ti?(e=Oe,n=n.stateNode,e.nodeType===8?Kp(e.parentNode,n):e.nodeType===1&&Kp(e,n),Hc(e)):Kp(Oe,n.stateNode));break;case 4:i=Oe,s=ti,Oe=n.stateNode.containerInfo,ti=!0,Cs(e,t,n),Oe=i,ti=s;break;case 0:case 11:case 14:case 15:if(!Ge&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var r=s,a=r.destroy;r=r.tag,a!==void 0&&(r&2||r&4)&&fg(n,t,a),s=s.next}while(s!==i)}Cs(e,t,n);break;case 1:if(!Ge&&(_a(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(l){le(n,t,l)}Cs(e,t,n);break;case 21:Cs(e,t,n);break;case 22:n.mode&1?(Ge=(i=Ge)||n.memoizedState!==null,Cs(e,t,n),Ge=i):Cs(e,t,n);break;default:Cs(e,t,n)}}function D0(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new m2),t.forEach(function(i){var s=S2.bind(null,e,i);n.has(i)||(n.add(i),i.then(s,s))})}}function Xn(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];try{var r=e,a=t,l=a;t:for(;l!==null;){switch(l.tag){case 5:Oe=l.stateNode,ti=!1;break t;case 3:Oe=l.stateNode.containerInfo,ti=!0;break t;case 4:Oe=l.stateNode.containerInfo,ti=!0;break t}l=l.return}if(Oe===null)throw Error(J(160));NT(r,a,s),Oe=null,ti=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(h){le(s,t,h)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)LT(t,e),t=t.sibling}function LT(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Xn(t,e),gi(e),i&4){try{bc(3,e,e.return),Gf(3,e)}catch(S){le(e,e.return,S)}try{bc(5,e,e.return)}catch(S){le(e,e.return,S)}}break;case 1:Xn(t,e),gi(e),i&512&&n!==null&&_a(n,n.return);break;case 5:if(Xn(t,e),gi(e),i&512&&n!==null&&_a(n,n.return),e.flags&32){var s=e.stateNode;try{Fc(s,"")}catch(S){le(e,e.return,S)}}if(i&4&&(s=e.stateNode,s!=null)){var r=e.memoizedProps,a=n!==null?n.memoizedProps:r,l=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{l==="input"&&r.type==="radio"&&r.name!=null&&eb(s,r),zm(l,a);var h=zm(l,r);for(a=0;a<u.length;a+=2){var p=u[a],_=u[a+1];p==="style"?ob(s,_):p==="dangerouslySetInnerHTML"?sb(s,_):p==="children"?Fc(s,_):f_(s,p,_,h)}switch(l){case"input":Om(s,r);break;case"textarea":nb(s,r);break;case"select":var y=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!r.multiple;var w=r.value;w!=null?xa(s,!!r.multiple,w,!1):y!==!!r.multiple&&(r.defaultValue!=null?xa(s,!!r.multiple,r.defaultValue,!0):xa(s,!!r.multiple,r.multiple?[]:"",!1))}s[Kc]=r}catch(S){le(e,e.return,S)}}break;case 6:if(Xn(t,e),gi(e),i&4){if(e.stateNode===null)throw Error(J(162));s=e.stateNode,r=e.memoizedProps;try{s.nodeValue=r}catch(S){le(e,e.return,S)}}break;case 3:if(Xn(t,e),gi(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Hc(t.containerInfo)}catch(S){le(e,e.return,S)}break;case 4:Xn(t,e),gi(e);break;case 13:Xn(t,e),gi(e),s=e.child,s.flags&8192&&(r=s.memoizedState!==null,s.stateNode.isHidden=r,!r||s.alternate!==null&&s.alternate.memoizedState!==null||(q_=fe())),i&4&&D0(e);break;case 22:if(p=n!==null&&n.memoizedState!==null,e.mode&1?(Ge=(h=Ge)||p,Xn(t,e),Ge=h):Xn(t,e),gi(e),i&8192){if(h=e.memoizedState!==null,(e.stateNode.isHidden=h)&&!p&&e.mode&1)for(nt=e,p=e.child;p!==null;){for(_=nt=p;nt!==null;){switch(y=nt,w=y.child,y.tag){case 0:case 11:case 14:case 15:bc(4,y,y.return);break;case 1:_a(y,y.return);var E=y.stateNode;if(typeof E.componentWillUnmount=="function"){i=y,n=y.return;try{t=i,E.props=t.memoizedProps,E.state=t.memoizedState,E.componentWillUnmount()}catch(S){le(i,n,S)}}break;case 5:_a(y,y.return);break;case 22:if(y.memoizedState!==null){V0(_);continue}}w!==null?(w.return=y,nt=w):V0(_)}p=p.sibling}t:for(p=null,_=e;;){if(_.tag===5){if(p===null){p=_;try{s=_.stateNode,h?(r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(l=_.stateNode,u=_.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=rb("display",a))}catch(S){le(e,e.return,S)}}}else if(_.tag===6){if(p===null)try{_.stateNode.nodeValue=h?"":_.memoizedProps}catch(S){le(e,e.return,S)}}else if((_.tag!==22&&_.tag!==23||_.memoizedState===null||_===e)&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===e)break t;for(;_.sibling===null;){if(_.return===null||_.return===e)break t;p===_&&(p=null),_=_.return}p===_&&(p=null),_.sibling.return=_.return,_=_.sibling}}break;case 19:Xn(t,e),gi(e),i&4&&D0(e);break;case 21:break;default:Xn(t,e),gi(e)}}function gi(e){var t=e.flags;if(t&2){try{t:{for(var n=e.return;n!==null;){if(RT(n)){var i=n;break t}n=n.return}throw Error(J(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(Fc(s,""),i.flags&=-33);var r=O0(e);gg(e,r,s);break;case 3:case 4:var a=i.stateNode.containerInfo,l=O0(e);mg(e,l,a);break;default:throw Error(J(161))}}catch(u){le(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function _2(e,t,n){nt=e,MT(e)}function MT(e,t,n){for(var i=(e.mode&1)!==0;nt!==null;){var s=nt,r=s.child;if(s.tag===22&&i){var a=s.memoizedState!==null||Fh;if(!a){var l=s.alternate,u=l!==null&&l.memoizedState!==null||Ge;l=Fh;var h=Ge;if(Fh=a,(Ge=u)&&!h)for(nt=s;nt!==null;)a=nt,u=a.child,a.tag===22&&a.memoizedState!==null?F0(s):u!==null?(u.return=a,nt=u):F0(s);for(;r!==null;)nt=r,MT(r),r=r.sibling;nt=s,Fh=l,Ge=h}j0(e)}else s.subtreeFlags&8772&&r!==null?(r.return=s,nt=r):j0(e)}}function j0(e){for(;nt!==null;){var t=nt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ge||Gf(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!Ge)if(n===null)i.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Jn(t.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var r=t.updateQueue;r!==null&&w0(t,r,i);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}w0(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var h=t.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var _=p.dehydrated;_!==null&&Hc(_)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}Ge||t.flags&512&&pg(t)}catch(y){le(t,t.return,y)}}if(t===e){nt=null;break}if(n=t.sibling,n!==null){n.return=t.return,nt=n;break}nt=t.return}}function V0(e){for(;nt!==null;){var t=nt;if(t===e){nt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,nt=n;break}nt=t.return}}function F0(e){for(;nt!==null;){var t=nt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Gf(4,t)}catch(u){le(t,n,u)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var s=t.return;try{i.componentDidMount()}catch(u){le(t,s,u)}}var r=t.return;try{pg(t)}catch(u){le(t,r,u)}break;case 5:var a=t.return;try{pg(t)}catch(u){le(t,a,u)}}}catch(u){le(t,t.return,u)}if(t===e){nt=null;break}var l=t.sibling;if(l!==null){l.return=t.return,nt=l;break}nt=t.return}}var y2=Math.ceil,Xd=gs.ReactCurrentDispatcher,W_=gs.ReactCurrentOwner,Bn=gs.ReactCurrentBatchConfig,jt=0,Ne=null,xe=null,Ve=0,vn=0,ya=pr(0),Se=0,tu=null,so=0,Kf=0,$_=0,Tc=null,un=null,q_=0,ja=1/0,Zi=null,Jd=!1,_g=null,Xs=null,zh=!1,Hs=null,tf=0,Ec=0,yg=null,vd=-1,xd=0;function nn(){return jt&6?fe():vd!==-1?vd:vd=fe()}function Js(e){return e.mode&1?jt&2&&Ve!==0?Ve&-Ve:e2.transition!==null?(xd===0&&(xd=yb()),xd):(e=Ut,e!==0||(e=window.event,e=e===void 0?16:Sb(e.type)),e):1}function ai(e,t,n,i){if(50<Ec)throw Ec=0,yg=null,Error(J(185));wu(e,n,i),(!(jt&2)||e!==Ne)&&(e===Ne&&(!(jt&2)&&(Kf|=n),Se===4&&js(e,Ve)),mn(e,i),n===1&&jt===0&&!(t.mode&1)&&(ja=fe()+500,Wf&&mr()))}function mn(e,t){var n=e.callbackNode;eC(e,t);var i=jd(e,e===Ne?Ve:0);if(i===0)n!==null&&Kv(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(n!=null&&Kv(n),t===1)e.tag===0?t2(z0.bind(null,e)):Wb(z0.bind(null,e)),QC(function(){!(jt&6)&&mr()}),n=null;else{switch(vb(i)){case 1:n=y_;break;case 4:n=gb;break;case 16:n=Dd;break;case 536870912:n=_b;break;default:n=Dd}n=UT(n,OT.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function OT(e,t){if(vd=-1,xd=0,jt&6)throw Error(J(327));var n=e.callbackNode;if(Sa()&&e.callbackNode!==n)return null;var i=jd(e,e===Ne?Ve:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=ef(e,i);else{t=i;var s=jt;jt|=2;var r=jT();(Ne!==e||Ve!==t)&&(Zi=null,ja=fe()+500,Yr(e,t));do try{w2();break}catch(l){DT(e,l)}while(!0);R_(),Xd.current=r,jt=s,xe!==null?t=0:(Ne=null,Ve=0,t=Se)}if(t!==0){if(t===2&&(s=$m(e),s!==0&&(i=s,t=vg(e,s))),t===1)throw n=tu,Yr(e,0),js(e,i),mn(e,fe()),n;if(t===6)js(e,i);else{if(s=e.current.alternate,!(i&30)&&!v2(s)&&(t=ef(e,i),t===2&&(r=$m(e),r!==0&&(i=r,t=vg(e,r))),t===1))throw n=tu,Yr(e,0),js(e,i),mn(e,fe()),n;switch(e.finishedWork=s,e.finishedLanes=i,t){case 0:case 1:throw Error(J(345));case 2:Fr(e,un,Zi);break;case 3:if(js(e,i),(i&130023424)===i&&(t=q_+500-fe(),10<t)){if(jd(e,0)!==0)break;if(s=e.suspendedLanes,(s&i)!==i){nn(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Jm(Fr.bind(null,e,un,Zi),t);break}Fr(e,un,Zi);break;case 4:if(js(e,i),(i&4194240)===i)break;for(t=e.eventTimes,s=-1;0<i;){var a=31-oi(i);r=1<<a,a=t[a],a>s&&(s=a),i&=~r}if(i=s,i=fe()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*y2(i/1960))-i,10<i){e.timeoutHandle=Jm(Fr.bind(null,e,un,Zi),i);break}Fr(e,un,Zi);break;case 5:Fr(e,un,Zi);break;default:throw Error(J(329))}}}return mn(e,fe()),e.callbackNode===n?OT.bind(null,e):null}function vg(e,t){var n=Tc;return e.current.memoizedState.isDehydrated&&(Yr(e,t).flags|=256),e=ef(e,t),e!==2&&(t=un,un=n,t!==null&&xg(t)),e}function xg(e){un===null?un=e:un.push.apply(un,e)}function v2(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var s=n[i],r=s.getSnapshot;s=s.value;try{if(!ui(r(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function js(e,t){for(t&=~$_,t&=~Kf,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-oi(t),i=1<<n;e[n]=-1,t&=~i}}function z0(e){if(jt&6)throw Error(J(327));Sa();var t=jd(e,0);if(!(t&1))return mn(e,fe()),null;var n=ef(e,t);if(e.tag!==0&&n===2){var i=$m(e);i!==0&&(t=i,n=vg(e,i))}if(n===1)throw n=tu,Yr(e,0),js(e,t),mn(e,fe()),n;if(n===6)throw Error(J(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Fr(e,un,Zi),mn(e,fe()),null}function G_(e,t){var n=jt;jt|=1;try{return e(t)}finally{jt=n,jt===0&&(ja=fe()+500,Wf&&mr())}}function ro(e){Hs!==null&&Hs.tag===0&&!(jt&6)&&Sa();var t=jt;jt|=1;var n=Bn.transition,i=Ut;try{if(Bn.transition=null,Ut=1,e)return e()}finally{Ut=i,Bn.transition=n,jt=t,!(jt&6)&&mr()}}function K_(){vn=ya.current,Yt(ya)}function Yr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,ZC(n)),xe!==null)for(n=xe.return;n!==null;){var i=n;switch(I_(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Ud();break;case 3:Oa(),Yt(fn),Yt(Qe),j_();break;case 5:D_(i);break;case 4:Oa();break;case 13:Yt(ie);break;case 19:Yt(ie);break;case 10:N_(i.type._context);break;case 22:case 23:K_()}n=n.return}if(Ne=e,xe=e=tr(e.current,null),Ve=vn=t,Se=0,tu=null,$_=Kf=so=0,un=Tc=null,$r!==null){for(t=0;t<$r.length;t++)if(n=$r[t],i=n.interleaved,i!==null){n.interleaved=null;var s=i.next,r=n.pending;if(r!==null){var a=r.next;r.next=s,i.next=a}n.pending=i}$r=null}return e}function DT(e,t){do{var n=xe;try{if(R_(),gd.current=Yd,Qd){for(var i=se.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Qd=!1}if(io=0,Re=be=se=null,wc=!1,Yc=0,W_.current=null,n===null||n.return===null){Se=1,tu=t,xe=null;break}t:{var r=e,a=n.return,l=n,u=t;if(t=Ve,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,p=l,_=p.tag;if(!(p.mode&1)&&(_===0||_===11||_===15)){var y=p.alternate;y?(p.updateQueue=y.updateQueue,p.memoizedState=y.memoizedState,p.lanes=y.lanes):(p.updateQueue=null,p.memoizedState=null)}var w=P0(a);if(w!==null){w.flags&=-257,I0(w,a,l,r,t),w.mode&1&&k0(r,h,t),t=w,u=h;var E=t.updateQueue;if(E===null){var S=new Set;S.add(u),t.updateQueue=S}else E.add(u);break t}else{if(!(t&1)){k0(r,h,t),Z_();break t}u=Error(J(426))}}else if(te&&l.mode&1){var k=P0(a);if(k!==null){!(k.flags&65536)&&(k.flags|=256),I0(k,a,l,r,t),C_(Da(u,l));break t}}r=u=Da(u,l),Se!==4&&(Se=2),Tc===null?Tc=[r]:Tc.push(r),r=a;do{switch(r.tag){case 3:r.flags|=65536,t&=-t,r.lanes|=t;var P=vT(r,u,t);x0(r,P);break t;case 1:l=u;var I=r.type,R=r.stateNode;if(!(r.flags&128)&&(typeof I.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(Xs===null||!Xs.has(R)))){r.flags|=65536,t&=-t,r.lanes|=t;var V=xT(r,l,t);x0(r,V);break t}}r=r.return}while(r!==null)}FT(n)}catch(B){t=B,xe===n&&n!==null&&(xe=n=n.return);continue}break}while(!0)}function jT(){var e=Xd.current;return Xd.current=Yd,e===null?Yd:e}function Z_(){(Se===0||Se===3||Se===2)&&(Se=4),Ne===null||!(so&268435455)&&!(Kf&268435455)||js(Ne,Ve)}function ef(e,t){var n=jt;jt|=2;var i=jT();(Ne!==e||Ve!==t)&&(Zi=null,Yr(e,t));do try{x2();break}catch(s){DT(e,s)}while(!0);if(R_(),jt=n,Xd.current=i,xe!==null)throw Error(J(261));return Ne=null,Ve=0,Se}function x2(){for(;xe!==null;)VT(xe)}function w2(){for(;xe!==null&&!qI();)VT(xe)}function VT(e){var t=BT(e.alternate,e,vn);e.memoizedProps=e.pendingProps,t===null?FT(e):xe=t,W_.current=null}function FT(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=p2(n,t),n!==null){n.flags&=32767,xe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Se=6,xe=null;return}}else if(n=f2(n,t,vn),n!==null){xe=n;return}if(t=t.sibling,t!==null){xe=t;return}xe=t=e}while(t!==null);Se===0&&(Se=5)}function Fr(e,t,n){var i=Ut,s=Bn.transition;try{Bn.transition=null,Ut=1,b2(e,t,n,i)}finally{Bn.transition=s,Ut=i}return null}function b2(e,t,n,i){do Sa();while(Hs!==null);if(jt&6)throw Error(J(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(J(177));e.callbackNode=null,e.callbackPriority=0;var r=n.lanes|n.childLanes;if(nC(e,r),e===Ne&&(xe=Ne=null,Ve=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||zh||(zh=!0,UT(Dd,function(){return Sa(),null})),r=(n.flags&15990)!==0,n.subtreeFlags&15990||r){r=Bn.transition,Bn.transition=null;var a=Ut;Ut=1;var l=jt;jt|=4,W_.current=null,g2(e,n),LT(n,e),UC(Ym),Vd=!!Qm,Ym=Qm=null,e.current=n,_2(n),GI(),jt=l,Ut=a,Bn.transition=r}else e.current=n;if(zh&&(zh=!1,Hs=e,tf=s),r=e.pendingLanes,r===0&&(Xs=null),QI(n.stateNode),mn(e,fe()),t!==null)for(i=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],i(s.value,{componentStack:s.stack,digest:s.digest});if(Jd)throw Jd=!1,e=_g,_g=null,e;return tf&1&&e.tag!==0&&Sa(),r=e.pendingLanes,r&1?e===yg?Ec++:(Ec=0,yg=e):Ec=0,mr(),null}function Sa(){if(Hs!==null){var e=vb(tf),t=Bn.transition,n=Ut;try{if(Bn.transition=null,Ut=16>e?16:e,Hs===null)var i=!1;else{if(e=Hs,Hs=null,tf=0,jt&6)throw Error(J(331));var s=jt;for(jt|=4,nt=e.current;nt!==null;){var r=nt,a=r.child;if(nt.flags&16){var l=r.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for(nt=h;nt!==null;){var p=nt;switch(p.tag){case 0:case 11:case 15:bc(8,p,r)}var _=p.child;if(_!==null)_.return=p,nt=_;else for(;nt!==null;){p=nt;var y=p.sibling,w=p.return;if(AT(p),p===h){nt=null;break}if(y!==null){y.return=w,nt=y;break}nt=w}}}var E=r.alternate;if(E!==null){var S=E.child;if(S!==null){E.child=null;do{var k=S.sibling;S.sibling=null,S=k}while(S!==null)}}nt=r}}if(r.subtreeFlags&2064&&a!==null)a.return=r,nt=a;else t:for(;nt!==null;){if(r=nt,r.flags&2048)switch(r.tag){case 0:case 11:case 15:bc(9,r,r.return)}var P=r.sibling;if(P!==null){P.return=r.return,nt=P;break t}nt=r.return}}var I=e.current;for(nt=I;nt!==null;){a=nt;var R=a.child;if(a.subtreeFlags&2064&&R!==null)R.return=a,nt=R;else t:for(a=I;nt!==null;){if(l=nt,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Gf(9,l)}}catch(B){le(l,l.return,B)}if(l===a){nt=null;break t}var V=l.sibling;if(V!==null){V.return=l.return,nt=V;break t}nt=l.return}}if(jt=s,mr(),Ti&&typeof Ti.onPostCommitFiberRoot=="function")try{Ti.onPostCommitFiberRoot(Ff,e)}catch{}i=!0}return i}finally{Ut=n,Bn.transition=t}}return!1}function B0(e,t,n){t=Da(n,t),t=vT(e,t,1),e=Ys(e,t,1),t=nn(),e!==null&&(wu(e,1,t),mn(e,t))}function le(e,t,n){if(e.tag===3)B0(e,e,n);else for(;t!==null;){if(t.tag===3){B0(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Xs===null||!Xs.has(i))){e=Da(n,e),e=xT(t,e,1),t=Ys(t,e,1),e=nn(),t!==null&&(wu(t,1,e),mn(t,e));break}}t=t.return}}function T2(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),t=nn(),e.pingedLanes|=e.suspendedLanes&n,Ne===e&&(Ve&n)===n&&(Se===4||Se===3&&(Ve&130023424)===Ve&&500>fe()-q_?Yr(e,0):$_|=n),mn(e,t)}function zT(e,t){t===0&&(e.mode&1?(t=Ah,Ah<<=1,!(Ah&130023424)&&(Ah=4194304)):t=1);var n=nn();e=us(e,t),e!==null&&(wu(e,t,n),mn(e,n))}function E2(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),zT(e,n)}function S2(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(J(314))}i!==null&&i.delete(t),zT(e,n)}var BT;BT=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||fn.current)dn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return dn=!1,d2(e,t,n);dn=!!(e.flags&131072)}else dn=!1,te&&t.flags&1048576&&$b(t,$d,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;yd(e,t),e=t.pendingProps;var s=Na(t,Qe.current);Ea(t,n),s=F_(null,t,i,e,s,n);var r=z_();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,pn(i)?(r=!0,Hd(t)):r=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,M_(t),s.updater=qf,t.stateNode=s,s._reactInternals=t,og(t,i,e,n),t=cg(null,t,i,!0,r,n)):(t.tag=0,te&&r&&P_(t),en(null,t,s,n),t=t.child),t;case 16:i=t.elementType;t:{switch(yd(e,t),e=t.pendingProps,s=i._init,i=s(i._payload),t.type=i,s=t.tag=P2(i),e=Jn(i,e),s){case 0:t=lg(null,t,i,e,n);break t;case 1:t=R0(null,t,i,e,n);break t;case 11:t=C0(null,t,i,e,n);break t;case 14:t=A0(null,t,i,Jn(i.type,e),n);break t}throw Error(J(306,i,""))}return t;case 0:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:Jn(i,s),lg(e,t,i,s,n);case 1:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:Jn(i,s),R0(e,t,i,s,n);case 3:t:{if(ET(t),e===null)throw Error(J(387));i=t.pendingProps,r=t.memoizedState,s=r.element,Yb(e,t),Kd(t,i,null,n);var a=t.memoizedState;if(i=a.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){s=Da(Error(J(423)),t),t=N0(e,t,i,n,s);break t}else if(i!==s){s=Da(Error(J(424)),t),t=N0(e,t,i,n,s);break t}else for(xn=Qs(t.stateNode.containerInfo.firstChild),wn=t,te=!0,ei=null,n=Zb(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(La(),i===s){t=hs(e,t,n);break t}en(e,t,i,n)}t=t.child}return t;case 5:return Xb(t),e===null&&ig(t),i=t.type,s=t.pendingProps,r=e!==null?e.memoizedProps:null,a=s.children,Xm(i,s)?a=null:r!==null&&Xm(i,r)&&(t.flags|=32),TT(e,t),en(e,t,a,n),t.child;case 6:return e===null&&ig(t),null;case 13:return ST(e,t,n);case 4:return O_(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Ma(t,null,i,n):en(e,t,i,n),t.child;case 11:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:Jn(i,s),C0(e,t,i,s,n);case 7:return en(e,t,t.pendingProps,n),t.child;case 8:return en(e,t,t.pendingProps.children,n),t.child;case 12:return en(e,t,t.pendingProps.children,n),t.child;case 10:t:{if(i=t.type._context,s=t.pendingProps,r=t.memoizedProps,a=s.value,Gt(qd,i._currentValue),i._currentValue=a,r!==null)if(ui(r.value,a)){if(r.children===s.children&&!fn.current){t=hs(e,t,n);break t}}else for(r=t.child,r!==null&&(r.return=t);r!==null;){var l=r.dependencies;if(l!==null){a=r.child;for(var u=l.firstContext;u!==null;){if(u.context===i){if(r.tag===1){u=rs(-1,n&-n),u.tag=2;var h=r.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?u.next=u:(u.next=p.next,p.next=u),h.pending=u}}r.lanes|=n,u=r.alternate,u!==null&&(u.lanes|=n),sg(r.return,n,t),l.lanes|=n;break}u=u.next}}else if(r.tag===10)a=r.type===t.type?null:r.child;else if(r.tag===18){if(a=r.return,a===null)throw Error(J(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),sg(a,n,t),a=r.sibling}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===t){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}en(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,i=t.pendingProps.children,Ea(t,n),s=Hn(s),i=i(s),t.flags|=1,en(e,t,i,n),t.child;case 14:return i=t.type,s=Jn(i,t.pendingProps),s=Jn(i.type,s),A0(e,t,i,s,n);case 15:return wT(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:Jn(i,s),yd(e,t),t.tag=1,pn(i)?(e=!0,Hd(t)):e=!1,Ea(t,n),yT(t,i,s),og(t,i,s,n),cg(null,t,i,!0,e,n);case 19:return kT(e,t,n);case 22:return bT(e,t,n)}throw Error(J(156,t.tag))};function UT(e,t){return mb(e,t)}function k2(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vn(e,t,n,i){return new k2(e,t,n,i)}function Q_(e){return e=e.prototype,!(!e||!e.isReactComponent)}function P2(e){if(typeof e=="function")return Q_(e)?1:0;if(e!=null){if(e=e.$$typeof,e===m_)return 11;if(e===g_)return 14}return 2}function tr(e,t){var n=e.alternate;return n===null?(n=Vn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function wd(e,t,n,i,s,r){var a=2;if(i=e,typeof e=="function")Q_(e)&&(a=1);else if(typeof e=="string")a=5;else t:switch(e){case la:return Xr(n.children,s,r,t);case p_:a=8,s|=8;break;case Am:return e=Vn(12,n,t,s|2),e.elementType=Am,e.lanes=r,e;case Rm:return e=Vn(13,n,t,s),e.elementType=Rm,e.lanes=r,e;case Nm:return e=Vn(19,n,t,s),e.elementType=Nm,e.lanes=r,e;case X1:return Zf(n,s,r,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Q1:a=10;break t;case Y1:a=9;break t;case m_:a=11;break t;case g_:a=14;break t;case Ls:a=16,i=null;break t}throw Error(J(130,e==null?e:typeof e,""))}return t=Vn(a,n,t,s),t.elementType=e,t.type=i,t.lanes=r,t}function Xr(e,t,n,i){return e=Vn(7,e,i,t),e.lanes=n,e}function Zf(e,t,n,i){return e=Vn(22,e,i,t),e.elementType=X1,e.lanes=n,e.stateNode={isHidden:!1},e}function nm(e,t,n){return e=Vn(6,e,null,t),e.lanes=n,e}function im(e,t,n){return t=Vn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function I2(e,t,n,i,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jp(0),this.expirationTimes=jp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jp(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Y_(e,t,n,i,s,r,a,l,u){return e=new I2(e,t,n,l,u),t===1?(t=1,r===!0&&(t|=8)):t=0,r=Vn(3,null,null,t),e.current=r,r.stateNode=e,r.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},M_(r),e}function C2(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:aa,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}function HT(e){if(!e)return ar;e=e._reactInternals;t:{if(mo(e)!==e||e.tag!==1)throw Error(J(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break t;case 1:if(pn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break t}}t=t.return}while(t!==null);throw Error(J(171))}if(e.tag===1){var n=e.type;if(pn(n))return Hb(e,n,t)}return t}function WT(e,t,n,i,s,r,a,l,u){return e=Y_(n,i,!0,e,s,r,a,l,u),e.context=HT(null),n=e.current,i=nn(),s=Js(n),r=rs(i,s),r.callback=t??null,Ys(n,r,s),e.current.lanes=s,wu(e,s,i),mn(e,i),e}function Qf(e,t,n,i){var s=t.current,r=nn(),a=Js(s);return n=HT(n),t.context===null?t.context=n:t.pendingContext=n,t=rs(r,a),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=Ys(s,t,a),e!==null&&(ai(e,s,a,r),md(e,s,a)),a}function nf(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function U0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function X_(e,t){U0(e,t),(e=e.alternate)&&U0(e,t)}function A2(){return null}var $T=typeof reportError=="function"?reportError:function(e){console.error(e)};function J_(e){this._internalRoot=e}Yf.prototype.render=J_.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(J(409));Qf(e,t,null,null)};Yf.prototype.unmount=J_.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ro(function(){Qf(null,e,null,null)}),t[cs]=null}};function Yf(e){this._internalRoot=e}Yf.prototype.unstable_scheduleHydration=function(e){if(e){var t=bb();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ds.length&&t!==0&&t<Ds[n].priority;n++);Ds.splice(n,0,e),n===0&&Eb(e)}};function ty(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Xf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function H0(){}function R2(e,t,n,i,s){if(s){if(typeof i=="function"){var r=i;i=function(){var h=nf(a);r.call(h)}}var a=WT(t,i,e,0,null,!1,!1,"",H0);return e._reactRootContainer=a,e[cs]=a.current,qc(e.nodeType===8?e.parentNode:e),ro(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof i=="function"){var l=i;i=function(){var h=nf(u);l.call(h)}}var u=Y_(e,0,!1,null,null,!1,!1,"",H0);return e._reactRootContainer=u,e[cs]=u.current,qc(e.nodeType===8?e.parentNode:e),ro(function(){Qf(t,u,n,i)}),u}function Jf(e,t,n,i,s){var r=n._reactRootContainer;if(r){var a=r;if(typeof s=="function"){var l=s;s=function(){var u=nf(a);l.call(u)}}Qf(t,a,e,s)}else a=R2(n,t,e,s,i);return nf(a)}xb=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=rc(t.pendingLanes);n!==0&&(v_(t,n|1),mn(t,fe()),!(jt&6)&&(ja=fe()+500,mr()))}break;case 13:ro(function(){var i=us(e,1);if(i!==null){var s=nn();ai(i,e,1,s)}}),X_(e,1)}};x_=function(e){if(e.tag===13){var t=us(e,134217728);if(t!==null){var n=nn();ai(t,e,134217728,n)}X_(e,134217728)}};wb=function(e){if(e.tag===13){var t=Js(e),n=us(e,t);if(n!==null){var i=nn();ai(n,e,t,i)}X_(e,t)}};bb=function(){return Ut};Tb=function(e,t){var n=Ut;try{return Ut=e,t()}finally{Ut=n}};Um=function(e,t,n){switch(t){case"input":if(Om(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var s=Hf(i);if(!s)throw Error(J(90));tb(i),Om(i,s)}}}break;case"textarea":nb(e,n);break;case"select":t=n.value,t!=null&&xa(e,!!n.multiple,t,!1)}};cb=G_;ub=ro;var N2={usingClientEntryPoint:!1,Events:[Tu,da,Hf,ab,lb,G_]},Ql={findFiberByHostInstance:Wr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},L2={bundleType:Ql.bundleType,version:Ql.version,rendererPackageName:Ql.rendererPackageName,rendererConfig:Ql.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gs.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=fb(e),e===null?null:e.stateNode},findFiberByHostInstance:Ql.findFiberByHostInstance||A2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bh.isDisabled&&Bh.supportsFiber)try{Ff=Bh.inject(L2),Ti=Bh}catch{}}Tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N2;Tn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ty(t))throw Error(J(200));return C2(e,t,null,n)};Tn.createRoot=function(e,t){if(!ty(e))throw Error(J(299));var n=!1,i="",s=$T;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Y_(e,1,!1,null,null,n,!1,i,s),e[cs]=t.current,qc(e.nodeType===8?e.parentNode:e),new J_(t)};Tn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(J(188)):(e=Object.keys(e).join(","),Error(J(268,e)));return e=fb(t),e=e===null?null:e.stateNode,e};Tn.flushSync=function(e){return ro(e)};Tn.hydrate=function(e,t,n){if(!Xf(t))throw Error(J(200));return Jf(null,e,t,!0,n)};Tn.hydrateRoot=function(e,t,n){if(!ty(e))throw Error(J(405));var i=n!=null&&n.hydratedSources||null,s=!1,r="",a=$T;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=WT(t,null,e,1,n??null,s,!1,r,a),e[cs]=t.current,qc(e),i)for(e=0;e<i.length;e++)n=i[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Yf(t)};Tn.render=function(e,t,n){if(!Xf(t))throw Error(J(200));return Jf(null,e,t,!1,n)};Tn.unmountComponentAtNode=function(e){if(!Xf(e))throw Error(J(40));return e._reactRootContainer?(ro(function(){Jf(null,null,e,!1,function(){e._reactRootContainer=null,e[cs]=null})}),!0):!1};Tn.unstable_batchedUpdates=G_;Tn.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Xf(n))throw Error(J(200));if(e==null||e._reactInternals===void 0)throw Error(J(38));return Jf(e,t,n,!1,i)};Tn.version="18.3.1-next-f1338f8080-20240426";function qT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(qT)}catch(e){console.error(e)}}qT(),q1.exports=Tn;var M2=q1.exports,GT,W0=M2;GT=W0.createRoot,W0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function eu(){return eu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},eu.apply(this,arguments)}var Ws;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ws||(Ws={}));const $0="popstate";function O2(e){e===void 0&&(e={});function t(s,r){let{pathname:a="/",search:l="",hash:u=""}=go(s.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),wg("",{pathname:a,search:l,hash:u},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(s,r){let a=s.document.querySelector("base"),l="";if(a&&a.getAttribute("href")){let u=s.location.href,h=u.indexOf("#");l=h===-1?u:u.slice(0,h)}return l+"#"+(typeof r=="string"?r:sf(r))}function i(s,r){ey(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(r)+")")}return j2(t,n,i,e)}function ue(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ey(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function D2(){return Math.random().toString(36).substr(2,8)}function q0(e,t){return{usr:e.state,key:e.key,idx:t}}function wg(e,t,n,i){return n===void 0&&(n=null),eu({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?go(t):t,{state:n,key:t&&t.key||i||D2()})}function sf(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function go(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function j2(e,t,n,i){i===void 0&&(i={});let{window:s=document.defaultView,v5Compat:r=!1}=i,a=s.history,l=Ws.Pop,u=null,h=p();h==null&&(h=0,a.replaceState(eu({},a.state,{idx:h}),""));function p(){return(a.state||{idx:null}).idx}function _(){l=Ws.Pop;let k=p(),P=k==null?null:k-h;h=k,u&&u({action:l,location:S.location,delta:P})}function y(k,P){l=Ws.Push;let I=wg(S.location,k,P);n&&n(I,k),h=p()+1;let R=q0(I,h),V=S.createHref(I);try{a.pushState(R,"",V)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;s.location.assign(V)}r&&u&&u({action:l,location:S.location,delta:1})}function w(k,P){l=Ws.Replace;let I=wg(S.location,k,P);n&&n(I,k),h=p();let R=q0(I,h),V=S.createHref(I);a.replaceState(R,"",V),r&&u&&u({action:l,location:S.location,delta:0})}function E(k){let P=s.location.origin!=="null"?s.location.origin:s.location.href,I=typeof k=="string"?k:sf(k);return I=I.replace(/ $/,"%20"),ue(P,"No window.location.(origin|href) available to create URL for href: "+I),new URL(I,P)}let S={get action(){return l},get location(){return e(s,a)},listen(k){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener($0,_),u=k,()=>{s.removeEventListener($0,_),u=null}},createHref(k){return t(s,k)},createURL:E,encodeLocation(k){let P=E(k);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:y,replace:w,go(k){return a.go(k)}};return S}var G0;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(G0||(G0={}));function V2(e,t,n){return n===void 0&&(n="/"),F2(e,t,n,!1)}function F2(e,t,n,i){let s=typeof t=="string"?go(t):t,r=Va(s.pathname||"/",n);if(r==null)return null;let a=KT(e);z2(a);let l=null;for(let u=0;l==null&&u<a.length;++u){let h=Y2(r);l=Z2(a[u],h,i)}return l}function KT(e,t,n,i){t===void 0&&(t=[]),n===void 0&&(n=[]),i===void 0&&(i="");let s=(r,a,l)=>{let u={relativePath:l===void 0?r.path||"":l,caseSensitive:r.caseSensitive===!0,childrenIndex:a,route:r};u.relativePath.startsWith("/")&&(ue(u.relativePath.startsWith(i),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(i.length));let h=er([i,u.relativePath]),p=n.concat(u);r.children&&r.children.length>0&&(ue(r.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),KT(r.children,t,p,h)),!(r.path==null&&!r.index)&&t.push({path:h,score:G2(h,r.index),routesMeta:p})};return e.forEach((r,a)=>{var l;if(r.path===""||!((l=r.path)!=null&&l.includes("?")))s(r,a);else for(let u of ZT(r.path))s(r,a,u)}),t}function ZT(e){let t=e.split("/");if(t.length===0)return[];let[n,...i]=t,s=n.endsWith("?"),r=n.replace(/\?$/,"");if(i.length===0)return s?[r,""]:[r];let a=ZT(i.join("/")),l=[];return l.push(...a.map(u=>u===""?r:[r,u].join("/"))),s&&l.push(...a),l.map(u=>e.startsWith("/")&&u===""?"/":u)}function z2(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:K2(t.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const B2=/^:[\w-]+$/,U2=3,H2=2,W2=1,$2=10,q2=-2,K0=e=>e==="*";function G2(e,t){let n=e.split("/"),i=n.length;return n.some(K0)&&(i+=q2),t&&(i+=H2),n.filter(s=>!K0(s)).reduce((s,r)=>s+(B2.test(r)?U2:r===""?W2:$2),i)}function K2(e,t){return e.length===t.length&&e.slice(0,-1).every((i,s)=>i===t[s])?e[e.length-1]-t[t.length-1]:0}function Z2(e,t,n){let{routesMeta:i}=e,s={},r="/",a=[];for(let l=0;l<i.length;++l){let u=i[l],h=l===i.length-1,p=r==="/"?t:t.slice(r.length)||"/",_=rf({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},p),y=u.route;if(!_&&h&&n&&!i[i.length-1].route.index&&(_=rf({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},p)),!_)return null;Object.assign(s,_.params),a.push({params:s,pathname:er([r,_.pathname]),pathnameBase:eA(er([r,_.pathnameBase])),route:y}),_.pathnameBase!=="/"&&(r=er([r,_.pathnameBase]))}return a}function rf(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=Q2(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let r=s[0],a=r.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:i.reduce((h,p,_)=>{let{paramName:y,isOptional:w}=p;if(y==="*"){let S=l[_]||"";a=r.slice(0,r.length-S.length).replace(/(.)\/+$/,"$1")}const E=l[_];return w&&!E?h[y]=void 0:h[y]=(E||"").replace(/%2F/g,"/"),h},{}),pathname:r,pathnameBase:a,pattern:e}}function Q2(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),ey(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let i=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,u)=>(i.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(i.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),i]}function Y2(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ey(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Va(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&i!=="/"?null:e.slice(n)||"/"}function X2(e,t){t===void 0&&(t="/");let{pathname:n,search:i="",hash:s=""}=typeof e=="string"?go(e):e;return{pathname:n?n.startsWith("/")?n:J2(n,t):t,search:nA(i),hash:iA(s)}}function J2(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function sm(e,t,n,i){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function tA(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function QT(e,t){let n=tA(e);return t?n.map((i,s)=>s===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function YT(e,t,n,i){i===void 0&&(i=!1);let s;typeof e=="string"?s=go(e):(s=eu({},e),ue(!s.pathname||!s.pathname.includes("?"),sm("?","pathname","search",s)),ue(!s.pathname||!s.pathname.includes("#"),sm("#","pathname","hash",s)),ue(!s.search||!s.search.includes("#"),sm("#","search","hash",s)));let r=e===""||s.pathname==="",a=r?"/":s.pathname,l;if(a==null)l=n;else{let _=t.length-1;if(!i&&a.startsWith("..")){let y=a.split("/");for(;y[0]==="..";)y.shift(),_-=1;s.pathname=y.join("/")}l=_>=0?t[_]:"/"}let u=X2(s,l),h=a&&a!=="/"&&a.endsWith("/"),p=(r||a===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(h||p)&&(u.pathname+="/"),u}const er=e=>e.join("/").replace(/\/\/+/g,"/"),eA=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),nA=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,iA=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function sA(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const XT=["post","put","patch","delete"];new Set(XT);const rA=["get",...XT];new Set(rA);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nu(){return nu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},nu.apply(this,arguments)}const tp=$.createContext(null),JT=$.createContext(null),gr=$.createContext(null),ep=$.createContext(null),_r=$.createContext({outlet:null,matches:[],isDataRoute:!1}),tE=$.createContext(null);function oA(e,t){let{relative:n}=t===void 0?{}:t;Su()||ue(!1);let{basename:i,navigator:s}=$.useContext(gr),{hash:r,pathname:a,search:l}=np(e,{relative:n}),u=a;return i!=="/"&&(u=a==="/"?i:er([i,a])),s.createHref({pathname:u,search:l,hash:r})}function Su(){return $.useContext(ep)!=null}function _o(){return Su()||ue(!1),$.useContext(ep).location}function eE(e){$.useContext(gr).static||$.useLayoutEffect(e)}function tl(){let{isDataRoute:e}=$.useContext(_r);return e?xA():aA()}function aA(){Su()||ue(!1);let e=$.useContext(tp),{basename:t,future:n,navigator:i}=$.useContext(gr),{matches:s}=$.useContext(_r),{pathname:r}=_o(),a=JSON.stringify(QT(s,n.v7_relativeSplatPath)),l=$.useRef(!1);return eE(()=>{l.current=!0}),$.useCallback(function(h,p){if(p===void 0&&(p={}),!l.current)return;if(typeof h=="number"){i.go(h);return}let _=YT(h,JSON.parse(a),r,p.relative==="path");e==null&&t!=="/"&&(_.pathname=_.pathname==="/"?t:er([t,_.pathname])),(p.replace?i.replace:i.push)(_,p.state,p)},[t,i,a,r,e])}function lA(){let{matches:e}=$.useContext(_r),t=e[e.length-1];return t?t.params:{}}function np(e,t){let{relative:n}=t===void 0?{}:t,{future:i}=$.useContext(gr),{matches:s}=$.useContext(_r),{pathname:r}=_o(),a=JSON.stringify(QT(s,i.v7_relativeSplatPath));return $.useMemo(()=>YT(e,JSON.parse(a),r,n==="path"),[e,a,r,n])}function cA(e,t){return uA(e,t)}function uA(e,t,n,i){Su()||ue(!1);let{navigator:s}=$.useContext(gr),{matches:r}=$.useContext(_r),a=r[r.length-1],l=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let h=_o(),p;if(t){var _;let k=typeof t=="string"?go(t):t;u==="/"||(_=k.pathname)!=null&&_.startsWith(u)||ue(!1),p=k}else p=h;let y=p.pathname||"/",w=y;if(u!=="/"){let k=u.replace(/^\//,"").split("/");w="/"+y.replace(/^\//,"").split("/").slice(k.length).join("/")}let E=V2(e,{pathname:w}),S=mA(E&&E.map(k=>Object.assign({},k,{params:Object.assign({},l,k.params),pathname:er([u,s.encodeLocation?s.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?u:er([u,s.encodeLocation?s.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),r,n,i);return t&&S?$.createElement(ep.Provider,{value:{location:nu({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Ws.Pop}},S):S}function hA(){let e=vA(),t=sA(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return $.createElement($.Fragment,null,$.createElement("h2",null,"Unexpected Application Error!"),$.createElement("h3",{style:{fontStyle:"italic"}},t),n?$.createElement("pre",{style:s},n):null,null)}const dA=$.createElement(hA,null);class fA extends $.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?$.createElement(_r.Provider,{value:this.props.routeContext},$.createElement(tE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function pA(e){let{routeContext:t,match:n,children:i}=e,s=$.useContext(tp);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),$.createElement(_r.Provider,{value:t},i)}function mA(e,t,n,i){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),i===void 0&&(i=null),e==null){var r;if(!n)return null;if(n.errors)e=n.matches;else if((r=i)!=null&&r.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,l=(s=n)==null?void 0:s.errors;if(l!=null){let p=a.findIndex(_=>_.route.id&&(l==null?void 0:l[_.route.id])!==void 0);p>=0||ue(!1),a=a.slice(0,Math.min(a.length,p+1))}let u=!1,h=-1;if(n&&i&&i.v7_partialHydration)for(let p=0;p<a.length;p++){let _=a[p];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(h=p),_.route.id){let{loaderData:y,errors:w}=n,E=_.route.loader&&y[_.route.id]===void 0&&(!w||w[_.route.id]===void 0);if(_.route.lazy||E){u=!0,h>=0?a=a.slice(0,h+1):a=[a[0]];break}}}return a.reduceRight((p,_,y)=>{let w,E=!1,S=null,k=null;n&&(w=l&&_.route.id?l[_.route.id]:void 0,S=_.route.errorElement||dA,u&&(h<0&&y===0?(E=!0,k=null):h===y&&(E=!0,k=_.route.hydrateFallbackElement||null)));let P=t.concat(a.slice(0,y+1)),I=()=>{let R;return w?R=S:E?R=k:_.route.Component?R=$.createElement(_.route.Component,null):_.route.element?R=_.route.element:R=p,$.createElement(pA,{match:_,routeContext:{outlet:p,matches:P,isDataRoute:n!=null},children:R})};return n&&(_.route.ErrorBoundary||_.route.errorElement||y===0)?$.createElement(fA,{location:n.location,revalidation:n.revalidation,component:S,error:w,children:I(),routeContext:{outlet:null,matches:P,isDataRoute:!0}}):I()},null)}var nE=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(nE||{}),of=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(of||{});function gA(e){let t=$.useContext(tp);return t||ue(!1),t}function _A(e){let t=$.useContext(JT);return t||ue(!1),t}function yA(e){let t=$.useContext(_r);return t||ue(!1),t}function iE(e){let t=yA(),n=t.matches[t.matches.length-1];return n.route.id||ue(!1),n.route.id}function vA(){var e;let t=$.useContext(tE),n=_A(of.UseRouteError),i=iE(of.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[i]}function xA(){let{router:e}=gA(nE.UseNavigateStable),t=iE(of.UseNavigateStable),n=$.useRef(!1);return eE(()=>{n.current=!0}),$.useCallback(function(s,r){r===void 0&&(r={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,nu({fromRouteId:t},r)))},[e,t])}function wA(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function zr(e){ue(!1)}function bA(e){let{basename:t="/",children:n=null,location:i,navigationType:s=Ws.Pop,navigator:r,static:a=!1,future:l}=e;Su()&&ue(!1);let u=t.replace(/^\/*/,"/"),h=$.useMemo(()=>({basename:u,navigator:r,static:a,future:nu({v7_relativeSplatPath:!1},l)}),[u,l,r,a]);typeof i=="string"&&(i=go(i));let{pathname:p="/",search:_="",hash:y="",state:w=null,key:E="default"}=i,S=$.useMemo(()=>{let k=Va(p,u);return k==null?null:{location:{pathname:k,search:_,hash:y,state:w,key:E},navigationType:s}},[u,p,_,y,w,E,s]);return S==null?null:$.createElement(gr.Provider,{value:h},$.createElement(ep.Provider,{children:n,value:S}))}function Z0(e){let{children:t,location:n}=e;return cA(bg(t),n)}new Promise(()=>{});function bg(e,t){t===void 0&&(t=[]);let n=[];return $.Children.forEach(e,(i,s)=>{if(!$.isValidElement(i))return;let r=[...t,s];if(i.type===$.Fragment){n.push.apply(n,bg(i.props.children,r));return}i.type!==zr&&ue(!1),!i.props.index||!i.props.children||ue(!1);let a={id:i.props.id||r.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=bg(i.props.children,r)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function af(){return af=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},af.apply(this,arguments)}function sE(e,t){if(e==null)return{};var n={},i=Object.keys(e),s,r;for(r=0;r<i.length;r++)s=i[r],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function TA(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function EA(e,t){return e.button===0&&(!t||t==="_self")&&!TA(e)}const SA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],kA=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],PA="6";try{window.__reactRouterVersion=PA}catch{}const IA=$.createContext({isTransitioning:!1}),CA="startTransition",Q0=TI[CA];function AA(e){let{basename:t,children:n,future:i,window:s}=e,r=$.useRef();r.current==null&&(r.current=O2({window:s,v5Compat:!0}));let a=r.current,[l,u]=$.useState({action:a.action,location:a.location}),{v7_startTransition:h}=i||{},p=$.useCallback(_=>{h&&Q0?Q0(()=>u(_)):u(_)},[u,h]);return $.useLayoutEffect(()=>a.listen(p),[a,p]),$.useEffect(()=>wA(i),[i]),$.createElement(bA,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:a,future:i})}const RA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",NA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ve=$.forwardRef(function(t,n){let{onClick:i,relative:s,reloadDocument:r,replace:a,state:l,target:u,to:h,preventScrollReset:p,viewTransition:_}=t,y=sE(t,SA),{basename:w}=$.useContext(gr),E,S=!1;if(typeof h=="string"&&NA.test(h)&&(E=h,RA))try{let R=new URL(window.location.href),V=h.startsWith("//")?new URL(R.protocol+h):new URL(h),B=Va(V.pathname,w);V.origin===R.origin&&B!=null?h=B+V.search+V.hash:S=!0}catch{}let k=oA(h,{relative:s}),P=MA(h,{replace:a,state:l,target:u,preventScrollReset:p,relative:s,viewTransition:_});function I(R){i&&i(R),R.defaultPrevented||P(R)}return $.createElement("a",af({},y,{href:E||k,onClick:S||r?i:I,ref:n,target:u}))}),rE=$.forwardRef(function(t,n){let{"aria-current":i="page",caseSensitive:s=!1,className:r="",end:a=!1,style:l,to:u,viewTransition:h,children:p}=t,_=sE(t,kA),y=np(u,{relative:_.relative}),w=_o(),E=$.useContext(JT),{navigator:S,basename:k}=$.useContext(gr),P=E!=null&&OA(y)&&h===!0,I=S.encodeLocation?S.encodeLocation(y).pathname:y.pathname,R=w.pathname,V=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;s||(R=R.toLowerCase(),V=V?V.toLowerCase():null,I=I.toLowerCase()),V&&k&&(V=Va(V,k)||V);const B=I!=="/"&&I.endsWith("/")?I.length-1:I.length;let H=R===I||!a&&R.startsWith(I)&&R.charAt(B)==="/",N=V!=null&&(V===I||!a&&V.startsWith(I)&&V.charAt(I.length)==="/"),b={isActive:H,isPending:N,isTransitioning:P},A=H?i:void 0,O;typeof r=="function"?O=r(b):O=[r,H?"active":null,N?"pending":null,P?"transitioning":null].filter(Boolean).join(" ");let D=typeof l=="function"?l(b):l;return $.createElement(ve,af({},_,{"aria-current":A,className:O,ref:n,style:D,to:u,viewTransition:h}),typeof p=="function"?p(b):p)});var Tg;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Tg||(Tg={}));var Y0;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Y0||(Y0={}));function LA(e){let t=$.useContext(tp);return t||ue(!1),t}function MA(e,t){let{target:n,replace:i,state:s,preventScrollReset:r,relative:a,viewTransition:l}=t===void 0?{}:t,u=tl(),h=_o(),p=np(e,{relative:a});return $.useCallback(_=>{if(EA(_,n)){_.preventDefault();let y=i!==void 0?i:sf(h)===sf(p);u(e,{replace:y,state:s,preventScrollReset:r,relative:a,viewTransition:l})}},[h,u,p,i,s,n,e,r,a,l])}function OA(e,t){t===void 0&&(t={});let n=$.useContext(IA);n==null&&ue(!1);let{basename:i}=LA(Tg.useViewTransitionState),s=np(e,{relative:t.relative});if(!n.isTransitioning)return!1;let r=Va(n.currentLocation.pathname,i)||n.currentLocation.pathname,a=Va(n.nextLocation.pathname,i)||n.nextLocation.pathname;return rf(s.pathname,a)!=null||rf(s.pathname,r)!=null}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var DA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jA=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),pt=(e,t)=>{const n=$.forwardRef(({color:i="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:l="",children:u,...h},p)=>$.createElement("svg",{ref:p,...DA,width:s,height:s,stroke:i,strokeWidth:a?Number(r)*24/Number(s):r,className:["lucide",`lucide-${jA(e)}`,l].join(" "),...h},[...t.map(([_,y])=>$.createElement(_,y)),...Array.isArray(u)?u:[u]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oE=pt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VA=pt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eg=pt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FA=pt("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ny=pt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=pt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=pt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zA=pt("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BA=pt("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rm=pt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X0=pt("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UA=pt("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HA=pt("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WA=pt("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $A=pt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qA=pt("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GA=pt("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KA=pt("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aE=pt("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZA=pt("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QA=pt("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YA=pt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XA=pt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JA=pt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=pt("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iy=pt("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tR=pt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lE=pt("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cE=pt("Mountain",[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uE=pt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hE=pt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eR=pt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dE=pt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fE=pt("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nR=pt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iR=pt("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sR=pt("Signal",[["path",{d:"M2 20h.01",key:"4haj6o"}],["path",{d:"M7 20v-4",key:"j294jx"}],["path",{d:"M12 20v-8",key:"i3yub9"}],["path",{d:"M17 20V8",key:"1tkaf5"}],["path",{d:"M22 4v16",key:"sih9yq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J0=pt("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pE=pt("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mE=pt("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sy=pt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rR=pt("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ku=pt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ry=pt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gE=pt("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _E=pt("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=pt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=pt("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),yE=$.createContext(void 0),ip=()=>{const e=$.useContext(yE);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e},oR=({children:e})=>{const[t,n]=$.useState(()=>{const s=localStorage.getItem("theme");return s||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});$.useEffect(()=>{t==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",t)},[t]);const i=()=>{n(s=>s==="light"?"dark":"light")};return m.jsx(yE.Provider,{value:{theme:t,toggleTheme:i},children:e})};var ex={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let s=e.charCodeAt(i);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},aR=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const s=e[n++];if(s<128)t[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=e[n++];t[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=e[n++],a=e[n++],l=e[n++],u=((s&7)<<18|(r&63)<<12|(a&63)<<6|l&63)-65536;t[i++]=String.fromCharCode(55296+(u>>10)),t[i++]=String.fromCharCode(56320+(u&1023))}else{const r=e[n++],a=e[n++];t[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|a&63)}}return t.join("")},xE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<e.length;s+=3){const r=e[s],a=s+1<e.length,l=a?e[s+1]:0,u=s+2<e.length,h=u?e[s+2]:0,p=r>>2,_=(r&3)<<4|l>>4;let y=(l&15)<<2|h>>6,w=h&63;u||(w=64,a||(y=64)),i.push(n[p],n[_],n[y],n[w])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(vE(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):aR(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<e.length;){const r=n[e.charAt(s++)],l=s<e.length?n[e.charAt(s)]:0;++s;const h=s<e.length?n[e.charAt(s)]:64;++s;const _=s<e.length?n[e.charAt(s)]:64;if(++s,r==null||l==null||h==null||_==null)throw new lR;const y=r<<2|l>>4;if(i.push(y),h!==64){const w=l<<4&240|h>>2;if(i.push(w),_!==64){const E=h<<6&192|_;i.push(E)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class lR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cR=function(e){const t=vE(e);return xE.encodeByteArray(t,!0)},lf=function(e){return cR(e).replace(/\./g,"")},wE=function(e){try{return xE.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=()=>uR().__FIREBASE_DEFAULTS__,dR=()=>{if(typeof process>"u"||typeof ex>"u")return;const e=ex.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},fR=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&wE(e[1]);return t&&JSON.parse(t)},sp=()=>{try{return hR()||dR()||fR()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},bE=e=>{var t,n;return(n=(t=sp())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},TE=e=>{const t=bE(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},EE=()=>{var e;return(e=sp())===null||e===void 0?void 0:e.config},SE=e=>{var t;return(t=sp())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kE(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",s=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e);return[lf(JSON.stringify(n)),lf(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ye())}function gR(){var e;const t=(e=sp())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _R(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yR(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function vR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function xR(){const e=Ye();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function wR(){return!gR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function bR(){try{return typeof indexedDB=="object"}catch{return!1}}function TR(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var r;t(((r=s.error)===null||r===void 0?void 0:r.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER="FirebaseError";class Ni extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=ER,Object.setPrototypeOf(this,Ni.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pu.prototype.create)}}class Pu{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},s=`${this.service}/${t}`,r=this.errors[t],a=r?SR(r,i):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Ni(s,l,i)}}function SR(e,t){return e.replace(kR,(n,i)=>{const s=t[i];return s!=null?String(s):`<${i}?>`})}const kR=/\{\$([^}]+)}/g;function PR(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function cf(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const s of n){if(!i.includes(s))return!1;const r=e[s],a=t[s];if(nx(r)&&nx(a)){if(!cf(r,a))return!1}else if(r!==a)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function nx(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iu(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(s=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function lc(e){const t={};return e.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,r]=i.split("=");t[decodeURIComponent(s)]=decodeURIComponent(r)}}),t}function cc(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function IR(e,t){const n=new CR(e,t);return n.subscribe.bind(n)}class CR{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,i){let s;if(t===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");AR(t,["next","error","complete"])?s=t:s={next:t,error:n,complete:i},s.next===void 0&&(s.next=om),s.error===void 0&&(s.error=om),s.complete===void 0&&(s.complete=om);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),r}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function AR(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function om(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(e){return e&&e._delegate?e._delegate:e}class lr{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new pR;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const i=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),s=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(LR(t))try{this.getOrInitializeService({instanceIdentifier:Br})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(t=Br){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Br){return this.instances.has(t)}getOptions(t=Br){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[r,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(r);i===l&&a.resolve(s)}return s}onInit(t,n){var i;const s=this.normalizeInstanceIdentifier(n),r=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;r.add(t),this.onInitCallbacks.set(s,r);const a=this.instances.get(s);return a&&t(a,s),()=>{r.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:NR(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Br){return this.component?this.component.multipleInstances?t:Br:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function NR(e){return e===Br?void 0:e}function LR(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new RR(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Nt||(Nt={}));const OR={debug:Nt.DEBUG,verbose:Nt.VERBOSE,info:Nt.INFO,warn:Nt.WARN,error:Nt.ERROR,silent:Nt.SILENT},DR=Nt.INFO,jR={[Nt.DEBUG]:"log",[Nt.VERBOSE]:"log",[Nt.INFO]:"info",[Nt.WARN]:"warn",[Nt.ERROR]:"error"},VR=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),s=jR[t];if(s)console[s](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class oy{constructor(t){this.name=t,this._logLevel=DR,this._logHandler=VR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Nt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?OR[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Nt.DEBUG,...t),this._logHandler(this,Nt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Nt.VERBOSE,...t),this._logHandler(this,Nt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Nt.INFO,...t),this._logHandler(this,Nt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Nt.WARN,...t),this._logHandler(this,Nt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Nt.ERROR,...t),this._logHandler(this,Nt.ERROR,...t)}}const FR=(e,t)=>t.some(n=>e instanceof n);let ix,sx;function zR(){return ix||(ix=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function BR(){return sx||(sx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const PE=new WeakMap,Sg=new WeakMap,IE=new WeakMap,am=new WeakMap,ay=new WeakMap;function UR(e){const t=new Promise((n,i)=>{const s=()=>{e.removeEventListener("success",r),e.removeEventListener("error",a)},r=()=>{n(nr(e.result)),s()},a=()=>{i(e.error),s()};e.addEventListener("success",r),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&PE.set(n,e)}).catch(()=>{}),ay.set(t,e),t}function HR(e){if(Sg.has(e))return;const t=new Promise((n,i)=>{const s=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",a),e.removeEventListener("abort",a)},r=()=>{n(),s()},a=()=>{i(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",r),e.addEventListener("error",a),e.addEventListener("abort",a)});Sg.set(e,t)}let kg={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Sg.get(e);if(t==="objectStoreNames")return e.objectStoreNames||IE.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return nr(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function WR(e){kg=e(kg)}function $R(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(lm(this),t,...n);return IE.set(i,t.sort?t.sort():[t]),nr(i)}:BR().includes(e)?function(...t){return e.apply(lm(this),t),nr(PE.get(this))}:function(...t){return nr(e.apply(lm(this),t))}}function qR(e){return typeof e=="function"?$R(e):(e instanceof IDBTransaction&&HR(e),FR(e,zR())?new Proxy(e,kg):e)}function nr(e){if(e instanceof IDBRequest)return UR(e);if(am.has(e))return am.get(e);const t=qR(e);return t!==e&&(am.set(e,t),ay.set(t,e)),t}const lm=e=>ay.get(e);function GR(e,t,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const a=indexedDB.open(e,t),l=nr(a);return i&&a.addEventListener("upgradeneeded",u=>{i(nr(a.result),u.oldVersion,u.newVersion,nr(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{r&&u.addEventListener("close",()=>r()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const KR=["get","getKey","getAll","getAllKeys","count"],ZR=["put","add","delete","clear"],cm=new Map;function rx(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(cm.get(t))return cm.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,s=ZR.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||KR.includes(n)))return;const r=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let h=u.store;return i&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&u.done]))[0]};return cm.set(t,r),r}WR(e=>({...e,get:(t,n,i)=>rx(t,n)||e.get(t,n,i),has:(t,n)=>!!rx(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(YR(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function YR(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Pg="@firebase/app",ox="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds=new oy("@firebase/app"),XR="@firebase/app-compat",JR="@firebase/analytics-compat",tN="@firebase/analytics",eN="@firebase/app-check-compat",nN="@firebase/app-check",iN="@firebase/auth",sN="@firebase/auth-compat",rN="@firebase/database",oN="@firebase/data-connect",aN="@firebase/database-compat",lN="@firebase/functions",cN="@firebase/functions-compat",uN="@firebase/installations",hN="@firebase/installations-compat",dN="@firebase/messaging",fN="@firebase/messaging-compat",pN="@firebase/performance",mN="@firebase/performance-compat",gN="@firebase/remote-config",_N="@firebase/remote-config-compat",yN="@firebase/storage",vN="@firebase/storage-compat",xN="@firebase/firestore",wN="@firebase/vertexai-preview",bN="@firebase/firestore-compat",TN="firebase",EN="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ig="[DEFAULT]",SN={[Pg]:"fire-core",[XR]:"fire-core-compat",[tN]:"fire-analytics",[JR]:"fire-analytics-compat",[nN]:"fire-app-check",[eN]:"fire-app-check-compat",[iN]:"fire-auth",[sN]:"fire-auth-compat",[rN]:"fire-rtdb",[oN]:"fire-data-connect",[aN]:"fire-rtdb-compat",[lN]:"fire-fn",[cN]:"fire-fn-compat",[uN]:"fire-iid",[hN]:"fire-iid-compat",[dN]:"fire-fcm",[fN]:"fire-fcm-compat",[pN]:"fire-perf",[mN]:"fire-perf-compat",[gN]:"fire-rc",[_N]:"fire-rc-compat",[yN]:"fire-gcs",[vN]:"fire-gcs-compat",[xN]:"fire-fst",[bN]:"fire-fst-compat",[wN]:"fire-vertex","fire-js":"fire-js",[TN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uf=new Map,kN=new Map,Cg=new Map;function ax(e,t){try{e.container.addComponent(t)}catch(n){ds.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function oo(e){const t=e.name;if(Cg.has(t))return ds.debug(`There were multiple attempts to register component ${t}.`),!1;Cg.set(t,e);for(const n of uf.values())ax(n,e);for(const n of kN.values())ax(n,e);return!0}function rp(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function ni(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ir=new Pu("app","Firebase",PN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(t,n,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new lr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ir.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo=EN;function CE(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i=Object.assign({name:Ig,automaticDataCollectionEnabled:!1},t),s=i.name;if(typeof s!="string"||!s)throw ir.create("bad-app-name",{appName:String(s)});if(n||(n=EE()),!n)throw ir.create("no-options");const r=uf.get(s);if(r){if(cf(n,r.options)&&cf(i,r.config))return r;throw ir.create("duplicate-app",{appName:s})}const a=new MR(s);for(const u of Cg.values())a.addComponent(u);const l=new IN(n,i,a);return uf.set(s,l),l}function ly(e=Ig){const t=uf.get(e);if(!t&&e===Ig&&EE())return CE();if(!t)throw ir.create("no-app",{appName:e});return t}function Si(e,t,n){var i;let s=(i=SN[e])!==null&&i!==void 0?i:e;n&&(s+=`-${n}`);const r=s.match(/\s|\//),a=t.match(/\s|\//);if(r||a){const l=[`Unable to register library "${s}" with version "${t}":`];r&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&a&&l.push("and"),a&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ds.warn(l.join(" "));return}oo(new lr(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN="firebase-heartbeat-database",AN=1,iu="firebase-heartbeat-store";let um=null;function AE(){return um||(um=GR(CN,AN,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(iu)}catch(n){console.warn(n)}}}}).catch(e=>{throw ir.create("idb-open",{originalErrorMessage:e.message})})),um}async function RN(e){try{const n=(await AE()).transaction(iu),i=await n.objectStore(iu).get(RE(e));return await n.done,i}catch(t){if(t instanceof Ni)ds.warn(t.message);else{const n=ir.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});ds.warn(n.message)}}}async function lx(e,t){try{const i=(await AE()).transaction(iu,"readwrite");await i.objectStore(iu).put(t,RE(e)),await i.done}catch(n){if(n instanceof Ni)ds.warn(n.message);else{const i=ir.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ds.warn(i.message)}}}function RE(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN=1024,LN=30*24*60*60*1e3;class MN{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new DN(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=cx();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r)?void 0:(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const l=new Date(a.date).valueOf();return Date.now()-l<=LN}),this._storage.overwrite(this._heartbeatsCache))}catch(i){ds.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=cx(),{heartbeatsToSend:i,unsentEntries:s}=ON(this._heartbeatsCache.heartbeats),r=lf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(n){return ds.warn(n),""}}}function cx(){return new Date().toISOString().substring(0,10)}function ON(e,t=NN){const n=[];let i=e.slice();for(const s of e){const r=n.find(a=>a.agent===s.agent);if(r){if(r.dates.push(s.date),ux(n)>t){r.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),ux(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class DN{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return bR()?TR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await RN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return lx(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return lx(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function ux(e){return lf(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jN(e){oo(new lr("platform-logger",t=>new QR(t),"PRIVATE")),oo(new lr("heartbeat",t=>new MN(t),"PRIVATE")),Si(Pg,ox,e),Si(Pg,ox,"esm2017"),Si("fire-js","")}jN("");function cy(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(n[i[s]]=e[i[s]]);return n}function NE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const VN=NE,LE=new Pu("auth","Firebase",NE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hf=new oy("@firebase/auth");function FN(e,...t){hf.logLevel<=Nt.WARN&&hf.warn(`Auth (${yo}): ${e}`,...t)}function bd(e,...t){hf.logLevel<=Nt.ERROR&&hf.error(`Auth (${yo}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(e,...t){throw hy(e,...t)}function li(e,...t){return hy(e,...t)}function uy(e,t,n){const i=Object.assign(Object.assign({},VN()),{[t]:n});return new Pu("auth","Firebase",i).create(t,{appName:e.name})}function os(e){return uy(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zN(e,t,n){const i=n;if(!(t instanceof i))throw i.name!==t.constructor.name&&$n(e,"argument-error"),uy(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function hy(e,...t){if(typeof e!="string"){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return LE.create(e,...t)}function ft(e,t,...n){if(!e)throw hy(t,...n)}function es(e){const t="INTERNAL ASSERTION FAILED: "+e;throw bd(t),new Error(t)}function fs(e,t){e||es(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ag(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function BN(){return hx()==="http:"||hx()==="https:"}function hx(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(BN()||yR()||"connection"in navigator)?navigator.onLine:!0}function HN(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(t,n){this.shortDelay=t,this.longDelay=n,fs(n>t,"Short delay should be less than long delay!"),this.isMobile=mR()||vR()}get(){return UN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dy(e,t){fs(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{static initialize(t,n,i){this.fetchImpl=t,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;es("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;es("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;es("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N=new Cu(3e4,6e4);function yr(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function _s(e,t,n,i,s={}){return OE(e,s,async()=>{let r={},a={};i&&(t==="GET"?a=i:r={body:JSON.stringify(i)});const l=Iu(Object.assign({key:e.config.apiKey},a)).slice(1),u=await e._getAdditionalHeaders();u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode);const h=Object.assign({method:t,headers:u},r);return _R()||(h.referrerPolicy="no-referrer"),ME.fetch()(DE(e,e.config.apiHost,n,l),h)})}async function OE(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},WN),t);try{const s=new GN(e),r=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await r.json();if("needConfirmation"in a)throw Uh(e,"account-exists-with-different-credential",a);if(r.ok&&!("errorMessage"in a))return a;{const l=r.ok?a.errorMessage:a.error.message,[u,h]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Uh(e,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw Uh(e,"email-already-in-use",a);if(u==="USER_DISABLED")throw Uh(e,"user-disabled",a);const p=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw uy(e,p,h);$n(e,p)}}catch(s){if(s instanceof Ni)throw s;$n(e,"network-request-failed",{message:String(s)})}}async function Au(e,t,n,i,s={}){const r=await _s(e,t,n,i,s);return"mfaPendingCredential"in r&&$n(e,"multi-factor-auth-required",{_serverResponse:r}),r}function DE(e,t,n,i){const s=`${t}${n}?${i}`;return e.config.emulator?dy(e.config,s):`${e.config.apiScheme}://${s}`}function qN(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class GN{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(li(this.auth,"network-request-failed")),$N.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Uh(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=li(e,t,i);return s.customData._tokenResponse=n,s}function dx(e){return e!==void 0&&e.enterprise!==void 0}class KN{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return qN(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}}async function ZN(e,t){return _s(e,"GET","/v2/recaptchaConfig",yr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QN(e,t){return _s(e,"POST","/v1/accounts:delete",t)}async function jE(e,t){return _s(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sc(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function YN(e,t=!1){const n=sn(e),i=await n.getIdToken(t),s=fy(i);ft(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const r=typeof s.firebase=="object"?s.firebase:void 0,a=r==null?void 0:r.sign_in_provider;return{claims:s,token:i,authTime:Sc(hm(s.auth_time)),issuedAtTime:Sc(hm(s.iat)),expirationTime:Sc(hm(s.exp)),signInProvider:a||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function hm(e){return Number(e)*1e3}function fy(e){const[t,n,i]=e.split(".");if(t===void 0||n===void 0||i===void 0)return bd("JWT malformed, contained fewer than 3 sections"),null;try{const s=wE(n);return s?JSON.parse(s):(bd("Failed to decode base64 JWT payload"),null)}catch(s){return bd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function fx(e){const t=fy(e);return ft(t,"internal-error"),ft(typeof t.exp<"u","internal-error"),ft(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fa(e,t,n=!1){if(n)return t;try{return await t}catch(i){throw i instanceof Ni&&XN(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}function XN({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sc(this.lastLoginAt),this.creationTime=Sc(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function df(e){var t;const n=e.auth,i=await e.getIdToken(),s=await Fa(e,jE(n,{idToken:i}));ft(s==null?void 0:s.users.length,n,"internal-error");const r=s.users[0];e._notifyReloadListener(r);const a=!((t=r.providerUserInfo)===null||t===void 0)&&t.length?VE(r.providerUserInfo):[],l=eL(e.providerData,a),u=e.isAnonymous,h=!(e.email&&r.passwordHash)&&!(l!=null&&l.length),p=u?h:!1,_={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:l,metadata:new Rg(r.createdAt,r.lastLoginAt),isAnonymous:p};Object.assign(e,_)}async function tL(e){const t=sn(e);await df(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function eL(e,t){return[...e.filter(i=>!t.some(s=>s.providerId===i.providerId)),...t]}function VE(e){return e.map(t=>{var{providerId:n}=t,i=cy(t,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nL(e,t){const n=await OE(e,{},async()=>{const i=Iu({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:s,apiKey:r}=e.config,a=DE(e,s,"/v1/token",`key=${r}`),l=await e._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",ME.fetch()(a,{method:"POST",headers:l,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function iL(e,t){return _s(e,"POST","/v2/accounts:revokeToken",yr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){ft(t.idToken,"internal-error"),ft(typeof t.idToken<"u","internal-error"),ft(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):fx(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){ft(t.length!==0,"internal-error");const n=fx(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ft(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:i,refreshToken:s,expiresIn:r}=await nL(t,n);this.updateTokensAndExpiration(i,s,Number(r))}updateTokensAndExpiration(t,n,i){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,n){const{refreshToken:i,accessToken:s,expirationTime:r}=n,a=new ka;return i&&(ft(typeof i=="string","internal-error",{appName:t}),a.refreshToken=i),s&&(ft(typeof s=="string","internal-error",{appName:t}),a.accessToken=s),r&&(ft(typeof r=="number","internal-error",{appName:t}),a.expirationTime=r),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new ka,this.toJSON())}_performRefresh(){return es("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rs(e,t){ft(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class ns{constructor(t){var{uid:n,auth:i,stsTokenManager:s}=t,r=cy(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new JN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Rg(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const n=await Fa(this,this.stsTokenManager.getToken(this.auth,t));return ft(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return YN(this,t)}reload(){return tL(this)}_assign(t){this!==t&&(ft(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new ns(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){ft(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),n&&await df(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ni(this.auth.app))return Promise.reject(os(this.auth));const t=await this.getIdToken();return await Fa(this,QN(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var i,s,r,a,l,u,h,p;const _=(i=n.displayName)!==null&&i!==void 0?i:void 0,y=(s=n.email)!==null&&s!==void 0?s:void 0,w=(r=n.phoneNumber)!==null&&r!==void 0?r:void 0,E=(a=n.photoURL)!==null&&a!==void 0?a:void 0,S=(l=n.tenantId)!==null&&l!==void 0?l:void 0,k=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,P=(h=n.createdAt)!==null&&h!==void 0?h:void 0,I=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:R,emailVerified:V,isAnonymous:B,providerData:H,stsTokenManager:N}=n;ft(R&&N,t,"internal-error");const b=ka.fromJSON(this.name,N);ft(typeof R=="string",t,"internal-error"),Rs(_,t.name),Rs(y,t.name),ft(typeof V=="boolean",t,"internal-error"),ft(typeof B=="boolean",t,"internal-error"),Rs(w,t.name),Rs(E,t.name),Rs(S,t.name),Rs(k,t.name),Rs(P,t.name),Rs(I,t.name);const A=new ns({uid:R,auth:t,email:y,emailVerified:V,displayName:_,isAnonymous:B,photoURL:E,phoneNumber:w,tenantId:S,stsTokenManager:b,createdAt:P,lastLoginAt:I});return H&&Array.isArray(H)&&(A.providerData=H.map(O=>Object.assign({},O))),k&&(A._redirectEventId=k),A}static async _fromIdTokenResponse(t,n,i=!1){const s=new ka;s.updateFromServerResponse(n);const r=new ns({uid:n.localId,auth:t,stsTokenManager:s,isAnonymous:i});return await df(r),r}static async _fromGetAccountInfoResponse(t,n,i){const s=n.users[0];ft(s.localId!==void 0,"internal-error");const r=s.providerUserInfo!==void 0?VE(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(r!=null&&r.length),l=new ka;l.updateFromIdToken(i);const u=new ns({uid:s.localId,auth:t,stsTokenManager:l,isAnonymous:a}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:r,metadata:new Rg(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(r!=null&&r.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px=new Map;function is(e){fs(e instanceof Function,"Expected a class definition");let t=px.get(e);return t?(fs(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,px.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}FE.type="NONE";const mx=FE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Td(e,t,n){return`firebase:${e}:${t}:${n}`}class Pa{constructor(t,n,i){this.persistence=t,this.auth=n,this.userKey=i;const{config:s,name:r}=this.auth;this.fullUserKey=Td(this.userKey,s.apiKey,r),this.fullPersistenceKey=Td("persistence",s.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?ns._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,i="authUser"){if(!n.length)return new Pa(is(mx),t,i);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let r=s[0]||is(mx);const a=Td(i,t.config.apiKey,t.name);let l=null;for(const h of n)try{const p=await h._get(a);if(p){const _=ns._fromJSON(t,p);h!==r&&(l=_),r=h;break}}catch{}const u=s.filter(h=>h._shouldAllowMigration);return!r._shouldAllowMigration||!u.length?new Pa(r,t,i):(r=u[0],l&&await r._set(a,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==r)try{await h._remove(a)}catch{}})),new Pa(r,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gx(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(HE(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(zE(t))return"Firefox";if(t.includes("silk/"))return"Silk";if($E(t))return"Blackberry";if(qE(t))return"Webos";if(BE(t))return"Safari";if((t.includes("chrome/")||UE(t))&&!t.includes("edge/"))return"Chrome";if(WE(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=e.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function zE(e=Ye()){return/firefox\//i.test(e)}function BE(e=Ye()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function UE(e=Ye()){return/crios\//i.test(e)}function HE(e=Ye()){return/iemobile/i.test(e)}function WE(e=Ye()){return/android/i.test(e)}function $E(e=Ye()){return/blackberry/i.test(e)}function qE(e=Ye()){return/webos/i.test(e)}function py(e=Ye()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function sL(e=Ye()){var t;return py(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function rL(){return xR()&&document.documentMode===10}function GE(e=Ye()){return py(e)||WE(e)||qE(e)||$E(e)||/windows phone/i.test(e)||HE(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KE(e,t=[]){let n;switch(e){case"Browser":n=gx(Ye());break;case"Worker":n=`${gx(Ye())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${yo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const i=r=>new Promise((a,l)=>{try{const u=t(r);a(u)}catch(u){l(u)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const i of this.queue)await i(t),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aL(e,t={}){return _s(e,"GET","/v2/passwordPolicy",yr(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lL=6;class cL{constructor(t){var n,i,s,r;const a=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:lL,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=t.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(r=t.forceUpgradeOnSignin)!==null&&r!==void 0?r:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,i,s,r,a,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(i=u.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(r=u.containsUppercaseLetter)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(a=u.containsNumericCharacter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(t,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=t.length>=i),s&&(n.meetsMaxPasswordLength=t.length<=s)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<t.length;s++)i=t.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,n,i,s,r){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(t,n,i,s){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _x(this),this.idTokenSubscription=new _x(this),this.beforeStateQueue=new oL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=LE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=is(n)),this._initializationPromise=this.queue(async()=>{var i,s;if(!this._deleted&&(this.persistenceManager=await Pa.create(this,t),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await jE(this,{idToken:t}),i=await ns._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(ni(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(t);(!a||a===l)&&(u!=null&&u.user)&&(s=u.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ft(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await df(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=HN()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(ni(this.app))return Promise.reject(os(this));const n=t?sn(t):null;return n&&ft(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&ft(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return ni(this.app)?Promise.reject(os(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return ni(this.app)?Promise.reject(os(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(is(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await aL(this),n=new cL(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new Pu("auth","Firebase",t())}onAuthStateChanged(t,n,i){return this.registerStateListener(this.authStateSubscription,t,n,i)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,i){return this.registerStateListener(this.idTokenSubscription,t,n,i)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await iL(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const i=await this.getOrInitRedirectPersistenceManager(n);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&is(t)||this._popupRedirectResolver;ft(n,this,"argument-error"),this.redirectPersistenceManager=await Pa.create(this,[is(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,i,s){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ft(l,this,"internal-error"),l.then(()=>{a||r(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,i,s);return()=>{a=!0,u()}}else{const u=t.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return ft(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=KE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&FN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function vr(e){return sn(e)}class _x{constructor(t){this.auth=t,this.observer=null,this.addObserver=IR(n=>this.observer=n)}get next(){return ft(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let op={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function hL(e){op=e}function ZE(e){return op.loadJS(e)}function dL(){return op.recaptchaEnterpriseScript}function fL(){return op.gapiScript}function pL(e){return`__${e}${Math.floor(Math.random()*1e6)}`}const mL="recaptcha-enterprise",gL="NO_RECAPTCHA";class _L{constructor(t){this.type=mL,this.auth=vr(t)}async verify(t="verify",n=!1){async function i(r){if(!n){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(a,l)=>{ZN(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const h=new KN(u);return r.tenantId==null?r._agentRecaptchaConfig=h:r._tenantRecaptchaConfigs[r.tenantId]=h,a(h.siteKey)}}).catch(u=>{l(u)})})}function s(r,a,l){const u=window.grecaptcha;dx(u)?u.enterprise.ready(()=>{u.enterprise.execute(r,{action:t}).then(h=>{a(h)}).catch(()=>{a(gL)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((r,a)=>{i(this.auth).then(l=>{if(!n&&dx(window.grecaptcha))s(l,r,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=dL();u.length!==0&&(u+=l),ZE(u).then(()=>{s(l,r,a)}).catch(h=>{a(h)})}}).catch(l=>{a(l)})})}}async function yx(e,t,n,i=!1){const s=new _L(e);let r;try{r=await s.verify(n)}catch{r=await s.verify(n,!0)}const a=Object.assign({},t);return i?Object.assign(a,{captchaResp:r}):Object.assign(a,{captchaResponse:r}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Ng(e,t,n,i){var s;if(!((s=e._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const r=await yx(e,t,n,n==="getOobCode");return i(e,r)}else return i(e,t).catch(async r=>{if(r.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await yx(e,t,n,n==="getOobCode");return i(e,a)}else return Promise.reject(r)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yL(e,t){const n=rp(e,"auth");if(n.isInitialized()){const s=n.getImmediate(),r=n.getOptions();if(cf(r,t??{}))return s;$n(s,"already-initialized")}return n.initialize({options:t})}function vL(e,t){const n=(t==null?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(is);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function xL(e,t,n){const i=vr(e);ft(i._canInitEmulator,i,"emulator-config-failed"),ft(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const s=!1,r=QE(t),{host:a,port:l}=wL(t),u=l===null?"":`:${l}`;i.config.emulator={url:`${r}//${a}${u}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:a,port:l,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})}),bL()}function QE(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function wL(e){const t=QE(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const r=s[1];return{host:r,port:vx(i.substr(r.length+1))}}else{const[r,a]=i.split(":");return{host:r,port:vx(a)}}}function vx(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function bL(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return es("not implemented")}_getIdTokenResponse(t){return es("not implemented")}_linkToIdToken(t,n){return es("not implemented")}_getReauthenticationResolver(t){return es("not implemented")}}async function TL(e,t){return _s(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EL(e,t){return Au(e,"POST","/v1/accounts:signInWithPassword",yr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SL(e,t){return Au(e,"POST","/v1/accounts:signInWithEmailLink",yr(e,t))}async function kL(e,t){return Au(e,"POST","/v1/accounts:signInWithEmailLink",yr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su extends my{constructor(t,n,i,s=null){super("password",i),this._email=t,this._password=n,this._tenantId=s}static _fromEmailAndPassword(t,n){return new su(t,n,"password")}static _fromEmailAndCode(t,n,i=null){return new su(t,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ng(t,n,"signInWithPassword",EL);case"emailLink":return SL(t,{email:this._email,oobCode:this._password});default:$n(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ng(t,i,"signUpPassword",TL);case"emailLink":return kL(t,{idToken:n,email:this._email,oobCode:this._password});default:$n(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ia(e,t){return Au(e,"POST","/v1/accounts:signInWithIdp",yr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PL="http://localhost";class ao extends my{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new ao(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):$n("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:s}=n,r=cy(n,["providerId","signInMethod"]);if(!i||!s)return null;const a=new ao(i,s);return a.idToken=r.idToken||void 0,a.accessToken=r.accessToken||void 0,a.secret=r.secret,a.nonce=r.nonce,a.pendingToken=r.pendingToken||null,a}_getIdTokenResponse(t){const n=this.buildRequest();return Ia(t,n)}_linkToIdToken(t,n){const i=this.buildRequest();return i.idToken=n,Ia(t,i)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Ia(t,n)}buildRequest(){const t={requestUri:PL,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Iu(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IL(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function CL(e){const t=lc(cc(e)).link,n=t?lc(cc(t)).deep_link_id:null,i=lc(cc(e)).deep_link_id;return(i?lc(cc(i)).link:null)||i||n||t||e}class gy{constructor(t){var n,i,s,r,a,l;const u=lc(cc(t)),h=(n=u.apiKey)!==null&&n!==void 0?n:null,p=(i=u.oobCode)!==null&&i!==void 0?i:null,_=IL((s=u.mode)!==null&&s!==void 0?s:null);ft(h&&p&&_,"argument-error"),this.apiKey=h,this.operation=_,this.code=p,this.continueUrl=(r=u.continueUrl)!==null&&r!==void 0?r:null,this.languageCode=(a=u.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(t){const n=CL(t);try{return new gy(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(){this.providerId=el.PROVIDER_ID}static credential(t,n){return su._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const i=gy.parseLink(n);return ft(i,"argument-error"),su._fromEmailAndCode(t,i.code,i.tenantId)}}el.PROVIDER_ID="password";el.EMAIL_PASSWORD_SIGN_IN_METHOD="password";el.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru extends _y{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs extends Ru{constructor(){super("facebook.com")}static credential(t){return ao._fromParams({providerId:Fs.PROVIDER_ID,signInMethod:Fs.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Fs.credentialFromTaggedObject(t)}static credentialFromError(t){return Fs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Fs.credential(t.oauthAccessToken)}catch{return null}}}Fs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Fs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi extends Ru{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return ao._fromParams({providerId:Xi.PROVIDER_ID,signInMethod:Xi.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Xi.credentialFromTaggedObject(t)}static credentialFromError(t){return Xi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return Xi.credential(n,i)}catch{return null}}}Xi.GOOGLE_SIGN_IN_METHOD="google.com";Xi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs extends Ru{constructor(){super("github.com")}static credential(t){return ao._fromParams({providerId:zs.PROVIDER_ID,signInMethod:zs.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return zs.credentialFromTaggedObject(t)}static credentialFromError(t){return zs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return zs.credential(t.oauthAccessToken)}catch{return null}}}zs.GITHUB_SIGN_IN_METHOD="github.com";zs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs extends Ru{constructor(){super("twitter.com")}static credential(t,n){return ao._fromParams({providerId:Bs.PROVIDER_ID,signInMethod:Bs.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Bs.credentialFromTaggedObject(t)}static credentialFromError(t){return Bs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return Bs.credential(n,i)}catch{return null}}}Bs.TWITTER_SIGN_IN_METHOD="twitter.com";Bs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AL(e,t){return Au(e,"POST","/v1/accounts:signUp",yr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,i,s=!1){const r=await ns._fromIdTokenResponse(t,i,s),a=xx(i);return new lo({user:r,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(t,n,i){await t._updateTokensIfNecessary(i,!0);const s=xx(i);return new lo({user:t,providerId:s,_tokenResponse:i,operationType:n})}}function xx(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff extends Ni{constructor(t,n,i,s){var r;super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,ff.prototype),this.customData={appName:t.name,tenantId:(r=t.tenantId)!==null&&r!==void 0?r:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,n,i,s){return new ff(t,n,i,s)}}function YE(e,t,n,i){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?ff._fromErrorAndOperation(e,r,t,i):r})}async function RL(e,t,n=!1){const i=await Fa(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return lo._forOperation(e,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NL(e,t,n=!1){const{auth:i}=e;if(ni(i.app))return Promise.reject(os(i));const s="reauthenticate";try{const r=await Fa(e,YE(i,s,t,e),n);ft(r.idToken,i,"internal-error");const a=fy(r.idToken);ft(a,i,"internal-error");const{sub:l}=a;return ft(e.uid===l,i,"user-mismatch"),lo._forOperation(e,s,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&$n(i,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XE(e,t,n=!1){if(ni(e.app))return Promise.reject(os(e));const i="signIn",s=await YE(e,i,t),r=await lo._fromIdTokenResponse(e,i,s);return n||await e._updateCurrentUser(r.user),r}async function LL(e,t){return XE(vr(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JE(e){const t=vr(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function ML(e,t,n){if(ni(e.app))return Promise.reject(os(e));const i=vr(e),a=await Ng(i,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",AL).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&JE(e),u}),l=await lo._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(l.user),l}function OL(e,t,n){return ni(e.app)?Promise.reject(os(e)):LL(sn(e),el.credential(t,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&JE(e),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DL(e,t){return _s(e,"POST","/v1/accounts:update",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jL(e,{displayName:t,photoURL:n}){if(t===void 0&&n===void 0)return;const i=sn(e),r={idToken:await i.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},a=await Fa(i,DL(i.auth,r));i.displayName=a.displayName||null,i.photoURL=a.photoUrl||null;const l=i.providerData.find(({providerId:u})=>u==="password");l&&(l.displayName=i.displayName,l.photoURL=i.photoURL),await i._updateTokensIfNecessary(a)}function VL(e,t,n,i){return sn(e).onIdTokenChanged(t,n,i)}function FL(e,t,n){return sn(e).beforeAuthStateChanged(t,n)}function zL(e,t,n,i){return sn(e).onAuthStateChanged(t,n,i)}function BL(e){return sn(e).signOut()}const pf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(pf,"1"),this.storage.removeItem(pf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UL=1e3,HL=10;class eS extends tS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=GE(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&t(n,s,i)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const i=t.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},r=this.storage.getItem(i);rL()&&r!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,HL):s()}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:i}),!0)})},UL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}eS.type="LOCAL";const WL=eS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS extends tS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}nS.type="SESSION";const iS=nS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $L(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(s=>s.isListeningto(t));if(n)return n;const i=new ap(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:i,eventType:s,data:r}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const l=Array.from(a).map(async h=>h(n.origin,r)),u=await $L(l);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ap.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yy(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qL{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,a;return new Promise((l,u)=>{const h=yy("",20);s.port1.start();const p=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:s,onMessage(_){const y=_;if(y.data.eventId===h)switch(y.data.status){case"ack":clearTimeout(p),r=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),l(y.data.response);break;default:clearTimeout(p),clearTimeout(r),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:t,eventId:h,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(){return window}function GL(e){ki().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS(){return typeof ki().WorkerGlobalScope<"u"&&typeof ki().importScripts=="function"}async function KL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ZL(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function QL(){return sS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS="firebaseLocalStorageDb",YL=1,mf="firebaseLocalStorage",oS="fbase_key";class Nu{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function lp(e,t){return e.transaction([mf],t?"readwrite":"readonly").objectStore(mf)}function XL(){const e=indexedDB.deleteDatabase(rS);return new Nu(e).toPromise()}function Lg(){const e=indexedDB.open(rS,YL);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const i=e.result;try{i.createObjectStore(mf,{keyPath:oS})}catch(s){n(s)}}),e.addEventListener("success",async()=>{const i=e.result;i.objectStoreNames.contains(mf)?t(i):(i.close(),await XL(),t(await Lg()))})})}async function wx(e,t,n){const i=lp(e,!0).put({[oS]:t,value:n});return new Nu(i).toPromise()}async function JL(e,t){const n=lp(e,!1).get(t),i=await new Nu(n).toPromise();return i===void 0?null:i.value}function bx(e,t){const n=lp(e,!0).delete(t);return new Nu(n).toPromise()}const tM=800,eM=3;class aS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Lg(),this.db)}async _withRetries(t){let n=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(n++>eM)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return sS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ap._getInstance(QL()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await KL(),!this.activeServiceWorker)return;this.sender=new qL(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||ZL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Lg();return await wx(t,pf,"1"),await bx(t,pf),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>wx(i,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(i=>JL(i,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>bx(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(s=>{const r=lp(s,!1).getAll();return new Nu(r).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(t.length!==0)for(const{fbase_key:s,value:r}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),tM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}aS.type="LOCAL";const nM=aS;new Cu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lS(e,t){return t?is(t):(ft(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy extends my{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Ia(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Ia(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Ia(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function iM(e){return XE(e.auth,new vy(e),e.bypassAuthState)}function sM(e){const{auth:t,user:n}=e;return ft(n,t,"internal-error"),NL(n,new vy(e),e.bypassAuthState)}async function rM(e){const{auth:t,user:n}=e;return ft(n,t,"internal-error"),RL(n,new vy(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(t,n,i,s,r=!1){this.auth=t,this.resolver=i,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:i,postBody:s,tenantId:r,error:a,type:l}=t;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:i,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(h){this.reject(h)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return iM;case"linkViaPopup":case"linkViaRedirect":return rM;case"reauthViaPopup":case"reauthViaRedirect":return sM;default:$n(this.auth,"internal-error")}}resolve(t){fs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){fs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oM=new Cu(2e3,1e4);async function aM(e,t,n){if(ni(e.app))return Promise.reject(li(e,"operation-not-supported-in-this-environment"));const i=vr(e);zN(e,t,_y);const s=lS(i,n);return new Gr(i,"signInViaPopup",t,s).executeNotNull()}class Gr extends cS{constructor(t,n,i,s,r){super(t,n,s,r),this.provider=i,this.authWindow=null,this.pollId=null,Gr.currentPopupAction&&Gr.currentPopupAction.cancel(),Gr.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return ft(t,this.auth,"internal-error"),t}async onExecution(){fs(this.filter.length===1,"Popup operations only handle one event");const t=yy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(li(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(li(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Gr.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(li(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,oM.get())};t()}}Gr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM="pendingRedirect",Ed=new Map;class cM extends cS{constructor(t,n,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let t=Ed.get(this.auth._key());if(!t){try{const i=await uM(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(n){t=()=>Promise.reject(n)}Ed.set(this.auth._key(),t)}return this.bypassAuthState||Ed.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function uM(e,t){const n=fM(t),i=dM(e);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function hM(e,t){Ed.set(e._key(),t)}function dM(e){return is(e._redirectPersistence)}function fM(e){return Td(lM,e.config.apiKey,e.name)}async function pM(e,t,n=!1){if(ni(e.app))return Promise.reject(os(e));const i=vr(e),s=lS(i,t),a=await new cM(i,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,t)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mM=10*60*1e3;class gM{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(n=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!_M(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var i;if(t.error&&!uS(t)){const s=((i=t.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(li(this.auth,s))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const i=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=mM&&this.cachedEventUids.clear(),this.cachedEventUids.has(Tx(t))}saveEventToCache(t){this.cachedEventUids.add(Tx(t)),this.lastProcessedEventTime=Date.now()}}function Tx(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function uS({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function _M(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return uS(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yM(e,t={}){return _s(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xM=/^https?/;async function wM(e){if(e.config.emulator)return;const{authorizedDomains:t}=await yM(e);for(const n of t)try{if(bM(n))return}catch{}$n(e,"unauthorized-domain")}function bM(e){const t=Ag(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const a=new URL(e);return a.hostname===""&&i===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!xM.test(n))return!1;if(vM.test(e))return i===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TM=new Cu(3e4,6e4);function Ex(){const e=ki().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function EM(e){return new Promise((t,n)=>{var i,s,r;function a(){Ex(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Ex(),n(li(e,"network-request-failed"))},timeout:TM.get()})}if(!((s=(i=ki().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)t(gapi.iframes.getContext());else if(!((r=ki().gapi)===null||r===void 0)&&r.load)a();else{const l=pL("iframefcb");return ki()[l]=()=>{gapi.load?a():n(li(e,"network-request-failed"))},ZE(`${fL()}?onload=${l}`).catch(u=>n(u))}}).catch(t=>{throw Sd=null,t})}let Sd=null;function SM(e){return Sd=Sd||EM(e),Sd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kM=new Cu(5e3,15e3),PM="__/auth/iframe",IM="emulator/auth/iframe",CM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},AM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function RM(e){const t=e.config;ft(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?dy(t,IM):`https://${e.config.authDomain}/${PM}`,i={apiKey:t.apiKey,appName:e.name,v:yo},s=AM.get(e.config.apiHost);s&&(i.eid=s);const r=e._getFrameworks();return r.length&&(i.fw=r.join(",")),`${n}?${Iu(i).slice(1)}`}async function NM(e){const t=await SM(e),n=ki().gapi;return ft(n,e,"internal-error"),t.open({where:document.body,url:RM(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:CM,dontclear:!0},i=>new Promise(async(s,r)=>{await i.restyle({setHideOnLeave:!1});const a=li(e,"network-request-failed"),l=ki().setTimeout(()=>{r(a)},kM.get());function u(){ki().clearTimeout(l),s(i)}i.ping(u).then(u,()=>{r(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},MM=500,OM=600,DM="_blank",jM="http://localhost";class Sx{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function VM(e,t,n,i=MM,s=OM){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u=Object.assign(Object.assign({},LM),{width:i.toString(),height:s.toString(),top:r,left:a}),h=Ye().toLowerCase();n&&(l=UE(h)?DM:n),zE(h)&&(t=t||jM,u.scrollbars="yes");const p=Object.entries(u).reduce((y,[w,E])=>`${y}${w}=${E},`,"");if(sL(h)&&l!=="_self")return FM(t||"",l),new Sx(null);const _=window.open(t||"",l,p);ft(_,e,"popup-blocked");try{_.focus()}catch{}return new Sx(_)}function FM(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zM="__/auth/handler",BM="emulator/auth/handler",UM=encodeURIComponent("fac");async function kx(e,t,n,i,s,r){ft(e.config.authDomain,e,"auth-domain-config-required"),ft(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:yo,eventId:s};if(t instanceof _y){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",PR(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[p,_]of Object.entries({}))a[p]=_}if(t instanceof Ru){const p=t.getScopes().filter(_=>_!=="");p.length>0&&(a.scopes=p.join(","))}e.tenantId&&(a.tid=e.tenantId);const l=a;for(const p of Object.keys(l))l[p]===void 0&&delete l[p];const u=await e._getAppCheckToken(),h=u?`#${UM}=${encodeURIComponent(u)}`:"";return`${HM(e)}?${Iu(l).slice(1)}${h}`}function HM({config:e}){return e.emulator?dy(e,BM):`https://${e.authDomain}/${zM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dm="webStorageSupport";class WM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=iS,this._completeRedirectFn=pM,this._overrideRedirectResult=hM}async _openPopup(t,n,i,s){var r;fs((r=this.eventManagers[t._key()])===null||r===void 0?void 0:r.manager,"_initialize() not called before _openPopup()");const a=await kx(t,n,i,Ag(),s);return VM(t,a,yy())}async _openRedirect(t,n,i,s){await this._originValidation(t);const r=await kx(t,n,i,Ag(),s);return GL(r),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:s,promise:r}=this.eventManagers[n];return s?Promise.resolve(s):(fs(r,"If manager is not set, promise should be"),r)}const i=this.initAndGetManager(t);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(t){const n=await NM(t),i=new gM(t);return n.register("authEvent",s=>(ft(s==null?void 0:s.authEvent,t,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=n,i}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(dm,{type:dm},s=>{var r;const a=(r=s==null?void 0:s[0])===null||r===void 0?void 0:r[dm];a!==void 0&&n(!!a),$n(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=wM(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return GE()||BE()||py()}}const $M=WM;var Px="@firebase/auth",Ix="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ft(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GM(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function KM(e){oo(new lr("auth",(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider("heartbeat"),r=t.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;ft(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:a,authDomain:l,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:KE(e)},h=new uL(i,s,r,u);return vL(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,i)=>{t.getProvider("auth-internal").initialize()})),oo(new lr("auth-internal",t=>{const n=vr(t.getProvider("auth").getImmediate());return(i=>new qM(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Si(Px,Ix,GM(e)),Si(Px,Ix,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZM=5*60,QM=SE("authIdTokenMaxAge")||ZM;let Cx=null;const YM=e=>async t=>{const n=t&&await t.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>QM)return;const s=n==null?void 0:n.token;Cx!==s&&(Cx=s,await fetch(e,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function XM(e=ly()){const t=rp(e,"auth");if(t.isInitialized())return t.getImmediate();const n=yL(e,{popupRedirectResolver:$M,persistence:[nM,WL,iS]}),i=SE("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(i,location.origin);if(location.origin===r.origin){const a=YM(r.toString());FL(n,a,()=>a(n.currentUser)),VL(n,l=>a(l))}}const s=bE("auth");return s&&xL(n,`http://${s}`),n}function JM(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}hL({loadJS(e){return new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=s=>{const r=li("internal-error");r.customData=s,n(r)},i.type="text/javascript",i.charset="UTF-8",JM().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});KM("Browser");var Ax=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Jr,hS;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(N,b){function A(){}A.prototype=b.prototype,N.D=b.prototype,N.prototype=new A,N.prototype.constructor=N,N.C=function(O,D,z){for(var j=Array(arguments.length-2),Rt=2;Rt<arguments.length;Rt++)j[Rt-2]=arguments[Rt];return b.prototype[D].apply(O,j)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(N,b,A){A||(A=0);var O=Array(16);if(typeof b=="string")for(var D=0;16>D;++D)O[D]=b.charCodeAt(A++)|b.charCodeAt(A++)<<8|b.charCodeAt(A++)<<16|b.charCodeAt(A++)<<24;else for(D=0;16>D;++D)O[D]=b[A++]|b[A++]<<8|b[A++]<<16|b[A++]<<24;b=N.g[0],A=N.g[1],D=N.g[2];var z=N.g[3],j=b+(z^A&(D^z))+O[0]+3614090360&4294967295;b=A+(j<<7&4294967295|j>>>25),j=z+(D^b&(A^D))+O[1]+3905402710&4294967295,z=b+(j<<12&4294967295|j>>>20),j=D+(A^z&(b^A))+O[2]+606105819&4294967295,D=z+(j<<17&4294967295|j>>>15),j=A+(b^D&(z^b))+O[3]+3250441966&4294967295,A=D+(j<<22&4294967295|j>>>10),j=b+(z^A&(D^z))+O[4]+4118548399&4294967295,b=A+(j<<7&4294967295|j>>>25),j=z+(D^b&(A^D))+O[5]+1200080426&4294967295,z=b+(j<<12&4294967295|j>>>20),j=D+(A^z&(b^A))+O[6]+2821735955&4294967295,D=z+(j<<17&4294967295|j>>>15),j=A+(b^D&(z^b))+O[7]+4249261313&4294967295,A=D+(j<<22&4294967295|j>>>10),j=b+(z^A&(D^z))+O[8]+1770035416&4294967295,b=A+(j<<7&4294967295|j>>>25),j=z+(D^b&(A^D))+O[9]+2336552879&4294967295,z=b+(j<<12&4294967295|j>>>20),j=D+(A^z&(b^A))+O[10]+4294925233&4294967295,D=z+(j<<17&4294967295|j>>>15),j=A+(b^D&(z^b))+O[11]+2304563134&4294967295,A=D+(j<<22&4294967295|j>>>10),j=b+(z^A&(D^z))+O[12]+1804603682&4294967295,b=A+(j<<7&4294967295|j>>>25),j=z+(D^b&(A^D))+O[13]+4254626195&4294967295,z=b+(j<<12&4294967295|j>>>20),j=D+(A^z&(b^A))+O[14]+2792965006&4294967295,D=z+(j<<17&4294967295|j>>>15),j=A+(b^D&(z^b))+O[15]+1236535329&4294967295,A=D+(j<<22&4294967295|j>>>10),j=b+(D^z&(A^D))+O[1]+4129170786&4294967295,b=A+(j<<5&4294967295|j>>>27),j=z+(A^D&(b^A))+O[6]+3225465664&4294967295,z=b+(j<<9&4294967295|j>>>23),j=D+(b^A&(z^b))+O[11]+643717713&4294967295,D=z+(j<<14&4294967295|j>>>18),j=A+(z^b&(D^z))+O[0]+3921069994&4294967295,A=D+(j<<20&4294967295|j>>>12),j=b+(D^z&(A^D))+O[5]+3593408605&4294967295,b=A+(j<<5&4294967295|j>>>27),j=z+(A^D&(b^A))+O[10]+38016083&4294967295,z=b+(j<<9&4294967295|j>>>23),j=D+(b^A&(z^b))+O[15]+3634488961&4294967295,D=z+(j<<14&4294967295|j>>>18),j=A+(z^b&(D^z))+O[4]+3889429448&4294967295,A=D+(j<<20&4294967295|j>>>12),j=b+(D^z&(A^D))+O[9]+568446438&4294967295,b=A+(j<<5&4294967295|j>>>27),j=z+(A^D&(b^A))+O[14]+3275163606&4294967295,z=b+(j<<9&4294967295|j>>>23),j=D+(b^A&(z^b))+O[3]+4107603335&4294967295,D=z+(j<<14&4294967295|j>>>18),j=A+(z^b&(D^z))+O[8]+1163531501&4294967295,A=D+(j<<20&4294967295|j>>>12),j=b+(D^z&(A^D))+O[13]+2850285829&4294967295,b=A+(j<<5&4294967295|j>>>27),j=z+(A^D&(b^A))+O[2]+4243563512&4294967295,z=b+(j<<9&4294967295|j>>>23),j=D+(b^A&(z^b))+O[7]+1735328473&4294967295,D=z+(j<<14&4294967295|j>>>18),j=A+(z^b&(D^z))+O[12]+2368359562&4294967295,A=D+(j<<20&4294967295|j>>>12),j=b+(A^D^z)+O[5]+4294588738&4294967295,b=A+(j<<4&4294967295|j>>>28),j=z+(b^A^D)+O[8]+2272392833&4294967295,z=b+(j<<11&4294967295|j>>>21),j=D+(z^b^A)+O[11]+1839030562&4294967295,D=z+(j<<16&4294967295|j>>>16),j=A+(D^z^b)+O[14]+4259657740&4294967295,A=D+(j<<23&4294967295|j>>>9),j=b+(A^D^z)+O[1]+2763975236&4294967295,b=A+(j<<4&4294967295|j>>>28),j=z+(b^A^D)+O[4]+1272893353&4294967295,z=b+(j<<11&4294967295|j>>>21),j=D+(z^b^A)+O[7]+4139469664&4294967295,D=z+(j<<16&4294967295|j>>>16),j=A+(D^z^b)+O[10]+3200236656&4294967295,A=D+(j<<23&4294967295|j>>>9),j=b+(A^D^z)+O[13]+681279174&4294967295,b=A+(j<<4&4294967295|j>>>28),j=z+(b^A^D)+O[0]+3936430074&4294967295,z=b+(j<<11&4294967295|j>>>21),j=D+(z^b^A)+O[3]+3572445317&4294967295,D=z+(j<<16&4294967295|j>>>16),j=A+(D^z^b)+O[6]+76029189&4294967295,A=D+(j<<23&4294967295|j>>>9),j=b+(A^D^z)+O[9]+3654602809&4294967295,b=A+(j<<4&4294967295|j>>>28),j=z+(b^A^D)+O[12]+3873151461&4294967295,z=b+(j<<11&4294967295|j>>>21),j=D+(z^b^A)+O[15]+530742520&4294967295,D=z+(j<<16&4294967295|j>>>16),j=A+(D^z^b)+O[2]+3299628645&4294967295,A=D+(j<<23&4294967295|j>>>9),j=b+(D^(A|~z))+O[0]+4096336452&4294967295,b=A+(j<<6&4294967295|j>>>26),j=z+(A^(b|~D))+O[7]+1126891415&4294967295,z=b+(j<<10&4294967295|j>>>22),j=D+(b^(z|~A))+O[14]+2878612391&4294967295,D=z+(j<<15&4294967295|j>>>17),j=A+(z^(D|~b))+O[5]+4237533241&4294967295,A=D+(j<<21&4294967295|j>>>11),j=b+(D^(A|~z))+O[12]+1700485571&4294967295,b=A+(j<<6&4294967295|j>>>26),j=z+(A^(b|~D))+O[3]+2399980690&4294967295,z=b+(j<<10&4294967295|j>>>22),j=D+(b^(z|~A))+O[10]+4293915773&4294967295,D=z+(j<<15&4294967295|j>>>17),j=A+(z^(D|~b))+O[1]+2240044497&4294967295,A=D+(j<<21&4294967295|j>>>11),j=b+(D^(A|~z))+O[8]+1873313359&4294967295,b=A+(j<<6&4294967295|j>>>26),j=z+(A^(b|~D))+O[15]+4264355552&4294967295,z=b+(j<<10&4294967295|j>>>22),j=D+(b^(z|~A))+O[6]+2734768916&4294967295,D=z+(j<<15&4294967295|j>>>17),j=A+(z^(D|~b))+O[13]+1309151649&4294967295,A=D+(j<<21&4294967295|j>>>11),j=b+(D^(A|~z))+O[4]+4149444226&4294967295,b=A+(j<<6&4294967295|j>>>26),j=z+(A^(b|~D))+O[11]+3174756917&4294967295,z=b+(j<<10&4294967295|j>>>22),j=D+(b^(z|~A))+O[2]+718787259&4294967295,D=z+(j<<15&4294967295|j>>>17),j=A+(z^(D|~b))+O[9]+3951481745&4294967295,N.g[0]=N.g[0]+b&4294967295,N.g[1]=N.g[1]+(D+(j<<21&4294967295|j>>>11))&4294967295,N.g[2]=N.g[2]+D&4294967295,N.g[3]=N.g[3]+z&4294967295}i.prototype.u=function(N,b){b===void 0&&(b=N.length);for(var A=b-this.blockSize,O=this.B,D=this.h,z=0;z<b;){if(D==0)for(;z<=A;)s(this,N,z),z+=this.blockSize;if(typeof N=="string"){for(;z<b;)if(O[D++]=N.charCodeAt(z++),D==this.blockSize){s(this,O),D=0;break}}else for(;z<b;)if(O[D++]=N[z++],D==this.blockSize){s(this,O),D=0;break}}this.h=D,this.o+=b},i.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var b=1;b<N.length-8;++b)N[b]=0;var A=8*this.o;for(b=N.length-8;b<N.length;++b)N[b]=A&255,A/=256;for(this.u(N),N=Array(16),b=A=0;4>b;++b)for(var O=0;32>O;O+=8)N[A++]=this.g[b]>>>O&255;return N};function r(N,b){var A=l;return Object.prototype.hasOwnProperty.call(A,N)?A[N]:A[N]=b(N)}function a(N,b){this.h=b;for(var A=[],O=!0,D=N.length-1;0<=D;D--){var z=N[D]|0;O&&z==b||(A[D]=z,O=!1)}this.g=A}var l={};function u(N){return-128<=N&&128>N?r(N,function(b){return new a([b|0],0>b?-1:0)}):new a([N|0],0>N?-1:0)}function h(N){if(isNaN(N)||!isFinite(N))return _;if(0>N)return k(h(-N));for(var b=[],A=1,O=0;N>=A;O++)b[O]=N/A|0,A*=4294967296;return new a(b,0)}function p(N,b){if(N.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(N.charAt(0)=="-")return k(p(N.substring(1),b));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=h(Math.pow(b,8)),O=_,D=0;D<N.length;D+=8){var z=Math.min(8,N.length-D),j=parseInt(N.substring(D,D+z),b);8>z?(z=h(Math.pow(b,z)),O=O.j(z).add(h(j))):(O=O.j(A),O=O.add(h(j)))}return O}var _=u(0),y=u(1),w=u(16777216);e=a.prototype,e.m=function(){if(S(this))return-k(this).m();for(var N=0,b=1,A=0;A<this.g.length;A++){var O=this.i(A);N+=(0<=O?O:4294967296+O)*b,b*=4294967296}return N},e.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(E(this))return"0";if(S(this))return"-"+k(this).toString(N);for(var b=h(Math.pow(N,6)),A=this,O="";;){var D=V(A,b).g;A=P(A,D.j(b));var z=((0<A.g.length?A.g[0]:A.h)>>>0).toString(N);if(A=D,E(A))return z+O;for(;6>z.length;)z="0"+z;O=z+O}},e.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function E(N){if(N.h!=0)return!1;for(var b=0;b<N.g.length;b++)if(N.g[b]!=0)return!1;return!0}function S(N){return N.h==-1}e.l=function(N){return N=P(this,N),S(N)?-1:E(N)?0:1};function k(N){for(var b=N.g.length,A=[],O=0;O<b;O++)A[O]=~N.g[O];return new a(A,~N.h).add(y)}e.abs=function(){return S(this)?k(this):this},e.add=function(N){for(var b=Math.max(this.g.length,N.g.length),A=[],O=0,D=0;D<=b;D++){var z=O+(this.i(D)&65535)+(N.i(D)&65535),j=(z>>>16)+(this.i(D)>>>16)+(N.i(D)>>>16);O=j>>>16,z&=65535,j&=65535,A[D]=j<<16|z}return new a(A,A[A.length-1]&-2147483648?-1:0)};function P(N,b){return N.add(k(b))}e.j=function(N){if(E(this)||E(N))return _;if(S(this))return S(N)?k(this).j(k(N)):k(k(this).j(N));if(S(N))return k(this.j(k(N)));if(0>this.l(w)&&0>N.l(w))return h(this.m()*N.m());for(var b=this.g.length+N.g.length,A=[],O=0;O<2*b;O++)A[O]=0;for(O=0;O<this.g.length;O++)for(var D=0;D<N.g.length;D++){var z=this.i(O)>>>16,j=this.i(O)&65535,Rt=N.i(D)>>>16,Vt=N.i(D)&65535;A[2*O+2*D]+=j*Vt,I(A,2*O+2*D),A[2*O+2*D+1]+=z*Vt,I(A,2*O+2*D+1),A[2*O+2*D+1]+=j*Rt,I(A,2*O+2*D+1),A[2*O+2*D+2]+=z*Rt,I(A,2*O+2*D+2)}for(O=0;O<b;O++)A[O]=A[2*O+1]<<16|A[2*O];for(O=b;O<2*b;O++)A[O]=0;return new a(A,0)};function I(N,b){for(;(N[b]&65535)!=N[b];)N[b+1]+=N[b]>>>16,N[b]&=65535,b++}function R(N,b){this.g=N,this.h=b}function V(N,b){if(E(b))throw Error("division by zero");if(E(N))return new R(_,_);if(S(N))return b=V(k(N),b),new R(k(b.g),k(b.h));if(S(b))return b=V(N,k(b)),new R(k(b.g),b.h);if(30<N.g.length){if(S(N)||S(b))throw Error("slowDivide_ only works with positive integers.");for(var A=y,O=b;0>=O.l(N);)A=B(A),O=B(O);var D=H(A,1),z=H(O,1);for(O=H(O,2),A=H(A,2);!E(O);){var j=z.add(O);0>=j.l(N)&&(D=D.add(A),z=j),O=H(O,1),A=H(A,1)}return b=P(N,D.j(b)),new R(D,b)}for(D=_;0<=N.l(b);){for(A=Math.max(1,Math.floor(N.m()/b.m())),O=Math.ceil(Math.log(A)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),z=h(A),j=z.j(b);S(j)||0<j.l(N);)A-=O,z=h(A),j=z.j(b);E(z)&&(z=y),D=D.add(z),N=P(N,j)}return new R(D,N)}e.A=function(N){return V(this,N).h},e.and=function(N){for(var b=Math.max(this.g.length,N.g.length),A=[],O=0;O<b;O++)A[O]=this.i(O)&N.i(O);return new a(A,this.h&N.h)},e.or=function(N){for(var b=Math.max(this.g.length,N.g.length),A=[],O=0;O<b;O++)A[O]=this.i(O)|N.i(O);return new a(A,this.h|N.h)},e.xor=function(N){for(var b=Math.max(this.g.length,N.g.length),A=[],O=0;O<b;O++)A[O]=this.i(O)^N.i(O);return new a(A,this.h^N.h)};function B(N){for(var b=N.g.length+1,A=[],O=0;O<b;O++)A[O]=N.i(O)<<1|N.i(O-1)>>>31;return new a(A,N.h)}function H(N,b){var A=b>>5;b%=32;for(var O=N.g.length-A,D=[],z=0;z<O;z++)D[z]=0<b?N.i(z+A)>>>b|N.i(z+A+1)<<32-b:N.i(z+A);return new a(D,N.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,hS=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=p,Jr=a}).apply(typeof Ax<"u"?Ax:typeof self<"u"?self:typeof window<"u"?window:{});var Hh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var dS,uc,fS,kd,Mg,pS,mS,gS;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,v,T){return d==Array.prototype||d==Object.prototype||(d[v]=T.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hh=="object"&&Hh];for(var v=0;v<d.length;++v){var T=d[v];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var i=n(this);function s(d,v){if(v)t:{var T=i;d=d.split(".");for(var M=0;M<d.length-1;M++){var U=d[M];if(!(U in T))break t;T=T[U]}d=d[d.length-1],M=T[d],v=v(M),v!=M&&v!=null&&t(T,d,{configurable:!0,writable:!0,value:v})}}function r(d,v){d instanceof String&&(d+="");var T=0,M=!1,U={next:function(){if(!M&&T<d.length){var G=T++;return{value:v(G,d[G]),done:!1}}return M=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}s("Array.prototype.values",function(d){return d||function(){return r(this,function(v,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(d){var v=typeof d;return v=v!="object"?v:d?Array.isArray(d)?"array":v:"null",v=="array"||v=="object"&&typeof d.length=="number"}function h(d){var v=typeof d;return v=="object"&&d!=null||v=="function"}function p(d,v,T){return d.call.apply(d.bind,arguments)}function _(d,v,T){if(!d)throw Error();if(2<arguments.length){var M=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,M),d.apply(v,U)}}return function(){return d.apply(v,arguments)}}function y(d,v,T){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:_,y.apply(null,arguments)}function w(d,v){var T=Array.prototype.slice.call(arguments,1);return function(){var M=T.slice();return M.push.apply(M,arguments),d.apply(this,M)}}function E(d,v){function T(){}T.prototype=v.prototype,d.aa=v.prototype,d.prototype=new T,d.prototype.constructor=d,d.Qb=function(M,U,G){for(var tt=Array(arguments.length-2),zt=2;zt<arguments.length;zt++)tt[zt-2]=arguments[zt];return v.prototype[U].apply(M,tt)}}function S(d){const v=d.length;if(0<v){const T=Array(v);for(let M=0;M<v;M++)T[M]=d[M];return T}return[]}function k(d,v){for(let T=1;T<arguments.length;T++){const M=arguments[T];if(u(M)){const U=d.length||0,G=M.length||0;d.length=U+G;for(let tt=0;tt<G;tt++)d[U+tt]=M[tt]}else d.push(M)}}class P{constructor(v,T){this.i=v,this.j=T,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function I(d){return/^[\s\xa0]*$/.test(d)}function R(){var d=l.navigator;return d&&(d=d.userAgent)?d:""}function V(d){return V[" "](d),d}V[" "]=function(){};var B=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function H(d,v,T){for(const M in d)v.call(T,d[M],M,d)}function N(d,v){for(const T in d)v.call(void 0,d[T],T,d)}function b(d){const v={};for(const T in d)v[T]=d[T];return v}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(d,v){let T,M;for(let U=1;U<arguments.length;U++){M=arguments[U];for(T in M)d[T]=M[T];for(let G=0;G<A.length;G++)T=A[G],Object.prototype.hasOwnProperty.call(M,T)&&(d[T]=M[T])}}function D(d){var v=1;d=d.split(":");const T=[];for(;0<v&&d.length;)T.push(d.shift()),v--;return d.length&&T.push(d.join(":")),T}function z(d){l.setTimeout(()=>{throw d},0)}function j(){var d=st;let v=null;return d.g&&(v=d.g,d.g=d.g.next,d.g||(d.h=null),v.next=null),v}class Rt{constructor(){this.h=this.g=null}add(v,T){const M=Vt.get();M.set(v,T),this.h?this.h.next=M:this.g=M,this.h=M}}var Vt=new P(()=>new Et,d=>d.reset());class Et{constructor(){this.next=this.g=this.h=null}set(v,T){this.h=v,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let bt,K=!1,st=new Rt,Y=()=>{const d=l.Promise.resolve(void 0);bt=()=>{d.then(ot)}};var ot=()=>{for(var d;d=j();){try{d.h.call(d.g)}catch(T){z(T)}var v=Vt;v.j(d),100>v.h&&(v.h++,d.next=v.g,v.g=d)}K=!1};function ut(){this.s=this.s,this.C=this.C}ut.prototype.s=!1,ut.prototype.ma=function(){this.s||(this.s=!0,this.N())},ut.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function wt(d,v){this.type=d,this.g=this.target=v,this.defaultPrevented=!1}wt.prototype.h=function(){this.defaultPrevented=!0};var St=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var d=!1,v=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const T=()=>{};l.addEventListener("test",T,v),l.removeEventListener("test",T,v)}catch{}return d}();function _t(d,v){if(wt.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var T=this.type=d.type,M=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=v,v=d.relatedTarget){if(B){t:{try{V(v.nodeName);var U=!0;break t}catch{}U=!1}U||(v=null)}}else T=="mouseover"?v=d.fromElement:T=="mouseout"&&(v=d.toElement);this.relatedTarget=v,M?(this.clientX=M.clientX!==void 0?M.clientX:M.pageX,this.clientY=M.clientY!==void 0?M.clientY:M.pageY,this.screenX=M.screenX||0,this.screenY=M.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:at[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&_t.aa.h.call(this)}}E(_t,wt);var at={2:"touch",3:"pen",4:"mouse"};_t.prototype.h=function(){_t.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var we="closure_listenable_"+(1e6*Math.random()|0),hi=0;function Hu(d,v,T,M,U){this.listener=d,this.proxy=null,this.src=v,this.type=T,this.capture=!!M,this.ha=U,this.key=++hi,this.da=this.fa=!1}function ys(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function vs(d){this.src=d,this.g={},this.h=0}vs.prototype.add=function(d,v,T,M,U){var G=d.toString();d=this.g[G],d||(d=this.g[G]=[],this.h++);var tt=xr(d,v,M,U);return-1<tt?(v=d[tt],T||(v.fa=!1)):(v=new Hu(v,this.src,G,!!M,U),v.fa=T,d.push(v)),v};function Mi(d,v){var T=v.type;if(T in d.g){var M=d.g[T],U=Array.prototype.indexOf.call(M,v,void 0),G;(G=0<=U)&&Array.prototype.splice.call(M,U,1),G&&(ys(v),d.g[T].length==0&&(delete d.g[T],d.h--))}}function xr(d,v,T,M){for(var U=0;U<d.length;++U){var G=d[U];if(!G.da&&G.listener==v&&G.capture==!!T&&G.ha==M)return U}return-1}var al="closure_lm_"+(1e6*Math.random()|0),To={};function ll(d,v,T,M,U){if(Array.isArray(v)){for(var G=0;G<v.length;G++)ll(d,v[G],T,M,U);return null}return T=qu(T),d&&d[we]?d.K(v,T,h(M)?!!M.capture:!!M,U):cl(d,v,T,!1,M,U)}function cl(d,v,T,M,U,G){if(!v)throw Error("Invalid event type");var tt=h(U)?!!U.capture:!!U,zt=Po(d);if(zt||(d[al]=zt=new vs(d)),T=zt.add(v,T,M,tt,G),T.proxy)return T;if(M=Eo(),T.proxy=M,M.src=d,M.listener=T,d.addEventListener)St||(U=tt),U===void 0&&(U=!1),d.addEventListener(v.toString(),M,U);else if(d.attachEvent)d.attachEvent(ko(v.toString()),M);else if(d.addListener&&d.removeListener)d.addListener(M);else throw Error("addEventListener and attachEvent are unavailable.");return T}function Eo(){function d(T){return v.call(d.src,d.listener,T)}const v=$u;return d}function Wu(d,v,T,M,U){if(Array.isArray(v))for(var G=0;G<v.length;G++)Wu(d,v[G],T,M,U);else M=h(M)?!!M.capture:!!M,T=qu(T),d&&d[we]?(d=d.i,v=String(v).toString(),v in d.g&&(G=d.g[v],T=xr(G,T,M,U),-1<T&&(ys(G[T]),Array.prototype.splice.call(G,T,1),G.length==0&&(delete d.g[v],d.h--)))):d&&(d=Po(d))&&(v=d.g[v.toString()],d=-1,v&&(d=xr(v,T,M,U)),(T=-1<d?v[d]:null)&&So(T))}function So(d){if(typeof d!="number"&&d&&!d.da){var v=d.src;if(v&&v[we])Mi(v.i,d);else{var T=d.type,M=d.proxy;v.removeEventListener?v.removeEventListener(T,M,d.capture):v.detachEvent?v.detachEvent(ko(T),M):v.addListener&&v.removeListener&&v.removeListener(M),(T=Po(v))?(Mi(T,d),T.h==0&&(T.src=null,v[al]=null)):ys(d)}}}function ko(d){return d in To?To[d]:To[d]="on"+d}function $u(d,v){if(d.da)d=!0;else{v=new _t(v,this);var T=d.listener,M=d.ha||d.src;d.fa&&So(d),d=T.call(M,v)}return d}function Po(d){return d=d[al],d instanceof vs?d:null}var ul="__closure_events_fn_"+(1e9*Math.random()>>>0);function qu(d){return typeof d=="function"?d:(d[ul]||(d[ul]=function(v){return d.handleEvent(v)}),d[ul])}function me(){ut.call(this),this.i=new vs(this),this.M=this,this.F=null}E(me,ut),me.prototype[we]=!0,me.prototype.removeEventListener=function(d,v,T,M){Wu(this,d,v,T,M)};function Pe(d,v){var T,M=d.F;if(M)for(T=[];M;M=M.F)T.push(M);if(d=d.M,M=v.type||v,typeof v=="string")v=new wt(v,d);else if(v instanceof wt)v.target=v.target||d;else{var U=v;v=new wt(M,d),O(v,U)}if(U=!0,T)for(var G=T.length-1;0<=G;G--){var tt=v.g=T[G];U=wr(tt,M,!0,v)&&U}if(tt=v.g=d,U=wr(tt,M,!0,v)&&U,U=wr(tt,M,!1,v)&&U,T)for(G=0;G<T.length;G++)tt=v.g=T[G],U=wr(tt,M,!1,v)&&U}me.prototype.N=function(){if(me.aa.N.call(this),this.i){var d=this.i,v;for(v in d.g){for(var T=d.g[v],M=0;M<T.length;M++)ys(T[M]);delete d.g[v],d.h--}}this.F=null},me.prototype.K=function(d,v,T,M){return this.i.add(String(d),v,!1,T,M)},me.prototype.L=function(d,v,T,M){return this.i.add(String(d),v,!0,T,M)};function wr(d,v,T,M){if(v=d.i.g[String(v)],!v)return!0;v=v.concat();for(var U=!0,G=0;G<v.length;++G){var tt=v[G];if(tt&&!tt.da&&tt.capture==T){var zt=tt.listener,ge=tt.ha||tt.src;tt.fa&&Mi(d.i,tt),U=zt.call(ge,M)!==!1&&U}}return U&&!M.defaultPrevented}function Gu(d,v,T){if(typeof d=="function")T&&(d=y(d,T));else if(d&&typeof d.handleEvent=="function")d=y(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:l.setTimeout(d,v||0)}function hl(d){d.g=Gu(()=>{d.g=null,d.i&&(d.i=!1,hl(d))},d.l);const v=d.h;d.h=null,d.m.apply(null,v)}class Ku extends ut{constructor(v,T){super(),this.m=v,this.l=T,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:hl(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function br(d){ut.call(this),this.h=d,this.g={}}E(br,ut);var dl=[];function Io(d){H(d.g,function(v,T){this.g.hasOwnProperty(T)&&So(v)},d),d.g={}}br.prototype.N=function(){br.aa.N.call(this),Io(this)},br.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Co=l.JSON.stringify,Ep=l.JSON.parse,Tr=class{stringify(d){return l.JSON.stringify(d,void 0)}parse(d){return l.JSON.parse(d,void 0)}};function fl(){}fl.prototype.h=null;function Zu(d){return d.h||(d.h=d.i())}function pl(){}var xs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ao(){wt.call(this,"d")}E(Ao,wt);function ml(){wt.call(this,"c")}E(ml,wt);var Oi={},Qu=null;function Ro(){return Qu=Qu||new me}Oi.La="serverreachability";function Yu(d){wt.call(this,Oi.La,d)}E(Yu,wt);function Er(d){const v=Ro();Pe(v,new Yu(v))}Oi.STAT_EVENT="statevent";function No(d,v){wt.call(this,Oi.STAT_EVENT,d),this.stat=v}E(No,wt);function Me(d){const v=Ro();Pe(v,new No(v,d))}Oi.Ma="timingevent";function Xu(d,v){wt.call(this,Oi.Ma,d),this.size=v}E(Xu,wt);function Sr(d,v){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){d()},v)}function kr(){this.g=!0}kr.prototype.xa=function(){this.g=!1};function Sn(d,v,T,M,U,G){d.info(function(){if(d.g)if(G)for(var tt="",zt=G.split("&"),ge=0;ge<zt.length;ge++){var Mt=zt[ge].split("=");if(1<Mt.length){var $t=Mt[0];Mt=Mt[1];var ne=$t.split("_");tt=2<=ne.length&&ne[1]=="type"?tt+($t+"="+Mt+"&"):tt+($t+"=redacted&")}}else tt=null;else tt=G;return"XMLHTTP REQ ("+M+") [attempt "+U+"]: "+v+`
`+T+`
`+tt})}function rt(d,v,T,M,U,G,tt){d.info(function(){return"XMLHTTP RESP ("+M+") [ attempt "+U+"]: "+v+`
`+T+`
`+G+" "+tt})}function Di(d,v,T,M){d.info(function(){return"XMLHTTP TEXT ("+v+"): "+th(d,T)+(M?" "+M:"")})}function Ju(d,v){d.info(function(){return"TIMEOUT: "+v})}kr.prototype.info=function(){};function th(d,v){if(!d.g)return v;if(!v)return null;try{var T=JSON.parse(v);if(T){for(d=0;d<T.length;d++)if(Array.isArray(T[d])){var M=T[d];if(!(2>M.length)){var U=M[1];if(Array.isArray(U)&&!(1>U.length)){var G=U[0];if(G!="noop"&&G!="stop"&&G!="close")for(var tt=1;tt<U.length;tt++)U[tt]=""}}}}return Co(T)}catch{return v}}var Pr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Lo={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Mo;function Gn(){}E(Gn,fl),Gn.prototype.g=function(){return new XMLHttpRequest},Gn.prototype.i=function(){return{}},Mo=new Gn;function Kn(d,v,T,M){this.j=d,this.i=v,this.l=T,this.R=M||1,this.U=new br(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new eh}function eh(){this.i=null,this.g="",this.h=!1}var nh={},gl={};function _l(d,v,T){d.L=1,d.v=Pn(ae(v)),d.m=T,d.P=!0,yl(d,null)}function yl(d,v){d.F=Date.now(),Do(d),d.A=ae(d.v);var T=d.A,M=d.R;Array.isArray(M)||(M=[String(M)]),rh(T.i,"t",M),d.C=0,T=d.j.J,d.h=new eh,d.g=dh(d.j,T?v:null,!d.m),0<d.O&&(d.M=new Ku(y(d.Y,d,d.g),d.O)),v=d.U,T=d.g,M=d.ca;var U="readystatechange";Array.isArray(U)||(U&&(dl[0]=U.toString()),U=dl);for(var G=0;G<U.length;G++){var tt=ll(T,U[G],M||v.handleEvent,!1,v.h||v);if(!tt)break;v.g[tt.key]=tt}v=d.H?b(d.H):{},d.m?(d.u||(d.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,v)):(d.u="GET",d.g.ea(d.A,d.u,null,v)),Er(),Sn(d.i,d.u,d.A,d.l,d.R,d.m)}Kn.prototype.ca=function(d){d=d.target;const v=this.M;v&&Je(d)==3?v.j():this.Y(d)},Kn.prototype.Y=function(d){try{if(d==this.g)t:{const ne=Je(this.g);var v=this.g.Ba();const Ps=this.g.Z();if(!(3>ne)&&(ne!=3||this.g&&(this.h.h||this.g.oa()||Ml(this.g)))){this.J||ne!=4||v==7||(v==8||0>=Ps?Er(3):Er(2)),vl(this);var T=this.g.Z();this.X=T;e:if(ih(this)){var M=Ml(this.g);d="";var U=M.length,G=Je(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ji(this),Ir(this);var tt="";break e}this.h.i=new l.TextDecoder}for(v=0;v<U;v++)this.h.h=!0,d+=this.h.i.decode(M[v],{stream:!(G&&v==U-1)});M.length=0,this.h.g+=d,this.C=0,tt=this.h.g}else tt=this.g.oa();if(this.o=T==200,rt(this.i,this.u,this.A,this.l,this.R,ne,T),this.o){if(this.T&&!this.K){e:{if(this.g){var zt,ge=this.g;if((zt=ge.g?ge.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(zt)){var Mt=zt;break e}}Mt=null}if(T=Mt)Di(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Cr(this,T);else{this.o=!1,this.s=3,Me(12),ji(this),Ir(this);break t}}if(this.P){T=!0;let he;for(;!this.J&&this.C<tt.length;)if(he=Oo(this,tt),he==gl){ne==4&&(this.s=4,Me(14),T=!1),Di(this.i,this.l,null,"[Incomplete Response]");break}else if(he==nh){this.s=4,Me(15),Di(this.i,this.l,tt,"[Invalid Chunk]"),T=!1;break}else Di(this.i,this.l,he,null),Cr(this,he);if(ih(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ne!=4||tt.length!=0||this.h.h||(this.s=1,Me(16),T=!1),this.o=this.o&&T,!T)Di(this.i,this.l,tt,"[Invalid Chunked Response]"),ji(this),Ir(this);else if(0<tt.length&&!this.W){this.W=!0;var $t=this.j;$t.g==this&&$t.ba&&!$t.M&&($t.j.info("Great, no buffering proxy detected. Bytes received: "+tt.length),$o($t),$t.M=!0,Me(11))}}else Di(this.i,this.l,tt,null),Cr(this,tt);ne==4&&ji(this),this.o&&!this.J&&(ne==4?Dl(this.j,this):(this.o=!1,Do(this)))}else Sp(this.g),T==400&&0<tt.indexOf("Unknown SID")?(this.s=3,Me(12)):(this.s=0,Me(13)),ji(this),Ir(this)}}}catch{}finally{}};function ih(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function Oo(d,v){var T=d.C,M=v.indexOf(`
`,T);return M==-1?gl:(T=Number(v.substring(T,M)),isNaN(T)?nh:(M+=1,M+T>v.length?gl:(v=v.slice(M,M+T),d.C=M+T,v)))}Kn.prototype.cancel=function(){this.J=!0,ji(this)};function Do(d){d.S=Date.now()+d.I,sh(d,d.I)}function sh(d,v){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Sr(y(d.ba,d),v)}function vl(d){d.B&&(l.clearTimeout(d.B),d.B=null)}Kn.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(Ju(this.i,this.A),this.L!=2&&(Er(),Me(17)),ji(this),this.s=2,Ir(this)):sh(this,this.S-d)};function Ir(d){d.j.G==0||d.J||Dl(d.j,d)}function ji(d){vl(d);var v=d.M;v&&typeof v.ma=="function"&&v.ma(),d.M=null,Io(d.U),d.g&&(v=d.g,d.g=null,v.abort(),v.ma())}function Cr(d,v){try{var T=d.j;if(T.G!=0&&(T.g==d||Ct(T.h,d))){if(!d.K&&Ct(T.h,d)&&T.G==3){try{var M=T.Da.g.parse(v)}catch{M=null}if(Array.isArray(M)&&M.length==3){var U=M;if(U[0]==0){t:if(!T.u){if(T.g)if(T.g.F+3e3<d.F)Go(T),Ho(T);else break t;Wo(T),Me(18)}}else T.za=U[1],0<T.za-T.T&&37500>U[2]&&T.F&&T.v==0&&!T.C&&(T.C=Sr(y(T.Za,T),6e3));if(1>=ws(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else Ui(T,11)}else if((d.K||T.g==d)&&Go(T),!I(v))for(U=T.Da.g.parse(v),v=0;v<U.length;v++){let Mt=U[v];if(T.T=Mt[0],Mt=Mt[1],T.G==2)if(Mt[0]=="c"){T.K=Mt[1],T.ia=Mt[2];const $t=Mt[3];$t!=null&&(T.la=$t,T.j.info("VER="+T.la));const ne=Mt[4];ne!=null&&(T.Aa=ne,T.j.info("SVER="+T.Aa));const Ps=Mt[5];Ps!=null&&typeof Ps=="number"&&0<Ps&&(M=1.5*Ps,T.L=M,T.j.info("backChannelRequestTimeoutMs_="+M)),M=T;const he=d.g;if(he){const Zo=he.g?he.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Zo){var G=M.h;G.g||Zo.indexOf("spdy")==-1&&Zo.indexOf("quic")==-1&&Zo.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(qt(G,G.h),G.h=null))}if(M.D){const pi=he.g?he.g.getResponseHeader("X-HTTP-Session-Id"):null;pi&&(M.ya=pi,mt(M.I,M.D,pi))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-d.F,T.j.info("Handshake RTT: "+T.R+"ms")),M=T;var tt=d;if(M.qa=Ko(M,M.J?M.ia:null,M.W),tt.K){Rr(M.h,tt);var zt=tt,ge=M.L;ge&&(zt.I=ge),zt.B&&(vl(zt),Do(zt)),M.g=tt}else Yn(M);0<T.i.length&&ks(T)}else Mt[0]!="stop"&&Mt[0]!="close"||Ui(T,7);else T.G==3&&(Mt[0]=="stop"||Mt[0]=="close"?Mt[0]=="stop"?Ui(T,7):Uo(T):Mt[0]!="noop"&&T.l&&T.l.ta(Mt),T.v=0)}}Er(4)}catch{}}var Ar=class{constructor(d,v){this.g=d,this.map=v}};function xl(d){this.l=d||10,l.PerformanceNavigationTiming?(d=l.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function wl(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function ws(d){return d.h?1:d.g?d.g.size:0}function Ct(d,v){return d.h?d.h==v:d.g?d.g.has(v):!1}function qt(d,v){d.g?d.g.add(v):d.h=v}function Rr(d,v){d.h&&d.h==v?d.h=null:d.g&&d.g.has(v)&&d.g.delete(v)}xl.prototype.cancel=function(){if(this.i=Vi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Vi(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let v=d.i;for(const T of d.g.values())v=v.concat(T.D);return v}return S(d.i)}function bs(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(u(d)){for(var v=[],T=d.length,M=0;M<T;M++)v.push(d[M]);return v}v=[],T=0;for(M in d)v[T++]=d[M];return v}function bl(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(u(d)||typeof d=="string"){var v=[];d=d.length;for(var T=0;T<d;T++)v.push(T);return v}v=[],T=0;for(const M in d)v[T++]=M;return v}}}function xt(d,v){if(d.forEach&&typeof d.forEach=="function")d.forEach(v,void 0);else if(u(d)||typeof d=="string")Array.prototype.forEach.call(d,v,void 0);else for(var T=bl(d),M=bs(d),U=M.length,G=0;G<U;G++)v.call(void 0,M[G],T&&T[G],d)}var Xt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Tl(d,v){if(d){d=d.split("&");for(var T=0;T<d.length;T++){var M=d[T].indexOf("="),U=null;if(0<=M){var G=d[T].substring(0,M);U=d[T].substring(M+1)}else G=d[T];v(G,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function kn(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof kn){this.h=d.h,jo(this,d.j),this.o=d.o,this.g=d.g,Fi(this,d.s),this.l=d.l;var v=d.i,T=new zi;T.i=v.i,v.g&&(T.g=new Map(v.g),T.h=v.h),di(this,T),this.m=d.m}else d&&(v=String(d).match(Xt))?(this.h=!1,jo(this,v[1]||"",!0),this.o=Zn(v[2]||""),this.g=Zn(v[3]||"",!0),Fi(this,v[4]),this.l=Zn(v[5]||"",!0),di(this,v[6]||"",!0),this.m=Zn(v[7]||"")):(this.h=!1,this.i=new zi(null,this.h))}kn.prototype.toString=function(){var d=[],v=this.j;v&&d.push(Qn(v,Ts,!0),":");var T=this.g;return(T||v=="file")&&(d.push("//"),(v=this.o)&&d.push(Qn(v,Ts,!0),"@"),d.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&d.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&d.push("/"),d.push(Qn(T,T.charAt(0)=="/"?kl:Sl,!0))),(T=this.i.toString())&&d.push("?",T),(T=this.m)&&d.push("#",Qn(T,Pl)),d.join("")};function ae(d){return new kn(d)}function jo(d,v,T){d.j=T?Zn(v,!0):v,d.j&&(d.j=d.j.replace(/:$/,""))}function Fi(d,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);d.s=v}else d.s=null}function di(d,v,T){v instanceof zi?(d.i=v,In(d.i,d.h)):(T||(v=Qn(v,Vo)),d.i=new zi(v,d.h))}function mt(d,v,T){d.i.set(v,T)}function Pn(d){return mt(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Zn(d,v){return d?v?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Qn(d,v,T){return typeof d=="string"?(d=encodeURI(d).replace(v,El),T&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function El(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Ts=/[#\/\?@]/g,Sl=/[#\?:]/g,kl=/[#\?]/g,Vo=/[#\?@]/g,Pl=/#/g;function zi(d,v){this.h=this.g=null,this.i=d||null,this.j=!!v}function gn(d){d.g||(d.g=new Map,d.h=0,d.i&&Tl(d.i,function(v,T){d.add(decodeURIComponent(v.replace(/\+/g," ")),T)}))}e=zi.prototype,e.add=function(d,v){gn(this),this.i=null,d=ht(this,d);var T=this.g.get(d);return T||this.g.set(d,T=[]),T.push(v),this.h+=1,this};function Il(d,v){gn(d),v=ht(d,v),d.g.has(v)&&(d.i=null,d.h-=d.g.get(v).length,d.g.delete(v))}function Fo(d,v){return gn(d),v=ht(d,v),d.g.has(v)}e.forEach=function(d,v){gn(this),this.g.forEach(function(T,M){T.forEach(function(U){d.call(v,U,M,this)},this)},this)},e.na=function(){gn(this);const d=Array.from(this.g.values()),v=Array.from(this.g.keys()),T=[];for(let M=0;M<v.length;M++){const U=d[M];for(let G=0;G<U.length;G++)T.push(v[M])}return T},e.V=function(d){gn(this);let v=[];if(typeof d=="string")Fo(this,d)&&(v=v.concat(this.g.get(ht(this,d))));else{d=Array.from(this.g.values());for(let T=0;T<d.length;T++)v=v.concat(d[T])}return v},e.set=function(d,v){return gn(this),this.i=null,d=ht(this,d),Fo(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[v]),this.h+=1,this},e.get=function(d,v){return d?(d=this.V(d),0<d.length?String(d[0]):v):v};function rh(d,v,T){Il(d,v),0<T.length&&(d.i=null,d.g.set(ht(d,v),S(T)),d.h+=T.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],v=Array.from(this.g.keys());for(var T=0;T<v.length;T++){var M=v[T];const G=encodeURIComponent(String(M)),tt=this.V(M);for(M=0;M<tt.length;M++){var U=G;tt[M]!==""&&(U+="="+encodeURIComponent(String(tt[M]))),d.push(U)}}return this.i=d.join("&")};function ht(d,v){return v=String(v),d.j&&(v=v.toLowerCase()),v}function In(d,v){v&&!d.j&&(gn(d),d.i=null,d.g.forEach(function(T,M){var U=M.toLowerCase();M!=U&&(Il(this,M),rh(this,U,T))},d)),d.j=v}function Wt(d,v){const T=new kr;if(l.Image){const M=new Image;M.onload=w(Cn,T,"TestLoadImage: loaded",!0,v,M),M.onerror=w(Cn,T,"TestLoadImage: error",!1,v,M),M.onabort=w(Cn,T,"TestLoadImage: abort",!1,v,M),M.ontimeout=w(Cn,T,"TestLoadImage: timeout",!1,v,M),l.setTimeout(function(){M.ontimeout&&M.ontimeout()},1e4),M.src=d}else v(!1)}function oh(d,v){const T=new kr,M=new AbortController,U=setTimeout(()=>{M.abort(),Cn(T,"TestPingServer: timeout",!1,v)},1e4);fetch(d,{signal:M.signal}).then(G=>{clearTimeout(U),G.ok?Cn(T,"TestPingServer: ok",!0,v):Cn(T,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(U),Cn(T,"TestPingServer: error",!1,v)})}function Cn(d,v,T,M,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),M(T)}catch{}}function Cl(){this.g=new Tr}function Al(d,v,T){const M=T||"";try{xt(d,function(U,G){let tt=U;h(U)&&(tt=Co(U)),v.push(M+G+"="+encodeURIComponent(tt))})}catch(U){throw v.push(M+"type="+encodeURIComponent("_badmap")),U}}function An(d){this.l=d.Ub||null,this.j=d.eb||!1}E(An,fl),An.prototype.g=function(){return new Es(this.l,this.j)},An.prototype.i=function(d){return function(){return d}}({});function Es(d,v){me.call(this),this.D=d,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(Es,me),e=Es.prototype,e.open=function(d,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=v,this.readyState=1,_n(this)},e.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(v.body=d),(this.D||l).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ee(this)),this.readyState=0},e.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,_n(this)),this.g&&(this.readyState=3,_n(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ss(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ss(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}e.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var v=d.value?d.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!d.done}))&&(this.response=this.responseText+=v)}d.done?ee(this):_n(this),this.readyState==3&&Ss(this)}},e.Ra=function(d){this.g&&(this.response=this.responseText=d,ee(this))},e.Qa=function(d){this.g&&(this.response=d,ee(this))},e.ga=function(){this.g&&ee(this)};function ee(d){d.readyState=4,d.l=null,d.j=null,d.v=null,_n(d)}e.setRequestHeader=function(d,v){this.u.append(d,v)},e.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],v=this.h.entries();for(var T=v.next();!T.done;)T=T.value,d.push(T[0]+": "+T[1]),T=v.next();return d.join(`\r
`)};function _n(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Es.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Rl(d){let v="";return H(d,function(T,M){v+=M,v+=":",v+=T,v+=`\r
`}),v}function zo(d,v,T){t:{for(M in T){var M=!1;break t}M=!0}M||(T=Rl(T),typeof d=="string"?T!=null&&encodeURIComponent(String(T)):mt(d,v,T))}function Jt(d){me.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(Jt,me);var ah=/^https?$/i,Nl=["POST","PUT"];e=Jt.prototype,e.Ha=function(d){this.J=d},e.ea=function(d,v,T,M){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);v=v?v.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Mo.g(),this.v=this.o?Zu(this.o):Zu(Mo),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(v,String(d),!0),this.B=!1}catch(G){lh(this,G);return}if(d=T||"",T=new Map(this.headers),M)if(Object.getPrototypeOf(M)===Object.prototype)for(var U in M)T.set(U,M[U]);else if(typeof M.keys=="function"&&typeof M.get=="function")for(const G of M.keys())T.set(G,M.get(G));else throw Error("Unknown input type for opt_headers: "+String(M));M=Array.from(T.keys()).find(G=>G.toLowerCase()=="content-type"),U=l.FormData&&d instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Nl,v,void 0))||M||U||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,tt]of T)this.g.setRequestHeader(G,tt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{an(this),this.u=!0,this.g.send(d),this.u=!1}catch(G){lh(this,G)}};function lh(d,v){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=v,d.m=5,Ll(d),Bo(d)}function Ll(d){d.A||(d.A=!0,Pe(d,"complete"),Pe(d,"error"))}e.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,Pe(this,"complete"),Pe(this,"abort"),Bo(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bo(this,!0)),Jt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Pt(this):this.bb())},e.bb=function(){Pt(this)};function Pt(d){if(d.h&&typeof a<"u"&&(!d.v[1]||Je(d)!=4||d.Z()!=2)){if(d.u&&Je(d)==4)Gu(d.Ea,0,d);else if(Pe(d,"readystatechange"),Je(d)==4){d.h=!1;try{const tt=d.Z();t:switch(tt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break t;default:v=!1}var T;if(!(T=v)){var M;if(M=tt===0){var U=String(d.D).match(Xt)[1]||null;!U&&l.self&&l.self.location&&(U=l.self.location.protocol.slice(0,-1)),M=!ah.test(U?U.toLowerCase():"")}T=M}if(T)Pe(d,"complete"),Pe(d,"success");else{d.m=6;try{var G=2<Je(d)?d.g.statusText:""}catch{G=""}d.l=G+" ["+d.Z()+"]",Ll(d)}}finally{Bo(d)}}}}function Bo(d,v){if(d.g){an(d);const T=d.g,M=d.v[0]?()=>{}:null;d.g=null,d.v=null,v||Pe(d,"ready");try{T.onreadystatechange=M}catch{}}}function an(d){d.I&&(l.clearTimeout(d.I),d.I=null)}e.isActive=function(){return!!this.g};function Je(d){return d.g?d.g.readyState:0}e.Z=function(){try{return 2<Je(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(d){if(this.g){var v=this.g.responseText;return d&&v.indexOf(d)==0&&(v=v.substring(d.length)),Ep(v)}};function Ml(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Sp(d){const v={};d=(d.g&&2<=Je(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let M=0;M<d.length;M++){if(I(d[M]))continue;var T=D(d[M]);const U=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const G=v[U]||[];v[U]=G,G.push(T)}N(v,function(M){return M.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bi(d,v,T){return T&&T.internalChannelParams&&T.internalChannelParams[d]||v}function ch(d){this.Aa=0,this.i=[],this.j=new kr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Bi("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Bi("baseRetryDelayMs",5e3,d),this.cb=Bi("retryDelaySeedMs",1e4,d),this.Wa=Bi("forwardChannelMaxRetries",2,d),this.wa=Bi("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new xl(d&&d.concurrentRequestLimit),this.Da=new Cl,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=ch.prototype,e.la=8,e.G=1,e.connect=function(d,v,T,M){Me(0),this.W=d,this.H=v||{},T&&M!==void 0&&(this.H.OSID=T,this.H.OAID=M),this.F=this.X,this.I=Ko(this,null,this.W),ks(this)};function Uo(d){if(uh(d),d.G==3){var v=d.U++,T=ae(d.I);if(mt(T,"SID",d.K),mt(T,"RID",v),mt(T,"TYPE","terminate"),Nr(d,T),v=new Kn(d,d.j,v),v.L=2,v.v=Pn(ae(T)),T=!1,l.navigator&&l.navigator.sendBeacon)try{T=l.navigator.sendBeacon(v.v.toString(),"")}catch{}!T&&l.Image&&(new Image().src=v.v,T=!0),T||(v.g=dh(v.j,null),v.g.ea(v.v)),v.F=Date.now(),Do(v)}hh(d)}function Ho(d){d.g&&($o(d),d.g.cancel(),d.g=null)}function uh(d){Ho(d),d.u&&(l.clearTimeout(d.u),d.u=null),Go(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&l.clearTimeout(d.s),d.s=null)}function ks(d){if(!wl(d.h)&&!d.s){d.s=!0;var v=d.Ga;bt||Y(),K||(bt(),K=!0),st.add(v,d),d.B=0}}function kp(d,v){return ws(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=v.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Sr(y(d.Ga,d,v),jl(d,d.B)),d.B++,!0)}e.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const U=new Kn(this,this.j,d);let G=this.o;if(this.S&&(G?(G=b(G),O(G,this.S)):G=this.S),this.m!==null||this.O||(U.H=G,G=null),this.P)t:{for(var v=0,T=0;T<this.i.length;T++){e:{var M=this.i[T];if("__data__"in M.map&&(M=M.map.__data__,typeof M=="string")){M=M.length;break e}M=void 0}if(M===void 0)break;if(v+=M,4096<v){v=T;break t}if(v===4096||T===this.i.length-1){v=T+1;break t}}v=1e3}else v=1e3;v=Ol(this,U,v),T=ae(this.I),mt(T,"RID",d),mt(T,"CVER",22),this.D&&mt(T,"X-HTTP-Session-Id",this.D),Nr(this,T),G&&(this.O?v="headers="+encodeURIComponent(String(Rl(G)))+"&"+v:this.m&&zo(T,this.m,G)),qt(this.h,U),this.Ua&&mt(T,"TYPE","init"),this.P?(mt(T,"$req",v),mt(T,"SID","null"),U.T=!0,_l(U,T,null)):_l(U,T,v),this.G=2}}else this.G==3&&(d?yn(this,d):this.i.length==0||wl(this.h)||yn(this))};function yn(d,v){var T;v?T=v.l:T=d.U++;const M=ae(d.I);mt(M,"SID",d.K),mt(M,"RID",T),mt(M,"AID",d.T),Nr(d,M),d.m&&d.o&&zo(M,d.m,d.o),T=new Kn(d,d.j,T,d.B+1),d.m===null&&(T.H=d.o),v&&(d.i=v.D.concat(d.i)),v=Ol(d,T,1e3),T.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),qt(d.h,T),_l(T,M,v)}function Nr(d,v){d.H&&H(d.H,function(T,M){mt(v,M,T)}),d.l&&xt({},function(T,M){mt(v,M,T)})}function Ol(d,v,T){T=Math.min(d.i.length,T);var M=d.l?y(d.l.Na,d.l,d):null;t:{var U=d.i;let G=-1;for(;;){const tt=["count="+T];G==-1?0<T?(G=U[0].g,tt.push("ofs="+G)):G=0:tt.push("ofs="+G);let zt=!0;for(let ge=0;ge<T;ge++){let Mt=U[ge].g;const $t=U[ge].map;if(Mt-=G,0>Mt)G=Math.max(0,U[ge].g-100),zt=!1;else try{Al($t,tt,"req"+Mt+"_")}catch{M&&M($t)}}if(zt){M=tt.join("&");break t}}}return d=d.i.splice(0,T),v.D=d,M}function Yn(d){if(!d.g&&!d.u){d.Y=1;var v=d.Fa;bt||Y(),K||(bt(),K=!0),st.add(v,d),d.v=0}}function Wo(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Sr(y(d.Fa,d),jl(d,d.v)),d.v++,!0)}e.Fa=function(){if(this.u=null,qo(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Sr(y(this.ab,this),d)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Me(10),Ho(this),qo(this))};function $o(d){d.A!=null&&(l.clearTimeout(d.A),d.A=null)}function qo(d){d.g=new Kn(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var v=ae(d.qa);mt(v,"RID","rpc"),mt(v,"SID",d.K),mt(v,"AID",d.T),mt(v,"CI",d.F?"0":"1"),!d.F&&d.ja&&mt(v,"TO",d.ja),mt(v,"TYPE","xmlhttp"),Nr(d,v),d.m&&d.o&&zo(v,d.m,d.o),d.L&&(d.g.I=d.L);var T=d.g;d=d.ia,T.L=1,T.v=Pn(ae(v)),T.m=null,T.P=!0,yl(T,d)}e.Za=function(){this.C!=null&&(this.C=null,Ho(this),Wo(this),Me(19))};function Go(d){d.C!=null&&(l.clearTimeout(d.C),d.C=null)}function Dl(d,v){var T=null;if(d.g==v){Go(d),$o(d),d.g=null;var M=2}else if(Ct(d.h,v))T=v.D,Rr(d.h,v),M=1;else return;if(d.G!=0){if(v.o)if(M==1){T=v.m?v.m.length:0,v=Date.now()-v.F;var U=d.B;M=Ro(),Pe(M,new Xu(M,T)),ks(d)}else Yn(d);else if(U=v.s,U==3||U==0&&0<v.X||!(M==1&&kp(d,v)||M==2&&Wo(d)))switch(T&&0<T.length&&(v=d.h,v.i=v.i.concat(T)),U){case 1:Ui(d,5);break;case 4:Ui(d,10);break;case 3:Ui(d,6);break;default:Ui(d,2)}}}function jl(d,v){let T=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(T*=2),T*v}function Ui(d,v){if(d.j.info("Error code "+v),v==2){var T=y(d.fb,d),M=d.Xa;const U=!M;M=new kn(M||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||jo(M,"https"),Pn(M),U?Wt(M.toString(),T):oh(M.toString(),T)}else Me(2);d.G=0,d.l&&d.l.sa(v),hh(d),uh(d)}e.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Me(2)):(this.j.info("Failed to ping google.com"),Me(1))};function hh(d){if(d.G=0,d.ka=[],d.l){const v=Vi(d.h);(v.length!=0||d.i.length!=0)&&(k(d.ka,v),k(d.ka,d.i),d.h.i.length=0,S(d.i),d.i.length=0),d.l.ra()}}function Ko(d,v,T){var M=T instanceof kn?ae(T):new kn(T);if(M.g!="")v&&(M.g=v+"."+M.g),Fi(M,M.s);else{var U=l.location;M=U.protocol,v=v?v+"."+U.hostname:U.hostname,U=+U.port;var G=new kn(null);M&&jo(G,M),v&&(G.g=v),U&&Fi(G,U),T&&(G.l=T),M=G}return T=d.D,v=d.ya,T&&v&&mt(M,T,v),mt(M,"VER",d.la),Nr(d,M),M}function dh(d,v,T){if(v&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=d.Ca&&!d.pa?new Jt(new An({eb:T})):new Jt(d.pa),v.Ha(d.J),v}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Vl(){}e=Vl.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Lr(){}Lr.prototype.g=function(d,v){return new Ie(d,v)};function Ie(d,v){me.call(this),this.g=new ch(v),this.l=d,this.h=v&&v.messageUrlParams||null,d=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(d?d["X-WebChannel-Content-Type"]=v.messageContentType:d={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(d?d["X-WebChannel-Client-Profile"]=v.va:d={"X-WebChannel-Client-Profile":v.va}),this.g.S=d,(d=v&&v.Sb)&&!I(d)&&(this.g.m=d),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!I(v)&&(this.g.D=v,d=this.h,d!==null&&v in d&&(d=this.h,v in d&&delete d[v])),this.j=new Rn(this)}E(Ie,me),Ie.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ie.prototype.close=function(){Uo(this.g)},Ie.prototype.o=function(d){var v=this.g;if(typeof d=="string"){var T={};T.__data__=d,d=T}else this.u&&(T={},T.__data__=Co(d),d=T);v.i.push(new Ar(v.Ya++,d)),v.G==3&&ks(v)},Ie.prototype.N=function(){this.g.l=null,delete this.j,Uo(this.g),delete this.g,Ie.aa.N.call(this)};function fi(d){Ao.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var v=d.__sm__;if(v){t:{for(const T in v){d=T;break t}d=void 0}(this.i=d)&&(d=this.i,v=v!==null&&d in v?v[d]:void 0),this.data=v}else this.data=d}E(fi,Ao);function fh(){ml.call(this),this.status=1}E(fh,ml);function Rn(d){this.g=d}E(Rn,Vl),Rn.prototype.ua=function(){Pe(this.g,"a")},Rn.prototype.ta=function(d){Pe(this.g,new fi(d))},Rn.prototype.sa=function(d){Pe(this.g,new fh)},Rn.prototype.ra=function(){Pe(this.g,"b")},Lr.prototype.createWebChannel=Lr.prototype.g,Ie.prototype.send=Ie.prototype.o,Ie.prototype.open=Ie.prototype.m,Ie.prototype.close=Ie.prototype.close,gS=function(){return new Lr},mS=function(){return Ro()},pS=Oi,Mg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Pr.NO_ERROR=0,Pr.TIMEOUT=8,Pr.HTTP_ERROR=6,kd=Pr,Lo.COMPLETE="complete",fS=Lo,pl.EventType=xs,xs.OPEN="a",xs.CLOSE="b",xs.ERROR="c",xs.MESSAGE="d",me.prototype.listen=me.prototype.K,uc=pl,Jt.prototype.listenOnce=Jt.prototype.L,Jt.prototype.getLastError=Jt.prototype.Ka,Jt.prototype.getLastErrorCode=Jt.prototype.Ba,Jt.prototype.getStatus=Jt.prototype.Z,Jt.prototype.getResponseJson=Jt.prototype.Oa,Jt.prototype.getResponseText=Jt.prototype.oa,Jt.prototype.send=Jt.prototype.ea,Jt.prototype.setWithCredentials=Jt.prototype.Ha,dS=Jt}).apply(typeof Hh<"u"?Hh:typeof self<"u"?self:typeof window<"u"?window:{});const Rx="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}qe.UNAUTHENTICATED=new qe(null),qe.GOOGLE_CREDENTIALS=new qe("google-credentials-uid"),qe.FIRST_PARTY=new qe("first-party-uid"),qe.MOCK_USER=new qe("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nl="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const co=new oy("@firebase/firestore");function Yl(){return co.logLevel}function it(e,...t){if(co.logLevel<=Nt.DEBUG){const n=t.map(xy);co.debug(`Firestore (${nl}): ${e}`,...n)}}function ps(e,...t){if(co.logLevel<=Nt.ERROR){const n=t.map(xy);co.error(`Firestore (${nl}): ${e}`,...n)}}function za(e,...t){if(co.logLevel<=Nt.WARN){const n=t.map(xy);co.warn(`Firestore (${nl}): ${e}`,...n)}}function xy(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(e="Unexpected state"){const t=`FIRESTORE (${nl}) INTERNAL ASSERTION FAILED: `+e;throw ps(t),new Error(t)}function Ht(e,t){e||gt()}function vt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class lt extends Ni{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class tO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(qe.UNAUTHENTICATED))}shutdown(){}}class eO{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class nO{constructor(t){this.t=t,this.currentUser=qe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Ht(this.o===void 0);let i=this.i;const s=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let r=new sr;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new sr,t.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=r;t.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{it("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(it("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new sr)}},0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(it("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ht(typeof i.accessToken=="string"),new _S(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Ht(t===null||typeof t=="string"),new qe(t)}}class iO{constructor(t,n,i){this.l=t,this.h=n,this.P=i,this.type="FirstParty",this.user=qe.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class sO{constructor(t,n,i){this.l=t,this.h=n,this.P=i}getToken(){return Promise.resolve(new iO(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(qe.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class rO{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oO{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){Ht(this.o===void 0);const i=r=>{r.error!=null&&it("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const a=r.token!==this.R;return this.R=r.token,it("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(r.token):Promise.resolve()};this.o=r=>{t.enqueueRetryable(()=>i(r))};const s=r=>{it("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(r=>s(r)),setTimeout(()=>{if(!this.appCheck){const r=this.A.getImmediate({optional:!0});r?s(r):it("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Ht(typeof n.token=="string"),this.R=n.token,new rO(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aO(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let i="";for(;i.length<20;){const s=aO(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<n&&(i+=t.charAt(s[r]%t.length))}return i}}function Ft(e,t){return e<t?-1:e>t?1:0}function Ba(e,t,n){return e.length===t.length&&e.every((i,s)=>n(i,t[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new lt(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new lt(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new lt(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new lt(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return ke.fromMillis(Date.now())}static fromDate(t){return ke.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*n));return new ke(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Ft(this.nanoseconds,t.nanoseconds):Ft(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(t){this.timestamp=t}static fromTimestamp(t){return new yt(t)}static min(){return new yt(new ke(0,0))}static max(){return new yt(new ke(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(t,n,i){n===void 0?n=0:n>t.length&&gt(),i===void 0?i=t.length-n:i>t.length-n&&gt(),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return ru.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof ru?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let s=0;s<i;s++){const r=t.get(s),a=n.get(s);if(r<a)return-1;if(r>a)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class ce extends ru{construct(t,n,i){return new ce(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new lt(X.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new ce(n)}static emptyPath(){return new ce([])}}const lO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class je extends ru{construct(t,n,i){return new je(t,n,i)}static isValidIdentifier(t){return lO.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),je.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new je(["__name__"])}static fromServerFormat(t){const n=[];let i="",s=0;const r=()=>{if(i.length===0)throw new lt(X.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;s<t.length;){const l=t[s];if(l==="\\"){if(s+1===t.length)throw new lt(X.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new lt(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(i+=l,s++):(r(),s++)}if(r(),a)throw new lt(X.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new je(n)}static emptyPath(){return new je([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(t){this.path=t}static fromPath(t){return new ct(ce.fromString(t))}static fromName(t){return new ct(ce.fromString(t).popFirst(5))}static empty(){return new ct(ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ce.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return ce.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ct(new ce(t.slice()))}}function cO(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,s=yt.fromTimestamp(i===1e9?new ke(n+1,0):new ke(n,i));return new cr(s,ct.empty(),t)}function uO(e){return new cr(e.readTime,e.key,-1)}class cr{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new cr(yt.min(),ct.empty(),-1)}static max(){return new cr(yt.max(),ct.empty(),-1)}}function hO(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=ct.comparator(e.documentKey,t.documentKey),n!==0?n:Ft(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lu(e){if(e.code!==X.FAILED_PRECONDITION||e.message!==dO)throw e;it("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&gt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new Q((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(t,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(n,r).next(i,s)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof Q?n:Q.resolve(n)}catch(n){return Q.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):Q.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):Q.reject(n)}static resolve(t){return new Q((n,i)=>{n(t)})}static reject(t){return new Q((n,i)=>{i(t)})}static waitFor(t){return new Q((n,i)=>{let s=0,r=0,a=!1;t.forEach(l=>{++s,l.next(()=>{++r,a&&r===s&&n()},u=>i(u))}),a=!0,r===s&&n()})}static or(t){let n=Q.resolve(!1);for(const i of t)n=n.next(s=>s?Q.resolve(s):i());return n}static forEach(t,n){const i=[];return t.forEach((s,r)=>{i.push(n.call(this,s,r))}),this.waitFor(i)}static mapArray(t,n){return new Q((i,s)=>{const r=t.length,a=new Array(r);let l=0;for(let u=0;u<r;u++){const h=u;n(t[h]).next(p=>{a[h]=p,++l,l===r&&i(a)},p=>s(p))}})}static doWhile(t,n){return new Q((i,s)=>{const r=()=>{t()===!0?n().next(()=>{r()},s):i()};r()})}}function pO(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Mu(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}wy.oe=-1;function cp(e){return e==null}function gf(e){return e===0&&1/e==-1/0}function mO(e){return typeof e=="number"&&Number.isInteger(e)&&!gf(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nx(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function il(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function vS(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(t,n){this.comparator=t,this.root=n||De.EMPTY}insert(t,n){return new oe(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,De.BLACK,null,null))}remove(t){return new oe(this.comparator,this.root.remove(t,this.comparator).copy(null,null,De.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(t,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){const t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Wh(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Wh(this.root,t,this.comparator,!1)}getReverseIterator(){return new Wh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Wh(this.root,t,this.comparator,!0)}}class Wh{constructor(t,n,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=n?i(t.key,n):1,n&&s&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class De{constructor(t,n,i,s,r){this.key=t,this.value=n,this.color=i??De.RED,this.left=s??De.EMPTY,this.right=r??De.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,s,r){return new De(t??this.key,n??this.value,i??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let s=this;const r=i(t,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(t,n,i),null):r===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return De.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return De.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,De.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,De.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw gt();const t=this.left.check();if(t!==this.right.check())throw gt();return t+(this.isRed()?0:1)}}De.EMPTY=null,De.RED=!0,De.BLACK=!1;De.EMPTY=new class{constructor(){this.size=0}get key(){throw gt()}get value(){throw gt()}get color(){throw gt()}get left(){throw gt()}get right(){throw gt()}copy(t,n,i,s,r){return this}insert(t,n,i){return new De(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(t){this.comparator=t,this.data=new oe(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Lx(this.data.getIterator())}getIteratorFrom(t){return new Lx(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof Fe)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Fe(this.comparator);return n.data=t,n}}class Lx{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(t){this.fields=t,t.sort(je.comparator)}static empty(){return new ii([])}unionWith(t){let n=new Fe(je.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new ii(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Ba(this.fields,t.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new xS("Invalid base64 string: "+r):r}}(t);return new Be(n)}static fromUint8Array(t){const n=function(s){let r="";for(let a=0;a<s.length;++a)r+=String.fromCharCode(s[a]);return r}(t);return new Be(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ft(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Be.EMPTY_BYTE_STRING=new Be("");const gO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ur(e){if(Ht(!!e),typeof e=="string"){let t=0;const n=gO.exec(e);if(Ht(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:de(e.seconds),nanos:de(e.nanos)}}function de(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function uo(e){return typeof e=="string"?Be.fromBase64String(e):Be.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function by(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Ty(e){const t=e.mapValue.fields.__previous_value__;return by(t)?Ty(t):t}function ou(e){const t=ur(e.mapValue.fields.__local_write_time__.timestampValue);return new ke(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(t,n,i,s,r,a,l,u,h){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h}}class au{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new au("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof au&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $h={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ho(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?by(e)?4:vO(e)?9007199254740991:yO(e)?10:11:gt()}function Ci(e,t){if(e===t)return!0;const n=ho(e);if(n!==ho(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ou(e).isEqual(ou(t));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const a=ur(s.timestampValue),l=ur(r.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(s,r){return uo(s.bytesValue).isEqual(uo(r.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(s,r){return de(s.geoPointValue.latitude)===de(r.geoPointValue.latitude)&&de(s.geoPointValue.longitude)===de(r.geoPointValue.longitude)}(e,t);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return de(s.integerValue)===de(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const a=de(s.doubleValue),l=de(r.doubleValue);return a===l?gf(a)===gf(l):isNaN(a)&&isNaN(l)}return!1}(e,t);case 9:return Ba(e.arrayValue.values||[],t.arrayValue.values||[],Ci);case 10:case 11:return function(s,r){const a=s.mapValue.fields||{},l=r.mapValue.fields||{};if(Nx(a)!==Nx(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Ci(a[u],l[u])))return!1;return!0}(e,t);default:return gt()}}function lu(e,t){return(e.values||[]).find(n=>Ci(n,t))!==void 0}function Ua(e,t){if(e===t)return 0;const n=ho(e),i=ho(t);if(n!==i)return Ft(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ft(e.booleanValue,t.booleanValue);case 2:return function(r,a){const l=de(r.integerValue||r.doubleValue),u=de(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(e,t);case 3:return Mx(e.timestampValue,t.timestampValue);case 4:return Mx(ou(e),ou(t));case 5:return Ft(e.stringValue,t.stringValue);case 6:return function(r,a){const l=uo(r),u=uo(a);return l.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(r,a){const l=r.split("/"),u=a.split("/");for(let h=0;h<l.length&&h<u.length;h++){const p=Ft(l[h],u[h]);if(p!==0)return p}return Ft(l.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(r,a){const l=Ft(de(r.latitude),de(a.latitude));return l!==0?l:Ft(de(r.longitude),de(a.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Ox(e.arrayValue,t.arrayValue);case 10:return function(r,a){var l,u,h,p;const _=r.fields||{},y=a.fields||{},w=(l=_.value)===null||l===void 0?void 0:l.arrayValue,E=(u=y.value)===null||u===void 0?void 0:u.arrayValue,S=Ft(((h=w==null?void 0:w.values)===null||h===void 0?void 0:h.length)||0,((p=E==null?void 0:E.values)===null||p===void 0?void 0:p.length)||0);return S!==0?S:Ox(w,E)}(e.mapValue,t.mapValue);case 11:return function(r,a){if(r===$h.mapValue&&a===$h.mapValue)return 0;if(r===$h.mapValue)return 1;if(a===$h.mapValue)return-1;const l=r.fields||{},u=Object.keys(l),h=a.fields||{},p=Object.keys(h);u.sort(),p.sort();for(let _=0;_<u.length&&_<p.length;++_){const y=Ft(u[_],p[_]);if(y!==0)return y;const w=Ua(l[u[_]],h[p[_]]);if(w!==0)return w}return Ft(u.length,p.length)}(e.mapValue,t.mapValue);default:throw gt()}}function Mx(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Ft(e,t);const n=ur(e),i=ur(t),s=Ft(n.seconds,i.seconds);return s!==0?s:Ft(n.nanos,i.nanos)}function Ox(e,t){const n=e.values||[],i=t.values||[];for(let s=0;s<n.length&&s<i.length;++s){const r=Ua(n[s],i[s]);if(r)return r}return Ft(n.length,i.length)}function Ha(e){return Og(e)}function Og(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const i=ur(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return uo(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return ct.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",s=!0;for(const r of n.values||[])s?s=!1:i+=",",i+=Og(r);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",r=!0;for(const a of i)r?r=!1:s+=",",s+=`${a}:${Og(n.fields[a])}`;return s+"}"}(e.mapValue):gt()}function Dg(e){return!!e&&"integerValue"in e}function Ey(e){return!!e&&"arrayValue"in e}function Dx(e){return!!e&&"nullValue"in e}function jx(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Pd(e){return!!e&&"mapValue"in e}function yO(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function kc(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return il(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=kc(i)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=kc(e.arrayValue.values[n]);return t}return Object.assign({},e)}function vO(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(t){this.value=t}static empty(){return new jn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!Pd(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=kc(n)}setAll(t){let n=je.emptyPath(),i={},s=[];t.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,i,s),i={},s=[],n=l.popLast()}a?i[l.lastSegment()]=kc(a):s.push(l.lastSegment())});const r=this.getFieldsMap(n);this.applyChanges(r,i,s)}delete(t){const n=this.field(t.popLast());Pd(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Ci(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let s=n.mapValue.fields[t.get(i)];Pd(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,i){il(n,(s,r)=>t[s]=r);for(const s of i)delete t[s]}clone(){return new jn(kc(this.value))}}function wS(e){const t=[];return il(e.fields,(n,i)=>{const s=new je([n]);if(Pd(i)){const r=wS(i.mapValue).fields;if(r.length===0)t.push(s);else for(const a of r)t.push(s.child(a))}else t.push(s)}),new ii(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(t,n,i,s,r,a,l){this.key=t,this.documentType=n,this.version=i,this.readTime=s,this.createTime=r,this.data=a,this.documentState=l}static newInvalidDocument(t){return new Ke(t,0,yt.min(),yt.min(),yt.min(),jn.empty(),0)}static newFoundDocument(t,n,i,s){return new Ke(t,1,n,yt.min(),i,s,0)}static newNoDocument(t,n){return new Ke(t,2,n,yt.min(),yt.min(),jn.empty(),0)}static newUnknownDocument(t,n){return new Ke(t,3,n,yt.min(),yt.min(),jn.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(yt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=jn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=yt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Ke&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ke(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(t,n){this.position=t,this.inclusive=n}}function Vx(e,t,n){let i=0;for(let s=0;s<e.position.length;s++){const r=t[s],a=e.position[s];if(r.field.isKeyField()?i=ct.comparator(ct.fromName(a.referenceValue),n.key):i=Ua(a,n.data.field(r.field)),r.dir==="desc"&&(i*=-1),i!==0)break}return i}function Fx(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ci(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(t,n="asc"){this.field=t,this.dir=n}}function xO(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{}class Te extends bS{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new bO(t,n,i):n==="array-contains"?new SO(t,i):n==="in"?new kO(t,i):n==="not-in"?new PO(t,i):n==="array-contains-any"?new IO(t,i):new Te(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new TO(t,i):new EO(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ua(n,this.value)):n!==null&&ho(this.value)===ho(n)&&this.matchesComparison(Ua(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return gt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ai extends bS{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new Ai(t,n)}matches(t){return TS(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function TS(e){return e.op==="and"}function ES(e){return wO(e)&&TS(e)}function wO(e){for(const t of e.filters)if(t instanceof Ai)return!1;return!0}function jg(e){if(e instanceof Te)return e.field.canonicalString()+e.op.toString()+Ha(e.value);if(ES(e))return e.filters.map(t=>jg(t)).join(",");{const t=e.filters.map(n=>jg(n)).join(",");return`${e.op}(${t})`}}function SS(e,t){return e instanceof Te?function(i,s){return s instanceof Te&&i.op===s.op&&i.field.isEqual(s.field)&&Ci(i.value,s.value)}(e,t):e instanceof Ai?function(i,s){return s instanceof Ai&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((r,a,l)=>r&&SS(a,s.filters[l]),!0):!1}(e,t):void gt()}function kS(e){return e instanceof Te?function(n){return`${n.field.canonicalString()} ${n.op} ${Ha(n.value)}`}(e):e instanceof Ai?function(n){return n.op.toString()+" {"+n.getFilters().map(kS).join(" ,")+"}"}(e):"Filter"}class bO extends Te{constructor(t,n,i){super(t,n,i),this.key=ct.fromName(i.referenceValue)}matches(t){const n=ct.comparator(t.key,this.key);return this.matchesComparison(n)}}class TO extends Te{constructor(t,n){super(t,"in",n),this.keys=PS("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class EO extends Te{constructor(t,n){super(t,"not-in",n),this.keys=PS("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function PS(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>ct.fromName(i.referenceValue))}class SO extends Te{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Ey(n)&&lu(n.arrayValue,this.value)}}class kO extends Te{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&lu(this.value.arrayValue,n)}}class PO extends Te{constructor(t,n){super(t,"not-in",n)}matches(t){if(lu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!lu(this.value.arrayValue,n)}}class IO extends Te{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Ey(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>lu(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(t,n=null,i=[],s=[],r=null,a=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=a,this.endAt=l,this.ue=null}}function zx(e,t=null,n=[],i=[],s=null,r=null,a=null){return new CO(e,t,n,i,s,r,a)}function Sy(e){const t=vt(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>jg(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),cp(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>Ha(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>Ha(i)).join(",")),t.ue=n}return t.ue}function ky(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!xO(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!SS(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Fx(e.startAt,t.startAt)&&Fx(e.endAt,t.endAt)}function Vg(e){return ct.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(t,n=null,i=[],s=[],r=null,a="F",l=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=a,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function AO(e,t,n,i,s,r,a,l){return new up(e,t,n,i,s,r,a,l)}function Py(e){return new up(e)}function Bx(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function RO(e){return e.collectionGroup!==null}function Pc(e){const t=vt(e);if(t.ce===null){t.ce=[];const n=new Set;for(const r of t.explicitOrderBy)t.ce.push(r),n.add(r.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Fe(je.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(t).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||t.ce.push(new yf(r,i))}),n.has(je.keyField().canonicalString())||t.ce.push(new yf(je.keyField(),i))}return t.ce}function Pi(e){const t=vt(e);return t.le||(t.le=NO(t,Pc(e))),t.le}function NO(e,t){if(e.limitType==="F")return zx(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(s=>{const r=s.dir==="desc"?"asc":"desc";return new yf(s.field,r)});const n=e.endAt?new _f(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new _f(e.startAt.position,e.startAt.inclusive):null;return zx(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function Fg(e,t,n){return new up(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function hp(e,t){return ky(Pi(e),Pi(t))&&e.limitType===t.limitType}function IS(e){return`${Sy(Pi(e))}|lt:${e.limitType}`}function sa(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>kS(s)).join(", ")}]`),cp(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>Ha(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>Ha(s)).join(",")),`Target(${i})`}(Pi(e))}; limitType=${e.limitType})`}function dp(e,t){return t.isFoundDocument()&&function(i,s){const r=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(r):ct.isDocumentKey(i.path)?i.path.isEqual(r):i.path.isImmediateParentOf(r)}(e,t)&&function(i,s){for(const r of Pc(i))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(e,t)&&function(i,s){for(const r of i.filters)if(!r.matches(s))return!1;return!0}(e,t)&&function(i,s){return!(i.startAt&&!function(a,l,u){const h=Vx(a,l,u);return a.inclusive?h<=0:h<0}(i.startAt,Pc(i),s)||i.endAt&&!function(a,l,u){const h=Vx(a,l,u);return a.inclusive?h>=0:h>0}(i.endAt,Pc(i),s))}(e,t)}function LO(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function CS(e){return(t,n)=>{let i=!1;for(const s of Pc(e)){const r=MO(s,t,n);if(r!==0)return r;i=i||s.field.isKeyField()}return 0}}function MO(e,t,n){const i=e.field.isKeyField()?ct.comparator(t.key,n.key):function(r,a,l){const u=a.data.field(r),h=l.data.field(r);return u!==null&&h!==null?Ua(u,h):gt()}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return gt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[s,r]of i)if(this.equalsFn(s,t))return r}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),s=this.inner[i];if(s===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],t))return void(s[r]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(t){il(this.inner,(n,i)=>{for(const[s,r]of i)t(s,r)})}isEmpty(){return vS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OO=new oe(ct.comparator);function ms(){return OO}const AS=new oe(ct.comparator);function hc(...e){let t=AS;for(const n of e)t=t.insert(n.key,n);return t}function RS(e){let t=AS;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function Kr(){return Ic()}function NS(){return Ic()}function Ic(){return new sl(e=>e.toString(),(e,t)=>e.isEqual(t))}const DO=new oe(ct.comparator),jO=new Fe(ct.comparator);function At(...e){let t=jO;for(const n of e)t=t.add(n);return t}const VO=new Fe(Ft);function FO(){return VO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iy(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gf(t)?"-0":t}}function LS(e){return{integerValue:""+e}}function zO(e,t){return mO(t)?LS(t):Iy(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(){this._=void 0}}function BO(e,t,n){return e instanceof vf?function(s,r){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&by(r)&&(r=Ty(r)),r&&(a.fields.__previous_value__=r),{mapValue:a}}(n,t):e instanceof cu?OS(e,t):e instanceof uu?DS(e,t):function(s,r){const a=MS(s,r),l=Ux(a)+Ux(s.Pe);return Dg(a)&&Dg(s.Pe)?LS(l):Iy(s.serializer,l)}(e,t)}function UO(e,t,n){return e instanceof cu?OS(e,t):e instanceof uu?DS(e,t):n}function MS(e,t){return e instanceof xf?function(i){return Dg(i)||function(r){return!!r&&"doubleValue"in r}(i)}(t)?t:{integerValue:0}:null}class vf extends fp{}class cu extends fp{constructor(t){super(),this.elements=t}}function OS(e,t){const n=jS(t);for(const i of e.elements)n.some(s=>Ci(s,i))||n.push(i);return{arrayValue:{values:n}}}class uu extends fp{constructor(t){super(),this.elements=t}}function DS(e,t){let n=jS(t);for(const i of e.elements)n=n.filter(s=>!Ci(s,i));return{arrayValue:{values:n}}}class xf extends fp{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function Ux(e){return de(e.integerValue||e.doubleValue)}function jS(e){return Ey(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function HO(e,t){return e.field.isEqual(t.field)&&function(i,s){return i instanceof cu&&s instanceof cu||i instanceof uu&&s instanceof uu?Ba(i.elements,s.elements,Ci):i instanceof xf&&s instanceof xf?Ci(i.Pe,s.Pe):i instanceof vf&&s instanceof vf}(e.transform,t.transform)}class WO{constructor(t,n){this.version=t,this.transformResults=n}}class as{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new as}static exists(t){return new as(void 0,t)}static updateTime(t){return new as(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Id(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class pp{}function VS(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new zS(e.key,as.none()):new Ou(e.key,e.data,as.none());{const n=e.data,i=jn.empty();let s=new Fe(je.comparator);for(let r of t.fields)if(!s.has(r)){let a=n.field(r);a===null&&r.length>1&&(r=r.popLast(),a=n.field(r)),a===null?i.delete(r):i.set(r,a),s=s.add(r)}return new vo(e.key,i,new ii(s.toArray()),as.none())}}function $O(e,t,n){e instanceof Ou?function(s,r,a){const l=s.value.clone(),u=Wx(s.fieldTransforms,r,a.transformResults);l.setAll(u),r.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(e,t,n):e instanceof vo?function(s,r,a){if(!Id(s.precondition,r))return void r.convertToUnknownDocument(a.version);const l=Wx(s.fieldTransforms,r,a.transformResults),u=r.data;u.setAll(FS(s)),u.setAll(l),r.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(e,t,n):function(s,r,a){r.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,n)}function Cc(e,t,n,i){return e instanceof Ou?function(r,a,l,u){if(!Id(r.precondition,a))return l;const h=r.value.clone(),p=$x(r.fieldTransforms,u,a);return h.setAll(p),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(e,t,n,i):e instanceof vo?function(r,a,l,u){if(!Id(r.precondition,a))return l;const h=$x(r.fieldTransforms,u,a),p=a.data;return p.setAll(FS(r)),p.setAll(h),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),l===null?null:l.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(_=>_.field))}(e,t,n,i):function(r,a,l){return Id(r.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(e,t,n)}function qO(e,t){let n=null;for(const i of e.fieldTransforms){const s=t.data.field(i.field),r=MS(i.transform,s||null);r!=null&&(n===null&&(n=jn.empty()),n.set(i.field,r))}return n||null}function Hx(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Ba(i,s,(r,a)=>HO(r,a))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Ou extends pp{constructor(t,n,i,s=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class vo extends pp{constructor(t,n,i,s,r=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function FS(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function Wx(e,t,n){const i=new Map;Ht(e.length===n.length);for(let s=0;s<n.length;s++){const r=e[s],a=r.transform,l=t.data.field(r.field);i.set(r.field,UO(a,l,n[s]))}return i}function $x(e,t,n){const i=new Map;for(const s of e){const r=s.transform,a=n.data.field(s.field);i.set(s.field,BO(r,a,t))}return i}class zS extends pp{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class GO extends pp{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(t,n,i,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const r=this.mutations[s];r.key.isEqual(t.key)&&$O(r,t,i[s])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=Cc(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=Cc(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=NS();return this.mutations.forEach(s=>{const r=t.get(s.key),a=r.overlayedDocument;let l=this.applyToLocalView(a,r.mutatedFields);l=n.has(s.key)?null:l;const u=VS(a,l);u!==null&&i.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(yt.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),At())}isEqual(t){return this.batchId===t.batchId&&Ba(this.mutations,t.mutations,(n,i)=>Hx(n,i))&&Ba(this.baseMutations,t.baseMutations,(n,i)=>Hx(n,i))}}class Cy{constructor(t,n,i,s){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(t,n,i){Ht(t.mutations.length===i.length);let s=function(){return DO}();const r=t.mutations;for(let a=0;a<r.length;a++)s=s.insert(r[a].key,i[a].version);return new Cy(t,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ye,Ot;function YO(e){switch(e){default:return gt();case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0}}function BS(e){if(e===void 0)return ps("GRPC error has no .code"),X.UNKNOWN;switch(e){case ye.OK:return X.OK;case ye.CANCELLED:return X.CANCELLED;case ye.UNKNOWN:return X.UNKNOWN;case ye.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case ye.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case ye.INTERNAL:return X.INTERNAL;case ye.UNAVAILABLE:return X.UNAVAILABLE;case ye.UNAUTHENTICATED:return X.UNAUTHENTICATED;case ye.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case ye.NOT_FOUND:return X.NOT_FOUND;case ye.ALREADY_EXISTS:return X.ALREADY_EXISTS;case ye.PERMISSION_DENIED:return X.PERMISSION_DENIED;case ye.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case ye.ABORTED:return X.ABORTED;case ye.OUT_OF_RANGE:return X.OUT_OF_RANGE;case ye.UNIMPLEMENTED:return X.UNIMPLEMENTED;case ye.DATA_LOSS:return X.DATA_LOSS;default:return gt()}}(Ot=ye||(ye={}))[Ot.OK=0]="OK",Ot[Ot.CANCELLED=1]="CANCELLED",Ot[Ot.UNKNOWN=2]="UNKNOWN",Ot[Ot.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ot[Ot.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ot[Ot.NOT_FOUND=5]="NOT_FOUND",Ot[Ot.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ot[Ot.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ot[Ot.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ot[Ot.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ot[Ot.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ot[Ot.ABORTED=10]="ABORTED",Ot[Ot.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ot[Ot.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ot[Ot.INTERNAL=13]="INTERNAL",Ot[Ot.UNAVAILABLE=14]="UNAVAILABLE",Ot[Ot.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JO=new Jr([4294967295,4294967295],0);function qx(e){const t=XO().encode(e),n=new hS;return n.update(t),new Uint8Array(n.digest())}function Gx(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),s=t.getUint32(8,!0),r=t.getUint32(12,!0);return[new Jr([n,i],0),new Jr([s,r],0)]}class Ay{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new dc(`Invalid padding: ${n}`);if(i<0)throw new dc(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new dc(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new dc(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*t.length-n,this.Te=Jr.fromNumber(this.Ie)}Ee(t,n,i){let s=t.add(n.multiply(Jr.fromNumber(i)));return s.compare(JO)===1&&(s=new Jr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const n=qx(t),[i,s]=Gx(n);for(let r=0;r<this.hashCount;r++){const a=this.Ee(i,s,r);if(!this.de(a))return!1}return!0}static create(t,n,i){const s=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),a=new Ay(r,s,n);return i.forEach(l=>a.insert(l)),a}insert(t){if(this.Ie===0)return;const n=qx(t),[i,s]=Gx(n);for(let r=0;r<this.hashCount;r++){const a=this.Ee(i,s,r);this.Ae(a)}}Ae(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class dc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(t,n,i,s,r){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const s=new Map;return s.set(t,Du.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new mp(yt.min(),s,new oe(Ft),ms(),At())}}class Du{constructor(t,n,i,s,r){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new Du(i,n,At(),At(),At())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(t,n,i,s){this.Re=t,this.removedTargetIds=n,this.key=i,this.Ve=s}}class US{constructor(t,n){this.targetId=t,this.me=n}}class HS{constructor(t,n,i=Be.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=s}}class Kx{constructor(){this.fe=0,this.ge=Qx(),this.pe=Be.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=At(),n=At(),i=At();return this.ge.forEach((s,r)=>{switch(r){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:gt()}}),new Du(this.pe,this.ye,t,n,i)}Ce(){this.we=!1,this.ge=Qx()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,Ht(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class tD{constructor(t){this.Le=t,this.Be=new Map,this.ke=ms(),this.qe=Zx(),this.Qe=new oe(Ft)}Ke(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(n,t.Ve):this.Ue(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.Ue(n,t.key,t.Ve)}We(t){this.forEachTarget(t,n=>{const i=this.Ge(n);switch(t.state){case 0:this.ze(n)&&i.De(t.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(t.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(t.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(t.resumeToken));break;default:gt()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Be.forEach((i,s)=>{this.ze(s)&&n(s)})}He(t){const n=t.targetId,i=t.me.count,s=this.Je(n);if(s){const r=s.target;if(Vg(r))if(i===0){const a=new ct(r.path);this.Ue(n,a,Ke.newNoDocument(a,yt.min()))}else Ht(i===1);else{const a=this.Ye(n);if(a!==i){const l=this.Ze(t),u=l?this.Xe(l,t,a):1;if(u!==0){this.je(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:r=0}=n;let a,l;try{a=uo(i).toUint8Array()}catch(u){if(u instanceof xS)return za("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Ay(a,s,r)}catch(u){return za(u instanceof dc?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(t,n,i){return n.me.count===i-this.nt(t,n.targetId)?0:2}nt(t,n){const i=this.Le.getRemoteKeysForTarget(n);let s=0;return i.forEach(r=>{const a=this.Le.tt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${r.path.canonicalString()}`;t.mightContain(l)||(this.Ue(n,r,null),s++)}),s}rt(t){const n=new Map;this.Be.forEach((r,a)=>{const l=this.Je(a);if(l){if(r.current&&Vg(l.target)){const u=new ct(l.target.path);this.ke.get(u)!==null||this.it(a,u)||this.Ue(a,u,Ke.newNoDocument(u,t))}r.be&&(n.set(a,r.ve()),r.Ce())}});let i=At();this.qe.forEach((r,a)=>{let l=!0;a.forEachWhile(u=>{const h=this.Je(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(r))}),this.ke.forEach((r,a)=>a.setReadTime(t));const s=new mp(t,n,this.Qe,this.ke,i);return this.ke=ms(),this.qe=Zx(),this.Qe=new oe(Ft),s}$e(t,n){if(!this.ze(t))return;const i=this.it(t,n.key)?2:0;this.Ge(t).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t))}Ue(t,n,i){if(!this.ze(t))return;const s=this.Ge(t);this.it(t,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(t)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(t){this.Be.delete(t)}Ye(t){const n=this.Ge(t).ve();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let n=this.Be.get(t);return n||(n=new Kx,this.Be.set(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new Fe(Ft),this.qe=this.qe.insert(t,n)),n}ze(t){const n=this.Je(t)!==null;return n||it("WatchChangeAggregator","Detected inactive target",t),n}Je(t){const n=this.Be.get(t);return n&&n.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new Kx),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.Ue(t,n,null)})}it(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function Zx(){return new oe(ct.comparator)}function Qx(){return new oe(ct.comparator)}const eD={asc:"ASCENDING",desc:"DESCENDING"},nD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},iD={and:"AND",or:"OR"};class sD{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function zg(e,t){return e.useProto3Json||cp(t)?t:{value:t}}function wf(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function WS(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function rD(e,t){return wf(e,t.toTimestamp())}function Ii(e){return Ht(!!e),yt.fromTimestamp(function(n){const i=ur(n);return new ke(i.seconds,i.nanos)}(e))}function Ry(e,t){return Bg(e,t).canonicalString()}function Bg(e,t){const n=function(s){return new ce(["projects",s.projectId,"databases",s.database])}(e).child("documents");return t===void 0?n:n.child(t)}function $S(e){const t=ce.fromString(e);return Ht(QS(t)),t}function Ug(e,t){return Ry(e.databaseId,t.path)}function fm(e,t){const n=$S(t);if(n.get(1)!==e.databaseId.projectId)throw new lt(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new lt(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ct(GS(n))}function qS(e,t){return Ry(e.databaseId,t)}function oD(e){const t=$S(e);return t.length===4?ce.emptyPath():GS(t)}function Hg(e){return new ce(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function GS(e){return Ht(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function Yx(e,t,n){return{name:Ug(e,t),fields:n.value.mapValue.fields}}function aD(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:gt()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],r=function(h,p){return h.useProto3Json?(Ht(p===void 0||typeof p=="string"),Be.fromBase64String(p||"")):(Ht(p===void 0||p instanceof Buffer||p instanceof Uint8Array),Be.fromUint8Array(p||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&function(h){const p=h.code===void 0?X.UNKNOWN:BS(h.code);return new lt(p,h.message||"")}(a);n=new HS(i,s,r,l||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const s=fm(e,i.document.name),r=Ii(i.document.updateTime),a=i.document.createTime?Ii(i.document.createTime):yt.min(),l=new jn({mapValue:{fields:i.document.fields}}),u=Ke.newFoundDocument(s,r,a,l),h=i.targetIds||[],p=i.removedTargetIds||[];n=new Cd(h,p,u.key,u)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const s=fm(e,i.document),r=i.readTime?Ii(i.readTime):yt.min(),a=Ke.newNoDocument(s,r),l=i.removedTargetIds||[];n=new Cd([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const s=fm(e,i.document),r=i.removedTargetIds||[];n=new Cd([],r,s,null)}else{if(!("filter"in t))return gt();{t.filter;const i=t.filter;i.targetId;const{count:s=0,unchangedNames:r}=i,a=new QO(s,r),l=i.targetId;n=new US(l,a)}}return n}function lD(e,t){let n;if(t instanceof Ou)n={update:Yx(e,t.key,t.value)};else if(t instanceof zS)n={delete:Ug(e,t.key)};else if(t instanceof vo)n={update:Yx(e,t.key,t.data),updateMask:_D(t.fieldMask)};else{if(!(t instanceof GO))return gt();n={verify:Ug(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(r,a){const l=a.transform;if(l instanceof vf)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof cu)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof uu)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof xf)return{fieldPath:a.field.canonicalString(),increment:l.Pe};throw gt()}(0,i))),t.precondition.isNone||(n.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:rD(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:gt()}(e,t.precondition)),n}function cD(e,t){return e&&e.length>0?(Ht(t!==void 0),e.map(n=>function(s,r){let a=s.updateTime?Ii(s.updateTime):Ii(r);return a.isEqual(yt.min())&&(a=Ii(r)),new WO(a,s.transformResults||[])}(n,t))):[]}function uD(e,t){return{documents:[qS(e,t.path)]}}function hD(e,t){const n={structuredQuery:{}},i=t.path;let s;t.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=qS(e,s);const r=function(h){if(h.length!==0)return ZS(Ai.create(h,"and"))}(t.filters);r&&(n.structuredQuery.where=r);const a=function(h){if(h.length!==0)return h.map(p=>function(y){return{field:ra(y.field),direction:pD(y.dir)}}(p))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const l=zg(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(t.endAt)),{_t:n,parent:s}}function dD(e){let t=oD(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){Ht(i===1);const p=n.from[0];p.allDescendants?s=p.collectionId:t=t.child(p.collectionId)}let r=[];n.where&&(r=function(_){const y=KS(_);return y instanceof Ai&&ES(y)?y.getFilters():[y]}(n.where));let a=[];n.orderBy&&(a=function(_){return _.map(y=>function(E){return new yf(oa(E.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(y))}(n.orderBy));let l=null;n.limit&&(l=function(_){let y;return y=typeof _=="object"?_.value:_,cp(y)?null:y}(n.limit));let u=null;n.startAt&&(u=function(_){const y=!!_.before,w=_.values||[];return new _f(w,y)}(n.startAt));let h=null;return n.endAt&&(h=function(_){const y=!_.before,w=_.values||[];return new _f(w,y)}(n.endAt)),AO(t,s,a,r,l,"F",u,h)}function fD(e,t){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return gt()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function KS(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=oa(n.unaryFilter.field);return Te.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=oa(n.unaryFilter.field);return Te.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=oa(n.unaryFilter.field);return Te.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=oa(n.unaryFilter.field);return Te.create(a,"!=",{nullValue:"NULL_VALUE"});default:return gt()}}(e):e.fieldFilter!==void 0?function(n){return Te.create(oa(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return gt()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Ai.create(n.compositeFilter.filters.map(i=>KS(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return gt()}}(n.compositeFilter.op))}(e):gt()}function pD(e){return eD[e]}function mD(e){return nD[e]}function gD(e){return iD[e]}function ra(e){return{fieldPath:e.canonicalString()}}function oa(e){return je.fromServerFormat(e.fieldPath)}function ZS(e){return e instanceof Te?function(n){if(n.op==="=="){if(jx(n.value))return{unaryFilter:{field:ra(n.field),op:"IS_NAN"}};if(Dx(n.value))return{unaryFilter:{field:ra(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(jx(n.value))return{unaryFilter:{field:ra(n.field),op:"IS_NOT_NAN"}};if(Dx(n.value))return{unaryFilter:{field:ra(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ra(n.field),op:mD(n.op),value:n.value}}}(e):e instanceof Ai?function(n){const i=n.getFilters().map(s=>ZS(s));return i.length===1?i[0]:{compositeFilter:{op:gD(n.op),filters:i}}}(e):gt()}function _D(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function QS(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(t,n,i,s,r=yt.min(),a=yt.min(),l=Be.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(t){return new $s(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new $s(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new $s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new $s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(t){this.ct=t}}function vD(e){const t=dD({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Fg(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(){this.un=new wD}addToCollectionParentIndex(t,n){return this.un.add(n),Q.resolve()}getCollectionParents(t,n){return Q.resolve(this.un.getEntries(n))}addFieldIndex(t,n){return Q.resolve()}deleteFieldIndex(t,n){return Q.resolve()}deleteAllFieldIndexes(t){return Q.resolve()}createTargetIndexes(t,n){return Q.resolve()}getDocumentsMatchingTarget(t,n){return Q.resolve(null)}getIndexType(t,n){return Q.resolve(0)}getFieldIndexes(t,n){return Q.resolve([])}getNextCollectionGroupToUpdate(t){return Q.resolve(null)}getMinOffset(t,n){return Q.resolve(cr.min())}getMinOffsetFromCollectionGroup(t,n){return Q.resolve(cr.min())}updateCollectionGroup(t,n,i){return Q.resolve()}updateIndexEntries(t,n){return Q.resolve()}}class wD{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),s=this.index[n]||new Fe(ce.comparator),r=!s.has(i);return this.index[n]=s.add(i),r}has(t){const n=t.lastSegment(),i=t.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(t){return(this.index[t]||new Fe(ce.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(t){this.Ln=t}next(){return this.Ln+=2,this.Ln}static Bn(){return new Wa(0)}static kn(){return new Wa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(){this.changes=new sl(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Ke.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?Q.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(t,n,i,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(t,n))).next(s=>(i!==null&&Cc(i.mutation,s,ii.empty(),ke.now()),s))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,At()).next(()=>i))}getLocalViewOfDocuments(t,n,i=At()){const s=Kr();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,i).next(r=>{let a=hc();return r.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(t,n){const i=Kr();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,At()))}populateOverlays(t,n,i){const s=[];return i.forEach(r=>{n.has(r)||s.push(r)}),this.documentOverlayCache.getOverlays(t,s).next(r=>{r.forEach((a,l)=>{n.set(a,l)})})}computeViews(t,n,i,s){let r=ms();const a=Ic(),l=function(){return Ic()}();return n.forEach((u,h)=>{const p=i.get(h.key);s.has(h.key)&&(p===void 0||p.mutation instanceof vo)?r=r.insert(h.key,h):p!==void 0?(a.set(h.key,p.mutation.getFieldMask()),Cc(p.mutation,h,p.mutation.getFieldMask(),ke.now())):a.set(h.key,ii.empty())}),this.recalculateAndSaveOverlays(t,r).next(u=>(u.forEach((h,p)=>a.set(h,p)),n.forEach((h,p)=>{var _;return l.set(h,new TD(p,(_=a.get(h))!==null&&_!==void 0?_:null))}),l))}recalculateAndSaveOverlays(t,n){const i=Ic();let s=new oe((a,l)=>a-l),r=At();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let p=i.get(u)||ii.empty();p=l.applyToLocalView(h,p),i.set(u,p);const _=(s.get(l.batchId)||At()).add(u);s=s.insert(l.batchId,_)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,p=u.value,_=NS();p.forEach(y=>{if(!r.has(y)){const w=VS(n.get(y),i.get(y));w!==null&&_.set(y,w),r=r.add(y)}}),a.push(this.documentOverlayCache.saveOverlays(t,h,_))}return Q.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,s){return function(a){return ct.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):RO(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,s):this.getDocumentsMatchingCollectionQuery(t,n,i,s)}getNextDocuments(t,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,s).next(r=>{const a=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,s-r.size):Q.resolve(Kr());let l=-1,u=r;return a.next(h=>Q.forEach(h,(p,_)=>(l<_.largestBatchId&&(l=_.largestBatchId),r.get(p)?Q.resolve():this.remoteDocumentCache.getEntry(t,p).next(y=>{u=u.insert(p,y)}))).next(()=>this.populateOverlays(t,h,r)).next(()=>this.computeViews(t,u,h,At())).next(p=>({batchId:l,changes:RS(p)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new ct(n)).next(i=>{let s=hc();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(t,n,i,s){const r=n.collectionGroup;let a=hc();return this.indexManager.getCollectionParents(t,r).next(l=>Q.forEach(l,u=>{const h=function(_,y){return new up(y,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)}(n,u.child(r));return this.getDocumentsMatchingCollectionQuery(t,h,i,s).next(p=>{p.forEach((_,y)=>{a=a.insert(_,y)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,n,i,s){let r;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(a=>(r=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,r,s))).next(a=>{r.forEach((u,h)=>{const p=h.getKey();a.get(p)===null&&(a=a.insert(p,Ke.newInvalidDocument(p)))});let l=hc();return a.forEach((u,h)=>{const p=r.get(u);p!==void 0&&Cc(p.mutation,h,ii.empty(),ke.now()),dp(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(t){this.serializer=t,this.hr=new Map,this.Pr=new Map}getBundleMetadata(t,n){return Q.resolve(this.hr.get(n))}saveBundleMetadata(t,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Ii(s.createTime)}}(n)),Q.resolve()}getNamedQuery(t,n){return Q.resolve(this.Pr.get(n))}saveNamedQuery(t,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:vD(s.bundledQuery),readTime:Ii(s.readTime)}}(n)),Q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(){this.overlays=new oe(ct.comparator),this.Ir=new Map}getOverlay(t,n){return Q.resolve(this.overlays.get(n))}getOverlays(t,n){const i=Kr();return Q.forEach(n,s=>this.getOverlay(t,s).next(r=>{r!==null&&i.set(s,r)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((s,r)=>{this.ht(t,n,r)}),Q.resolve()}removeOverlaysForBatchId(t,n,i){const s=this.Ir.get(i);return s!==void 0&&(s.forEach(r=>this.overlays=this.overlays.remove(r)),this.Ir.delete(i)),Q.resolve()}getOverlaysForCollection(t,n,i){const s=Kr(),r=n.length+1,a=new ct(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===r&&u.largestBatchId>i&&s.set(u.getKey(),u)}return Q.resolve(s)}getOverlaysForCollectionGroup(t,n,i,s){let r=new oe((h,p)=>h-p);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let p=r.get(h.largestBatchId);p===null&&(p=Kr(),r=r.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const l=Kr(),u=r.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,p)=>l.set(h,p)),!(l.size()>=s)););return Q.resolve(l)}ht(t,n,i){const s=this.overlays.get(i.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(i.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new ZO(n,i));let r=this.Ir.get(n);r===void 0&&(r=At(),this.Ir.set(n,r)),this.Ir.set(n,r.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(){this.sessionToken=Be.EMPTY_BYTE_STRING}getSessionToken(t){return Q.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,Q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(){this.Tr=new Fe(Ae.Er),this.dr=new Fe(Ae.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(t,n){const i=new Ae(t,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.Vr(new Ae(t,n))}mr(t,n){t.forEach(i=>this.removeReference(i,n))}gr(t){const n=new ct(new ce([])),i=new Ae(n,t),s=new Ae(n,t+1),r=[];return this.dr.forEachInRange([i,s],a=>{this.Vr(a),r.push(a.key)}),r}pr(){this.Tr.forEach(t=>this.Vr(t))}Vr(t){this.Tr=this.Tr.delete(t),this.dr=this.dr.delete(t)}yr(t){const n=new ct(new ce([])),i=new Ae(n,t),s=new Ae(n,t+1);let r=At();return this.dr.forEachInRange([i,s],a=>{r=r.add(a.key)}),r}containsKey(t){const n=new Ae(t,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class Ae{constructor(t,n){this.key=t,this.wr=n}static Er(t,n){return ct.comparator(t.key,n.key)||Ft(t.wr,n.wr)}static Ar(t,n){return Ft(t.wr,n.wr)||ct.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Fe(Ae.Er)}checkEmpty(t){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,s){const r=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new KO(r,n,i,s);this.mutationQueue.push(a);for(const l of s)this.br=this.br.add(new Ae(l.key,r)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return Q.resolve(a)}lookupMutationBatch(t,n){return Q.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,s=this.vr(i),r=s<0?0:s;return Q.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(t){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new Ae(n,0),s=new Ae(n,Number.POSITIVE_INFINITY),r=[];return this.br.forEachInRange([i,s],a=>{const l=this.Dr(a.wr);r.push(l)}),Q.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new Fe(Ft);return n.forEach(s=>{const r=new Ae(s,0),a=new Ae(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([r,a],l=>{i=i.add(l.wr)})}),Q.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,s=i.length+1;let r=i;ct.isDocumentKey(r)||(r=r.child(""));const a=new Ae(new ct(r),0);let l=new Fe(Ft);return this.br.forEachWhile(u=>{const h=u.key.path;return!!i.isPrefixOf(h)&&(h.length===s&&(l=l.add(u.wr)),!0)},a),Q.resolve(this.Cr(l))}Cr(t){const n=[];return t.forEach(i=>{const s=this.Dr(i);s!==null&&n.push(s)}),n}removeMutationBatch(t,n){Ht(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return Q.forEach(n.mutations,s=>{const r=new Ae(s.key,n.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.br=i})}On(t){}containsKey(t,n){const i=new Ae(n,0),s=this.br.firstAfterOrEqual(i);return Q.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,Q.resolve()}Fr(t,n){return this.vr(t)}vr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Dr(t){const n=this.vr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(t){this.Mr=t,this.docs=function(){return new oe(ct.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,s=this.docs.get(i),r=s?s.size:0,a=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-r,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return Q.resolve(i?i.document.mutableCopy():Ke.newInvalidDocument(n))}getEntries(t,n){let i=ms();return n.forEach(s=>{const r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():Ke.newInvalidDocument(s))}),Q.resolve(i)}getDocumentsMatchingQuery(t,n,i,s){let r=ms();const a=n.path,l=new ct(a.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:p}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||hO(uO(p),i)<=0||(s.has(p.key)||dp(n,p))&&(r=r.insert(p.key,p.mutableCopy()))}return Q.resolve(r)}getAllFromCollectionGroup(t,n,i,s){gt()}Or(t,n){return Q.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new AD(this)}getSize(t){return Q.resolve(this.size)}}class AD extends bD{constructor(t){super(),this.cr=t}applyChanges(t){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(t,s)):this.cr.removeEntry(i)}),Q.waitFor(n)}getFromCache(t,n){return this.cr.getEntry(t,n)}getAllFromCache(t,n){return this.cr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(t){this.persistence=t,this.Nr=new sl(n=>Sy(n),ky),this.lastRemoteSnapshotVersion=yt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ny,this.targetCount=0,this.kr=Wa.Bn()}forEachTarget(t,n){return this.Nr.forEach((i,s)=>n(s)),Q.resolve()}getLastRemoteSnapshotVersion(t){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Q.resolve(this.Lr)}allocateTargetId(t){return this.highestTargetId=this.kr.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),Q.resolve()}Kn(t){this.Nr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.kr=new Wa(n),this.highestTargetId=n),t.sequenceNumber>this.Lr&&(this.Lr=t.sequenceNumber)}addTargetData(t,n){return this.Kn(n),this.targetCount+=1,Q.resolve()}updateTargetData(t,n){return this.Kn(n),Q.resolve()}removeTargetData(t,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Q.resolve()}removeTargets(t,n,i){let s=0;const r=[];return this.Nr.forEach((a,l)=>{l.sequenceNumber<=n&&i.get(l.targetId)===null&&(this.Nr.delete(a),r.push(this.removeMatchingKeysForTargetId(t,l.targetId)),s++)}),Q.waitFor(r).next(()=>s)}getTargetCount(t){return Q.resolve(this.targetCount)}getTargetData(t,n){const i=this.Nr.get(n)||null;return Q.resolve(i)}addMatchingKeys(t,n,i){return this.Br.Rr(n,i),Q.resolve()}removeMatchingKeys(t,n,i){this.Br.mr(n,i);const s=this.persistence.referenceDelegate,r=[];return s&&n.forEach(a=>{r.push(s.markPotentiallyOrphaned(t,a))}),Q.waitFor(r)}removeMatchingKeysForTargetId(t,n){return this.Br.gr(n),Q.resolve()}getMatchingKeysForTargetId(t,n){const i=this.Br.yr(n);return Q.resolve(i)}containsKey(t,n){return Q.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(t,n){this.qr={},this.overlays={},this.Qr=new wy(0),this.Kr=!1,this.Kr=!0,this.$r=new PD,this.referenceDelegate=t(this),this.Ur=new RD(this),this.indexManager=new xD,this.remoteDocumentCache=function(s){return new CD(s)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new yD(n),this.Gr=new SD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new kD,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.qr[t.toKey()];return i||(i=new ID(n,this.referenceDelegate),this.qr[t.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(t,n,i){it("MemoryPersistence","Starting transaction:",t);const s=new LD(this.Qr.next());return this.referenceDelegate.zr(),i(s).next(r=>this.referenceDelegate.jr(s).next(()=>r)).toPromise().then(r=>(s.raiseOnCommittedEvent(),r))}Hr(t,n){return Q.or(Object.values(this.qr).map(i=>()=>i.containsKey(t,n)))}}class LD extends fO{constructor(t){super(),this.currentSequenceNumber=t}}class Ly{constructor(t){this.persistence=t,this.Jr=new Ny,this.Yr=null}static Zr(t){return new Ly(t)}get Xr(){if(this.Yr)return this.Yr;throw gt()}addReference(t,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),Q.resolve()}removeReference(t,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),Q.resolve()}markPotentiallyOrphaned(t,n){return this.Xr.add(n.toString()),Q.resolve()}removeTarget(t,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(s=>{s.forEach(r=>this.Xr.add(r.toString()))}).next(()=>i.removeTargetData(t,n))}zr(){this.Yr=new Set}jr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.Xr,i=>{const s=ct.fromPath(i);return this.ei(t,s).next(r=>{r||n.removeEntry(s,yt.min())})}).next(()=>(this.Yr=null,n.apply(t)))}updateLimboDocument(t,n){return this.ei(t,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(t){return 0}ei(t,n){return Q.or([()=>Q.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Hr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(t,n,i,s){this.targetId=t,this.fromCache=n,this.$i=i,this.Ui=s}static Wi(t,n){let i=At(),s=At();for(const r of n.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new My(t,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return wR()?8:pO(Ye())>0?6:4}()}initialize(t,n){this.Ji=t,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(t,n,i,s){const r={result:null};return this.Yi(t,n).next(a=>{r.result=a}).next(()=>{if(!r.result)return this.Zi(t,n,s,i).next(a=>{r.result=a})}).next(()=>{if(r.result)return;const a=new MD;return this.Xi(t,n,a).next(l=>{if(r.result=l,this.zi)return this.es(t,n,a,l.size)})}).next(()=>r.result)}es(t,n,i,s){return i.documentReadCount<this.ji?(Yl()<=Nt.DEBUG&&it("QueryEngine","SDK will not create cache indexes for query:",sa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Q.resolve()):(Yl()<=Nt.DEBUG&&it("QueryEngine","Query:",sa(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.Hi*s?(Yl()<=Nt.DEBUG&&it("QueryEngine","The SDK decides to create cache indexes for query:",sa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Pi(n))):Q.resolve())}Yi(t,n){if(Bx(n))return Q.resolve(null);let i=Pi(n);return this.indexManager.getIndexType(t,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Fg(n,null,"F"),i=Pi(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(r=>{const a=At(...r);return this.Ji.getDocuments(t,a).next(l=>this.indexManager.getMinOffset(t,i).next(u=>{const h=this.ts(n,l);return this.ns(n,h,a,u.readTime)?this.Yi(t,Fg(n,null,"F")):this.rs(t,h,n,u)}))})))}Zi(t,n,i,s){return Bx(n)||s.isEqual(yt.min())?Q.resolve(null):this.Ji.getDocuments(t,i).next(r=>{const a=this.ts(n,r);return this.ns(n,a,i,s)?Q.resolve(null):(Yl()<=Nt.DEBUG&&it("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),sa(n)),this.rs(t,a,n,cO(s,-1)).next(l=>l))})}ts(t,n){let i=new Fe(CS(t));return n.forEach((s,r)=>{dp(t,r)&&(i=i.add(r))}),i}ns(t,n,i,s){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const r=t.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}Xi(t,n,i){return Yl()<=Nt.DEBUG&&it("QueryEngine","Using full collection scan to execute query:",sa(n)),this.Ji.getDocumentsMatchingQuery(t,n,cr.min(),i)}rs(t,n,i,s){return this.Ji.getDocumentsMatchingQuery(t,i,s).next(r=>(n.forEach(a=>{r=r.insert(a.key,a)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(t,n,i,s){this.persistence=t,this.ss=n,this.serializer=s,this.os=new oe(Ft),this._s=new sl(r=>Sy(r),ky),this.us=new Map,this.cs=t.getRemoteDocumentCache(),this.Ur=t.getTargetCache(),this.Gr=t.getBundleCache(),this.ls(i)}ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new ED(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.os))}}function jD(e,t,n,i){return new DD(e,t,n,i)}async function YS(e,t){const n=vt(e);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(r=>(s=r,n.ls(t),n.mutationQueue.getAllMutationBatches(i))).next(r=>{const a=[],l=[];let u=At();for(const h of s){a.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}for(const h of r){l.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(i,u).next(h=>({hs:h,removedBatchIds:a,addedBatchIds:l}))})})}function VD(e,t){const n=vt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=t.batch.keys(),r=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,h,p){const _=h.batch,y=_.keys();let w=Q.resolve();return y.forEach(E=>{w=w.next(()=>p.getEntry(u,E)).next(S=>{const k=h.docVersions.get(E);Ht(k!==null),S.version.compareTo(k)<0&&(_.applyToRemoteDocument(S,h),S.isValidDocument()&&(S.setReadTime(h.commitVersion),p.addEntry(S)))})}),w.next(()=>l.mutationQueue.removeMutationBatch(u,_))}(n,i,t,r).next(()=>r.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=At();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(t))).next(()=>n.localDocuments.getDocuments(i,s))})}function XS(e){const t=vt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Ur.getLastRemoteSnapshotVersion(n))}function FD(e,t){const n=vt(e),i=t.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];t.targetChanges.forEach((p,_)=>{const y=s.get(_);if(!y)return;l.push(n.Ur.removeMatchingKeys(r,p.removedDocuments,_).next(()=>n.Ur.addMatchingKeys(r,p.addedDocuments,_)));let w=y.withSequenceNumber(r.currentSequenceNumber);t.targetMismatches.get(_)!==null?w=w.withResumeToken(Be.EMPTY_BYTE_STRING,yt.min()).withLastLimboFreeSnapshotVersion(yt.min()):p.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(p.resumeToken,i)),s=s.insert(_,w),function(S,k,P){return S.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(y,w,p)&&l.push(n.Ur.updateTargetData(r,w))});let u=ms(),h=At();if(t.documentUpdates.forEach(p=>{t.resolvedLimboDocuments.has(p)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(r,p))}),l.push(zD(r,a,t.documentUpdates).next(p=>{u=p.Ps,h=p.Is})),!i.isEqual(yt.min())){const p=n.Ur.getLastRemoteSnapshotVersion(r).next(_=>n.Ur.setTargetsMetadata(r,r.currentSequenceNumber,i));l.push(p)}return Q.waitFor(l).next(()=>a.apply(r)).next(()=>n.localDocuments.getLocalViewOfDocuments(r,u,h)).next(()=>u)}).then(r=>(n.os=s,r))}function zD(e,t,n){let i=At(),s=At();return n.forEach(r=>i=i.add(r)),t.getEntries(e,i).next(r=>{let a=ms();return n.forEach((l,u)=>{const h=r.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(yt.min())?(t.removeEntry(l,u.readTime),a=a.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(u),a=a.insert(l,u)):it("LocalStore","Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{Ps:a,Is:s}})}function BD(e,t){const n=vt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function UD(e,t){const n=vt(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.Ur.getTargetData(i,t).next(r=>r?(s=r,Q.resolve(s)):n.Ur.allocateTargetId(i).next(a=>(s=new $s(t,a,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.os.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(t,i.targetId)),i})}async function Wg(e,t,n){const i=vt(e),s=i.os.get(t),r=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",r,a=>i.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Mu(a))throw a;it("LocalStore",`Failed to update sequence numbers for target ${t}: ${a}`)}i.os=i.os.remove(t),i._s.delete(s.target)}function Xx(e,t,n){const i=vt(e);let s=yt.min(),r=At();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,h,p){const _=vt(u),y=_._s.get(p);return y!==void 0?Q.resolve(_.os.get(y)):_.Ur.getTargetData(h,p)}(i,a,Pi(t)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(a,l.targetId).next(u=>{r=u})}).next(()=>i.ss.getDocumentsMatchingQuery(a,t,n?s:yt.min(),n?r:At())).next(l=>(HD(i,LO(t),l),{documents:l,Ts:r})))}function HD(e,t,n){let i=e.us.get(t)||yt.min();n.forEach((s,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)}),e.us.set(t,i)}class Jx{constructor(){this.activeTargetIds=FO()}fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Vs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class WD{constructor(){this.so=new Jx,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.so.fs(t),this.oo[t]||"not-current"}updateQueryState(t,n,i){this.oo[t]=n}removeLocalQueryTarget(t){this.so.gs(t)}isLocalQueryTarget(t){return this.so.activeTargetIds.has(t)}clearQueryState(t){delete this.oo[t]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(t){return this.so.activeTargetIds.has(t)}start(){return this.so=new Jx,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{_o(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(t){this.ho.push(t)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){it("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ho)t(0)}lo(){it("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ho)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qh=null;function pm(){return qh===null?qh=function(){return 268435456+Math.round(2147483648*Math.random())}():qh++,"0x"+qh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(t){this.Io=t.Io,this.To=t.To}Eo(t){this.Ao=t}Ro(t){this.Vo=t}mo(t){this.fo=t}onMessage(t){this.po=t}close(){this.To()}send(t){this.Io(t)}yo(){this.Ao()}wo(){this.Vo()}So(t){this.fo(t)}bo(t){this.po(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const We="WebChannelConnection";class KD extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${s}/databases/${r}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${r}`}get Fo(){return!1}Mo(n,i,s,r,a){const l=pm(),u=this.xo(n,i.toUriEncodedString());it("RestConnection",`Sending RPC '${n}' ${l}:`,u,s);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,r,a),this.No(n,u,h,s).then(p=>(it("RestConnection",`Received RPC '${n}' ${l}: `,p),p),p=>{throw za("RestConnection",`RPC '${n}' ${l} failed with error: `,p,"url: ",u,"request:",s),p})}Lo(n,i,s,r,a,l){return this.Mo(n,i,s,r,a)}Oo(n,i,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+nl}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((r,a)=>n[a]=r),s&&s.headers.forEach((r,a)=>n[a]=r)}xo(n,i){const s=qD[n];return`${this.Do}/v1/${i}:${s}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}No(t,n,i,s){const r=pm();return new Promise((a,l)=>{const u=new dS;u.setWithCredentials(!0),u.listenOnce(fS.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case kd.NO_ERROR:const p=u.getResponseJson();it(We,`XHR for RPC '${t}' ${r} received:`,JSON.stringify(p)),a(p);break;case kd.TIMEOUT:it(We,`RPC '${t}' ${r} timed out`),l(new lt(X.DEADLINE_EXCEEDED,"Request time out"));break;case kd.HTTP_ERROR:const _=u.getStatus();if(it(We,`RPC '${t}' ${r} failed with status:`,_,"response text:",u.getResponseText()),_>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const w=y==null?void 0:y.error;if(w&&w.status&&w.message){const E=function(k){const P=k.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(P)>=0?P:X.UNKNOWN}(w.status);l(new lt(E,w.message))}else l(new lt(X.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new lt(X.UNAVAILABLE,"Connection failed."));break;default:gt()}}finally{it(We,`RPC '${t}' ${r} completed.`)}});const h=JSON.stringify(s);it(We,`RPC '${t}' ${r} sending request:`,s),u.send(n,"POST",h,i,15)})}Bo(t,n,i){const s=pm(),r=[this.Do,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=gS(),l=mS(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;const p=r.join("");it(We,`Creating RPC '${t}' stream ${s}: ${p}`,u);const _=a.createWebChannel(p,u);let y=!1,w=!1;const E=new GD({Io:k=>{w?it(We,`Not sending because RPC '${t}' stream ${s} is closed:`,k):(y||(it(We,`Opening RPC '${t}' stream ${s} transport.`),_.open(),y=!0),it(We,`RPC '${t}' stream ${s} sending:`,k),_.send(k))},To:()=>_.close()}),S=(k,P,I)=>{k.listen(P,R=>{try{I(R)}catch(V){setTimeout(()=>{throw V},0)}})};return S(_,uc.EventType.OPEN,()=>{w||(it(We,`RPC '${t}' stream ${s} transport opened.`),E.yo())}),S(_,uc.EventType.CLOSE,()=>{w||(w=!0,it(We,`RPC '${t}' stream ${s} transport closed`),E.So())}),S(_,uc.EventType.ERROR,k=>{w||(w=!0,za(We,`RPC '${t}' stream ${s} transport errored:`,k),E.So(new lt(X.UNAVAILABLE,"The operation could not be completed")))}),S(_,uc.EventType.MESSAGE,k=>{var P;if(!w){const I=k.data[0];Ht(!!I);const R=I,V=R.error||((P=R[0])===null||P===void 0?void 0:P.error);if(V){it(We,`RPC '${t}' stream ${s} received error:`,V);const B=V.status;let H=function(A){const O=ye[A];if(O!==void 0)return BS(O)}(B),N=V.message;H===void 0&&(H=X.INTERNAL,N="Unknown error status: "+B+" with message "+V.message),w=!0,E.So(new lt(H,N)),_.close()}else it(We,`RPC '${t}' stream ${s} received:`,I),E.bo(I)}}),S(l,pS.STAT_EVENT,k=>{k.stat===Mg.PROXY?it(We,`RPC '${t}' stream ${s} detected buffering proxy`):k.stat===Mg.NOPROXY&&it(We,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{E.wo()},0),E}}function mm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gp(e){return new sD(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(t,n,i=1e3,s=1.5,r=6e4){this.ui=t,this.timerId=n,this.ko=i,this.qo=s,this.Qo=r,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(t){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-i);s>0&&it("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),t())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(t,n,i,s,r,a,l,u){this.ui=t,this.Ho=i,this.Jo=s,this.connection=r,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new JS(t,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(t){this.u_(),this.stream.send(t)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(t,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,t!==4?this.t_.reset():n&&n.code===X.RESOURCE_EXHAUSTED?(ps(n.toString()),ps("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.mo(n)}l_(){}auth(){this.state=1;const t=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.Yo===n&&this.P_(i,s)},i=>{t(()=>{const s=new lt(X.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(s)})})}P_(t,n){const i=this.h_(this.Yo);this.stream=this.T_(t,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{i(()=>this.I_(s))}),this.stream.onMessage(s=>{i(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(t){return it("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}h_(t){return n=>{this.ui.enqueueAndForget(()=>this.Yo===t?n():(it("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ZD extends tk{constructor(t,n,i,s,r,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,a),this.serializer=r}T_(t,n){return this.connection.Bo("Listen",t,n)}E_(t){return this.onNext(t)}onNext(t){this.t_.reset();const n=aD(this.serializer,t),i=function(r){if(!("targetChange"in r))return yt.min();const a=r.targetChange;return a.targetIds&&a.targetIds.length?yt.min():a.readTime?Ii(a.readTime):yt.min()}(t);return this.listener.d_(n,i)}A_(t){const n={};n.database=Hg(this.serializer),n.addTarget=function(r,a){let l;const u=a.target;if(l=Vg(u)?{documents:uD(r,u)}:{query:hD(r,u)._t},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=WS(r,a.resumeToken);const h=zg(r,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(yt.min())>0){l.readTime=wf(r,a.snapshotVersion.toTimestamp());const h=zg(r,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,t);const i=fD(this.serializer,t);i&&(n.labels=i),this.a_(n)}R_(t){const n={};n.database=Hg(this.serializer),n.removeTarget=t,this.a_(n)}}class QD extends tk{constructor(t,n,i,s,r,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,a),this.serializer=r}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(t,n){return this.connection.Bo("Write",t,n)}E_(t){return Ht(!!t.streamToken),this.lastStreamToken=t.streamToken,Ht(!t.writeResults||t.writeResults.length===0),this.listener.f_()}onNext(t){Ht(!!t.streamToken),this.lastStreamToken=t.streamToken,this.t_.reset();const n=cD(t.writeResults,t.commitTime),i=Ii(t.commitTime);return this.listener.g_(i,n)}p_(){const t={};t.database=Hg(this.serializer),this.a_(t)}m_(t){const n={streamToken:this.lastStreamToken,writes:t.map(i=>lD(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD extends class{}{constructor(t,n,i,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new lt(X.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(t,n,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,a])=>this.connection.Mo(t,Bg(n,i),s,r,a)).catch(r=>{throw r.name==="FirebaseError"?(r.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new lt(X.UNKNOWN,r.toString())})}Lo(t,n,i,s,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Lo(t,Bg(n,i),s,a,l,r)).catch(a=>{throw a.name==="FirebaseError"?(a.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new lt(X.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class XD{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(t){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.C_("Offline")))}set(t){this.x_(),this.S_=0,t==="Online"&&(this.D_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}F_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ps(n),this.D_=!1):it("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(t,n,i,s,r){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=r,this.k_._o(a=>{i.enqueueAndForget(async()=>{xo(this)&&(it("RemoteStore","Restarting streams for network reachability change."),await async function(u){const h=vt(u);h.L_.add(4),await ju(h),h.q_.set("Unknown"),h.L_.delete(4),await _p(h)}(this))})}),this.q_=new XD(i,s)}}async function _p(e){if(xo(e))for(const t of e.B_)await t(!0)}async function ju(e){for(const t of e.B_)await t(!1)}function ek(e,t){const n=vt(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),Vy(n)?jy(n):rl(n).r_()&&Dy(n,t))}function Oy(e,t){const n=vt(e),i=rl(n);n.N_.delete(t),i.r_()&&nk(n,t),n.N_.size===0&&(i.r_()?i.o_():xo(n)&&n.q_.set("Unknown"))}function Dy(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(yt.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}rl(e).A_(t)}function nk(e,t){e.Q_.xe(t),rl(e).R_(t)}function jy(e){e.Q_=new tD({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),rl(e).start(),e.q_.v_()}function Vy(e){return xo(e)&&!rl(e).n_()&&e.N_.size>0}function xo(e){return vt(e).L_.size===0}function ik(e){e.Q_=void 0}async function tj(e){e.q_.set("Online")}async function ej(e){e.N_.forEach((t,n)=>{Dy(e,t)})}async function nj(e,t){ik(e),Vy(e)?(e.q_.M_(t),jy(e)):e.q_.set("Unknown")}async function ij(e,t,n){if(e.q_.set("Online"),t instanceof HS&&t.state===2&&t.cause)try{await async function(s,r){const a=r.cause;for(const l of r.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.N_.delete(l),s.Q_.removeTarget(l))}(e,t)}catch(i){it("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),await bf(e,i)}else if(t instanceof Cd?e.Q_.Ke(t):t instanceof US?e.Q_.He(t):e.Q_.We(t),!n.isEqual(yt.min()))try{const i=await XS(e.localStore);n.compareTo(i)>=0&&await function(r,a){const l=r.Q_.rt(a);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const p=r.N_.get(h);p&&r.N_.set(h,p.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,h)=>{const p=r.N_.get(u);if(!p)return;r.N_.set(u,p.withResumeToken(Be.EMPTY_BYTE_STRING,p.snapshotVersion)),nk(r,u);const _=new $s(p.target,u,h,p.sequenceNumber);Dy(r,_)}),r.remoteSyncer.applyRemoteEvent(l)}(e,n)}catch(i){it("RemoteStore","Failed to raise snapshot:",i),await bf(e,i)}}async function bf(e,t,n){if(!Mu(t))throw t;e.L_.add(1),await ju(e),e.q_.set("Offline"),n||(n=()=>XS(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{it("RemoteStore","Retrying IndexedDB access"),await n(),e.L_.delete(1),await _p(e)})}function sk(e,t){return t().catch(n=>bf(e,n,t))}async function yp(e){const t=vt(e),n=hr(t);let i=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;sj(t);)try{const s=await BD(t.localStore,i);if(s===null){t.O_.length===0&&n.o_();break}i=s.batchId,rj(t,s)}catch(s){await bf(t,s)}rk(t)&&ok(t)}function sj(e){return xo(e)&&e.O_.length<10}function rj(e,t){e.O_.push(t);const n=hr(e);n.r_()&&n.V_&&n.m_(t.mutations)}function rk(e){return xo(e)&&!hr(e).n_()&&e.O_.length>0}function ok(e){hr(e).start()}async function oj(e){hr(e).p_()}async function aj(e){const t=hr(e);for(const n of e.O_)t.m_(n.mutations)}async function lj(e,t,n){const i=e.O_.shift(),s=Cy.from(i,t,n);await sk(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await yp(e)}async function cj(e,t){t&&hr(e).V_&&await async function(i,s){if(function(a){return YO(a)&&a!==X.ABORTED}(s.code)){const r=i.O_.shift();hr(i).s_(),await sk(i,()=>i.remoteSyncer.rejectFailedWrite(r.batchId,s)),await yp(i)}}(e,t),rk(e)&&ok(e)}async function ew(e,t){const n=vt(e);n.asyncQueue.verifyOperationInProgress(),it("RemoteStore","RemoteStore received new credentials");const i=xo(n);n.L_.add(3),await ju(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),await _p(n)}async function uj(e,t){const n=vt(e);t?(n.L_.delete(2),await _p(n)):t||(n.L_.add(2),await ju(n),n.q_.set("Unknown"))}function rl(e){return e.K_||(e.K_=function(n,i,s){const r=vt(n);return r.w_(),new ZD(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(e.datastore,e.asyncQueue,{Eo:tj.bind(null,e),Ro:ej.bind(null,e),mo:nj.bind(null,e),d_:ij.bind(null,e)}),e.B_.push(async t=>{t?(e.K_.s_(),Vy(e)?jy(e):e.q_.set("Unknown")):(await e.K_.stop(),ik(e))})),e.K_}function hr(e){return e.U_||(e.U_=function(n,i,s){const r=vt(n);return r.w_(),new QD(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:oj.bind(null,e),mo:cj.bind(null,e),f_:aj.bind(null,e),g_:lj.bind(null,e)}),e.B_.push(async t=>{t?(e.U_.s_(),await yp(e)):(await e.U_.stop(),e.O_.length>0&&(it("RemoteStore",`Stopping write stream with ${e.O_.length} pending writes`),e.O_=[]))})),e.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(t,n,i,s,r){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new sr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,s,r){const a=Date.now()+i,l=new Fy(t,n,a,s,r);return l.start(i),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new lt(X.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zy(e,t){if(ps("AsyncQueue",`${t}: ${e}`),Mu(e))return new lt(X.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(t){this.comparator=t?(n,i)=>t(n,i)||ct.comparator(n.key,i.key):(n,i)=>ct.comparator(n.key,i.key),this.keyedMap=hc(),this.sortedSet=new oe(this.comparator)}static emptySet(t){return new Ca(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Ca)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new Ca;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(){this.W_=new oe(ct.comparator)}track(t){const n=t.doc.key,i=this.W_.get(n);i?t.type!==0&&i.type===3?this.W_=this.W_.insert(n,t):t.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.W_=this.W_.remove(n):t.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:t.doc}):gt():this.W_=this.W_.insert(n,t)}G_(){const t=[];return this.W_.inorderTraversal((n,i)=>{t.push(i)}),t}}class $a{constructor(t,n,i,s,r,a,l,u,h){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(t,n,i,s,r){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new $a(t,n,Ca.emptySet(n),a,i,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&hp(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(t=>t.J_())}}class dj{constructor(){this.queries=iw(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const s=vt(n),r=s.queries;s.queries=iw(),r.forEach((a,l)=>{for(const u of l.j_)u.onError(i)})})(this,new lt(X.ABORTED,"Firestore shutting down"))}}function iw(){return new sl(e=>IS(e),hp)}async function fj(e,t){const n=vt(e);let i=3;const s=t.query;let r=n.queries.get(s);r?!r.H_()&&t.J_()&&(i=2):(r=new hj,i=t.J_()?0:1);try{switch(i){case 0:r.z_=await n.onListen(s,!0);break;case 1:r.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=zy(a,`Initialization of query '${sa(t.query)}' failed`);return void t.onError(l)}n.queries.set(s,r),r.j_.push(t),t.Z_(n.onlineState),r.z_&&t.X_(r.z_)&&By(n)}async function pj(e,t){const n=vt(e),i=t.query;let s=3;const r=n.queries.get(i);if(r){const a=r.j_.indexOf(t);a>=0&&(r.j_.splice(a,1),r.j_.length===0?s=t.J_()?0:1:!r.H_()&&t.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function mj(e,t){const n=vt(e);let i=!1;for(const s of t){const r=s.query,a=n.queries.get(r);if(a){for(const l of a.j_)l.X_(s)&&(i=!0);a.z_=s}}i&&By(n)}function gj(e,t,n){const i=vt(e),s=i.queries.get(t);if(s)for(const r of s.j_)r.onError(n);i.queries.delete(t)}function By(e){e.Y_.forEach(t=>{t.next()})}var $g,sw;(sw=$g||($g={})).ea="default",sw.Cache="cache";class _j{constructor(t,n,i){this.query=t,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(t){if(!this.options.includeMetadataChanges){const i=[];for(const s of t.docChanges)s.type!==3&&i.push(s);t=new $a(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.na?this.ia(t)&&(this.ta.next(t),n=!0):this.sa(t,this.onlineState)&&(this.oa(t),n=!0),this.ra=t,n}onError(t){this.ta.error(t)}Z_(t){this.onlineState=t;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,t)&&(this.oa(this.ra),n=!0),n}sa(t,n){if(!t.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}ia(t){if(t.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(t){t=$a.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.na=!0,this.ta.next(t)}J_(){return this.options.source!==$g.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(t){this.key=t}}class lk{constructor(t){this.key=t}}class yj{constructor(t,n){this.query=t,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=At(),this.mutatedKeys=At(),this.Aa=CS(t),this.Ra=new Ca(this.Aa)}get Va(){return this.Ta}ma(t,n){const i=n?n.fa:new nw,s=n?n.Ra:this.Ra;let r=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((p,_)=>{const y=s.get(p),w=dp(this.query,_)?_:null,E=!!y&&this.mutatedKeys.has(y.key),S=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let k=!1;y&&w?y.data.isEqual(w.data)?E!==S&&(i.track({type:3,doc:w}),k=!0):this.ga(y,w)||(i.track({type:2,doc:w}),k=!0,(u&&this.Aa(w,u)>0||h&&this.Aa(w,h)<0)&&(l=!0)):!y&&w?(i.track({type:0,doc:w}),k=!0):y&&!w&&(i.track({type:1,doc:y}),k=!0,(u||h)&&(l=!0)),k&&(w?(a=a.add(w),r=S?r.add(p):r.delete(p)):(a=a.delete(p),r=r.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),r=r.delete(p.key),i.track({type:1,doc:p})}return{Ra:a,fa:i,ns:l,mutatedKeys:r}}ga(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,s){const r=this.Ra;this.Ra=t.Ra,this.mutatedKeys=t.mutatedKeys;const a=t.fa.G_();a.sort((p,_)=>function(w,E){const S=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gt()}};return S(w)-S(E)}(p.type,_.type)||this.Aa(p.doc,_.doc)),this.pa(i),s=s!=null&&s;const l=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,h=u!==this.Ea;return this.Ea=u,a.length!==0||h?{snapshot:new $a(this.query,t.Ra,r,a,t.mutatedKeys,u===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new nw,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(t){return!this.Ta.has(t)&&!!this.Ra.has(t)&&!this.Ra.get(t).hasLocalMutations}pa(t){t&&(t.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=t.current)}ya(){if(!this.current)return[];const t=this.da;this.da=At(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return t.forEach(i=>{this.da.has(i)||n.push(new lk(i))}),this.da.forEach(i=>{t.has(i)||n.push(new ak(i))}),n}ba(t){this.Ta=t.Ts,this.da=At();const n=this.ma(t.documents);return this.applyChanges(n,!0)}Da(){return $a.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class vj{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class xj{constructor(t){this.key=t,this.va=!1}}class wj{constructor(t,n,i,s,r,a){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new sl(l=>IS(l),hp),this.Ma=new Map,this.xa=new Set,this.Oa=new oe(ct.comparator),this.Na=new Map,this.La=new Ny,this.Ba={},this.ka=new Map,this.qa=Wa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function bj(e,t,n=!0){const i=pk(e);let s;const r=i.Fa.get(t);return r?(i.sharedClientState.addLocalQueryTarget(r.targetId),s=r.view.Da()):s=await ck(i,t,n,!0),s}async function Tj(e,t){const n=pk(e);await ck(n,t,!0,!1)}async function ck(e,t,n,i){const s=await UD(e.localStore,Pi(t)),r=s.targetId,a=e.sharedClientState.addLocalQueryTarget(r,n);let l;return i&&(l=await Ej(e,t,r,a==="current",s.resumeToken)),e.isPrimaryClient&&n&&ek(e.remoteStore,s),l}async function Ej(e,t,n,i,s){e.Ka=(_,y,w)=>async function(S,k,P,I){let R=k.view.ma(P);R.ns&&(R=await Xx(S.localStore,k.query,!1).then(({documents:N})=>k.view.ma(N,R)));const V=I&&I.targetChanges.get(k.targetId),B=I&&I.targetMismatches.get(k.targetId)!=null,H=k.view.applyChanges(R,S.isPrimaryClient,V,B);return ow(S,k.targetId,H.wa),H.snapshot}(e,_,y,w);const r=await Xx(e.localStore,t,!0),a=new yj(t,r.Ts),l=a.ma(r.documents),u=Du.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",s),h=a.applyChanges(l,e.isPrimaryClient,u);ow(e,n,h.wa);const p=new vj(t,n,a);return e.Fa.set(t,p),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),h.snapshot}async function Sj(e,t,n){const i=vt(e),s=i.Fa.get(t),r=i.Ma.get(s.targetId);if(r.length>1)return i.Ma.set(s.targetId,r.filter(a=>!hp(a,t))),void i.Fa.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Wg(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&Oy(i.remoteStore,s.targetId),qg(i,s.targetId)}).catch(Lu)):(qg(i,s.targetId),await Wg(i.localStore,s.targetId,!0))}async function kj(e,t){const n=vt(e),i=n.Fa.get(t),s=n.Ma.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Oy(n.remoteStore,i.targetId))}async function Pj(e,t,n){const i=Mj(e);try{const s=await function(a,l){const u=vt(a),h=ke.now(),p=l.reduce((w,E)=>w.add(E.key),At());let _,y;return u.persistence.runTransaction("Locally write mutations","readwrite",w=>{let E=ms(),S=At();return u.cs.getEntries(w,p).next(k=>{E=k,E.forEach((P,I)=>{I.isValidDocument()||(S=S.add(P))})}).next(()=>u.localDocuments.getOverlayedDocuments(w,E)).next(k=>{_=k;const P=[];for(const I of l){const R=qO(I,_.get(I.key).overlayedDocument);R!=null&&P.push(new vo(I.key,R,wS(R.value.mapValue),as.exists(!0)))}return u.mutationQueue.addMutationBatch(w,h,P,l)}).next(k=>{y=k;const P=k.applyToLocalDocumentSet(_,S);return u.documentOverlayCache.saveOverlays(w,k.batchId,P)})}).then(()=>({batchId:y.batchId,changes:RS(_)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(s.batchId),function(a,l,u){let h=a.Ba[a.currentUser.toKey()];h||(h=new oe(Ft)),h=h.insert(l,u),a.Ba[a.currentUser.toKey()]=h}(i,s.batchId,n),await Vu(i,s.changes),await yp(i.remoteStore)}catch(s){const r=zy(s,"Failed to persist write");n.reject(r)}}async function uk(e,t){const n=vt(e);try{const i=await FD(n.localStore,t);t.targetChanges.forEach((s,r)=>{const a=n.Na.get(r);a&&(Ht(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?Ht(a.va):s.removedDocuments.size>0&&(Ht(a.va),a.va=!1))}),await Vu(n,i,t)}catch(i){await Lu(i)}}function rw(e,t,n){const i=vt(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Fa.forEach((r,a)=>{const l=a.view.Z_(t);l.snapshot&&s.push(l.snapshot)}),function(a,l){const u=vt(a);u.onlineState=l;let h=!1;u.queries.forEach((p,_)=>{for(const y of _.j_)y.Z_(l)&&(h=!0)}),h&&By(u)}(i.eventManager,t),s.length&&i.Ca.d_(s),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function Ij(e,t,n){const i=vt(e);i.sharedClientState.updateQueryState(t,"rejected",n);const s=i.Na.get(t),r=s&&s.key;if(r){let a=new oe(ct.comparator);a=a.insert(r,Ke.newNoDocument(r,yt.min()));const l=At().add(r),u=new mp(yt.min(),new Map,new oe(Ft),a,l);await uk(i,u),i.Oa=i.Oa.remove(r),i.Na.delete(t),Uy(i)}else await Wg(i.localStore,t,!1).then(()=>qg(i,t,n)).catch(Lu)}async function Cj(e,t){const n=vt(e),i=t.batch.batchId;try{const s=await VD(n.localStore,t);dk(n,i,null),hk(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Vu(n,s)}catch(s){await Lu(s)}}async function Aj(e,t,n){const i=vt(e);try{const s=await function(a,l){const u=vt(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return u.mutationQueue.lookupMutationBatch(h,l).next(_=>(Ht(_!==null),p=_.keys(),u.mutationQueue.removeMutationBatch(h,_))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,p,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>u.localDocuments.getDocuments(h,p))})}(i.localStore,t);dk(i,t,n),hk(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await Vu(i,s)}catch(s){await Lu(s)}}function hk(e,t){(e.ka.get(t)||[]).forEach(n=>{n.resolve()}),e.ka.delete(t)}function dk(e,t,n){const i=vt(e);let s=i.Ba[i.currentUser.toKey()];if(s){const r=s.get(t);r&&(n?r.reject(n):r.resolve(),s=s.remove(t)),i.Ba[i.currentUser.toKey()]=s}}function qg(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.Ma.get(t))e.Fa.delete(i),n&&e.Ca.$a(i,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach(i=>{e.La.containsKey(i)||fk(e,i)})}function fk(e,t){e.xa.delete(t.path.canonicalString());const n=e.Oa.get(t);n!==null&&(Oy(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),Uy(e))}function ow(e,t,n){for(const i of n)i instanceof ak?(e.La.addReference(i.key,t),Rj(e,i)):i instanceof lk?(it("SyncEngine","Document no longer in limbo: "+i.key),e.La.removeReference(i.key,t),e.La.containsKey(i.key)||fk(e,i.key)):gt()}function Rj(e,t){const n=t.key,i=n.path.canonicalString();e.Oa.get(n)||e.xa.has(i)||(it("SyncEngine","New document in limbo: "+n),e.xa.add(i),Uy(e))}function Uy(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const n=new ct(ce.fromString(t)),i=e.qa.next();e.Na.set(i,new xj(n)),e.Oa=e.Oa.insert(n,i),ek(e.remoteStore,new $s(Pi(Py(n.path)),i,"TargetPurposeLimboResolution",wy.oe))}}async function Vu(e,t,n){const i=vt(e),s=[],r=[],a=[];i.Fa.isEmpty()||(i.Fa.forEach((l,u)=>{a.push(i.Ka(u,t,n).then(h=>{var p;if((h||n)&&i.isPrimaryClient){const _=h?!h.fromCache:(p=n==null?void 0:n.targetChanges.get(u.targetId))===null||p===void 0?void 0:p.current;i.sharedClientState.updateQueryState(u.targetId,_?"current":"not-current")}if(h){s.push(h);const _=My.Wi(u.targetId,h);r.push(_)}}))}),await Promise.all(a),i.Ca.d_(s),await async function(u,h){const p=vt(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>Q.forEach(h,y=>Q.forEach(y.$i,w=>p.persistence.referenceDelegate.addReference(_,y.targetId,w)).next(()=>Q.forEach(y.Ui,w=>p.persistence.referenceDelegate.removeReference(_,y.targetId,w)))))}catch(_){if(!Mu(_))throw _;it("LocalStore","Failed to update sequence numbers: "+_)}for(const _ of h){const y=_.targetId;if(!_.fromCache){const w=p.os.get(y),E=w.snapshotVersion,S=w.withLastLimboFreeSnapshotVersion(E);p.os=p.os.insert(y,S)}}}(i.localStore,r))}async function Nj(e,t){const n=vt(e);if(!n.currentUser.isEqual(t)){it("SyncEngine","User change. New user:",t.toKey());const i=await YS(n.localStore,t);n.currentUser=t,function(r,a){r.ka.forEach(l=>{l.forEach(u=>{u.reject(new lt(X.CANCELLED,a))})}),r.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await Vu(n,i.hs)}}function Lj(e,t){const n=vt(e),i=n.Na.get(t);if(i&&i.va)return At().add(i.key);{let s=At();const r=n.Ma.get(t);if(!r)return s;for(const a of r){const l=n.Fa.get(a);s=s.unionWith(l.view.Va)}return s}}function pk(e){const t=vt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=uk.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Lj.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Ij.bind(null,t),t.Ca.d_=mj.bind(null,t.eventManager),t.Ca.$a=gj.bind(null,t.eventManager),t}function Mj(e){const t=vt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Cj.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Aj.bind(null,t),t}class Tf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=gp(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),await this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)}ja(t,n){return null}Ha(t,n){return null}za(t){return jD(this.persistence,new OD,t.initialUser,this.serializer)}Ga(t){return new ND(Ly.Zr,this.serializer)}Wa(t){return new WD}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Tf.provider={build:()=>new Tf};class Gg{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>rw(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Nj.bind(null,this.syncEngine),await uj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new dj}()}createDatastore(t){const n=gp(t.databaseInfo.databaseId),i=function(r){return new KD(r)}(t.databaseInfo);return function(r,a,l,u){return new YD(r,a,l,u)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return function(i,s,r,a,l){return new JD(i,s,r,a,l)}(this.localStore,this.datastore,t.asyncQueue,n=>rw(this.syncEngine,n,0),function(){return tw.D()?new tw:new $D}())}createSyncEngine(t,n){return function(s,r,a,l,u,h,p){const _=new wj(s,r,a,l,u,h);return p&&(_.Qa=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(s){const r=vt(s);it("RemoteStore","RemoteStore shutting down."),r.L_.add(5),await ju(r),r.k_.shutdown(),r.q_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Gg.provider={build:()=>new Gg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ya(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ya(this.observer.error,t):ps("Uncaught Error in snapshot listener:",t.toString()))}Za(){this.muted=!0}Ya(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(t,n,i,s,r){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=qe.UNAUTHENTICATED,this.clientId=yS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(i,async a=>{it("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(it("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new sr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=zy(n,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function gm(e,t){e.asyncQueue.verifyOperationInProgress(),it("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(async s=>{i.isEqual(s)||(await YS(t.localStore,s),i=s)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function aw(e,t){e.asyncQueue.verifyOperationInProgress();const n=await jj(e);it("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(i=>ew(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,s)=>ew(t.remoteStore,s)),e._onlineComponents=t}async function jj(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){it("FirestoreClient","Using user provided OfflineComponentProvider");try{await gm(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(s){return s.name==="FirebaseError"?s.code===X.FAILED_PRECONDITION||s.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;za("Error using user provided cache. Falling back to memory cache: "+n),await gm(e,new Tf)}}else it("FirestoreClient","Using default OfflineComponentProvider"),await gm(e,new Tf);return e._offlineComponents}async function mk(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(it("FirestoreClient","Using user provided OnlineComponentProvider"),await aw(e,e._uninitializedComponentsProvider._online)):(it("FirestoreClient","Using default OnlineComponentProvider"),await aw(e,new Gg))),e._onlineComponents}function Vj(e){return mk(e).then(t=>t.syncEngine)}async function Fj(e){const t=await mk(e),n=t.eventManager;return n.onListen=bj.bind(null,t.syncEngine),n.onUnlisten=Sj.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Tj.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=kj.bind(null,t.syncEngine),n}function zj(e,t,n={}){const i=new sr;return e.asyncQueue.enqueueAndForget(async()=>function(r,a,l,u,h){const p=new Oj({next:y=>{p.Za(),a.enqueueAndForget(()=>pj(r,_));const w=y.docs.has(l);!w&&y.fromCache?h.reject(new lt(X.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&y.fromCache&&u&&u.source==="server"?h.reject(new lt(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(y)},error:y=>h.reject(y)}),_=new _j(Py(l.path),p,{includeMetadataChanges:!0,_a:!0});return fj(r,_)}(await Fj(e),e.asyncQueue,t,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gk(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bj(e,t,n){if(!n)throw new lt(X.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Uj(e,t,n,i){if(t===!0&&i===!0)throw new lt(X.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function cw(e){if(!ct.isDocumentKey(e))throw new lt(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Hy(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":gt()}function hu(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new lt(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Hy(e);throw new lt(X.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(t){var n,i;if(t.host===void 0){if(t.ssl!==void 0)throw new lt(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new lt(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Uj("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gk((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new lt(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new lt(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new lt(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Wy{constructor(t,n,i,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uw({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new lt(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new lt(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uw(t),t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new tO;switch(i.type){case"firstParty":return new sO(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new lt(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=lw.get(n);i&&(it("ComponentProvider","Removing Datastore"),lw.delete(n),i.terminate())}(this),Promise.resolve()}}function Hj(e,t,n,i={}){var s;const r=(e=hu(e,Wy))._getSettings(),a=`${t}:${n}`;if(r.host!=="firestore.googleapis.com"&&r.host!==a&&za("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},r),{host:a,ssl:!1})),i.mockUserToken){let l,u;if(typeof i.mockUserToken=="string")l=i.mockUserToken,u=qe.MOCK_USER;else{l=kE(i.mockUserToken,(s=e._app)===null||s===void 0?void 0:s.options.projectId);const h=i.mockUserToken.sub||i.mockUserToken.user_id;if(!h)throw new lt(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new qe(h)}e._authCredentials=new eO(new _S(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new $y(this.firestore,t,this._query)}}class Un{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new du(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Un(this.firestore,t,this._key)}}class du extends $y{constructor(t,n,i){super(t,n,Py(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Un(this.firestore,null,new ct(t))}withConverter(t){return new du(this.firestore,t,this._path)}}function ea(e,t,...n){if(e=sn(e),arguments.length===1&&(t=yS.newId()),Bj("doc","path",t),e instanceof Wy){const i=ce.fromString(t,...n);return cw(i),new Un(e,null,new ct(i))}{if(!(e instanceof Un||e instanceof du))throw new lt(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(ce.fromString(t,...n));return cw(i),new Un(e.firestore,e instanceof du?e.converter:null,new ct(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(t=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new JS(this,"async_queue_retry"),this.Vu=()=>{const i=mm();i&&it("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=t;const n=mm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.fu(),this.gu(t)}enterRestrictedMode(t){if(!this.Iu){this.Iu=!0,this.Au=t||!1;const n=mm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(t){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new sr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Pu.push(t),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(t){if(!Mu(t))throw t;it("AsyncQueue","Operation failed with retryable error: "+t)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(t){const n=this.mu.then(()=>(this.du=!0,t().catch(i=>{this.Eu=i,this.du=!1;const s=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(i);throw ps("INTERNAL UNHANDLED ERROR: ",s),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(t,n,i){this.fu(),this.Ru.indexOf(t)>-1&&(n=0);const s=Fy.createAndSchedule(this,t,n,i,r=>this.yu(r));return this.Tu.push(s),s}fu(){this.Eu&&gt()}verifyOperationInProgress(){}async wu(){let t;do t=this.mu,await t;while(t!==this.mu)}Su(t){for(const n of this.Tu)if(n.timerId===t)return!0;return!1}bu(t){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.wu()})}Du(t){this.Ru.push(t)}yu(t){const n=this.Tu.indexOf(t);this.Tu.splice(n,1)}}class qy extends Wy{constructor(t,n,i,s){super(t,n,i,s),this.type="firestore",this._queue=new hw,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new hw(t),this._firestoreClient=void 0,await t}}}function Wj(e,t){const n=typeof e=="object"?e:ly(),i=typeof e=="string"?e:"(default)",s=rp(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const r=TE("firestore");r&&Hj(s,...r)}return s}function _k(e){if(e._terminated)throw new lt(X.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||$j(e),e._firestoreClient}function $j(e){var t,n,i;const s=e._freezeSettings(),r=function(l,u,h,p){return new _O(l,u,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,gk(p.experimentalLongPollingOptions),p.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new Dj(e._authCredentials,e._appCheckCredentials,e._queue,r,e._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(t){this._byteString=t}static fromBase64String(t){try{return new qa(Be.fromBase64String(t))}catch(n){throw new lt(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new qa(Be.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new lt(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new je(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new lt(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new lt(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Ft(this._lat,t._lat)||Ft(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,s){if(i.length!==s.length)return!1;for(let r=0;r<i.length;++r)if(i[r]!==s[r])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qj=/^__.*__$/;class Gj{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new vo(t,this.data,this.fieldMask,n,this.fieldTransforms):new Ou(t,this.data,n,this.fieldTransforms)}}function vk(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gt()}}class Qy{constructor(t,n,i,s,r,a){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,r===void 0&&this.vu(),this.fieldTransforms=r||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(t){return new Qy(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(t){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.Fu({path:i,xu:!1});return s.Ou(t),s}Nu(t){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.Fu({path:i,xu:!1});return s.vu(),s}Lu(t){return this.Fu({path:void 0,xu:!0})}Bu(t){return Ef(t,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Ou(this.path.get(t))}Ou(t){if(t.length===0)throw this.Bu("Document fields must not be empty");if(vk(this.Cu)&&qj.test(t))throw this.Bu('Document fields cannot begin and end with "__"')}}class Kj{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||gp(t)}Qu(t,n,i,s=!1){return new Qy({Cu:t,methodName:n,qu:i,path:je.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Zj(e){const t=e._freezeSettings(),n=gp(e._databaseId);return new Kj(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Qj(e,t,n,i,s,r={}){const a=e.Qu(r.merge||r.mergeFields?2:0,t,n,s);Tk("Data must be an object, but it was:",a,i);const l=wk(i,a);let u,h;if(r.merge)u=new ii(a.fieldMask),h=a.fieldTransforms;else if(r.mergeFields){const p=[];for(const _ of r.mergeFields){const y=Yj(t,_,n);if(!a.contains(y))throw new lt(X.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);Jj(p,y)||p.push(y)}u=new ii(p),h=a.fieldTransforms.filter(_=>u.covers(_.field))}else u=null,h=a.fieldTransforms;return new Gj(new jn(l),u,h)}function xk(e,t){if(bk(e=sn(e)))return Tk("Unsupported field value:",t,e),wk(e,t);if(e instanceof yk)return function(i,s){if(!vk(s.Cu))throw s.Bu(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${i._methodName}() is not currently supported inside arrays`);const r=i._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&t.Cu!==4)throw t.Bu("Nested arrays are not supported");return function(i,s){const r=[];let a=0;for(const l of i){let u=xk(l,s.Lu(a));u==null&&(u={nullValue:"NULL_VALUE"}),r.push(u),a++}return{arrayValue:{values:r}}}(e,t)}return function(i,s){if((i=sn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return zO(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const r=ke.fromDate(i);return{timestampValue:wf(s.serializer,r)}}if(i instanceof ke){const r=new ke(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:wf(s.serializer,r)}}if(i instanceof Ky)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof qa)return{bytesValue:WS(s.serializer,i._byteString)};if(i instanceof Un){const r=s.databaseId,a=i.firestore._databaseId;if(!a.isEqual(r))throw s.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:Ry(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof Zy)return function(a,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return Iy(l.serializer,u)})}}}}}}(i,s);throw s.Bu(`Unsupported field value: ${Hy(i)}`)}(e,t)}function wk(e,t){const n={};return vS(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):il(e,(i,s)=>{const r=xk(s,t.Mu(i));r!=null&&(n[i]=r)}),{mapValue:{fields:n}}}function bk(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof ke||e instanceof Ky||e instanceof qa||e instanceof Un||e instanceof yk||e instanceof Zy)}function Tk(e,t,n){if(!bk(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const i=Hy(n);throw i==="an object"?t.Bu(e+" a custom object"):t.Bu(e+" "+i)}}function Yj(e,t,n){if((t=sn(t))instanceof Gy)return t._internalPath;if(typeof t=="string")return Ek(e,t);throw Ef("Field path arguments must be of type string or ",e,!1,void 0,n)}const Xj=new RegExp("[~\\*/\\[\\]]");function Ek(e,t,n){if(t.search(Xj)>=0)throw Ef(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Gy(...t.split("."))._internalPath}catch{throw Ef(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Ef(e,t,n,i,s){const r=i&&!i.isEmpty(),a=s!==void 0;let l=`Function ${t}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(r||a)&&(u+=" (found",r&&(u+=` in field ${i}`),a&&(u+=` in document ${s}`),u+=")"),new lt(X.INVALID_ARGUMENT,l+e+u)}function Jj(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(t,n,i,s,r){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Un(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new tV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(kk("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class tV extends Sk{data(){return super.data()}}function kk(e,t){return typeof t=="string"?Ek(e,t):t instanceof Gy?t._internalPath:t._delegate._internalPath}class eV{convertValue(t,n="none"){switch(ho(t)){case 0:return null;case 1:return t.booleanValue;case 2:return de(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(uo(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw gt()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return il(t,(s,r)=>{i[s]=this.convertValue(r,n)}),i}convertVectorValue(t){var n,i,s;const r=(s=(i=(n=t.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map(a=>de(a.doubleValue));return new Zy(r)}convertGeoPoint(t){return new Ky(de(t.latitude),de(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":const i=Ty(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(ou(t));default:return null}}convertTimestamp(t){const n=ur(t);return new ke(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=ce.fromString(t);Ht(QS(i));const s=new au(i.get(1),i.get(3)),r=new ct(i.popFirst(5));return s.isEqual(n)||ps(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nV(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Pk extends Sk{constructor(t,n,i,s,r,a){super(t,n,i,s,a),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new sV(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(kk("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class sV extends Pk{data(t={}){return super.data(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dw(e){e=hu(e,Un);const t=hu(e.firestore,qy);return zj(_k(t),e._key).then(n=>aV(t,e,n))}class rV extends eV{constructor(t){super(),this.firestore=t}convertBytes(t){return new qa(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Un(this.firestore,null,n)}}function Gh(e,t,n){e=hu(e,Un);const i=hu(e.firestore,qy),s=nV(e.converter,t,n);return oV(i,[Qj(Zj(i),"setDoc",e._key,s,e.converter!==null,n).toMutation(e._key,as.none())])}function oV(e,t){return function(i,s){const r=new sr;return i.asyncQueue.enqueueAndForget(async()=>Pj(await Vj(i),s,r)),r.promise}(_k(e),t)}function aV(e,t,n){const i=n.docs.get(t._key),s=new rV(e);return new Pk(e,s,t._key,i,new iV(n.hasPendingWrites,n.fromCache),t.converter)}(function(t,n=!0){(function(s){nl=s})(yo),oo(new lr("firestore",(i,{instanceIdentifier:s,options:r})=>{const a=i.getProvider("app").getImmediate(),l=new qy(new nO(i.getProvider("auth-internal")),new oO(i.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new lt(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new au(h.options.projectId,p)}(a,s),a);return r=Object.assign({useFetchStreams:n},r),l._setSettings(r),l},"PUBLIC").setMultipleInstances(!0)),Si(Rx,"4.7.3",t),Si(Rx,"4.7.3","esm2017")})();var lV="firebase",cV="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Si(lV,cV,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ik="firebasestorage.googleapis.com",uV="storageBucket",hV=2*60*1e3,dV=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li extends Ni{constructor(t,n,i=0){super(_m(t),`Firebase Storage: ${n} (${_m(t)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Li.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return _m(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ri;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ri||(Ri={}));function _m(e){return"storage/"+e}function fV(){const e="An unknown error occurred, please check the error payload for server response.";return new Li(Ri.UNKNOWN,e)}function pV(){return new Li(Ri.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function mV(){return new Li(Ri.CANCELED,"User canceled the upload/download.")}function gV(e){return new Li(Ri.INVALID_URL,"Invalid URL '"+e+"'.")}function _V(e){return new Li(Ri.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function fw(e){return new Li(Ri.INVALID_ARGUMENT,e)}function Ck(){return new Li(Ri.APP_DELETED,"The Firebase app was deleted.")}function yV(e){return new Li(Ri.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let i;try{i=si.makeFromUrl(t,n)}catch{return new si(t,"")}if(i.path==="")return i;throw _V(t)}static makeFromUrl(t,n){let i=null;const s="([A-Za-z0-9.\\-_]+)";function r(V){V.path.charAt(V.path.length-1)==="/"&&(V.path_=V.path_.slice(0,-1))}const a="(/(.*))?$",l=new RegExp("^gs://"+s+a,"i"),u={bucket:1,path:3};function h(V){V.path_=decodeURIComponent(V.path)}const p="v[A-Za-z0-9_]+",_=n.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",w=new RegExp(`^https?://${_}/${p}/b/${s}/o${y}`,"i"),E={bucket:1,path:3},S=n===Ik?"(?:storage.googleapis.com|storage.cloud.google.com)":n,k="([^?#]*)",P=new RegExp(`^https?://${S}/${s}/${k}`,"i"),R=[{regex:l,indices:u,postModify:r},{regex:w,indices:E,postModify:h},{regex:P,indices:{bucket:1,path:2},postModify:h}];for(let V=0;V<R.length;V++){const B=R[V],H=B.regex.exec(t);if(H){const N=H[B.indices.bucket];let b=H[B.indices.path];b||(b=""),i=new si(N,b),B.postModify(i);break}}if(i==null)throw gV(t);return i}}class vV{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xV(e,t,n){let i=1,s=null,r=null,a=!1,l=0;function u(){return l===2}let h=!1;function p(...k){h||(h=!0,t.apply(null,k))}function _(k){s=setTimeout(()=>{s=null,e(w,u())},k)}function y(){r&&clearTimeout(r)}function w(k,...P){if(h){y();return}if(k){y(),p.call(null,k,...P);return}if(u()||a){y(),p.call(null,k,...P);return}i<64&&(i*=2);let R;l===1?(l=2,R=0):R=(i+Math.random())*1e3,_(R)}let E=!1;function S(k){E||(E=!0,y(),!h&&(s!==null?(k||(l=2),clearTimeout(s),_(0)):k||(l=1)))}return _(0),r=setTimeout(()=>{a=!0,S(!0)},n),S}function wV(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bV(e){return e!==void 0}function pw(e,t,n,i){if(i<t)throw fw(`Invalid value for '${e}'. Expected ${t} or greater.`);if(i>n)throw fw(`Invalid value for '${e}'. Expected ${n} or less.`)}function TV(e){const t=encodeURIComponent;let n="?";for(const i in e)if(e.hasOwnProperty(i)){const s=t(i)+"="+t(e[i]);n=n+s+"&"}return n=n.slice(0,-1),n}var Sf;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(Sf||(Sf={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EV(e,t){const n=e>=500&&e<600,s=[408,429].indexOf(e)!==-1,r=t.indexOf(e)!==-1;return n||s||r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(t,n,i,s,r,a,l,u,h,p,_,y=!0){this.url_=t,this.method_=n,this.headers_=i,this.body_=s,this.successCodes_=r,this.additionalRetryCodes_=a,this.callback_=l,this.errorCallback_=u,this.timeout_=h,this.progressCallback_=p,this.connectionFactory_=_,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,E)=>{this.resolve_=w,this.reject_=E,this.start_()})}start_(){const t=(i,s)=>{if(s){i(!1,new Kh(!1,null,!0));return}const r=this.connectionFactory_();this.pendingConnection_=r;const a=l=>{const u=l.loaded,h=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,h)};this.progressCallback_!==null&&r.addUploadProgressListener(a),r.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&r.removeUploadProgressListener(a),this.pendingConnection_=null;const l=r.getErrorCode()===Sf.NO_ERROR,u=r.getStatus();if(!l||EV(u,this.additionalRetryCodes_)&&this.retry){const p=r.getErrorCode()===Sf.ABORT;i(!1,new Kh(!1,null,p));return}const h=this.successCodes_.indexOf(u)!==-1;i(!0,new Kh(h,r))})},n=(i,s)=>{const r=this.resolve_,a=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());bV(u)?r(u):r()}catch(u){a(u)}else if(l!==null){const u=fV();u.serverResponse=l.getErrorText(),this.errorCallback_?a(this.errorCallback_(l,u)):a(u)}else if(s.canceled){const u=this.appDelete_?Ck():mV();a(u)}else{const u=pV();a(u)}};this.canceled_?n(!1,new Kh(!1,null,!0)):this.backoffId_=xV(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&wV(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Kh{constructor(t,n,i){this.wasSuccessCode=t,this.connection=n,this.canceled=!!i}}function kV(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function PV(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function IV(e,t){t&&(e["X-Firebase-GMPID"]=t)}function CV(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function AV(e,t,n,i,s,r,a=!0){const l=TV(e.urlParams),u=e.url+l,h=Object.assign({},e.headers);return IV(h,t),kV(h,n),PV(h,r),CV(h,i),new SV(u,e.method,h,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,s,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RV(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function NV(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(t,n){this._service=t,n instanceof si?this._location=n:this._location=si.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new kf(t,n)}get root(){const t=new si(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return NV(this._location.path)}get storage(){return this._service}get parent(){const t=RV(this._location.path);if(t===null)return null;const n=new si(this._location.bucket,t);return new kf(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw yV(t)}}function mw(e,t){const n=t==null?void 0:t[uV];return n==null?null:si.makeFromBucketSpec(n,e)}function LV(e,t,n,i={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:s}=i;s&&(e._overrideAuthToken=typeof s=="string"?s:kE(s,e.app.options.projectId))}class MV{constructor(t,n,i,s,r){this.app=t,this._authProvider=n,this._appCheckProvider=i,this._url=s,this._firebaseVersion=r,this._bucket=null,this._host=Ik,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=hV,this._maxUploadRetryTime=dV,this._requests=new Set,s!=null?this._bucket=si.makeFromBucketSpec(s,this._host):this._bucket=mw(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=si.makeFromBucketSpec(this._url,t):this._bucket=mw(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){pw("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){pw("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new kf(this,t)}_makeRequest(t,n,i,s,r=!0){if(this._deleted)return new vV(Ck());{const a=AV(t,this._appId,i,s,n,this._firebaseVersion,r);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(t,n){const[i,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,i,s).getPromise()}}const gw="@firebase/storage",_w="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak="storage";function OV(e=ly(),t){e=sn(e);const i=rp(e,Ak).getImmediate({identifier:t}),s=TE("storage");return s&&DV(i,...s),i}function DV(e,t,n,i={}){LV(e,t,n,i)}function jV(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new MV(n,i,s,t,yo)}function VV(){oo(new lr(Ak,jV,"PUBLIC").setMultipleInstances(!0)),Si(gw,_w,""),Si(gw,_w,"esm2017")}VV();const FV={apiKey:"AIzaSyCXVdMm5iaiEz0jWzi6xy9gKM6P2P-O1Bo",authDomain:"tracker-a61ae.firebaseapp.com",projectId:"tracker-a61ae",storageBucket:"tracker-a61ae.firebasestorage.app",messagingSenderId:"912276878221",appId:"1:912276878221:web:6503c8ccb340e5278c83c4",measurementId:"G-DDDQCZRGQH"},Yy=CE(FV),Mr=XM(Yy),zV=new Xi,na=Wj(Yy);OV(Yy);const Rk=$.createContext(void 0),Fu=()=>{const e=$.useContext(Rk);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},BV=({children:e})=>{const[t,n]=$.useState(null),[i,s]=$.useState(null),[r,a]=$.useState(!0);$.useEffect(()=>zL(Mr,async S=>{n(S),S?await l(S.uid):s(null),a(!1)}),[]);const l=async E=>{var S,k;try{const P=await dw(ea(na,"users",E));if(P.exists()){const I=P.data();s({...I,createdAt:((S=I.createdAt)==null?void 0:S.toDate())||new Date,lastLogin:((k=I.lastLogin)==null?void 0:k.toDate())||new Date})}}catch(P){console.error("Error loading user profile:",P)}},u=async(E,S={})=>{const k={uid:E.uid,email:E.email||"",displayName:E.displayName||S.displayName||"",photoURL:E.photoURL||"",plan:"free",storageUsed:0,storageLimit:104857600,createdAt:new Date,lastLogin:new Date,...S};try{await Gh(ea(na,"users",E.uid),{...k,createdAt:new Date,lastLogin:new Date}),s(k)}catch(P){throw console.error("Error creating user profile:",P),P}},h=async(E,S,k)=>{try{const{user:P}=await ML(Mr,E,S);await jL(P,{displayName:k}),await u(P,{displayName:k})}catch(P){throw console.error("Error signing up:",P),P}},p=async(E,S)=>{try{await OL(Mr,E,S),Mr.currentUser&&await Gh(ea(na,"users",Mr.currentUser.uid),{lastLogin:new Date},{merge:!0})}catch(k){throw console.error("Error signing in:",k),k}},_=async()=>{try{const{user:E}=await aM(Mr,zV);(await dw(ea(na,"users",E.uid))).exists()?await Gh(ea(na,"users",E.uid),{lastLogin:new Date},{merge:!0}):await u(E)}catch(E){throw console.error("Error signing in with Google:",E),E}},y=async()=>{try{await BL(Mr),s(null)}catch(E){throw console.error("Error signing out:",E),E}},w=async E=>{if(t)try{await Gh(ea(na,"users",t.uid),E,{merge:!0}),s(S=>S?{...S,...E}:null)}catch(S){throw console.error("Error updating user profile:",S),S}};return m.jsx(Rk.Provider,{value:{user:t,userProfile:i,loading:r,signUp:h,signIn:p,signInWithGoogle:_,logout:y,updateUserProfile:w},children:e})},UV="https://api.tracker.rivieraapps.com";class HV{constructor(t=UV){this.authToken=null,this.baseUrl=t,this.authToken=localStorage.getItem("authToken")}async getUserRoutes(){const t=await this.request("/routes/user");if(!t.success||!t.data)throw new Error(t.error||"Failed");return t.data.routes}async deleteRoute(t,n){const i=await this.getRouteById(t);if(!i.success||!i.data)throw new Error("Route not found");const s=i.data;if(s.userId!==n)throw new Error("Unauthorized");const r=await this.rmRoute(t,n);if(!r.success)throw new Error(r.error||"Failed to delete route");await this.updateUserStorageUsage(n,-s.fileSize)}async getRouteById(t){const n=await this.request(`/routes/${t}`);if(!n.success||!n.data)throw new Error(n.error||"Failed");return n.data.data}async uploadRoute(t){const n=await this.request("/routes/upload",{method:"POST",body:t});if(!n.success||!n.data)throw new Error(n.error||"Failed");return n.data.data}async getPublicRoutes(t=20,n=1){const i=await this.request(`/routes/public?limit=${t}&page=${n}`);if(!i.success||!i.data)throw new Error(i.error||"Failed");return i.data.routes}async toggleRouteVisibility(t,n){const i=await this.request(`/routes/${t}`,{method:"PUT",body:JSON.stringify({isPublic:n}),headers:{"Content-Type":"application/json"}});if(!i.success)throw new Error(i.error||"Failed")}async request(t,n={}){`${this.baseUrl}${t}`,{...n.headers},this.authToken&&`${this.authToken}`;try{return await new Promise(s=>setTimeout(s,500+Math.random()*1e3)),await this.simulateApiResponse(t,n)}catch(i){return{success:!1,error:i instanceof Error?i.message:"Network error",timestamp:new Date().toISOString()}}}async simulateApiResponse(t,n){const i=n.method||"GET";if(!(Math.random()>.1))throw new Error("Simulated network error");const r=new Date().toISOString();switch(!0){case t==="/auth/login":return{success:!0,data:{token:"fake-jwt-token-"+Date.now(),user:{id:"1",email:"user@example.com"}},timestamp:r};case(t==="/routes"&&i==="GET"):return{success:!0,data:[],timestamp:r};case(t==="/routes"&&i==="POST"):return{success:!0,data:{id:"route_"+Date.now(),synced:!0},timestamp:r};case(t==="/trackers"&&i==="GET"):return{success:!0,data:[],timestamp:r};case(t==="/trackers"&&i==="POST"):return{success:!0,data:{id:"tracker_"+Date.now(),synced:!0},timestamp:r};case(t.startsWith("/trackers/")&&i==="PUT"):return{success:!0,data:{synced:!0},timestamp:r};default:return{success:!0,data:{},timestamp:r}}}async login(t,n){const i=await this.request("/auth/login",{method:"POST",body:JSON.stringify({email:t,password:n})});return i.success&&i.data&&(this.authToken=i.data.token,localStorage.setItem("authToken",this.authToken)),i}async logout(){this.authToken=null,localStorage.removeItem("authToken")}async getRoutes(t){return this.request(`/routes/${t}`)}async rmRoute(t,n){return this.request(`/route/${n}/${t}`,{method:"DELETE"})}async syncRoutes(t){return this.request("/routes/sync",{method:"POST",body:JSON.stringify({routes:t})})}async updateUserStorageUsage(t,n){return this.request(`/users/${t}/storage`,{method:"PATCH",body:JSON.stringify({sizeChange:n})})}async syncTrackers(t){return this.request("/trackers/sync",{method:"POST",body:JSON.stringify({trackers:t})})}async addTracker(t){return this.request("/trackers",{method:"POST",body:JSON.stringify(t)})}async updateTracker(t,n){return this.request(`/trackers/${t}`,{method:"PUT",body:JSON.stringify(n)})}async getTrackers(){return this.request("/trackers")}async getSyncStatus(){const t=localStorage.getItem("lastSyncTime");return{lastSync:t?new Date(t):new Date(0),pending:0,failed:0}}async performFullSync(){try{const t=JSON.parse(localStorage.getItem("gpxRoutes")||"[]");await this.syncRoutes(t);const n=JSON.parse(localStorage.getItem("trackers")||"[]");return await this.syncTrackers(n),localStorage.setItem("lastSyncTime",new Date().toISOString()),!0}catch(t){return console.error("Sync failed:",t),!1}}}const Ac=new HV,Nk=$.createContext(void 0),Xy=()=>{const e=$.useContext(Nk);if(!e)throw new Error("useSync must be used within a SyncProvider");return e},WV=({children:e})=>{const[t,n]=$.useState({lastSync:new Date(0),pending:0,failed:0}),[i,s]=$.useState(navigator.onLine),[r,a]=$.useState(!1),[l,u]=$.useState(null);$.useEffect(()=>{const y=()=>s(!0),w=()=>s(!1);return window.addEventListener("online",y),window.addEventListener("offline",w),()=>{window.removeEventListener("online",y),window.removeEventListener("offline",w)}},[]),$.useEffect(()=>{h()},[]),$.useEffect(()=>{i&&t.pending>0&&p()},[i]);const h=async()=>{try{const y=await Ac.getSyncStatus();n(y)}catch(y){console.error("Failed to load sync status:",y)}},p=async()=>{if(!(!i||r)){a(!0),u(null);try{if(await Ac.performFullSync())n(w=>({...w,lastSync:new Date,pending:0,failed:0}));else throw new Error("Sync failed")}catch(y){const w=y instanceof Error?y.message:"Sync failed";u(w),n(E=>({...E,failed:E.failed+1}))}finally{a(!1)}}},_=(y,w)=>{const E=JSON.parse(localStorage.getItem("pendingSync")||"[]"),S={type:y,id:w,timestamp:Date.now()};E.find(k=>k.type===y&&k.id===w)||(E.push(S),localStorage.setItem("pendingSync",JSON.stringify(E)),n(k=>({...k,pending:k.pending+1}))),i&&setTimeout(p,1e3)};return m.jsx(Nk.Provider,{value:{syncStatus:t,isOnline:i,isSyncing:r,lastSyncError:l,performSync:p,markForSync:_},children:e})},$V=()=>{const{syncStatus:e,isOnline:t,isSyncing:n,lastSyncError:i,performSync:s}=Xy(),r=h=>{const _=new Date().getTime()-h.getTime(),y=Math.floor(_/6e4);if(y<1)return"Just now";if(y<60)return`${y}m ago`;const w=Math.floor(y/60);return w<24?`${w}h ago`:`${Math.floor(w/24)}d ago`},a=()=>t?n?m.jsx(hE,{size:16,className:"text-primary animate-spin"}):i?m.jsx(oE,{size:16,className:"text-red-500"}):e.pending>0?m.jsx(zA,{size:16,className:"text-yellow-500"}):m.jsx(ac,{size:16,className:"text-green-500"}):m.jsx(gE,{size:16,className:"text-red-500"}),l=()=>t?n?"Syncing...":i?"Sync failed":e.pending>0?`${e.pending} pending`:"Synced":"Offline",u=()=>!t||i?"text-red-500":n||e.pending>0?"text-yellow-500":"text-green-500";return m.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[m.jsxs("button",{onClick:s,disabled:!t||n,className:"flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-background transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:i||`Last sync: ${r(e.lastSync)}`,children:[a(),m.jsx("span",{className:u(),children:l()})]}),e.lastSync.getTime()>0&&m.jsx("span",{className:"text-text-light text-xs",children:r(e.lastSync)})]})},qV=({onMenuClick:e})=>{const{theme:t,toggleTheme:n}=ip(),{user:i,userProfile:s,logout:r}=Fu(),a=_o(),l=tl(),u=()=>{switch(!0){case a.pathname==="/dashboard":return"Dashboard";case a.pathname.includes("/routes/"):return"Route Details";case a.pathname==="/upload":return"Upload Route";case a.pathname==="/settings":return"Settings";default:return"TracSync"}},h=async()=>{try{await r(),l("/")}catch(p){console.error("Error logging out:",p)}};return m.jsx("header",{className:"sticky top-0 z-10 bg-card shadow-sm border-b border-border",children:m.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("button",{onClick:e,className:"p-2 rounded-lg text-text-light hover:bg-background transition-colors lg:hidden","aria-label":"Toggle menu",children:m.jsx(tR,{size:24})}),m.jsxs(ve,{to:"/dashboard",className:"flex items-center gap-2",children:[m.jsx("div",{className:"bg-primary text-white p-1.5 rounded-lg",children:m.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("path",{d:"M12 2L15.5 9H8.5L12 2Z",fill:"currentColor"}),m.jsx("path",{d:"M18.5 9L22 16H15L18.5 9Z",fill:"currentColor"}),m.jsx("path",{d:"M5.5 9L9 16H2L5.5 9Z",fill:"currentColor"}),m.jsx("path",{d:"M12 16L15.5 23H8.5L12 16Z",fill:"currentColor"})]})}),m.jsx("h1",{className:"text-xl font-bold tracking-tight hidden sm:block",children:"TracSync"})]})]}),m.jsx("div",{className:"text-lg font-semibold md:hidden",children:u()}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"hidden md:block",children:m.jsx($V,{})}),m.jsxs(ve,{to:"/upload",className:"btn btn-primary hidden sm:flex items-center gap-2",children:[m.jsx(ku,{size:18}),m.jsx("span",{children:"Upload"})]}),m.jsx("button",{onClick:n,className:"p-2 rounded-lg text-text-light hover:bg-background transition-colors","aria-label":t==="dark"?"Switch to light mode":"Switch to dark mode",children:t==="dark"?m.jsx(pE,{size:20}):m.jsx(lE,{size:20})}),i&&m.jsxs("div",{className:"relative group",children:[m.jsxs("button",{className:"flex items-center gap-2 p-2 rounded-lg text-text-light hover:bg-background transition-colors",children:[i.photoURL?m.jsx("img",{src:i.photoURL,alt:i.displayName||"User",className:"w-6 h-6 rounded-full",onError:p=>{p.target.onerror=null,p.target.src="/default-avatar.png"}}):m.jsx(ry,{size:20}),m.jsx("span",{className:"hidden sm:block ml-2 text-sm font-medium",children:i.displayName||"User"})]}),m.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-card border border-border rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200",children:[m.jsxs("div",{className:"p-3 border-b border-border",children:[m.jsx("p",{className:"font-medium text-sm",children:i.displayName}),m.jsx("p",{className:"text-xs text-text-light",children:i.email}),s&&m.jsxs("p",{className:"text-xs text-accent capitalize",children:[s.plan," Plan"]})]}),m.jsxs("div",{className:"py-1",children:[m.jsx(ve,{to:"/settings",className:"block px-3 py-2 text-sm hover:bg-background transition-colors",children:"Settings"}),m.jsxs("button",{onClick:h,className:"w-full text-left px-3 py-2 text-sm hover:bg-background transition-colors flex items-center gap-2",children:[m.jsx(XA,{size:16}),"Sign Out"]})]})]})]})]})]})})},GV=({isOpen:e,setIsOpen:t})=>{const n=[{title:"Dashboard",path:"/dashboard",icon:m.jsx(aE,{size:20})},{title:"Upload Route",path:"/upload",icon:m.jsx(ku,{size:20})},{title:"Settings",path:"/settings",icon:m.jsx(dE,{size:20})}];return m.jsxs(m.Fragment,{children:[e&&m.jsx("div",{className:"fixed inset-0 bg-black/50 z-20 lg:hidden",onClick:()=>t(!1)}),m.jsxs("aside",{className:`
          fixed top-0 left-0 z-30 h-full w-64 bg-card border-r border-border transform transition-transform duration-300 ease-in-out 
          ${e?"translate-x-0":"-translate-x-full"} 
          lg:relative lg:translate-x-0
        `,children:[m.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"bg-primary text-white p-1.5 rounded-lg",children:m.jsx(iy,{size:20})}),m.jsx("h2",{className:"text-xl font-bold",children:"TracSync"})]}),m.jsx("button",{className:"p-1.5 rounded-lg hover:bg-background lg:hidden",onClick:()=>t(!1),children:m.jsx(Os,{size:20})})]}),m.jsx("nav",{className:"p-4",children:m.jsx("ul",{className:"space-y-2",children:n.map(i=>m.jsx("li",{children:m.jsxs(rE,{to:i.path,className:({isActive:s})=>`
                    flex items-center gap-3 px-4 py-3 rounded-lg transition-all
                    ${s?"bg-primary text-white":"text-text-light hover:bg-background hover:text-text"}
                  `,end:i.path==="/",children:[i.icon,m.jsx("span",{className:"font-medium",children:i.title})]})},i.path))})}),m.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-border",children:m.jsxs("div",{className:"text-sm text-text-light",children:[m.jsx("p",{children:"TracSync v0.1.0"}),m.jsxs("p",{className:"mt-1",children:["Local storage: ",KV()]})]})})]})]})},KV=()=>{try{const e=localStorage.getItem("gpxRoutes");if(!e)return"0 KB";const t=new Blob([e]).size;return t<1024?`${t} B`:t<1048576?`${(t/1024).toFixed(1)} KB`:`${(t/1048576).toFixed(1)} MB`}catch{return"Unknown"}},ZV=({isOpen:e,onClose:t,initialMode:n="signin"})=>{const[i,s]=$.useState(n),[r,a]=$.useState(""),[l,u]=$.useState(""),[h,p]=$.useState(""),[_,y]=$.useState(!1),[w,E]=$.useState(!1),[S,k]=$.useState(""),{signIn:P,signUp:I,signInWithGoogle:R}=Fu(),V=async b=>{b.preventDefault(),E(!0),k("");try{i==="signup"?await I(r,l,h):await P(r,l),t()}catch(A){k(A.message||"An error occurred")}finally{E(!1)}},B=async()=>{E(!0),k("");try{await R(),t()}catch(b){k(b.message||"An error occurred")}finally{E(!1)}},H=()=>{a(""),u(""),p(""),k(""),y(!1)},N=()=>{s(i==="signin"?"signup":"signin"),H()};return e?m.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:m.jsxs("div",{className:"card max-w-md w-full p-6 fade-in slide-up",children:[m.jsxs("div",{className:"flex items-center justify-between mb-6",children:[m.jsx("h2",{className:"text-2xl font-bold",children:i==="signin"?"Sign In":"Create Account"}),m.jsx("button",{onClick:t,className:"p-2 rounded-lg hover:bg-background transition-colors",children:m.jsx(Os,{size:20})})]}),S&&m.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3 mb-4",children:m.jsx("p",{className:"text-sm text-red-800 dark:text-red-200",children:S})}),m.jsxs("form",{onSubmit:V,className:"space-y-4",children:[i==="signup"&&m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"Full Name"}),m.jsxs("div",{className:"relative",children:[m.jsx(ry,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-text-light",size:18}),m.jsx("input",{type:"text",value:h,onChange:b=>p(b.target.value),className:"input-field pl-10",placeholder:"Enter your full name",required:!0})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email"}),m.jsxs("div",{className:"relative",children:[m.jsx(JA,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-text-light",size:18}),m.jsx("input",{type:"email",value:r,onChange:b=>a(b.target.value),className:"input-field pl-10",placeholder:"Enter your email",required:!0})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"Password"}),m.jsxs("div",{className:"relative",children:[m.jsx(YA,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-text-light",size:18}),m.jsx("input",{type:_?"text":"password",value:l,onChange:b=>u(b.target.value),className:"input-field pl-10 pr-10",placeholder:"Enter your password",required:!0,minLength:6}),m.jsx("button",{type:"button",onClick:()=>y(!_),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-text-light hover:text-text",children:_?m.jsx(UA,{size:18}):m.jsx(HA,{size:18})})]})]}),m.jsx("button",{type:"submit",disabled:w,className:"btn btn-primary w-full",children:w?"Please wait...":i==="signin"?"Sign In":"Create Account"})]}),m.jsxs("div",{className:"my-6 flex items-center",children:[m.jsx("div",{className:"flex-1 border-t border-border"}),m.jsx("span",{className:"px-4 text-text-light text-sm",children:"or"}),m.jsx("div",{className:"flex-1 border-t border-border"})]}),m.jsxs("button",{onClick:B,disabled:w,className:"btn btn-outline w-full flex items-center justify-center gap-3",children:[m.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",children:[m.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),m.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),m.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),m.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),m.jsx("div",{className:"mt-6 text-center",children:m.jsxs("p",{className:"text-text-light text-sm",children:[i==="signin"?"Don't have an account?":"Already have an account?",m.jsx("button",{onClick:N,className:"ml-1 text-primary hover:underline font-medium",children:i==="signin"?"Sign up":"Sign in"})]})})]})}):null},QV=()=>{const e=tl(),{user:t}=Fu(),[n,i]=$.useState(!1),[s,r]=$.useState("signin"),[a,l]=$.useState(!1),u=()=>{t?e("/dashboard"):(r("signup"),i(!0))},h=()=>{t?e("/dashboard"):(r("signin"),i(!0))},p=[{icon:m.jsx(tx,{className:"text-accent",size:20}),title:"Power",description:"With a compact battery under 2000mAh, it easily achieves over 2 days of continuous tracking in normal mode."},{icon:m.jsx(tx,{className:"text-accent",size:20}),title:"Customizable & Developer-Focused",description:"Enables you to build and modify tracking features to fit your projects unique needs."},{icon:m.jsx(_E,{className:"text-accent",size:20}),title:"ESP32-S3",description:"ESP32-S3, a powerful microcontroller with built-in Wi-Fi and Bluetooth."},{icon:m.jsx(nR,{className:"text-accent",size:20}),title:"uBlox MAX-M10S",description:"High-performance multi-GNSS receiver. Supports GPS, Galileo, GLONASS, and BeiDou."},{icon:m.jsx(iy,{className:"text-accent",size:20}),title:"Sensors",description:"Sub-meter accuracy with multi-constellation support"}];return m.jsxs("div",{className:"min-h-screen bg-background",children:[m.jsx("nav",{className:"sticky top-0 z-50 bg-card/80 backdrop-blur-md border-b border-border",children:m.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8",children:m.jsxs("div",{className:"flex justify-between items-center h-14 sm:h-16",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"bg-primary text-white p-1.5 sm:p-2 rounded-lg",children:m.jsx(Vs,{size:18,className:"sm:size-20"})}),m.jsx("span",{className:"text-lg sm:text-xl font-bold",children:"TracSync"})]}),m.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[m.jsxs("button",{onClick:()=>l(!0),className:"text-text-light hover:text-text transition-colors flex items-center gap-1 sm:gap-2 px-2 py-1 sm:px-3 sm:py-2",children:[m.jsx(rm,{size:18}),m.jsx("span",{className:" sm:inline",children:"Install"})]}),t?m.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[m.jsx(ve,{to:"/dashboard",className:"hidden sm:inline text-text-light hover:text-text transition-colors",children:"Dashboard"}),m.jsxs(ve,{to:"/dashboard",className:"btn btn-primary flex items-center gap-1 sm:gap-2 px-2 py-1 sm:px-4 sm:py-2",children:[m.jsx(Vs,{size:18}),m.jsx("span",{className:"hidden sm:inline",children:"Go to App"})]})]}):m.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[m.jsx("button",{onClick:h,className:"text-text-light hover:text-text transition-colors flex items-center gap-1 sm:gap-2 px-2 py-1 sm:px-3 sm:py-2"}),m.jsxs("button",{onClick:u,className:"btn btn-primary flex items-center gap-1 sm:gap-2 px-2 py-1 sm:px-4 sm:py-2",children:[m.jsx(ry,{size:18}),m.jsx("span",{className:"hidden sm:inline",children:"Get Started"})]})]})]})]})})}),m.jsx("section",{className:"relative overflow-hidden",children:m.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20",children:m.jsxs("div",{className:"text-center",children:[m.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-6 bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"Professional GPS Tracking"}),m.jsx("p",{className:"text-xl text-text-light mb-8 max-w-3xl mx-auto",children:"TracSync is the ultimate platform for visualizing, analyzing, and sharing your GPS routes. Upload GPX files, connect hardware trackers, and gain insights into your adventures."}),m.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center mb-12",children:[m.jsxs("button",{onClick:u,className:"btn btn-primary text-lg px-8 py-3 flex items-center gap-2",children:["Start Tracking",m.jsx(Eg,{size:20})]}),m.jsxs("button",{onClick:()=>l(!0),className:"btn btn-outline text-lg px-8 py-3 flex items-center gap-2",children:[m.jsx(rm,{size:20}),"Install App"]})]}),m.jsx("div",{className:"relative max-w-4xl mx-auto",children:m.jsx("div",{className:"bg-gradient-to-br from-primary/20 to-accent/20 rounded-2xl p-8 backdrop-blur-sm border border-border",children:m.jsx("div",{className:"bg-card rounded-xl p-6 shadow-lg",style:{backgroundImage:'url("/demo-route.png")'},children:m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[m.jsxs("div",{className:"space-y-3",children:[m.jsx("div",{className:"h-4 bg-primary/20 rounded"}),m.jsx("div",{className:"h-4 bg-primary/10 rounded w-3/4"}),m.jsx("div",{className:"h-4 bg-primary/10 rounded w-1/2"})]}),m.jsx("div",{className:"bg-primary/10 rounded-lg h-32 flex items-center justify-center",children:m.jsx(Vs,{size:32,className:"text-primary"})}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("div",{className:"h-4 bg-accent/20 rounded"}),m.jsx("div",{className:"h-4 bg-accent/10 rounded w-2/3"}),m.jsx("div",{className:"h-4 bg-accent/10 rounded w-3/4"})]})]})})})})]})})}),m.jsx("section",{className:"py-20 bg-gradient-to-br from-accent/5 to-primary/5",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[m.jsxs("div",{className:"text-center mb-16",children:[m.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Supported Hardware"}),m.jsx("p",{className:"text-xl text-text-light max-w-2xl mx-auto",children:"Connect your GPS tracking devices for seamless data collection and real-time monitoring."})]}),m.jsx("div",{className:"max-w-4xl mx-auto",children:m.jsx("div",{className:"card p-8 mb-8",children:m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-center",children:[m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[m.jsx("div",{className:"bg-accent text-white p-3 rounded-xl",children:m.jsx(Vs,{size:24})}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-2xl font-bold",children:"Pocket Tracker"}),m.jsx("p",{className:"text-text-light",children:"DIY GPS Tracking Device"})]})]}),m.jsx("p",{className:"text-text-light mb-6",children:"PocketTracker is a compact, developer-friendly tracking device designed for custom applications, prototyping, and specialized projects but it is also for entusiast who want to build his own tracking device. PocketTracker is built for flexibility and customization, allowing developers to integrate their own firmware, sensors, and tracking solutions."}),m.jsx("div",{className:"grid grid-cols-2 gap-4 mb-6",children:p.map((_,y)=>m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("div",{className:"p-2 bg-accent/10 rounded-lg mt-1",children:_.icon}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-semibold text-sm",children:_.title}),m.jsx("p",{className:"text-xs text-text-light",children:_.description})]})]},y))}),m.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[m.jsxs("a",{href:"https://www.elecrow.com/pocket-tracker.html",target:"_blank",rel:"noopener noreferrer",className:"btn btn-primary flex items-center gap-2",children:[m.jsx(iR,{size:18}),"Buy PocketTracker",m.jsx(X0,{size:16})]}),m.jsx("button",{onClick:u,className:"btn btn-outline",children:"Connect to TracSync"}),m.jsxs("a",{href:"https://www.gabrielecalabrese.com/pockettracker/",target:"_blank",rel:"noopener noreferrer",className:"btn btn-outline  flex items-center",children:["Official site",m.jsx(X0,{size:16})]})]})]}),m.jsxs("div",{className:"relative",children:[m.jsxs("div",{className:"relative bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900 rounded-2xl p-8 shadow-2xl",children:[m.jsx("img",{src:"/pocketTracker.png",alt:"Pocket Tracker GPS Device",className:"w-full h-64 object-cover rounded-xl mb-4"}),m.jsx("div",{className:"text-center",children:m.jsx("div",{className:"text-text font-bold text-lg",children:m.jsx("a",{href:"https://www.gabrielecalabrese.com/pockettracker/",children:"PocketTracker"})})})]}),m.jsxs("div",{className:"absolute -top-4 -right-4 bg-card rounded-lg p-3 shadow-lg border border-border",children:[m.jsx("div",{className:"text-xs text-text-light",children:"Accuracy"}),m.jsx("div",{className:"text-lg font-bold text-accent",children:"1.5m"})]}),m.jsxs("div",{className:"absolute -bottom-4 -left-4 bg-card rounded-lg p-3 shadow-lg border border-border",children:[m.jsx("div",{className:"text-xs text-text-light",children:"Battery Life"}),m.jsx("div",{className:"text-lg font-bold text-primary",children:"2 days"})]})]})]})})})]})}),m.jsx("footer",{className:"bg-card border-t border-border py-12",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[m.jsx("div",{className:"bg-primary text-white p-2 rounded-lg",children:m.jsx(Vs,{size:20})}),m.jsx("span",{className:"text-lg font-bold",children:"TracSync"})]}),m.jsx("p",{className:"text-text-light",children:"The ultimate platform for tracking and analyzing your GPS routes and adventures."})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold mb-4",children:"Product"}),m.jsxs("ul",{className:"space-y-2 text-text-light",children:[m.jsx("li",{children:m.jsx(ve,{to:"/dashboard",className:"hover:text-text transition-colors",children:"Dashboard"})}),m.jsx("li",{children:m.jsx(ve,{to:"/upload",className:"hover:text-text transition-colors",children:"Upload Routes"})}),m.jsx("li",{children:m.jsx(ve,{to:"/settings",className:"hover:text-text transition-colors",children:"Settings"})}),m.jsx("li",{children:m.jsx(ve,{to:"/pricing",className:"hover:text-text transition-colors",children:"Pricing"})})]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold mb-4",children:"Hardware"}),m.jsxs("ul",{className:"space-y-2 text-text-light",children:[m.jsx("li",{children:m.jsx("a",{href:"https://pockettracker.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-text transition-colors",children:"Pocket Tracker"})}),m.jsx("li",{children:m.jsx("a",{href:"https://pockettracker.com/support",target:"_blank",rel:"noopener noreferrer",className:"hover:text-text transition-colors",children:"Device Support"})}),m.jsx("li",{children:m.jsx("a",{href:"https://pockettracker.com/specs",target:"_blank",rel:"noopener noreferrer",className:"hover:text-text transition-colors",children:"Specifications"})})]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold mb-4",children:"Support"}),m.jsxs("ul",{className:"space-y-2 text-text-light",children:[m.jsx("li",{children:m.jsx("a",{href:"#",className:"hover:text-text transition-colors",children:"Help Center"})}),m.jsx("li",{children:m.jsx("a",{href:"#",className:"hover:text-text transition-colors",children:"Contact Us"})}),m.jsx("li",{children:m.jsx("a",{href:"#",className:"hover:text-text transition-colors",children:"API Docs"})}),m.jsx("li",{children:m.jsx("button",{onClick:()=>l(!0),className:"hover:text-text transition-colors",children:"Install App"})})]})]})]}),m.jsx("div",{className:"border-t border-border mt-8 pt-8 text-center text-text-light",children:m.jsx("p",{children:" 2024 TracSync. All rights reserved."})})]})}),a&&m.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:m.jsxs("div",{className:"card max-w-2xl w-full p-6 fade-in slide-up max-h-[90vh] overflow-y-auto",children:[m.jsxs("div",{className:"flex items-center justify-between mb-6",children:[m.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[m.jsx(rm,{size:24,className:"text-primary"}),"Install TracSync App"]}),m.jsx("button",{onClick:()=>l(!1),className:"p-2 rounded-lg hover:bg-background transition-colors",children:m.jsx(XV,{size:20})})]}),m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"border border-border rounded-lg p-4",children:[m.jsxs("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[m.jsx(J0,{size:20}),"iOS (iPhone/iPad)"]}),m.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-sm text-text-light",children:[m.jsx("li",{children:"Open TracSync in Safari browser"}),m.jsxs("li",{children:["Tap the Share button ",m.jsx(fE,{size:14,className:"inline"})," at the bottom"]}),m.jsx("li",{children:'Scroll down and tap "Add to Home Screen"'}),m.jsx("li",{children:'Tap "Add" to confirm installation'}),m.jsx("li",{children:"TracSync will appear on your home screen like a native app"})]})]}),m.jsxs("div",{className:"border border-border rounded-lg p-4",children:[m.jsxs("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[m.jsx(J0,{size:20}),"Android"]}),m.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-sm text-text-light",children:[m.jsx("li",{children:"Open TracSync in Chrome browser"}),m.jsx("li",{children:"Tap the menu () in the top right corner"}),m.jsx("li",{children:'Select "Add to Home screen" or "Install app"'}),m.jsx("li",{children:'Tap "Add" or "Install" to confirm'}),m.jsx("li",{children:"TracSync will be installed as a native app"})]})]}),m.jsxs("div",{className:"border border-border rounded-lg p-4",children:[m.jsxs("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[m.jsx(YV,{size:20}),"Desktop (Chrome/Edge)"]}),m.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-sm text-text-light",children:[m.jsxs("li",{children:["Look for the install icon ",m.jsx(uE,{size:14,className:"inline"})," in the address bar"]}),m.jsx("li",{children:'Click the install icon or "Install TracSync" button'}),m.jsx("li",{children:'Click "Install" in the confirmation dialog'}),m.jsx("li",{children:"TracSync will open as a desktop app"})]})]}),m.jsxs("div",{className:"bg-primary/5 rounded-lg p-4",children:[m.jsx("h3",{className:"font-semibold mb-3 text-primary",children:"Benefits of Installing"}),m.jsxs("ul",{className:"space-y-2 text-sm text-text-light",children:[m.jsxs("li",{className:"flex items-center gap-2",children:[m.jsx(ac,{size:16,className:"text-green-500"}),"Works offline for viewing saved routes"]}),m.jsxs("li",{className:"flex items-center gap-2",children:[m.jsx(ac,{size:16,className:"text-green-500"}),"Faster loading and native app experience"]}),m.jsxs("li",{className:"flex items-center gap-2",children:[m.jsx(ac,{size:16,className:"text-green-500"}),"Push notifications for tracker updates"]}),m.jsxs("li",{className:"flex items-center gap-2",children:[m.jsx(ac,{size:16,className:"text-green-500"}),"No app store required - installs directly"]})]})]})]}),m.jsx("div",{className:"mt-6 flex justify-end",children:m.jsx("button",{onClick:()=>l(!1),className:"btn btn-primary",children:"Got it!"})})]})}),m.jsx(ZV,{isOpen:n,onClose:()=>i(!1),initialMode:s})]})},YV=({size:e})=>m.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[m.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),m.jsx("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),m.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"21"})]}),XV=({size:e})=>m.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[m.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),m.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]});var Lk={exports:{}},ym,yw;function JV(){if(yw)return ym;yw=1,ym=function(){return e};function e(){}return ym}(function(e){let t=function(){this.xmlSource="",this.metadata={},this.waypoints=[],this.tracks=[],this.routes=[]};t.prototype.parse=function(n){let i=this,s=new window.DOMParser;this.xmlSource=s.parseFromString(n,"text/xml");let r=this.xmlSource.querySelector("metadata");if(r!=null){this.metadata.name=this.getElementValue(r,"name"),this.metadata.desc=this.getElementValue(r,"desc"),this.metadata.time=this.getElementValue(r,"time");let y={},w=r.querySelector("author");if(w!=null){y.name=this.getElementValue(w,"name"),y.email={};let k=w.querySelector("email");k!=null&&(y.email.id=k.getAttribute("id"),y.email.domain=k.getAttribute("domain"));let P={},I=w.querySelector("link");I!=null&&(P.href=I.getAttribute("href"),P.text=this.getElementValue(I,"text"),P.type=this.getElementValue(I,"type")),y.link=P}this.metadata.author=y;let E={},S=this.queryDirectSelector(r,"link");S!=null&&(E.href=S.getAttribute("href"),E.text=this.getElementValue(S,"text"),E.type=this.getElementValue(S,"type"),this.metadata.link=E)}var a=[].slice.call(this.xmlSource.querySelectorAll("wpt"));for(let y in a){var l=a[y];let w={};w.name=i.getElementValue(l,"name"),w.sym=i.getElementValue(l,"sym"),w.lat=parseFloat(l.getAttribute("lat")),w.lon=parseFloat(l.getAttribute("lon"));let E=parseFloat(i.getElementValue(l,"ele"));w.ele=isNaN(E)?null:E,w.cmt=i.getElementValue(l,"cmt"),w.desc=i.getElementValue(l,"desc");let S=i.getElementValue(l,"time");w.time=S==null?null:new Date(S),i.waypoints.push(w)}var u=[].slice.call(this.xmlSource.querySelectorAll("rte"));for(let y in u){let w=u[y],E={};E.name=i.getElementValue(w,"name"),E.cmt=i.getElementValue(w,"cmt"),E.desc=i.getElementValue(w,"desc"),E.src=i.getElementValue(w,"src"),E.number=i.getElementValue(w,"number");let S=i.queryDirectSelector(w,"type");E.type=S!=null?S.innerHTML:null;let k={},P=w.querySelector("link");P!=null&&(k.href=P.getAttribute("href"),k.text=i.getElementValue(P,"text"),k.type=i.getElementValue(P,"type")),E.link=k;let I=[];var h=[].slice.call(w.querySelectorAll("rtept"));for(let R in h){let V=h[R],B={};B.lat=parseFloat(V.getAttribute("lat")),B.lon=parseFloat(V.getAttribute("lon"));let H=parseFloat(i.getElementValue(V,"ele"));B.ele=isNaN(H)?null:H;let N=i.getElementValue(V,"time");B.time=N==null?null:new Date(N),I.push(B)}E.distance=i.calculDistance(I),E.elevation=i.calcElevation(I),E.slopes=i.calculSlope(I,E.distance.cumul),E.points=I,i.routes.push(E)}var p=[].slice.call(this.xmlSource.querySelectorAll("trk"));for(let y in p){let w=p[y],E={};E.name=i.getElementValue(w,"name"),E.cmt=i.getElementValue(w,"cmt"),E.desc=i.getElementValue(w,"desc"),E.src=i.getElementValue(w,"src"),E.number=i.getElementValue(w,"number");let S=i.queryDirectSelector(w,"type");E.type=S!=null?S.innerHTML:null;let k={},P=w.querySelector("link");P!=null&&(k.href=P.getAttribute("href"),k.text=i.getElementValue(P,"text"),k.type=i.getElementValue(P,"type")),E.link=k;let I=[],R=[].slice.call(w.querySelectorAll("trkpt"));for(let V in R){var _=R[V];let B={};B.lat=parseFloat(_.getAttribute("lat")),B.lon=parseFloat(_.getAttribute("lon"));let H=parseFloat(i.getElementValue(_,"ele"));B.ele=isNaN(H)?null:H;let N=i.getElementValue(_,"time");B.time=N==null?null:new Date(N),I.push(B)}E.distance=i.calculDistance(I),E.elevation=i.calcElevation(I),E.slopes=i.calculSlope(I,E.distance.cumul),E.points=I,i.tracks.push(E)}},t.prototype.getElementValue=function(n,i){let s=n.querySelector(i);return s!=null?s.innerHTML!=null?s.innerHTML:s.childNodes[0].data:s},t.prototype.queryDirectSelector=function(n,i){let s=n.querySelectorAll(i),r=s[0];if(s.length>1){let a=n.childNodes;for(idx in a)elem=a[idx],elem.tagName===i&&(r=elem)}return r},t.prototype.calculDistance=function(n){let i={},s=0,r=[];for(var a=0;a<n.length-1;a++)s+=this.calcDistanceBetween(n[a],n[a+1]),r[a]=s;return r[n.length-1]=s,i.total=s,i.cumul=r,i},t.prototype.calcDistanceBetween=function(n,i){let s={};s.lat=n.lat,s.lon=n.lon;let r={};r.lat=i.lat,r.lon=i.lon;var a=Math.PI/180,l=s.lat*a,u=r.lat*a,h=Math.sin((r.lat-s.lat)*a/2),p=Math.sin((r.lon-s.lon)*a/2),_=h*h+Math.cos(l)*Math.cos(u)*p*p;return 6371e3*(2*Math.atan2(Math.sqrt(_),Math.sqrt(1-_)))},t.prototype.calcElevation=function(n){for(var i=0,s=0,r={},a=0;a<n.length-1;a++){let _=n[a+1].ele,y=n[a].ele;if(_!==null&&y!==null){let w=parseFloat(_)-parseFloat(y);w<0?s+=w:w>0&&(i+=w)}}for(var l=[],u=0,h=(a=0,n.length);a<h;a++)if(n[a].ele!==null){var p=parseFloat(n[a].ele);l.push(p),u+=p}return r.max=Math.max.apply(null,l)||null,r.min=Math.min.apply(null,l)||null,r.pos=Math.abs(i)||null,r.neg=Math.abs(s)||null,r.avg=u/l.length||null,r},t.prototype.calculSlope=function(n,i){let s=[];for(var r=0;r<n.length-1;r++){let a=n[r],l=100*(n[r+1].ele-a.ele)/(i[r+1]-i[r]);s.push(l)}return s},t.prototype.toGeoJSON=function(){var n={type:"FeatureCollection",features:[],properties:{name:this.metadata.name,desc:this.metadata.desc,time:this.metadata.time,author:this.metadata.author,link:this.metadata.link}};for(idx in this.tracks){let r=this.tracks[idx];var i={type:"Feature",geometry:{type:"LineString",coordinates:[]},properties:{}};for(idx in i.properties.name=r.name,i.properties.cmt=r.cmt,i.properties.desc=r.desc,i.properties.src=r.src,i.properties.number=r.number,i.properties.link=r.link,i.properties.type=r.type,r.points){let a=r.points[idx];(s=[]).push(a.lon),s.push(a.lat),s.push(a.ele),i.geometry.coordinates.push(s)}n.features.push(i)}for(idx in this.routes){let r=this.routes[idx];i={type:"Feature",geometry:{type:"LineString",coordinates:[]},properties:{}};for(idx in i.properties.name=r.name,i.properties.cmt=r.cmt,i.properties.desc=r.desc,i.properties.src=r.src,i.properties.number=r.number,i.properties.link=r.link,i.properties.type=r.type,r.points){let a=r.points[idx];var s;(s=[]).push(a.lon),s.push(a.lat),s.push(a.ele),i.geometry.coordinates.push(s)}n.features.push(i)}for(idx in this.waypoints){let r=this.waypoints[idx];(i={type:"Feature",geometry:{type:"Point",coordinates:[]},properties:{}}).properties.name=r.name,i.properties.sym=r.sym,i.properties.cmt=r.cmt,i.properties.desc=r.desc,i.geometry.coordinates=[r.lon,r.lat,r.ele],n.features.push(i)}return n},JV()(),e.exports=t})(Lk);var tF=Lk.exports;const eF=o_(tF);function nF(e){if(!e)return{};const t={};return e.replace(/\n/g,",").split(",").forEach(i=>{const s=i.match(/([\w\s]+)\(([^)]+)\):\s*([-\d.]+)/);if(s){const a=s[1].trim().replace(/\s+/g,"_").toLowerCase(),l=s[2].trim(),u=parseFloat(s[3]);t[a]=u,t[`${a}_unit`]=l;return}const r=i.match(/([\w\s]+):\s*([-\d.]+)/);if(r){const a=r[1].trim().replace(/\s+/g,"_").toLowerCase(),l=parseFloat(r[2]);t[a]=l;return}}),t}const iF=e=>new Promise((t,n)=>{const i=new FileReader;i.onload=s=>{var r,a,l;try{const u=new eF;if(u.parse((r=s.target)==null?void 0:r.result),u.tracks.length===0)throw new Error("No tracks found in GPX file");const h=u.tracks.map(b=>{const A=b.points.map(bt=>{var K,st;return{position:{lat:bt.lat,lon:bt.lon,ele:bt.ele||0,time:new Date(bt.time)},speed:bt.speed,heartRate:(K=bt.extensions)==null?void 0:K.hr,cadence:(st=bt.extensions)==null?void 0:st.cad}});let O=0,D=0,z=0,j=0;for(let bt=1;bt<A.length;bt++){const K=A[bt-1],st=A[bt];st.speed&&(j+=st.speed,z=Math.max(z,st.speed));const Y=st.position.ele-K.position.ele;Y>0?O+=Y:D+=Math.abs(Y)}const Rt=A[0].position.time,Et=A[A.length-1].position.time.getTime()-Rt.getTime();return{points:A,distance:b.distance.total,duration:Et/1e3,elevationGain:O,elevationLoss:D,maxSpeed:z,avgSpeed:j/A.length}}),p=h.reduce((b,A)=>b+A.distance,0),_=h.reduce((b,A)=>b+A.duration,0),y=h.reduce((b,A)=>b+A.elevationGain,0),w=h.reduce((b,A)=>b+A.elevationLoss,0),E=h[0],S=h[h.length-1],k=E.points[0].position,P=S.points[S.points.length-1].position;let I=Number.MAX_VALUE,R=Number.MIN_VALUE,V=Number.MAX_VALUE,B=Number.MIN_VALUE;h.forEach(b=>{b.points.forEach(A=>{const{lat:O,lon:D}=A.position;I=Math.min(I,O),R=Math.max(R,O),V=Math.min(V,D),B=Math.max(B,D)})});const H=Array.isArray(u.waypoints)?u.waypoints.map(b=>{const A=nF(b.cmt),O={...b.extensions||{},...A};return{lat:b.lat,lon:b.lon,ele:b.ele,time:b.time?new Date(b.time):void 0,name:b.name,description:b.desc,comment:b.cmt,extensions:O}}):[],N={id:`route_${Date.now()}`,name:e.name.replace(".gpx","")||"Unnamed Route",description:((a=u.metadata)==null?void 0:a.desc)||"",date:new Date(((l=u.metadata)==null?void 0:l.time)||Date.now()),segments:h,totalDistance:p,totalDuration:_,totalElevationGain:y,totalElevationLoss:w,startPoint:k,endPoint:P,bounds:{minLat:I,maxLat:R,minLon:V,maxLon:B},waypoints:H};t(N)}catch(u){n(u)}},i.onerror=()=>{n(new Error("Error reading GPX file"))},i.readAsText(e)}),Ga=e=>e<1e3?`${e.toFixed(0)}m`:`${(e/1e3).toFixed(2)}km`,Pf=e=>{const t=Math.floor(e/3600),n=Math.floor(e%3600/60),i=Math.floor(e%60);return t>0?`${t}h ${n}m ${i}s`:n>0?`${n}m ${i}s`:`${i}s`},sF=e=>`${e.toFixed(0)}m`,Jy=e=>e.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),Mk=$.createContext(void 0),vp=()=>{const e=$.useContext(Mk);if(!e)throw new Error("useRoutes must be used within a RouteProvider");return e},rF=({children:e})=>{const[t,n]=$.useState([]),[i,s]=$.useState(!1),{markForSync:r}=Xy(),{user:a,userProfile:l}=Fu();$.useEffect(()=>{const w=localStorage.getItem("gpxRoutes");if(w)try{n(JSON.parse(w))}catch(E){console.error("Error parsing saved routes:",E)}},[]),$.useEffect(()=>{a&&u()},[a]),$.useEffect(()=>{t.length>0&&localStorage.setItem("gpxRoutes",JSON.stringify(t))},[t]);const u=async()=>{if(a)try{s(!0);const E=(await Ac.getUserRoutes(a.uid)).map(S=>({...S,date:S.uploadedAt.toDate()}));n(E)}catch(w){console.error("Error loading Firebase routes:",w)}finally{s(!1)}},h=async w=>{try{if(s(!0),a&&l){const S=l.storageUsed,k=w.size;if(S+k>l.storageLimit)return alert("Storage limit exceeded. Please upgrade your plan or delete some routes."),!1}const E=await iF(w);if(console.log("parsed route: "),console.log(E),n(S=>[...S,E]),a)try{await Ac.uploadRoute(a.uid,E,w)}catch(S){console.error("Error uploading to Firebase:",S),r("route",E.id)}else r("route",E.id);return!0}catch(E){return console.error("Error parsing GPX file:",E),!1}finally{s(!1)}},p=w=>t.find(E=>E.id===w),_=async w=>{if(n(E=>E.filter(S=>S.id!==w)),a)try{await Ac.deleteRoute(w,a.uid)}catch(E){console.error("Error deleting from Firebase:",E)}},y=async()=>{if(a)try{s(!0),await u()}catch(w){console.error("Error syncing with Firebase:",w)}finally{s(!1)}};return m.jsx(Mk.Provider,{value:{routes:t,addRoute:h,getRoute:p,deleteRoute:_,loading:i,syncWithFirebase:y},children:e})};var Kg={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(n,i){i(t)})(aI,function(n){var i="1.9.4";function s(o){var c,f,g,x;for(f=1,g=arguments.length;f<g;f++){x=arguments[f];for(c in x)o[c]=x[c]}return o}var r=Object.create||function(){function o(){}return function(c){return o.prototype=c,new o}}();function a(o,c){var f=Array.prototype.slice;if(o.bind)return o.bind.apply(o,f.call(arguments,1));var g=f.call(arguments,2);return function(){return o.apply(c,g.length?g.concat(f.call(arguments)):arguments)}}var l=0;function u(o){return"_leaflet_id"in o||(o._leaflet_id=++l),o._leaflet_id}function h(o,c,f){var g,x,C,F;return F=function(){g=!1,x&&(C.apply(f,x),x=!1)},C=function(){g?x=arguments:(o.apply(f,arguments),setTimeout(F,c),g=!0)},C}function p(o,c,f){var g=c[1],x=c[0],C=g-x;return o===g&&f?o:((o-x)%C+C)%C+x}function _(){return!1}function y(o,c){if(c===!1)return o;var f=Math.pow(10,c===void 0?6:c);return Math.round(o*f)/f}function w(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}function E(o){return w(o).split(/\s+/)}function S(o,c){Object.prototype.hasOwnProperty.call(o,"options")||(o.options=o.options?r(o.options):{});for(var f in c)o.options[f]=c[f];return o.options}function k(o,c,f){var g=[];for(var x in o)g.push(encodeURIComponent(f?x.toUpperCase():x)+"="+encodeURIComponent(o[x]));return(!c||c.indexOf("?")===-1?"?":"&")+g.join("&")}var P=/\{ *([\w_ -]+) *\}/g;function I(o,c){return o.replace(P,function(f,g){var x=c[g];if(x===void 0)throw new Error("No value provided for variable "+f);return typeof x=="function"&&(x=x(c)),x})}var R=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"};function V(o,c){for(var f=0;f<o.length;f++)if(o[f]===c)return f;return-1}var B="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function H(o){return window["webkit"+o]||window["moz"+o]||window["ms"+o]}var N=0;function b(o){var c=+new Date,f=Math.max(0,16-(c-N));return N=c+f,window.setTimeout(o,f)}var A=window.requestAnimationFrame||H("RequestAnimationFrame")||b,O=window.cancelAnimationFrame||H("CancelAnimationFrame")||H("CancelRequestAnimationFrame")||function(o){window.clearTimeout(o)};function D(o,c,f){if(f&&A===b)o.call(c);else return A.call(window,a(o,c))}function z(o){o&&O.call(window,o)}var j={__proto__:null,extend:s,create:r,bind:a,get lastId(){return l},stamp:u,throttle:h,wrapNum:p,falseFn:_,formatNum:y,trim:w,splitWords:E,setOptions:S,getParamString:k,template:I,isArray:R,indexOf:V,emptyImageUrl:B,requestFn:A,cancelFn:O,requestAnimFrame:D,cancelAnimFrame:z};function Rt(){}Rt.extend=function(o){var c=function(){S(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},f=c.__super__=this.prototype,g=r(f);g.constructor=c,c.prototype=g;for(var x in this)Object.prototype.hasOwnProperty.call(this,x)&&x!=="prototype"&&x!=="__super__"&&(c[x]=this[x]);return o.statics&&s(c,o.statics),o.includes&&(Vt(o.includes),s.apply(null,[g].concat(o.includes))),s(g,o),delete g.statics,delete g.includes,g.options&&(g.options=f.options?r(f.options):{},s(g.options,o.options)),g._initHooks=[],g.callInitHooks=function(){if(!this._initHooksCalled){f.callInitHooks&&f.callInitHooks.call(this),this._initHooksCalled=!0;for(var C=0,F=g._initHooks.length;C<F;C++)g._initHooks[C].call(this)}},c},Rt.include=function(o){var c=this.prototype.options;return s(this.prototype,o),o.options&&(this.prototype.options=c,this.mergeOptions(o.options)),this},Rt.mergeOptions=function(o){return s(this.prototype.options,o),this},Rt.addInitHook=function(o){var c=Array.prototype.slice.call(arguments,1),f=typeof o=="function"?o:function(){this[o].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(f),this};function Vt(o){if(!(typeof L>"u"||!L||!L.Mixin)){o=R(o)?o:[o];for(var c=0;c<o.length;c++)o[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Et={on:function(o,c,f){if(typeof o=="object")for(var g in o)this._on(g,o[g],c);else{o=E(o);for(var x=0,C=o.length;x<C;x++)this._on(o[x],c,f)}return this},off:function(o,c,f){if(!arguments.length)delete this._events;else if(typeof o=="object")for(var g in o)this._off(g,o[g],c);else{o=E(o);for(var x=arguments.length===1,C=0,F=o.length;C<F;C++)x?this._off(o[C]):this._off(o[C],c,f)}return this},_on:function(o,c,f,g){if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}if(this._listens(o,c,f)===!1){f===this&&(f=void 0);var x={fn:c,ctx:f};g&&(x.once=!0),this._events=this._events||{},this._events[o]=this._events[o]||[],this._events[o].push(x)}},_off:function(o,c,f){var g,x,C;if(this._events&&(g=this._events[o],!!g)){if(arguments.length===1){if(this._firingCount)for(x=0,C=g.length;x<C;x++)g[x].fn=_;delete this._events[o];return}if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}var F=this._listens(o,c,f);if(F!==!1){var W=g[F];this._firingCount&&(W.fn=_,this._events[o]=g=g.slice()),g.splice(F,1)}}},fire:function(o,c,f){if(!this.listens(o,f))return this;var g=s({},c,{type:o,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var x=this._events[o];if(x){this._firingCount=this._firingCount+1||1;for(var C=0,F=x.length;C<F;C++){var W=x[C],q=W.fn;W.once&&this.off(o,q,W.ctx),q.call(W.ctx||this,g)}this._firingCount--}}return f&&this._propagateEvent(g),this},listens:function(o,c,f,g){typeof o!="string"&&console.warn('"string" type argument expected');var x=c;typeof c!="function"&&(g=!!c,x=void 0,f=void 0);var C=this._events&&this._events[o];if(C&&C.length&&this._listens(o,x,f)!==!1)return!0;if(g){for(var F in this._eventParents)if(this._eventParents[F].listens(o,c,f,g))return!0}return!1},_listens:function(o,c,f){if(!this._events)return!1;var g=this._events[o]||[];if(!c)return!!g.length;f===this&&(f=void 0);for(var x=0,C=g.length;x<C;x++)if(g[x].fn===c&&g[x].ctx===f)return x;return!1},once:function(o,c,f){if(typeof o=="object")for(var g in o)this._on(g,o[g],c,!0);else{o=E(o);for(var x=0,C=o.length;x<C;x++)this._on(o[x],c,f,!0)}return this},addEventParent:function(o){return this._eventParents=this._eventParents||{},this._eventParents[u(o)]=o,this},removeEventParent:function(o){return this._eventParents&&delete this._eventParents[u(o)],this},_propagateEvent:function(o){for(var c in this._eventParents)this._eventParents[c].fire(o.type,s({layer:o.target,propagatedFrom:o.target},o),!0)}};Et.addEventListener=Et.on,Et.removeEventListener=Et.clearAllEventListeners=Et.off,Et.addOneTimeEventListener=Et.once,Et.fireEvent=Et.fire,Et.hasEventListeners=Et.listens;var bt=Rt.extend(Et);function K(o,c,f){this.x=f?Math.round(o):o,this.y=f?Math.round(c):c}var st=Math.trunc||function(o){return o>0?Math.floor(o):Math.ceil(o)};K.prototype={clone:function(){return new K(this.x,this.y)},add:function(o){return this.clone()._add(Y(o))},_add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.clone()._subtract(Y(o))},_subtract:function(o){return this.x-=o.x,this.y-=o.y,this},divideBy:function(o){return this.clone()._divideBy(o)},_divideBy:function(o){return this.x/=o,this.y/=o,this},multiplyBy:function(o){return this.clone()._multiplyBy(o)},_multiplyBy:function(o){return this.x*=o,this.y*=o,this},scaleBy:function(o){return new K(this.x*o.x,this.y*o.y)},unscaleBy:function(o){return new K(this.x/o.x,this.y/o.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=st(this.x),this.y=st(this.y),this},distanceTo:function(o){o=Y(o);var c=o.x-this.x,f=o.y-this.y;return Math.sqrt(c*c+f*f)},equals:function(o){return o=Y(o),o.x===this.x&&o.y===this.y},contains:function(o){return o=Y(o),Math.abs(o.x)<=Math.abs(this.x)&&Math.abs(o.y)<=Math.abs(this.y)},toString:function(){return"Point("+y(this.x)+", "+y(this.y)+")"}};function Y(o,c,f){return o instanceof K?o:R(o)?new K(o[0],o[1]):o==null?o:typeof o=="object"&&"x"in o&&"y"in o?new K(o.x,o.y):new K(o,c,f)}function ot(o,c){if(o)for(var f=c?[o,c]:o,g=0,x=f.length;g<x;g++)this.extend(f[g])}ot.prototype={extend:function(o){var c,f;if(!o)return this;if(o instanceof K||typeof o[0]=="number"||"x"in o)c=f=Y(o);else if(o=ut(o),c=o.min,f=o.max,!c||!f)return this;return!this.min&&!this.max?(this.min=c.clone(),this.max=f.clone()):(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(f.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(f.y,this.max.y)),this},getCenter:function(o){return Y((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,o)},getBottomLeft:function(){return Y(this.min.x,this.max.y)},getTopRight:function(){return Y(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(o){var c,f;return typeof o[0]=="number"||o instanceof K?o=Y(o):o=ut(o),o instanceof ot?(c=o.min,f=o.max):c=f=o,c.x>=this.min.x&&f.x<=this.max.x&&c.y>=this.min.y&&f.y<=this.max.y},intersects:function(o){o=ut(o);var c=this.min,f=this.max,g=o.min,x=o.max,C=x.x>=c.x&&g.x<=f.x,F=x.y>=c.y&&g.y<=f.y;return C&&F},overlaps:function(o){o=ut(o);var c=this.min,f=this.max,g=o.min,x=o.max,C=x.x>c.x&&g.x<f.x,F=x.y>c.y&&g.y<f.y;return C&&F},isValid:function(){return!!(this.min&&this.max)},pad:function(o){var c=this.min,f=this.max,g=Math.abs(c.x-f.x)*o,x=Math.abs(c.y-f.y)*o;return ut(Y(c.x-g,c.y-x),Y(f.x+g,f.y+x))},equals:function(o){return o?(o=ut(o),this.min.equals(o.getTopLeft())&&this.max.equals(o.getBottomRight())):!1}};function ut(o,c){return!o||o instanceof ot?o:new ot(o,c)}function wt(o,c){if(o)for(var f=c?[o,c]:o,g=0,x=f.length;g<x;g++)this.extend(f[g])}wt.prototype={extend:function(o){var c=this._southWest,f=this._northEast,g,x;if(o instanceof _t)g=o,x=o;else if(o instanceof wt){if(g=o._southWest,x=o._northEast,!g||!x)return this}else return o?this.extend(at(o)||St(o)):this;return!c&&!f?(this._southWest=new _t(g.lat,g.lng),this._northEast=new _t(x.lat,x.lng)):(c.lat=Math.min(g.lat,c.lat),c.lng=Math.min(g.lng,c.lng),f.lat=Math.max(x.lat,f.lat),f.lng=Math.max(x.lng,f.lng)),this},pad:function(o){var c=this._southWest,f=this._northEast,g=Math.abs(c.lat-f.lat)*o,x=Math.abs(c.lng-f.lng)*o;return new wt(new _t(c.lat-g,c.lng-x),new _t(f.lat+g,f.lng+x))},getCenter:function(){return new _t((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new _t(this.getNorth(),this.getWest())},getSouthEast:function(){return new _t(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(o){typeof o[0]=="number"||o instanceof _t||"lat"in o?o=at(o):o=St(o);var c=this._southWest,f=this._northEast,g,x;return o instanceof wt?(g=o.getSouthWest(),x=o.getNorthEast()):g=x=o,g.lat>=c.lat&&x.lat<=f.lat&&g.lng>=c.lng&&x.lng<=f.lng},intersects:function(o){o=St(o);var c=this._southWest,f=this._northEast,g=o.getSouthWest(),x=o.getNorthEast(),C=x.lat>=c.lat&&g.lat<=f.lat,F=x.lng>=c.lng&&g.lng<=f.lng;return C&&F},overlaps:function(o){o=St(o);var c=this._southWest,f=this._northEast,g=o.getSouthWest(),x=o.getNorthEast(),C=x.lat>c.lat&&g.lat<f.lat,F=x.lng>c.lng&&g.lng<f.lng;return C&&F},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(o,c){return o?(o=St(o),this._southWest.equals(o.getSouthWest(),c)&&this._northEast.equals(o.getNorthEast(),c)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function St(o,c){return o instanceof wt?o:new wt(o,c)}function _t(o,c,f){if(isNaN(o)||isNaN(c))throw new Error("Invalid LatLng object: ("+o+", "+c+")");this.lat=+o,this.lng=+c,f!==void 0&&(this.alt=+f)}_t.prototype={equals:function(o,c){if(!o)return!1;o=at(o);var f=Math.max(Math.abs(this.lat-o.lat),Math.abs(this.lng-o.lng));return f<=(c===void 0?1e-9:c)},toString:function(o){return"LatLng("+y(this.lat,o)+", "+y(this.lng,o)+")"},distanceTo:function(o){return hi.distance(this,at(o))},wrap:function(){return hi.wrapLatLng(this)},toBounds:function(o){var c=180*o/40075017,f=c/Math.cos(Math.PI/180*this.lat);return St([this.lat-c,this.lng-f],[this.lat+c,this.lng+f])},clone:function(){return new _t(this.lat,this.lng,this.alt)}};function at(o,c,f){return o instanceof _t?o:R(o)&&typeof o[0]!="object"?o.length===3?new _t(o[0],o[1],o[2]):o.length===2?new _t(o[0],o[1]):null:o==null?o:typeof o=="object"&&"lat"in o?new _t(o.lat,"lng"in o?o.lng:o.lon,o.alt):c===void 0?null:new _t(o,c,f)}var we={latLngToPoint:function(o,c){var f=this.projection.project(o),g=this.scale(c);return this.transformation._transform(f,g)},pointToLatLng:function(o,c){var f=this.scale(c),g=this.transformation.untransform(o,f);return this.projection.unproject(g)},project:function(o){return this.projection.project(o)},unproject:function(o){return this.projection.unproject(o)},scale:function(o){return 256*Math.pow(2,o)},zoom:function(o){return Math.log(o/256)/Math.LN2},getProjectedBounds:function(o){if(this.infinite)return null;var c=this.projection.bounds,f=this.scale(o),g=this.transformation.transform(c.min,f),x=this.transformation.transform(c.max,f);return new ot(g,x)},infinite:!1,wrapLatLng:function(o){var c=this.wrapLng?p(o.lng,this.wrapLng,!0):o.lng,f=this.wrapLat?p(o.lat,this.wrapLat,!0):o.lat,g=o.alt;return new _t(f,c,g)},wrapLatLngBounds:function(o){var c=o.getCenter(),f=this.wrapLatLng(c),g=c.lat-f.lat,x=c.lng-f.lng;if(g===0&&x===0)return o;var C=o.getSouthWest(),F=o.getNorthEast(),W=new _t(C.lat-g,C.lng-x),q=new _t(F.lat-g,F.lng-x);return new wt(W,q)}},hi=s({},we,{wrapLng:[-180,180],R:6371e3,distance:function(o,c){var f=Math.PI/180,g=o.lat*f,x=c.lat*f,C=Math.sin((c.lat-o.lat)*f/2),F=Math.sin((c.lng-o.lng)*f/2),W=C*C+Math.cos(g)*Math.cos(x)*F*F,q=2*Math.atan2(Math.sqrt(W),Math.sqrt(1-W));return this.R*q}}),Hu=6378137,ys={R:Hu,MAX_LATITUDE:85.0511287798,project:function(o){var c=Math.PI/180,f=this.MAX_LATITUDE,g=Math.max(Math.min(f,o.lat),-f),x=Math.sin(g*c);return new K(this.R*o.lng*c,this.R*Math.log((1+x)/(1-x))/2)},unproject:function(o){var c=180/Math.PI;return new _t((2*Math.atan(Math.exp(o.y/this.R))-Math.PI/2)*c,o.x*c/this.R)},bounds:function(){var o=Hu*Math.PI;return new ot([-o,-o],[o,o])}()};function vs(o,c,f,g){if(R(o)){this._a=o[0],this._b=o[1],this._c=o[2],this._d=o[3];return}this._a=o,this._b=c,this._c=f,this._d=g}vs.prototype={transform:function(o,c){return this._transform(o.clone(),c)},_transform:function(o,c){return c=c||1,o.x=c*(this._a*o.x+this._b),o.y=c*(this._c*o.y+this._d),o},untransform:function(o,c){return c=c||1,new K((o.x/c-this._b)/this._a,(o.y/c-this._d)/this._c)}};function Mi(o,c,f,g){return new vs(o,c,f,g)}var xr=s({},hi,{code:"EPSG:3857",projection:ys,transformation:function(){var o=.5/(Math.PI*ys.R);return Mi(o,.5,-o,.5)}()}),al=s({},xr,{code:"EPSG:900913"});function To(o){return document.createElementNS("http://www.w3.org/2000/svg",o)}function ll(o,c){var f="",g,x,C,F,W,q;for(g=0,C=o.length;g<C;g++){for(W=o[g],x=0,F=W.length;x<F;x++)q=W[x],f+=(x?"L":"M")+q.x+" "+q.y;f+=c?rt.svg?"z":"x":""}return f||"M0 0"}var cl=document.documentElement.style,Eo="ActiveXObject"in window,Wu=Eo&&!document.addEventListener,So="msLaunchUri"in navigator&&!("documentMode"in document),ko=Sn("webkit"),$u=Sn("android"),Po=Sn("android 2")||Sn("android 3"),ul=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),qu=$u&&Sn("Google")&&ul<537&&!("AudioNode"in window),me=!!window.opera,Pe=!So&&Sn("chrome"),wr=Sn("gecko")&&!ko&&!me&&!Eo,Gu=!Pe&&Sn("safari"),hl=Sn("phantom"),Ku="OTransition"in cl,br=navigator.platform.indexOf("Win")===0,dl=Eo&&"transition"in cl,Io="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Po,Co="MozPerspective"in cl,Ep=!window.L_DISABLE_3D&&(dl||Io||Co)&&!Ku&&!hl,Tr=typeof orientation<"u"||Sn("mobile"),fl=Tr&&ko,Zu=Tr&&Io,pl=!window.PointerEvent&&window.MSPointerEvent,xs=!!(window.PointerEvent||pl),Ao="ontouchstart"in window||!!window.TouchEvent,ml=!window.L_NO_TOUCH&&(Ao||xs),Oi=Tr&&me,Qu=Tr&&wr,Ro=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Yu=function(){var o=!1;try{var c=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("testPassiveEventSupport",_,c),window.removeEventListener("testPassiveEventSupport",_,c)}catch{}return o}(),Er=function(){return!!document.createElement("canvas").getContext}(),No=!!(document.createElementNS&&To("svg").createSVGRect),Me=!!No&&function(){var o=document.createElement("div");return o.innerHTML="<svg/>",(o.firstChild&&o.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Xu=!No&&function(){try{var o=document.createElement("div");o.innerHTML='<v:shape adj="1"/>';var c=o.firstChild;return c.style.behavior="url(#default#VML)",c&&typeof c.adj=="object"}catch{return!1}}(),Sr=navigator.platform.indexOf("Mac")===0,kr=navigator.platform.indexOf("Linux")===0;function Sn(o){return navigator.userAgent.toLowerCase().indexOf(o)>=0}var rt={ie:Eo,ielt9:Wu,edge:So,webkit:ko,android:$u,android23:Po,androidStock:qu,opera:me,chrome:Pe,gecko:wr,safari:Gu,phantom:hl,opera12:Ku,win:br,ie3d:dl,webkit3d:Io,gecko3d:Co,any3d:Ep,mobile:Tr,mobileWebkit:fl,mobileWebkit3d:Zu,msPointer:pl,pointer:xs,touch:ml,touchNative:Ao,mobileOpera:Oi,mobileGecko:Qu,retina:Ro,passiveEvents:Yu,canvas:Er,svg:No,vml:Xu,inlineSvg:Me,mac:Sr,linux:kr},Di=rt.msPointer?"MSPointerDown":"pointerdown",Ju=rt.msPointer?"MSPointerMove":"pointermove",th=rt.msPointer?"MSPointerUp":"pointerup",Pr=rt.msPointer?"MSPointerCancel":"pointercancel",Lo={touchstart:Di,touchmove:Ju,touchend:th,touchcancel:Pr},Mo={touchstart:Do,touchmove:Oo,touchend:Oo,touchcancel:Oo},Gn={},Kn=!1;function eh(o,c,f){return c==="touchstart"&&ih(),Mo[c]?(f=Mo[c].bind(this,f),o.addEventListener(Lo[c],f,!1),f):(console.warn("wrong event specified:",c),_)}function nh(o,c,f){if(!Lo[c]){console.warn("wrong event specified:",c);return}o.removeEventListener(Lo[c],f,!1)}function gl(o){Gn[o.pointerId]=o}function _l(o){Gn[o.pointerId]&&(Gn[o.pointerId]=o)}function yl(o){delete Gn[o.pointerId]}function ih(){Kn||(document.addEventListener(Di,gl,!0),document.addEventListener(Ju,_l,!0),document.addEventListener(th,yl,!0),document.addEventListener(Pr,yl,!0),Kn=!0)}function Oo(o,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){c.touches=[];for(var f in Gn)c.touches.push(Gn[f]);c.changedTouches=[c],o(c)}}function Do(o,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&ee(c),Oo(o,c)}function sh(o){var c={},f,g;for(g in o)f=o[g],c[g]=f&&f.bind?f.bind(o):f;return o=c,c.type="dblclick",c.detail=2,c.isTrusted=!1,c._simulated=!0,c}var vl=200;function Ir(o,c){o.addEventListener("dblclick",c);var f=0,g;function x(C){if(C.detail!==1){g=C.detail;return}if(!(C.pointerType==="mouse"||C.sourceCapabilities&&!C.sourceCapabilities.firesTouchEvents)){var F=Rl(C);if(!(F.some(function(q){return q instanceof HTMLLabelElement&&q.attributes.for})&&!F.some(function(q){return q instanceof HTMLInputElement||q instanceof HTMLSelectElement}))){var W=Date.now();W-f<=vl?(g++,g===2&&c(sh(C))):g=1,f=W}}}return o.addEventListener("click",x),{dblclick:c,simDblclick:x}}function ji(o,c){o.removeEventListener("dblclick",c.dblclick),o.removeEventListener("click",c.simDblclick)}var Cr=Fi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ar=Fi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),xl=Ar==="webkitTransition"||Ar==="OTransition"?Ar+"End":"transitionend";function wl(o){return typeof o=="string"?document.getElementById(o):o}function ws(o,c){var f=o.style[c]||o.currentStyle&&o.currentStyle[c];if((!f||f==="auto")&&document.defaultView){var g=document.defaultView.getComputedStyle(o,null);f=g?g[c]:null}return f==="auto"?null:f}function Ct(o,c,f){var g=document.createElement(o);return g.className=c||"",f&&f.appendChild(g),g}function qt(o){var c=o.parentNode;c&&c.removeChild(o)}function Rr(o){for(;o.firstChild;)o.removeChild(o.firstChild)}function Vi(o){var c=o.parentNode;c&&c.lastChild!==o&&c.appendChild(o)}function bs(o){var c=o.parentNode;c&&c.firstChild!==o&&c.insertBefore(o,c.firstChild)}function bl(o,c){if(o.classList!==void 0)return o.classList.contains(c);var f=kn(o);return f.length>0&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(f)}function xt(o,c){if(o.classList!==void 0)for(var f=E(c),g=0,x=f.length;g<x;g++)o.classList.add(f[g]);else if(!bl(o,c)){var C=kn(o);Tl(o,(C?C+" ":"")+c)}}function Xt(o,c){o.classList!==void 0?o.classList.remove(c):Tl(o,w((" "+kn(o)+" ").replace(" "+c+" "," ")))}function Tl(o,c){o.className.baseVal===void 0?o.className=c:o.className.baseVal=c}function kn(o){return o.correspondingElement&&(o=o.correspondingElement),o.className.baseVal===void 0?o.className:o.className.baseVal}function ae(o,c){"opacity"in o.style?o.style.opacity=c:"filter"in o.style&&jo(o,c)}function jo(o,c){var f=!1,g="DXImageTransform.Microsoft.Alpha";try{f=o.filters.item(g)}catch{if(c===1)return}c=Math.round(c*100),f?(f.Enabled=c!==100,f.Opacity=c):o.style.filter+=" progid:"+g+"(opacity="+c+")"}function Fi(o){for(var c=document.documentElement.style,f=0;f<o.length;f++)if(o[f]in c)return o[f];return!1}function di(o,c,f){var g=c||new K(0,0);o.style[Cr]=(rt.ie3d?"translate("+g.x+"px,"+g.y+"px)":"translate3d("+g.x+"px,"+g.y+"px,0)")+(f?" scale("+f+")":"")}function mt(o,c){o._leaflet_pos=c,rt.any3d?di(o,c):(o.style.left=c.x+"px",o.style.top=c.y+"px")}function Pn(o){return o._leaflet_pos||new K(0,0)}var Zn,Qn,El;if("onselectstart"in document)Zn=function(){ht(window,"selectstart",ee)},Qn=function(){Wt(window,"selectstart",ee)};else{var Ts=Fi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Zn=function(){if(Ts){var o=document.documentElement.style;El=o[Ts],o[Ts]="none"}},Qn=function(){Ts&&(document.documentElement.style[Ts]=El,El=void 0)}}function Sl(){ht(window,"dragstart",ee)}function kl(){Wt(window,"dragstart",ee)}var Vo,Pl;function zi(o){for(;o.tabIndex===-1;)o=o.parentNode;o.style&&(gn(),Vo=o,Pl=o.style.outlineStyle,o.style.outlineStyle="none",ht(window,"keydown",gn))}function gn(){Vo&&(Vo.style.outlineStyle=Pl,Vo=void 0,Pl=void 0,Wt(window,"keydown",gn))}function Il(o){do o=o.parentNode;while((!o.offsetWidth||!o.offsetHeight)&&o!==document.body);return o}function Fo(o){var c=o.getBoundingClientRect();return{x:c.width/o.offsetWidth||1,y:c.height/o.offsetHeight||1,boundingClientRect:c}}var rh={__proto__:null,TRANSFORM:Cr,TRANSITION:Ar,TRANSITION_END:xl,get:wl,getStyle:ws,create:Ct,remove:qt,empty:Rr,toFront:Vi,toBack:bs,hasClass:bl,addClass:xt,removeClass:Xt,setClass:Tl,getClass:kn,setOpacity:ae,testProp:Fi,setTransform:di,setPosition:mt,getPosition:Pn,get disableTextSelection(){return Zn},get enableTextSelection(){return Qn},disableImageDrag:Sl,enableImageDrag:kl,preventOutline:zi,restoreOutline:gn,getSizedParentNode:Il,getScale:Fo};function ht(o,c,f,g){if(c&&typeof c=="object")for(var x in c)Cl(o,x,c[x],f);else{c=E(c);for(var C=0,F=c.length;C<F;C++)Cl(o,c[C],f,g)}return this}var In="_leaflet_events";function Wt(o,c,f,g){if(arguments.length===1)oh(o),delete o[In];else if(c&&typeof c=="object")for(var x in c)Al(o,x,c[x],f);else if(c=E(c),arguments.length===2)oh(o,function(W){return V(c,W)!==-1});else for(var C=0,F=c.length;C<F;C++)Al(o,c[C],f,g);return this}function oh(o,c){for(var f in o[In]){var g=f.split(/\d/)[0];(!c||c(g))&&Al(o,g,null,null,f)}}var Cn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Cl(o,c,f,g){var x=c+u(f)+(g?"_"+u(g):"");if(o[In]&&o[In][x])return this;var C=function(W){return f.call(g||o,W||window.event)},F=C;!rt.touchNative&&rt.pointer&&c.indexOf("touch")===0?C=eh(o,c,C):rt.touch&&c==="dblclick"?C=Ir(o,C):"addEventListener"in o?c==="touchstart"||c==="touchmove"||c==="wheel"||c==="mousewheel"?o.addEventListener(Cn[c]||c,C,rt.passiveEvents?{passive:!1}:!1):c==="mouseenter"||c==="mouseleave"?(C=function(W){W=W||window.event,Nl(o,W)&&F(W)},o.addEventListener(Cn[c],C,!1)):o.addEventListener(c,F,!1):o.attachEvent("on"+c,C),o[In]=o[In]||{},o[In][x]=C}function Al(o,c,f,g,x){x=x||c+u(f)+(g?"_"+u(g):"");var C=o[In]&&o[In][x];if(!C)return this;!rt.touchNative&&rt.pointer&&c.indexOf("touch")===0?nh(o,c,C):rt.touch&&c==="dblclick"?ji(o,C):"removeEventListener"in o?o.removeEventListener(Cn[c]||c,C,!1):o.detachEvent("on"+c,C),o[In][x]=null}function An(o){return o.stopPropagation?o.stopPropagation():o.originalEvent?o.originalEvent._stopped=!0:o.cancelBubble=!0,this}function Es(o){return Cl(o,"wheel",An),this}function Ss(o){return ht(o,"mousedown touchstart dblclick contextmenu",An),o._leaflet_disable_click=!0,this}function ee(o){return o.preventDefault?o.preventDefault():o.returnValue=!1,this}function _n(o){return ee(o),An(o),this}function Rl(o){if(o.composedPath)return o.composedPath();for(var c=[],f=o.target;f;)c.push(f),f=f.parentNode;return c}function zo(o,c){if(!c)return new K(o.clientX,o.clientY);var f=Fo(c),g=f.boundingClientRect;return new K((o.clientX-g.left)/f.x-c.clientLeft,(o.clientY-g.top)/f.y-c.clientTop)}var Jt=rt.linux&&rt.chrome?window.devicePixelRatio:rt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ah(o){return rt.edge?o.wheelDeltaY/2:o.deltaY&&o.deltaMode===0?-o.deltaY/Jt:o.deltaY&&o.deltaMode===1?-o.deltaY*20:o.deltaY&&o.deltaMode===2?-o.deltaY*60:o.deltaX||o.deltaZ?0:o.wheelDelta?(o.wheelDeltaY||o.wheelDelta)/2:o.detail&&Math.abs(o.detail)<32765?-o.detail*20:o.detail?o.detail/-32765*60:0}function Nl(o,c){var f=c.relatedTarget;if(!f)return!0;try{for(;f&&f!==o;)f=f.parentNode}catch{return!1}return f!==o}var lh={__proto__:null,on:ht,off:Wt,stopPropagation:An,disableScrollPropagation:Es,disableClickPropagation:Ss,preventDefault:ee,stop:_n,getPropagationPath:Rl,getMousePosition:zo,getWheelDelta:ah,isExternalTarget:Nl,addListener:ht,removeListener:Wt},Ll=bt.extend({run:function(o,c,f,g){this.stop(),this._el=o,this._inProgress=!0,this._duration=f||.25,this._easeOutPower=1/Math.max(g||.5,.2),this._startPos=Pn(o),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=D(this._animate,this),this._step()},_step:function(o){var c=+new Date-this._startTime,f=this._duration*1e3;c<f?this._runFrame(this._easeOut(c/f),o):(this._runFrame(1),this._complete())},_runFrame:function(o,c){var f=this._startPos.add(this._offset.multiplyBy(o));c&&f._round(),mt(this._el,f),this.fire("step")},_complete:function(){z(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(o){return 1-Math.pow(1-o,this._easeOutPower)}}),Pt=bt.extend({options:{crs:xr,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(o,c){c=S(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(o),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),c.zoom!==void 0&&(this._zoom=this._limitZoom(c.zoom)),c.center&&c.zoom!==void 0&&this.setView(at(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ar&&rt.any3d&&!rt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ht(this._proxy,xl,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(o,c,f){if(c=c===void 0?this._zoom:this._limitZoom(c),o=this._limitCenter(at(o),c,this.options.maxBounds),f=f||{},this._stop(),this._loaded&&!f.reset&&f!==!0){f.animate!==void 0&&(f.zoom=s({animate:f.animate},f.zoom),f.pan=s({animate:f.animate,duration:f.duration},f.pan));var g=this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(o,c,f.zoom):this._tryAnimatedPan(o,f.pan);if(g)return clearTimeout(this._sizeTimer),this}return this._resetView(o,c,f.pan&&f.pan.noMoveStart),this},setZoom:function(o,c){return this._loaded?this.setView(this.getCenter(),o,{zoom:c}):(this._zoom=o,this)},zoomIn:function(o,c){return o=o||(rt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+o,c)},zoomOut:function(o,c){return o=o||(rt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-o,c)},setZoomAround:function(o,c,f){var g=this.getZoomScale(c),x=this.getSize().divideBy(2),C=o instanceof K?o:this.latLngToContainerPoint(o),F=C.subtract(x).multiplyBy(1-1/g),W=this.containerPointToLatLng(x.add(F));return this.setView(W,c,{zoom:f})},_getBoundsCenterZoom:function(o,c){c=c||{},o=o.getBounds?o.getBounds():St(o);var f=Y(c.paddingTopLeft||c.padding||[0,0]),g=Y(c.paddingBottomRight||c.padding||[0,0]),x=this.getBoundsZoom(o,!1,f.add(g));if(x=typeof c.maxZoom=="number"?Math.min(c.maxZoom,x):x,x===1/0)return{center:o.getCenter(),zoom:x};var C=g.subtract(f).divideBy(2),F=this.project(o.getSouthWest(),x),W=this.project(o.getNorthEast(),x),q=this.unproject(F.add(W).divideBy(2).add(C),x);return{center:q,zoom:x}},fitBounds:function(o,c){if(o=St(o),!o.isValid())throw new Error("Bounds are not valid.");var f=this._getBoundsCenterZoom(o,c);return this.setView(f.center,f.zoom,c)},fitWorld:function(o){return this.fitBounds([[-90,-180],[90,180]],o)},panTo:function(o,c){return this.setView(o,this._zoom,{pan:c})},panBy:function(o,c){if(o=Y(o).round(),c=c||{},!o.x&&!o.y)return this.fire("moveend");if(c.animate!==!0&&!this.getSize().contains(o))return this._resetView(this.unproject(this.project(this.getCenter()).add(o)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ll,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),c.animate!==!1){xt(this._mapPane,"leaflet-pan-anim");var f=this._getMapPanePos().subtract(o).round();this._panAnim.run(this._mapPane,f,c.duration||.25,c.easeLinearity)}else this._rawPanBy(o),this.fire("move").fire("moveend");return this},flyTo:function(o,c,f){if(f=f||{},f.animate===!1||!rt.any3d)return this.setView(o,c,f);this._stop();var g=this.project(this.getCenter()),x=this.project(o),C=this.getSize(),F=this._zoom;o=at(o),c=c===void 0?F:c;var W=Math.max(C.x,C.y),q=W*this.getZoomScale(F,c),Z=x.distanceTo(g)||1,et=1.42,dt=et*et;function kt(_e){var Eh=_e?-1:1,tI=_e?q:W,eI=q*q-W*W+Eh*dt*dt*Z*Z,nI=2*tI*dt*Z,Rp=eI/nI,Ov=Math.sqrt(Rp*Rp+1)-Rp,iI=Ov<1e-9?-18:Math.log(Ov);return iI}function tn(_e){return(Math.exp(_e)-Math.exp(-_e))/2}function Ce(_e){return(Math.exp(_e)+Math.exp(-_e))/2}function Nn(_e){return tn(_e)/Ce(_e)}var ln=kt(0);function Jo(_e){return W*(Ce(ln)/Ce(ln+et*_e))}function QP(_e){return W*(Ce(ln)*Nn(ln+et*_e)-tn(ln))/dt}function YP(_e){return 1-Math.pow(1-_e,1.5)}var XP=Date.now(),Lv=(kt(1)-ln)/et,JP=f.duration?1e3*f.duration:1e3*Lv*.8;function Mv(){var _e=(Date.now()-XP)/JP,Eh=YP(_e)*Lv;_e<=1?(this._flyToFrame=D(Mv,this),this._move(this.unproject(g.add(x.subtract(g).multiplyBy(QP(Eh)/Z)),F),this.getScaleZoom(W/Jo(Eh),F),{flyTo:!0})):this._move(o,c)._moveEnd(!0)}return this._moveStart(!0,f.noMoveStart),Mv.call(this),this},flyToBounds:function(o,c){var f=this._getBoundsCenterZoom(o,c);return this.flyTo(f.center,f.zoom,c)},setMaxBounds:function(o){return o=St(o),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),o.isValid()?(this.options.maxBounds=o,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(o){var c=this.options.minZoom;return this.options.minZoom=o,this._loaded&&c!==o&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(o):this},setMaxZoom:function(o){var c=this.options.maxZoom;return this.options.maxZoom=o,this._loaded&&c!==o&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(o):this},panInsideBounds:function(o,c){this._enforcingBounds=!0;var f=this.getCenter(),g=this._limitCenter(f,this._zoom,St(o));return f.equals(g)||this.panTo(g,c),this._enforcingBounds=!1,this},panInside:function(o,c){c=c||{};var f=Y(c.paddingTopLeft||c.padding||[0,0]),g=Y(c.paddingBottomRight||c.padding||[0,0]),x=this.project(this.getCenter()),C=this.project(o),F=this.getPixelBounds(),W=ut([F.min.add(f),F.max.subtract(g)]),q=W.getSize();if(!W.contains(C)){this._enforcingBounds=!0;var Z=C.subtract(W.getCenter()),et=W.extend(C).getSize().subtract(q);x.x+=Z.x<0?-et.x:et.x,x.y+=Z.y<0?-et.y:et.y,this.panTo(this.unproject(x),c),this._enforcingBounds=!1}return this},invalidateSize:function(o){if(!this._loaded)return this;o=s({animate:!1,pan:!0},o===!0?{animate:!0}:o);var c=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var f=this.getSize(),g=c.divideBy(2).round(),x=f.divideBy(2).round(),C=g.subtract(x);return!C.x&&!C.y?this:(o.animate&&o.pan?this.panBy(C):(o.pan&&this._rawPanBy(C),this.fire("move"),o.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:f}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(o){if(o=this._locateOptions=s({timeout:1e4,watch:!1},o),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=a(this._handleGeolocationResponse,this),f=a(this._handleGeolocationError,this);return o.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,f,o):navigator.geolocation.getCurrentPosition(c,f,o),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(o){if(this._container._leaflet_id){var c=o.code,f=o.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+f+"."})}},_handleGeolocationResponse:function(o){if(this._container._leaflet_id){var c=o.coords.latitude,f=o.coords.longitude,g=new _t(c,f),x=g.toBounds(o.coords.accuracy*2),C=this._locateOptions;if(C.setView){var F=this.getBoundsZoom(x);this.setView(g,C.maxZoom?Math.min(F,C.maxZoom):F)}var W={latlng:g,bounds:x,timestamp:o.timestamp};for(var q in o.coords)typeof o.coords[q]=="number"&&(W[q]=o.coords[q]);this.fire("locationfound",W)}},addHandler:function(o,c){if(!c)return this;var f=this[o]=new c(this);return this._handlers.push(f),this.options[o]&&f.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),qt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(z(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var o;for(o in this._layers)this._layers[o].remove();for(o in this._panes)qt(this._panes[o]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(o,c){var f="leaflet-pane"+(o?" leaflet-"+o.replace("Pane","")+"-pane":""),g=Ct("div",f,c||this._mapPane);return o&&(this._panes[o]=g),g},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var o=this.getPixelBounds(),c=this.unproject(o.getBottomLeft()),f=this.unproject(o.getTopRight());return new wt(c,f)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(o,c,f){o=St(o),f=Y(f||[0,0]);var g=this.getZoom()||0,x=this.getMinZoom(),C=this.getMaxZoom(),F=o.getNorthWest(),W=o.getSouthEast(),q=this.getSize().subtract(f),Z=ut(this.project(W,g),this.project(F,g)).getSize(),et=rt.any3d?this.options.zoomSnap:1,dt=q.x/Z.x,kt=q.y/Z.y,tn=c?Math.max(dt,kt):Math.min(dt,kt);return g=this.getScaleZoom(tn,g),et&&(g=Math.round(g/(et/100))*(et/100),g=c?Math.ceil(g/et)*et:Math.floor(g/et)*et),Math.max(x,Math.min(C,g))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new K(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(o,c){var f=this._getTopLeftPoint(o,c);return new ot(f,f.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(o){return this.options.crs.getProjectedBounds(o===void 0?this.getZoom():o)},getPane:function(o){return typeof o=="string"?this._panes[o]:o},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(o,c){var f=this.options.crs;return c=c===void 0?this._zoom:c,f.scale(o)/f.scale(c)},getScaleZoom:function(o,c){var f=this.options.crs;c=c===void 0?this._zoom:c;var g=f.zoom(o*f.scale(c));return isNaN(g)?1/0:g},project:function(o,c){return c=c===void 0?this._zoom:c,this.options.crs.latLngToPoint(at(o),c)},unproject:function(o,c){return c=c===void 0?this._zoom:c,this.options.crs.pointToLatLng(Y(o),c)},layerPointToLatLng:function(o){var c=Y(o).add(this.getPixelOrigin());return this.unproject(c)},latLngToLayerPoint:function(o){var c=this.project(at(o))._round();return c._subtract(this.getPixelOrigin())},wrapLatLng:function(o){return this.options.crs.wrapLatLng(at(o))},wrapLatLngBounds:function(o){return this.options.crs.wrapLatLngBounds(St(o))},distance:function(o,c){return this.options.crs.distance(at(o),at(c))},containerPointToLayerPoint:function(o){return Y(o).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(o){return Y(o).add(this._getMapPanePos())},containerPointToLatLng:function(o){var c=this.containerPointToLayerPoint(Y(o));return this.layerPointToLatLng(c)},latLngToContainerPoint:function(o){return this.layerPointToContainerPoint(this.latLngToLayerPoint(at(o)))},mouseEventToContainerPoint:function(o){return zo(o,this._container)},mouseEventToLayerPoint:function(o){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(o))},mouseEventToLatLng:function(o){return this.layerPointToLatLng(this.mouseEventToLayerPoint(o))},_initContainer:function(o){var c=this._container=wl(o);if(c){if(c._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ht(c,"scroll",this._onScroll,this),this._containerId=u(c)},_initLayout:function(){var o=this._container;this._fadeAnimated=this.options.fadeAnimation&&rt.any3d,xt(o,"leaflet-container"+(rt.touch?" leaflet-touch":"")+(rt.retina?" leaflet-retina":"")+(rt.ielt9?" leaflet-oldie":"")+(rt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var c=ws(o,"position");c!=="absolute"&&c!=="relative"&&c!=="fixed"&&c!=="sticky"&&(o.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var o=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),mt(this._mapPane,new K(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(xt(o.markerPane,"leaflet-zoom-hide"),xt(o.shadowPane,"leaflet-zoom-hide"))},_resetView:function(o,c,f){mt(this._mapPane,new K(0,0));var g=!this._loaded;this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset");var x=this._zoom!==c;this._moveStart(x,f)._move(o,c)._moveEnd(x),this.fire("viewreset"),g&&this.fire("load")},_moveStart:function(o,c){return o&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(o,c,f,g){c===void 0&&(c=this._zoom);var x=this._zoom!==c;return this._zoom=c,this._lastCenter=o,this._pixelOrigin=this._getNewPixelOrigin(o),g?f&&f.pinch&&this.fire("zoom",f):((x||f&&f.pinch)&&this.fire("zoom",f),this.fire("move",f)),this},_moveEnd:function(o){return o&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return z(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(o){mt(this._mapPane,this._getMapPanePos().subtract(o))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(o){this._targets={},this._targets[u(this._container)]=this;var c=o?Wt:ht;c(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),rt.any3d&&this.options.transform3DLimit&&(o?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){z(this._resizeRequest),this._resizeRequest=D(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var o=this._getMapPanePos();Math.max(Math.abs(o.x),Math.abs(o.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(o,c){for(var f=[],g,x=c==="mouseout"||c==="mouseover",C=o.target||o.srcElement,F=!1;C;){if(g=this._targets[u(C)],g&&(c==="click"||c==="preclick")&&this._draggableMoved(g)){F=!0;break}if(g&&g.listens(c,!0)&&(x&&!Nl(C,o)||(f.push(g),x))||C===this._container)break;C=C.parentNode}return!f.length&&!F&&!x&&this.listens(c,!0)&&(f=[this]),f},_isClickDisabled:function(o){for(;o&&o!==this._container;){if(o._leaflet_disable_click)return!0;o=o.parentNode}},_handleDOMEvent:function(o){var c=o.target||o.srcElement;if(!(!this._loaded||c._leaflet_disable_events||o.type==="click"&&this._isClickDisabled(c))){var f=o.type;f==="mousedown"&&zi(c),this._fireDOMEvent(o,f)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(o,c,f){if(o.type==="click"){var g=s({},o);g.type="preclick",this._fireDOMEvent(g,g.type,f)}var x=this._findEventTargets(o,c);if(f){for(var C=[],F=0;F<f.length;F++)f[F].listens(c,!0)&&C.push(f[F]);x=C.concat(x)}if(x.length){c==="contextmenu"&&ee(o);var W=x[0],q={originalEvent:o};if(o.type!=="keypress"&&o.type!=="keydown"&&o.type!=="keyup"){var Z=W.getLatLng&&(!W._radius||W._radius<=10);q.containerPoint=Z?this.latLngToContainerPoint(W.getLatLng()):this.mouseEventToContainerPoint(o),q.layerPoint=this.containerPointToLayerPoint(q.containerPoint),q.latlng=Z?W.getLatLng():this.layerPointToLatLng(q.layerPoint)}for(F=0;F<x.length;F++)if(x[F].fire(c,q,!0),q.originalEvent._stopped||x[F].options.bubblingMouseEvents===!1&&V(this._mouseEvents,c)!==-1)return}},_draggableMoved:function(o){return o=o.dragging&&o.dragging.enabled()?o:this,o.dragging&&o.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var o=0,c=this._handlers.length;o<c;o++)this._handlers[o].disable()},whenReady:function(o,c){return this._loaded?o.call(c||this,{target:this}):this.on("load",o,c),this},_getMapPanePos:function(){return Pn(this._mapPane)||new K(0,0)},_moved:function(){var o=this._getMapPanePos();return o&&!o.equals([0,0])},_getTopLeftPoint:function(o,c){var f=o&&c!==void 0?this._getNewPixelOrigin(o,c):this.getPixelOrigin();return f.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(o,c){var f=this.getSize()._divideBy(2);return this.project(o,c)._subtract(f)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(o,c,f){var g=this._getNewPixelOrigin(f,c);return this.project(o,c)._subtract(g)},_latLngBoundsToNewLayerBounds:function(o,c,f){var g=this._getNewPixelOrigin(f,c);return ut([this.project(o.getSouthWest(),c)._subtract(g),this.project(o.getNorthWest(),c)._subtract(g),this.project(o.getSouthEast(),c)._subtract(g),this.project(o.getNorthEast(),c)._subtract(g)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(o){return this.latLngToLayerPoint(o).subtract(this._getCenterLayerPoint())},_limitCenter:function(o,c,f){if(!f)return o;var g=this.project(o,c),x=this.getSize().divideBy(2),C=new ot(g.subtract(x),g.add(x)),F=this._getBoundsOffset(C,f,c);return Math.abs(F.x)<=1&&Math.abs(F.y)<=1?o:this.unproject(g.add(F),c)},_limitOffset:function(o,c){if(!c)return o;var f=this.getPixelBounds(),g=new ot(f.min.add(o),f.max.add(o));return o.add(this._getBoundsOffset(g,c))},_getBoundsOffset:function(o,c,f){var g=ut(this.project(c.getNorthEast(),f),this.project(c.getSouthWest(),f)),x=g.min.subtract(o.min),C=g.max.subtract(o.max),F=this._rebound(x.x,-C.x),W=this._rebound(x.y,-C.y);return new K(F,W)},_rebound:function(o,c){return o+c>0?Math.round(o-c)/2:Math.max(0,Math.ceil(o))-Math.max(0,Math.floor(c))},_limitZoom:function(o){var c=this.getMinZoom(),f=this.getMaxZoom(),g=rt.any3d?this.options.zoomSnap:1;return g&&(o=Math.round(o/g)*g),Math.max(c,Math.min(f,o))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Xt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(o,c){var f=this._getCenterOffset(o)._trunc();return(c&&c.animate)!==!0&&!this.getSize().contains(f)?!1:(this.panBy(f,c),!0)},_createAnimProxy:function(){var o=this._proxy=Ct("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(o),this.on("zoomanim",function(c){var f=Cr,g=this._proxy.style[f];di(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),g===this._proxy.style[f]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){qt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var o=this.getCenter(),c=this.getZoom();di(this._proxy,this.project(o,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(o){this._animatingZoom&&o.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(o,c,f){if(this._animatingZoom)return!0;if(f=f||{},!this._zoomAnimated||f.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var g=this.getZoomScale(c),x=this._getCenterOffset(o)._divideBy(1-1/g);return f.animate!==!0&&!this.getSize().contains(x)?!1:(D(function(){this._moveStart(!0,f.noMoveStart||!1)._animateZoom(o,c,!0)},this),!0)},_animateZoom:function(o,c,f,g){this._mapPane&&(f&&(this._animatingZoom=!0,this._animateToCenter=o,this._animateToZoom=c,xt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:o,zoom:c,noUpdate:g}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Xt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Bo(o,c){return new Pt(o,c)}var an=Rt.extend({options:{position:"topright"},initialize:function(o){S(this,o)},getPosition:function(){return this.options.position},setPosition:function(o){var c=this._map;return c&&c.removeControl(this),this.options.position=o,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(o){this.remove(),this._map=o;var c=this._container=this.onAdd(o),f=this.getPosition(),g=o._controlCorners[f];return xt(c,"leaflet-control"),f.indexOf("bottom")!==-1?g.insertBefore(c,g.firstChild):g.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(qt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(o){this._map&&o&&o.screenX>0&&o.screenY>0&&this._map.getContainer().focus()}}),Je=function(o){return new an(o)};Pt.include({addControl:function(o){return o.addTo(this),this},removeControl:function(o){return o.remove(),this},_initControlPos:function(){var o=this._controlCorners={},c="leaflet-",f=this._controlContainer=Ct("div",c+"control-container",this._container);function g(x,C){var F=c+x+" "+c+C;o[x+C]=Ct("div",F,f)}g("top","left"),g("top","right"),g("bottom","left"),g("bottom","right")},_clearControlPos:function(){for(var o in this._controlCorners)qt(this._controlCorners[o]);qt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ml=an.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(o,c,f,g){return f<g?-1:g<f?1:0}},initialize:function(o,c,f){S(this,f),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var g in o)this._addLayer(o[g],g);for(g in c)this._addLayer(c[g],g,!0)},onAdd:function(o){this._initLayout(),this._update(),this._map=o,o.on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(o){return an.prototype.addTo.call(this,o),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(o,c){return this._addLayer(o,c),this._map?this._update():this},addOverlay:function(o,c){return this._addLayer(o,c,!0),this._map?this._update():this},removeLayer:function(o){o.off("add remove",this._onLayerChange,this);var c=this._getLayer(u(o));return c&&this._layers.splice(this._layers.indexOf(c),1),this._map?this._update():this},expand:function(){xt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var o=this._map.getSize().y-(this._container.offsetTop+50);return o<this._section.clientHeight?(xt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=o+"px"):Xt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Xt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var o="leaflet-control-layers",c=this._container=Ct("div",o),f=this.options.collapsed;c.setAttribute("aria-haspopup",!0),Ss(c),Es(c);var g=this._section=Ct("section",o+"-list");f&&(this._map.on("click",this.collapse,this),ht(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var x=this._layersLink=Ct("a",o+"-toggle",c);x.href="#",x.title="Layers",x.setAttribute("role","button"),ht(x,{keydown:function(C){C.keyCode===13&&this._expandSafely()},click:function(C){ee(C),this._expandSafely()}},this),f||this.expand(),this._baseLayersList=Ct("div",o+"-base",g),this._separator=Ct("div",o+"-separator",g),this._overlaysList=Ct("div",o+"-overlays",g),c.appendChild(g)},_getLayer:function(o){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&u(this._layers[c].layer)===o)return this._layers[c]},_addLayer:function(o,c,f){this._map&&o.on("add remove",this._onLayerChange,this),this._layers.push({layer:o,name:c,overlay:f}),this.options.sortLayers&&this._layers.sort(a(function(g,x){return this.options.sortFunction(g.layer,x.layer,g.name,x.name)},this)),this.options.autoZIndex&&o.setZIndex&&(this._lastZIndex++,o.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Rr(this._baseLayersList),Rr(this._overlaysList),this._layerControlInputs=[];var o,c,f,g,x=0;for(f=0;f<this._layers.length;f++)g=this._layers[f],this._addItem(g),c=c||g.overlay,o=o||!g.overlay,x+=g.overlay?0:1;return this.options.hideSingleBase&&(o=o&&x>1,this._baseLayersList.style.display=o?"":"none"),this._separator.style.display=c&&o?"":"none",this},_onLayerChange:function(o){this._handlingClick||this._update();var c=this._getLayer(u(o.target)),f=c.overlay?o.type==="add"?"overlayadd":"overlayremove":o.type==="add"?"baselayerchange":null;f&&this._map.fire(f,c)},_createRadioElement:function(o,c){var f='<input type="radio" class="leaflet-control-layers-selector" name="'+o+'"'+(c?' checked="checked"':"")+"/>",g=document.createElement("div");return g.innerHTML=f,g.firstChild},_addItem:function(o){var c=document.createElement("label"),f=this._map.hasLayer(o.layer),g;o.overlay?(g=document.createElement("input"),g.type="checkbox",g.className="leaflet-control-layers-selector",g.defaultChecked=f):g=this._createRadioElement("leaflet-base-layers_"+u(this),f),this._layerControlInputs.push(g),g.layerId=u(o.layer),ht(g,"click",this._onInputClick,this);var x=document.createElement("span");x.innerHTML=" "+o.name;var C=document.createElement("span");c.appendChild(C),C.appendChild(g),C.appendChild(x);var F=o.overlay?this._overlaysList:this._baseLayersList;return F.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){if(!this._preventClick){var o=this._layerControlInputs,c,f,g=[],x=[];this._handlingClick=!0;for(var C=o.length-1;C>=0;C--)c=o[C],f=this._getLayer(c.layerId).layer,c.checked?g.push(f):c.checked||x.push(f);for(C=0;C<x.length;C++)this._map.hasLayer(x[C])&&this._map.removeLayer(x[C]);for(C=0;C<g.length;C++)this._map.hasLayer(g[C])||this._map.addLayer(g[C]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var o=this._layerControlInputs,c,f,g=this._map.getZoom(),x=o.length-1;x>=0;x--)c=o[x],f=this._getLayer(c.layerId).layer,c.disabled=f.options.minZoom!==void 0&&g<f.options.minZoom||f.options.maxZoom!==void 0&&g>f.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var o=this._section;this._preventClick=!0,ht(o,"click",ee),this.expand();var c=this;setTimeout(function(){Wt(o,"click",ee),c._preventClick=!1})}}),Sp=function(o,c,f){return new Ml(o,c,f)},Bi=an.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(o){var c="leaflet-control-zoom",f=Ct("div",c+" leaflet-bar"),g=this.options;return this._zoomInButton=this._createButton(g.zoomInText,g.zoomInTitle,c+"-in",f,this._zoomIn),this._zoomOutButton=this._createButton(g.zoomOutText,g.zoomOutTitle,c+"-out",f,this._zoomOut),this._updateDisabled(),o.on("zoomend zoomlevelschange",this._updateDisabled,this),f},onRemove:function(o){o.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(o){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(o.shiftKey?3:1))},_zoomOut:function(o){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(o.shiftKey?3:1))},_createButton:function(o,c,f,g,x){var C=Ct("a",f,g);return C.innerHTML=o,C.href="#",C.title=c,C.setAttribute("role","button"),C.setAttribute("aria-label",c),Ss(C),ht(C,"click",_n),ht(C,"click",x,this),ht(C,"click",this._refocusOnMap,this),C},_updateDisabled:function(){var o=this._map,c="leaflet-disabled";Xt(this._zoomInButton,c),Xt(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||o._zoom===o.getMinZoom())&&(xt(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||o._zoom===o.getMaxZoom())&&(xt(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}});Pt.mergeOptions({zoomControl:!0}),Pt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Bi,this.addControl(this.zoomControl))});var ch=function(o){return new Bi(o)},Uo=an.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(o){var c="leaflet-control-scale",f=Ct("div",c),g=this.options;return this._addScales(g,c+"-line",f),o.on(g.updateWhenIdle?"moveend":"move",this._update,this),o.whenReady(this._update,this),f},onRemove:function(o){o.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(o,c,f){o.metric&&(this._mScale=Ct("div",c,f)),o.imperial&&(this._iScale=Ct("div",c,f))},_update:function(){var o=this._map,c=o.getSize().y/2,f=o.distance(o.containerPointToLatLng([0,c]),o.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(f)},_updateScales:function(o){this.options.metric&&o&&this._updateMetric(o),this.options.imperial&&o&&this._updateImperial(o)},_updateMetric:function(o){var c=this._getRoundNum(o),f=c<1e3?c+" m":c/1e3+" km";this._updateScale(this._mScale,f,c/o)},_updateImperial:function(o){var c=o*3.2808399,f,g,x;c>5280?(f=c/5280,g=this._getRoundNum(f),this._updateScale(this._iScale,g+" mi",g/f)):(x=this._getRoundNum(c),this._updateScale(this._iScale,x+" ft",x/c))},_updateScale:function(o,c,f){o.style.width=Math.round(this.options.maxWidth*f)+"px",o.innerHTML=c},_getRoundNum:function(o){var c=Math.pow(10,(Math.floor(o)+"").length-1),f=o/c;return f=f>=10?10:f>=5?5:f>=3?3:f>=2?2:1,c*f}}),Ho=function(o){return new Uo(o)},uh='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ks=an.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(rt.inlineSvg?uh+" ":"")+"Leaflet</a>"},initialize:function(o){S(this,o),this._attributions={}},onAdd:function(o){o.attributionControl=this,this._container=Ct("div","leaflet-control-attribution"),Ss(this._container);for(var c in o._layers)o._layers[c].getAttribution&&this.addAttribution(o._layers[c].getAttribution());return this._update(),o.on("layeradd",this._addAttribution,this),this._container},onRemove:function(o){o.off("layeradd",this._addAttribution,this)},_addAttribution:function(o){o.layer.getAttribution&&(this.addAttribution(o.layer.getAttribution()),o.layer.once("remove",function(){this.removeAttribution(o.layer.getAttribution())},this))},setPrefix:function(o){return this.options.prefix=o,this._update(),this},addAttribution:function(o){return o?(this._attributions[o]||(this._attributions[o]=0),this._attributions[o]++,this._update(),this):this},removeAttribution:function(o){return o?(this._attributions[o]&&(this._attributions[o]--,this._update()),this):this},_update:function(){if(this._map){var o=[];for(var c in this._attributions)this._attributions[c]&&o.push(c);var f=[];this.options.prefix&&f.push(this.options.prefix),o.length&&f.push(o.join(", ")),this._container.innerHTML=f.join(' <span aria-hidden="true">|</span> ')}}});Pt.mergeOptions({attributionControl:!0}),Pt.addInitHook(function(){this.options.attributionControl&&new ks().addTo(this)});var kp=function(o){return new ks(o)};an.Layers=Ml,an.Zoom=Bi,an.Scale=Uo,an.Attribution=ks,Je.layers=Sp,Je.zoom=ch,Je.scale=Ho,Je.attribution=kp;var yn=Rt.extend({initialize:function(o){this._map=o},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});yn.addTo=function(o,c){return o.addHandler(c,this),this};var Nr={Events:Et},Ol=rt.touch?"touchstart mousedown":"mousedown",Yn=bt.extend({options:{clickTolerance:3},initialize:function(o,c,f,g){S(this,g),this._element=o,this._dragStartTarget=c||o,this._preventOutline=f},enable:function(){this._enabled||(ht(this._dragStartTarget,Ol,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Yn._dragging===this&&this.finishDrag(!0),Wt(this._dragStartTarget,Ol,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(o){if(this._enabled&&(this._moved=!1,!bl(this._element,"leaflet-zoom-anim"))){if(o.touches&&o.touches.length!==1){Yn._dragging===this&&this.finishDrag();return}if(!(Yn._dragging||o.shiftKey||o.which!==1&&o.button!==1&&!o.touches)&&(Yn._dragging=this,this._preventOutline&&zi(this._element),Sl(),Zn(),!this._moving)){this.fire("down");var c=o.touches?o.touches[0]:o,f=Il(this._element);this._startPoint=new K(c.clientX,c.clientY),this._startPos=Pn(this._element),this._parentScale=Fo(f);var g=o.type==="mousedown";ht(document,g?"mousemove":"touchmove",this._onMove,this),ht(document,g?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(o){if(this._enabled){if(o.touches&&o.touches.length>1){this._moved=!0;return}var c=o.touches&&o.touches.length===1?o.touches[0]:o,f=new K(c.clientX,c.clientY)._subtract(this._startPoint);!f.x&&!f.y||Math.abs(f.x)+Math.abs(f.y)<this.options.clickTolerance||(f.x/=this._parentScale.x,f.y/=this._parentScale.y,ee(o),this._moved||(this.fire("dragstart"),this._moved=!0,xt(document.body,"leaflet-dragging"),this._lastTarget=o.target||o.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),xt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(f),this._moving=!0,this._lastEvent=o,this._updatePosition())}},_updatePosition:function(){var o={originalEvent:this._lastEvent};this.fire("predrag",o),mt(this._element,this._newPos),this.fire("drag",o)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(o){Xt(document.body,"leaflet-dragging"),this._lastTarget&&(Xt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Wt(document,"mousemove touchmove",this._onMove,this),Wt(document,"mouseup touchend touchcancel",this._onUp,this),kl(),Qn();var c=this._moved&&this._moving;this._moving=!1,Yn._dragging=!1,c&&this.fire("dragend",{noInertia:o,distance:this._newPos.distanceTo(this._startPos)})}});function Wo(o,c,f){var g,x=[1,4,2,8],C,F,W,q,Z,et,dt,kt;for(C=0,et=o.length;C<et;C++)o[C]._code=fi(o[C],c);for(W=0;W<4;W++){for(dt=x[W],g=[],C=0,et=o.length,F=et-1;C<et;F=C++)q=o[C],Z=o[F],q._code&dt?Z._code&dt||(kt=Ie(Z,q,dt,c,f),kt._code=fi(kt,c),g.push(kt)):(Z._code&dt&&(kt=Ie(Z,q,dt,c,f),kt._code=fi(kt,c),g.push(kt)),g.push(q));o=g}return o}function $o(o,c){var f,g,x,C,F,W,q,Z,et;if(!o||o.length===0)throw new Error("latlngs not passed");d(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var dt=at([0,0]),kt=St(o),tn=kt.getNorthWest().distanceTo(kt.getSouthWest())*kt.getNorthEast().distanceTo(kt.getNorthWest());tn<1700&&(dt=qo(o));var Ce=o.length,Nn=[];for(f=0;f<Ce;f++){var ln=at(o[f]);Nn.push(c.project(at([ln.lat-dt.lat,ln.lng-dt.lng])))}for(W=q=Z=0,f=0,g=Ce-1;f<Ce;g=f++)x=Nn[f],C=Nn[g],F=x.y*C.x-C.y*x.x,q+=(x.x+C.x)*F,Z+=(x.y+C.y)*F,W+=F*3;W===0?et=Nn[0]:et=[q/W,Z/W];var Jo=c.unproject(Y(et));return at([Jo.lat+dt.lat,Jo.lng+dt.lng])}function qo(o){for(var c=0,f=0,g=0,x=0;x<o.length;x++){var C=at(o[x]);c+=C.lat,f+=C.lng,g++}return at([c/g,f/g])}var Go={__proto__:null,clipPolygon:Wo,polygonCenter:$o,centroid:qo};function Dl(o,c){if(!c||!o.length)return o.slice();var f=c*c;return o=dh(o,f),o=hh(o,f),o}function jl(o,c,f){return Math.sqrt(Rn(o,c,f,!0))}function Ui(o,c,f){return Rn(o,c,f)}function hh(o,c){var f=o.length,g=typeof Uint8Array<"u"?Uint8Array:Array,x=new g(f);x[0]=x[f-1]=1,Ko(o,x,c,0,f-1);var C,F=[];for(C=0;C<f;C++)x[C]&&F.push(o[C]);return F}function Ko(o,c,f,g,x){var C=0,F,W,q;for(W=g+1;W<=x-1;W++)q=Rn(o[W],o[g],o[x],!0),q>C&&(F=W,C=q);C>f&&(c[F]=1,Ko(o,c,f,g,F),Ko(o,c,f,F,x))}function dh(o,c){for(var f=[o[0]],g=1,x=0,C=o.length;g<C;g++)fh(o[g],o[x])>c&&(f.push(o[g]),x=g);return x<C-1&&f.push(o[C-1]),f}var Vl;function Lr(o,c,f,g,x){var C=g?Vl:fi(o,f),F=fi(c,f),W,q,Z;for(Vl=F;;){if(!(C|F))return[o,c];if(C&F)return!1;W=C||F,q=Ie(o,c,W,f,x),Z=fi(q,f),W===C?(o=q,C=Z):(c=q,F=Z)}}function Ie(o,c,f,g,x){var C=c.x-o.x,F=c.y-o.y,W=g.min,q=g.max,Z,et;return f&8?(Z=o.x+C*(q.y-o.y)/F,et=q.y):f&4?(Z=o.x+C*(W.y-o.y)/F,et=W.y):f&2?(Z=q.x,et=o.y+F*(q.x-o.x)/C):f&1&&(Z=W.x,et=o.y+F*(W.x-o.x)/C),new K(Z,et,x)}function fi(o,c){var f=0;return o.x<c.min.x?f|=1:o.x>c.max.x&&(f|=2),o.y<c.min.y?f|=4:o.y>c.max.y&&(f|=8),f}function fh(o,c){var f=c.x-o.x,g=c.y-o.y;return f*f+g*g}function Rn(o,c,f,g){var x=c.x,C=c.y,F=f.x-x,W=f.y-C,q=F*F+W*W,Z;return q>0&&(Z=((o.x-x)*F+(o.y-C)*W)/q,Z>1?(x=f.x,C=f.y):Z>0&&(x+=F*Z,C+=W*Z)),F=o.x-x,W=o.y-C,g?F*F+W*W:new K(x,C)}function d(o){return!R(o[0])||typeof o[0][0]!="object"&&typeof o[0][0]<"u"}function v(o){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),d(o)}function T(o,c){var f,g,x,C,F,W,q,Z;if(!o||o.length===0)throw new Error("latlngs not passed");d(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var et=at([0,0]),dt=St(o),kt=dt.getNorthWest().distanceTo(dt.getSouthWest())*dt.getNorthEast().distanceTo(dt.getNorthWest());kt<1700&&(et=qo(o));var tn=o.length,Ce=[];for(f=0;f<tn;f++){var Nn=at(o[f]);Ce.push(c.project(at([Nn.lat-et.lat,Nn.lng-et.lng])))}for(f=0,g=0;f<tn-1;f++)g+=Ce[f].distanceTo(Ce[f+1])/2;if(g===0)Z=Ce[0];else for(f=0,C=0;f<tn-1;f++)if(F=Ce[f],W=Ce[f+1],x=F.distanceTo(W),C+=x,C>g){q=(C-g)/x,Z=[W.x-q*(W.x-F.x),W.y-q*(W.y-F.y)];break}var ln=c.unproject(Y(Z));return at([ln.lat+et.lat,ln.lng+et.lng])}var M={__proto__:null,simplify:Dl,pointToSegmentDistance:jl,closestPointOnSegment:Ui,clipSegment:Lr,_getEdgeIntersection:Ie,_getBitCode:fi,_sqClosestPointOnSegment:Rn,isFlat:d,_flat:v,polylineCenter:T},U={project:function(o){return new K(o.lng,o.lat)},unproject:function(o){return new _t(o.y,o.x)},bounds:new ot([-180,-90],[180,90])},G={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ot([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(o){var c=Math.PI/180,f=this.R,g=o.lat*c,x=this.R_MINOR/f,C=Math.sqrt(1-x*x),F=C*Math.sin(g),W=Math.tan(Math.PI/4-g/2)/Math.pow((1-F)/(1+F),C/2);return g=-f*Math.log(Math.max(W,1e-10)),new K(o.lng*c*f,g)},unproject:function(o){for(var c=180/Math.PI,f=this.R,g=this.R_MINOR/f,x=Math.sqrt(1-g*g),C=Math.exp(-o.y/f),F=Math.PI/2-2*Math.atan(C),W=0,q=.1,Z;W<15&&Math.abs(q)>1e-7;W++)Z=x*Math.sin(F),Z=Math.pow((1-Z)/(1+Z),x/2),q=Math.PI/2-2*Math.atan(C*Z)-F,F+=q;return new _t(F*c,o.x*c/f)}},tt={__proto__:null,LonLat:U,Mercator:G,SphericalMercator:ys},zt=s({},hi,{code:"EPSG:3395",projection:G,transformation:function(){var o=.5/(Math.PI*G.R);return Mi(o,.5,-o,.5)}()}),ge=s({},hi,{code:"EPSG:4326",projection:U,transformation:Mi(1/180,1,-1/180,.5)}),Mt=s({},we,{projection:U,transformation:Mi(1,0,-1,0),scale:function(o){return Math.pow(2,o)},zoom:function(o){return Math.log(o)/Math.LN2},distance:function(o,c){var f=c.lng-o.lng,g=c.lat-o.lat;return Math.sqrt(f*f+g*g)},infinite:!0});we.Earth=hi,we.EPSG3395=zt,we.EPSG3857=xr,we.EPSG900913=al,we.EPSG4326=ge,we.Simple=Mt;var $t=bt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(o){return o.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(o){return o&&o.removeLayer(this),this},getPane:function(o){return this._map.getPane(o?this.options[o]||o:this.options.pane)},addInteractiveTarget:function(o){return this._map._targets[u(o)]=this,this},removeInteractiveTarget:function(o){return delete this._map._targets[u(o)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(o){var c=o.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var f=this.getEvents();c.on(f,this),this.once("remove",function(){c.off(f,this)},this)}this.onAdd(c),this.fire("add"),c.fire("layeradd",{layer:this})}}});Pt.include({addLayer:function(o){if(!o._layerAdd)throw new Error("The provided object is not a Layer.");var c=u(o);return this._layers[c]?this:(this._layers[c]=o,o._mapToAdd=this,o.beforeAdd&&o.beforeAdd(this),this.whenReady(o._layerAdd,o),this)},removeLayer:function(o){var c=u(o);return this._layers[c]?(this._loaded&&o.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:o}),o.fire("remove")),o._map=o._mapToAdd=null,this):this},hasLayer:function(o){return u(o)in this._layers},eachLayer:function(o,c){for(var f in this._layers)o.call(c,this._layers[f]);return this},_addLayers:function(o){o=o?R(o)?o:[o]:[];for(var c=0,f=o.length;c<f;c++)this.addLayer(o[c])},_addZoomLimit:function(o){(!isNaN(o.options.maxZoom)||!isNaN(o.options.minZoom))&&(this._zoomBoundLayers[u(o)]=o,this._updateZoomLevels())},_removeZoomLimit:function(o){var c=u(o);this._zoomBoundLayers[c]&&(delete this._zoomBoundLayers[c],this._updateZoomLevels())},_updateZoomLevels:function(){var o=1/0,c=-1/0,f=this._getZoomSpan();for(var g in this._zoomBoundLayers){var x=this._zoomBoundLayers[g].options;o=x.minZoom===void 0?o:Math.min(o,x.minZoom),c=x.maxZoom===void 0?c:Math.max(c,x.maxZoom)}this._layersMaxZoom=c===-1/0?void 0:c,this._layersMinZoom=o===1/0?void 0:o,f!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ne=$t.extend({initialize:function(o,c){S(this,c),this._layers={};var f,g;if(o)for(f=0,g=o.length;f<g;f++)this.addLayer(o[f])},addLayer:function(o){var c=this.getLayerId(o);return this._layers[c]=o,this._map&&this._map.addLayer(o),this},removeLayer:function(o){var c=o in this._layers?o:this.getLayerId(o);return this._map&&this._layers[c]&&this._map.removeLayer(this._layers[c]),delete this._layers[c],this},hasLayer:function(o){var c=typeof o=="number"?o:this.getLayerId(o);return c in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(o){var c=Array.prototype.slice.call(arguments,1),f,g;for(f in this._layers)g=this._layers[f],g[o]&&g[o].apply(g,c);return this},onAdd:function(o){this.eachLayer(o.addLayer,o)},onRemove:function(o){this.eachLayer(o.removeLayer,o)},eachLayer:function(o,c){for(var f in this._layers)o.call(c,this._layers[f]);return this},getLayer:function(o){return this._layers[o]},getLayers:function(){var o=[];return this.eachLayer(o.push,o),o},setZIndex:function(o){return this.invoke("setZIndex",o)},getLayerId:function(o){return u(o)}}),Ps=function(o,c){return new ne(o,c)},he=ne.extend({addLayer:function(o){return this.hasLayer(o)?this:(o.addEventParent(this),ne.prototype.addLayer.call(this,o),this.fire("layeradd",{layer:o}))},removeLayer:function(o){return this.hasLayer(o)?(o in this._layers&&(o=this._layers[o]),o.removeEventParent(this),ne.prototype.removeLayer.call(this,o),this.fire("layerremove",{layer:o})):this},setStyle:function(o){return this.invoke("setStyle",o)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var o=new wt;for(var c in this._layers){var f=this._layers[c];o.extend(f.getBounds?f.getBounds():f.getLatLng())}return o}}),Zo=function(o,c){return new he(o,c)},pi=Rt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(o){S(this,o)},createIcon:function(o){return this._createIcon("icon",o)},createShadow:function(o){return this._createIcon("shadow",o)},_createIcon:function(o,c){var f=this._getIconUrl(o);if(!f){if(o==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var g=this._createImg(f,c&&c.tagName==="IMG"?c:null);return this._setIconStyles(g,o),(this.options.crossOrigin||this.options.crossOrigin==="")&&(g.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),g},_setIconStyles:function(o,c){var f=this.options,g=f[c+"Size"];typeof g=="number"&&(g=[g,g]);var x=Y(g),C=Y(c==="shadow"&&f.shadowAnchor||f.iconAnchor||x&&x.divideBy(2,!0));o.className="leaflet-marker-"+c+" "+(f.className||""),C&&(o.style.marginLeft=-C.x+"px",o.style.marginTop=-C.y+"px"),x&&(o.style.width=x.x+"px",o.style.height=x.y+"px")},_createImg:function(o,c){return c=c||document.createElement("img"),c.src=o,c},_getIconUrl:function(o){return rt.retina&&this.options[o+"RetinaUrl"]||this.options[o+"Url"]}});function RP(o){return new pi(o)}var Fl=pi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(o){return typeof Fl.imagePath!="string"&&(Fl.imagePath=this._detectIconPath()),(this.options.imagePath||Fl.imagePath)+pi.prototype._getIconUrl.call(this,o)},_stripUrl:function(o){var c=function(f,g,x){var C=g.exec(f);return C&&C[x]};return o=c(o,/^url\((['"])?(.+)\1\)$/,2),o&&c(o,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var o=Ct("div","leaflet-default-icon-path",document.body),c=ws(o,"background-image")||ws(o,"backgroundImage");if(document.body.removeChild(o),c=this._stripUrl(c),c)return c;var f=document.querySelector('link[href$="leaflet.css"]');return f?f.href.substring(0,f.href.length-11-1):""}}),pv=yn.extend({initialize:function(o){this._marker=o},addHooks:function(){var o=this._marker._icon;this._draggable||(this._draggable=new Yn(o,o,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),xt(o,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Xt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(o){var c=this._marker,f=c._map,g=this._marker.options.autoPanSpeed,x=this._marker.options.autoPanPadding,C=Pn(c._icon),F=f.getPixelBounds(),W=f.getPixelOrigin(),q=ut(F.min._subtract(W).add(x),F.max._subtract(W).subtract(x));if(!q.contains(C)){var Z=Y((Math.max(q.max.x,C.x)-q.max.x)/(F.max.x-q.max.x)-(Math.min(q.min.x,C.x)-q.min.x)/(F.min.x-q.min.x),(Math.max(q.max.y,C.y)-q.max.y)/(F.max.y-q.max.y)-(Math.min(q.min.y,C.y)-q.min.y)/(F.min.y-q.min.y)).multiplyBy(g);f.panBy(Z,{animate:!1}),this._draggable._newPos._add(Z),this._draggable._startPos._add(Z),mt(c._icon,this._draggable._newPos),this._onDrag(o),this._panRequest=D(this._adjustPan.bind(this,o))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(o){this._marker.options.autoPan&&(z(this._panRequest),this._panRequest=D(this._adjustPan.bind(this,o)))},_onDrag:function(o){var c=this._marker,f=c._shadow,g=Pn(c._icon),x=c._map.layerPointToLatLng(g);f&&mt(f,g),c._latlng=x,o.latlng=x,o.oldLatLng=this._oldLatLng,c.fire("move",o).fire("drag",o)},_onDragEnd:function(o){z(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",o)}}),ph=$t.extend({options:{icon:new Fl,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(o,c){S(this,c),this._latlng=at(o)},onAdd:function(o){this._zoomAnimated=this._zoomAnimated&&o.options.markerZoomAnimation,this._zoomAnimated&&o.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(o){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&o.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(o){var c=this._latlng;return this._latlng=at(o),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(o){return this.options.zIndexOffset=o,this.update()},getIcon:function(){return this.options.icon},setIcon:function(o){return this.options.icon=o,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var o=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(o)}return this},_initIcon:function(){var o=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),f=o.icon.createIcon(this._icon),g=!1;f!==this._icon&&(this._icon&&this._removeIcon(),g=!0,o.title&&(f.title=o.title),f.tagName==="IMG"&&(f.alt=o.alt||"")),xt(f,c),o.keyboard&&(f.tabIndex="0",f.setAttribute("role","button")),this._icon=f,o.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ht(f,"focus",this._panOnFocus,this);var x=o.icon.createShadow(this._shadow),C=!1;x!==this._shadow&&(this._removeShadow(),C=!0),x&&(xt(x,c),x.alt=""),this._shadow=x,o.opacity<1&&this._updateOpacity(),g&&this.getPane().appendChild(this._icon),this._initInteraction(),x&&C&&this.getPane(o.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Wt(this._icon,"focus",this._panOnFocus,this),qt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&qt(this._shadow),this._shadow=null},_setPos:function(o){this._icon&&mt(this._icon,o),this._shadow&&mt(this._shadow,o),this._zIndex=o.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(o){this._icon&&(this._icon.style.zIndex=this._zIndex+o)},_animateZoom:function(o){var c=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center).round();this._setPos(c)},_initInteraction:function(){if(this.options.interactive&&(xt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),pv)){var o=this.options.draggable;this.dragging&&(o=this.dragging.enabled(),this.dragging.disable()),this.dragging=new pv(this),o&&this.dragging.enable()}},setOpacity:function(o){return this.options.opacity=o,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var o=this.options.opacity;this._icon&&ae(this._icon,o),this._shadow&&ae(this._shadow,o)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var o=this._map;if(o){var c=this.options.icon.options,f=c.iconSize?Y(c.iconSize):Y(0,0),g=c.iconAnchor?Y(c.iconAnchor):Y(0,0);o.panInside(this._latlng,{paddingTopLeft:g,paddingBottomRight:f.subtract(g)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function NP(o,c){return new ph(o,c)}var Is=$t.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(o){this._renderer=o.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(o){return S(this,o),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&o&&Object.prototype.hasOwnProperty.call(o,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),mh=Is.extend({options:{fill:!0,radius:10},initialize:function(o,c){S(this,c),this._latlng=at(o),this._radius=this.options.radius},setLatLng:function(o){var c=this._latlng;return this._latlng=at(o),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(o){return this.options.radius=this._radius=o,this.redraw()},getRadius:function(){return this._radius},setStyle:function(o){var c=o&&o.radius||this._radius;return Is.prototype.setStyle.call(this,o),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var o=this._radius,c=this._radiusY||o,f=this._clickTolerance(),g=[o+f,c+f];this._pxBounds=new ot(this._point.subtract(g),this._point.add(g))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(o){return o.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function LP(o,c){return new mh(o,c)}var Pp=mh.extend({initialize:function(o,c,f){if(typeof c=="number"&&(c=s({},f,{radius:c})),S(this,c),this._latlng=at(o),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(o){return this._mRadius=o,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var o=[this._radius,this._radiusY||this._radius];return new wt(this._map.layerPointToLatLng(this._point.subtract(o)),this._map.layerPointToLatLng(this._point.add(o)))},setStyle:Is.prototype.setStyle,_project:function(){var o=this._latlng.lng,c=this._latlng.lat,f=this._map,g=f.options.crs;if(g.distance===hi.distance){var x=Math.PI/180,C=this._mRadius/hi.R/x,F=f.project([c+C,o]),W=f.project([c-C,o]),q=F.add(W).divideBy(2),Z=f.unproject(q).lat,et=Math.acos((Math.cos(C*x)-Math.sin(c*x)*Math.sin(Z*x))/(Math.cos(c*x)*Math.cos(Z*x)))/x;(isNaN(et)||et===0)&&(et=C/Math.cos(Math.PI/180*c)),this._point=q.subtract(f.getPixelOrigin()),this._radius=isNaN(et)?0:q.x-f.project([Z,o-et]).x,this._radiusY=q.y-F.y}else{var dt=g.unproject(g.project(this._latlng).subtract([this._mRadius,0]));this._point=f.latLngToLayerPoint(this._latlng),this._radius=this._point.x-f.latLngToLayerPoint(dt).x}this._updateBounds()}});function MP(o,c,f){return new Pp(o,c,f)}var Hi=Is.extend({options:{smoothFactor:1,noClip:!1},initialize:function(o,c){S(this,c),this._setLatLngs(o)},getLatLngs:function(){return this._latlngs},setLatLngs:function(o){return this._setLatLngs(o),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(o){for(var c=1/0,f=null,g=Rn,x,C,F=0,W=this._parts.length;F<W;F++)for(var q=this._parts[F],Z=1,et=q.length;Z<et;Z++){x=q[Z-1],C=q[Z];var dt=g(o,x,C,!0);dt<c&&(c=dt,f=g(o,x,C))}return f&&(f.distance=Math.sqrt(c)),f},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return T(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(o,c){return c=c||this._defaultShape(),o=at(o),c.push(o),this._bounds.extend(o),this.redraw()},_setLatLngs:function(o){this._bounds=new wt,this._latlngs=this._convertLatLngs(o)},_defaultShape:function(){return d(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(o){for(var c=[],f=d(o),g=0,x=o.length;g<x;g++)f?(c[g]=at(o[g]),this._bounds.extend(c[g])):c[g]=this._convertLatLngs(o[g]);return c},_project:function(){var o=new ot;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,o),this._bounds.isValid()&&o.isValid()&&(this._rawPxBounds=o,this._updateBounds())},_updateBounds:function(){var o=this._clickTolerance(),c=new K(o,o);this._rawPxBounds&&(this._pxBounds=new ot([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)]))},_projectLatlngs:function(o,c,f){var g=o[0]instanceof _t,x=o.length,C,F;if(g){for(F=[],C=0;C<x;C++)F[C]=this._map.latLngToLayerPoint(o[C]),f.extend(F[C]);c.push(F)}else for(C=0;C<x;C++)this._projectLatlngs(o[C],c,f)},_clipPoints:function(){var o=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}var c=this._parts,f,g,x,C,F,W,q;for(f=0,x=0,C=this._rings.length;f<C;f++)for(q=this._rings[f],g=0,F=q.length;g<F-1;g++)W=Lr(q[g],q[g+1],o,g,!0),W&&(c[x]=c[x]||[],c[x].push(W[0]),(W[1]!==q[g+1]||g===F-2)&&(c[x].push(W[1]),x++))}},_simplifyPoints:function(){for(var o=this._parts,c=this.options.smoothFactor,f=0,g=o.length;f<g;f++)o[f]=Dl(o[f],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(o,c){var f,g,x,C,F,W,q=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(f=0,C=this._parts.length;f<C;f++)for(W=this._parts[f],g=0,F=W.length,x=F-1;g<F;x=g++)if(!(!c&&g===0)&&jl(o,W[x],W[g])<=q)return!0;return!1}});function OP(o,c){return new Hi(o,c)}Hi._flat=v;var Qo=Hi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return $o(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(o){var c=Hi.prototype._convertLatLngs.call(this,o),f=c.length;return f>=2&&c[0]instanceof _t&&c[0].equals(c[f-1])&&c.pop(),c},_setLatLngs:function(o){Hi.prototype._setLatLngs.call(this,o),d(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return d(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var o=this._renderer._bounds,c=this.options.weight,f=new K(c,c);if(o=new ot(o.min.subtract(f),o.max.add(f)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}for(var g=0,x=this._rings.length,C;g<x;g++)C=Wo(this._rings[g],o,!0),C.length&&this._parts.push(C)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(o){var c=!1,f,g,x,C,F,W,q,Z;if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(C=0,q=this._parts.length;C<q;C++)for(f=this._parts[C],F=0,Z=f.length,W=Z-1;F<Z;W=F++)g=f[F],x=f[W],g.y>o.y!=x.y>o.y&&o.x<(x.x-g.x)*(o.y-g.y)/(x.y-g.y)+g.x&&(c=!c);return c||Hi.prototype._containsPoint.call(this,o,!0)}});function DP(o,c){return new Qo(o,c)}var Wi=he.extend({initialize:function(o,c){S(this,c),this._layers={},o&&this.addData(o)},addData:function(o){var c=R(o)?o:o.features,f,g,x;if(c){for(f=0,g=c.length;f<g;f++)x=c[f],(x.geometries||x.geometry||x.features||x.coordinates)&&this.addData(x);return this}var C=this.options;if(C.filter&&!C.filter(o))return this;var F=gh(o,C);return F?(F.feature=vh(o),F.defaultOptions=F.options,this.resetStyle(F),C.onEachFeature&&C.onEachFeature(o,F),this.addLayer(F)):this},resetStyle:function(o){return o===void 0?this.eachLayer(this.resetStyle,this):(o.options=s({},o.defaultOptions),this._setLayerStyle(o,this.options.style),this)},setStyle:function(o){return this.eachLayer(function(c){this._setLayerStyle(c,o)},this)},_setLayerStyle:function(o,c){o.setStyle&&(typeof c=="function"&&(c=c(o.feature)),o.setStyle(c))}});function gh(o,c){var f=o.type==="Feature"?o.geometry:o,g=f?f.coordinates:null,x=[],C=c&&c.pointToLayer,F=c&&c.coordsToLatLng||Ip,W,q,Z,et;if(!g&&!f)return null;switch(f.type){case"Point":return W=F(g),mv(C,o,W,c);case"MultiPoint":for(Z=0,et=g.length;Z<et;Z++)W=F(g[Z]),x.push(mv(C,o,W,c));return new he(x);case"LineString":case"MultiLineString":return q=_h(g,f.type==="LineString"?0:1,F),new Hi(q,c);case"Polygon":case"MultiPolygon":return q=_h(g,f.type==="Polygon"?1:2,F),new Qo(q,c);case"GeometryCollection":for(Z=0,et=f.geometries.length;Z<et;Z++){var dt=gh({geometry:f.geometries[Z],type:"Feature",properties:o.properties},c);dt&&x.push(dt)}return new he(x);case"FeatureCollection":for(Z=0,et=f.features.length;Z<et;Z++){var kt=gh(f.features[Z],c);kt&&x.push(kt)}return new he(x);default:throw new Error("Invalid GeoJSON object.")}}function mv(o,c,f,g){return o?o(c,f):new ph(f,g&&g.markersInheritOptions&&g)}function Ip(o){return new _t(o[1],o[0],o[2])}function _h(o,c,f){for(var g=[],x=0,C=o.length,F;x<C;x++)F=c?_h(o[x],c-1,f):(f||Ip)(o[x]),g.push(F);return g}function Cp(o,c){return o=at(o),o.alt!==void 0?[y(o.lng,c),y(o.lat,c),y(o.alt,c)]:[y(o.lng,c),y(o.lat,c)]}function yh(o,c,f,g){for(var x=[],C=0,F=o.length;C<F;C++)x.push(c?yh(o[C],d(o[C])?0:c-1,f,g):Cp(o[C],g));return!c&&f&&x.length>0&&x.push(x[0].slice()),x}function Yo(o,c){return o.feature?s({},o.feature,{geometry:c}):vh(c)}function vh(o){return o.type==="Feature"||o.type==="FeatureCollection"?o:{type:"Feature",properties:{},geometry:o}}var Ap={toGeoJSON:function(o){return Yo(this,{type:"Point",coordinates:Cp(this.getLatLng(),o)})}};ph.include(Ap),Pp.include(Ap),mh.include(Ap),Hi.include({toGeoJSON:function(o){var c=!d(this._latlngs),f=yh(this._latlngs,c?1:0,!1,o);return Yo(this,{type:(c?"Multi":"")+"LineString",coordinates:f})}}),Qo.include({toGeoJSON:function(o){var c=!d(this._latlngs),f=c&&!d(this._latlngs[0]),g=yh(this._latlngs,f?2:c?1:0,!0,o);return c||(g=[g]),Yo(this,{type:(f?"Multi":"")+"Polygon",coordinates:g})}}),ne.include({toMultiPoint:function(o){var c=[];return this.eachLayer(function(f){c.push(f.toGeoJSON(o).geometry.coordinates)}),Yo(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(o){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(c==="MultiPoint")return this.toMultiPoint(o);var f=c==="GeometryCollection",g=[];return this.eachLayer(function(x){if(x.toGeoJSON){var C=x.toGeoJSON(o);if(f)g.push(C.geometry);else{var F=vh(C);F.type==="FeatureCollection"?g.push.apply(g,F.features):g.push(F)}}}),f?Yo(this,{geometries:g,type:"GeometryCollection"}):{type:"FeatureCollection",features:g}}});function gv(o,c){return new Wi(o,c)}var jP=gv,xh=$t.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(o,c,f){this._url=o,this._bounds=St(c),S(this,f)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(xt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){qt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(o){return this.options.opacity=o,this._image&&this._updateOpacity(),this},setStyle:function(o){return o.opacity&&this.setOpacity(o.opacity),this},bringToFront:function(){return this._map&&Vi(this._image),this},bringToBack:function(){return this._map&&bs(this._image),this},setUrl:function(o){return this._url=o,this._image&&(this._image.src=o),this},setBounds:function(o){return this._bounds=St(o),this._map&&this._reset(),this},getEvents:function(){var o={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var o=this._url.tagName==="IMG",c=this._image=o?this._url:Ct("img");if(xt(c,"leaflet-image-layer"),this._zoomAnimated&&xt(c,"leaflet-zoom-animated"),this.options.className&&xt(c,this.options.className),c.onselectstart=_,c.onmousemove=_,c.onload=a(this.fire,this,"load"),c.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),o){this._url=c.src;return}c.src=this._url,c.alt=this.options.alt},_animateZoom:function(o){var c=this._map.getZoomScale(o.zoom),f=this._map._latLngBoundsToNewLayerBounds(this._bounds,o.zoom,o.center).min;di(this._image,f,c)},_reset:function(){var o=this._image,c=new ot(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),f=c.getSize();mt(o,c.min),o.style.width=f.x+"px",o.style.height=f.y+"px"},_updateOpacity:function(){ae(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var o=this.options.errorOverlayUrl;o&&this._url!==o&&(this._url=o,this._image.src=o)},getCenter:function(){return this._bounds.getCenter()}}),VP=function(o,c,f){return new xh(o,c,f)},_v=xh.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var o=this._url.tagName==="VIDEO",c=this._image=o?this._url:Ct("video");if(xt(c,"leaflet-image-layer"),this._zoomAnimated&&xt(c,"leaflet-zoom-animated"),this.options.className&&xt(c,this.options.className),c.onselectstart=_,c.onmousemove=_,c.onloadeddata=a(this.fire,this,"load"),o){for(var f=c.getElementsByTagName("source"),g=[],x=0;x<f.length;x++)g.push(f[x].src);this._url=f.length>0?g:[c.src];return}R(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var C=0;C<this._url.length;C++){var F=Ct("source");F.src=this._url[C],c.appendChild(F)}}});function FP(o,c,f){return new _v(o,c,f)}var yv=xh.extend({_initImage:function(){var o=this._image=this._url;xt(o,"leaflet-image-layer"),this._zoomAnimated&&xt(o,"leaflet-zoom-animated"),this.options.className&&xt(o,this.options.className),o.onselectstart=_,o.onmousemove=_}});function zP(o,c,f){return new yv(o,c,f)}var mi=$t.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(o,c){o&&(o instanceof _t||R(o))?(this._latlng=at(o),S(this,c)):(S(this,o),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(o){return o=arguments.length?o:this._source._map,o.hasLayer(this)||o.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(o){return this._map?this.close():(arguments.length?this._source=o:o=this._source,this._prepareOpen(),this.openOn(o._map)),this},onAdd:function(o){this._zoomAnimated=o._zoomAnimated,this._container||this._initLayout(),o._fadeAnimated&&ae(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),o._fadeAnimated&&ae(this._container,1),this.bringToFront(),this.options.interactive&&(xt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(o){o._fadeAnimated?(ae(this._container,0),this._removeTimeout=setTimeout(a(qt,void 0,this._container),200)):qt(this._container),this.options.interactive&&(Xt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(o){return this._latlng=at(o),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(o){return this._content=o,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var o={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Vi(this._container),this},bringToBack:function(){return this._map&&bs(this._container),this},_prepareOpen:function(o){var c=this._source;if(!c._map)return!1;if(c instanceof he){c=null;var f=this._source._layers;for(var g in f)if(f[g]._map){c=f[g];break}if(!c)return!1;this._source=c}if(!o)if(c.getCenter)o=c.getCenter();else if(c.getLatLng)o=c.getLatLng();else if(c.getBounds)o=c.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(o),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var o=this._contentNode,c=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof c=="string")o.innerHTML=c;else{for(;o.hasChildNodes();)o.removeChild(o.firstChild);o.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var o=this._map.latLngToLayerPoint(this._latlng),c=Y(this.options.offset),f=this._getAnchor();this._zoomAnimated?mt(this._container,o.add(f)):c=c.add(o).add(f);var g=this._containerBottom=-c.y,x=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=g+"px",this._container.style.left=x+"px"}},_getAnchor:function(){return[0,0]}});Pt.include({_initOverlay:function(o,c,f,g){var x=c;return x instanceof o||(x=new o(g).setContent(c)),f&&x.setLatLng(f),x}}),$t.include({_initOverlay:function(o,c,f,g){var x=f;return x instanceof o?(S(x,g),x._source=this):(x=c&&!g?c:new o(g,this),x.setContent(f)),x}});var wh=mi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(o){return o=arguments.length?o:this._source._map,!o.hasLayer(this)&&o._popup&&o._popup.options.autoClose&&o.removeLayer(o._popup),o._popup=this,mi.prototype.openOn.call(this,o)},onAdd:function(o){mi.prototype.onAdd.call(this,o),o.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Is||this._source.on("preclick",An))},onRemove:function(o){mi.prototype.onRemove.call(this,o),o.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Is||this._source.off("preclick",An))},getEvents:function(){var o=mi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(o.preclick=this.close),this.options.keepInView&&(o.moveend=this._adjustPan),o},_initLayout:function(){var o="leaflet-popup",c=this._container=Ct("div",o+" "+(this.options.className||"")+" leaflet-zoom-animated"),f=this._wrapper=Ct("div",o+"-content-wrapper",c);if(this._contentNode=Ct("div",o+"-content",f),Ss(c),Es(this._contentNode),ht(c,"contextmenu",An),this._tipContainer=Ct("div",o+"-tip-container",c),this._tip=Ct("div",o+"-tip",this._tipContainer),this.options.closeButton){var g=this._closeButton=Ct("a",o+"-close-button",c);g.setAttribute("role","button"),g.setAttribute("aria-label","Close popup"),g.href="#close",g.innerHTML='<span aria-hidden="true">&#215;</span>',ht(g,"click",function(x){ee(x),this.close()},this)}},_updateLayout:function(){var o=this._contentNode,c=o.style;c.width="",c.whiteSpace="nowrap";var f=o.offsetWidth;f=Math.min(f,this.options.maxWidth),f=Math.max(f,this.options.minWidth),c.width=f+1+"px",c.whiteSpace="",c.height="";var g=o.offsetHeight,x=this.options.maxHeight,C="leaflet-popup-scrolled";x&&g>x?(c.height=x+"px",xt(o,C)):Xt(o,C),this._containerWidth=this._container.offsetWidth},_animateZoom:function(o){var c=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center),f=this._getAnchor();mt(this._container,c.add(f))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var o=this._map,c=parseInt(ws(this._container,"marginBottom"),10)||0,f=this._container.offsetHeight+c,g=this._containerWidth,x=new K(this._containerLeft,-f-this._containerBottom);x._add(Pn(this._container));var C=o.layerPointToContainerPoint(x),F=Y(this.options.autoPanPadding),W=Y(this.options.autoPanPaddingTopLeft||F),q=Y(this.options.autoPanPaddingBottomRight||F),Z=o.getSize(),et=0,dt=0;C.x+g+q.x>Z.x&&(et=C.x+g-Z.x+q.x),C.x-et-W.x<0&&(et=C.x-W.x),C.y+f+q.y>Z.y&&(dt=C.y+f-Z.y+q.y),C.y-dt-W.y<0&&(dt=C.y-W.y),(et||dt)&&(this.options.keepInView&&(this._autopanning=!0),o.fire("autopanstart").panBy([et,dt]))}},_getAnchor:function(){return Y(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),BP=function(o,c){return new wh(o,c)};Pt.mergeOptions({closePopupOnClick:!0}),Pt.include({openPopup:function(o,c,f){return this._initOverlay(wh,o,c,f).openOn(this),this},closePopup:function(o){return o=arguments.length?o:this._popup,o&&o.close(),this}}),$t.include({bindPopup:function(o,c){return this._popup=this._initOverlay(wh,this._popup,o,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(o){return this._popup&&(this instanceof he||(this._popup._source=this),this._popup._prepareOpen(o||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(o){return this._popup&&this._popup.setContent(o),this},getPopup:function(){return this._popup},_openPopup:function(o){if(!(!this._popup||!this._map)){_n(o);var c=o.layer||o.target;if(this._popup._source===c&&!(c instanceof Is)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(o.latlng);return}this._popup._source=c,this.openPopup(o.latlng)}},_movePopup:function(o){this._popup.setLatLng(o.latlng)},_onKeyPress:function(o){o.originalEvent.keyCode===13&&this._openPopup(o)}});var bh=mi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(o){mi.prototype.onAdd.call(this,o),this.setOpacity(this.options.opacity),o.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(o){mi.prototype.onRemove.call(this,o),o.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var o=mi.prototype.getEvents.call(this);return this.options.permanent||(o.preclick=this.close),o},_initLayout:function(){var o="leaflet-tooltip",c=o+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ct("div",c),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+u(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(o){var c,f,g=this._map,x=this._container,C=g.latLngToContainerPoint(g.getCenter()),F=g.layerPointToContainerPoint(o),W=this.options.direction,q=x.offsetWidth,Z=x.offsetHeight,et=Y(this.options.offset),dt=this._getAnchor();W==="top"?(c=q/2,f=Z):W==="bottom"?(c=q/2,f=0):W==="center"?(c=q/2,f=Z/2):W==="right"?(c=0,f=Z/2):W==="left"?(c=q,f=Z/2):F.x<C.x?(W="right",c=0,f=Z/2):(W="left",c=q+(et.x+dt.x)*2,f=Z/2),o=o.subtract(Y(c,f,!0)).add(et).add(dt),Xt(x,"leaflet-tooltip-right"),Xt(x,"leaflet-tooltip-left"),Xt(x,"leaflet-tooltip-top"),Xt(x,"leaflet-tooltip-bottom"),xt(x,"leaflet-tooltip-"+W),mt(x,o)},_updatePosition:function(){var o=this._map.latLngToLayerPoint(this._latlng);this._setPosition(o)},setOpacity:function(o){this.options.opacity=o,this._container&&ae(this._container,o)},_animateZoom:function(o){var c=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center);this._setPosition(c)},_getAnchor:function(){return Y(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),UP=function(o,c){return new bh(o,c)};Pt.include({openTooltip:function(o,c,f){return this._initOverlay(bh,o,c,f).openOn(this),this},closeTooltip:function(o){return o.close(),this}}),$t.include({bindTooltip:function(o,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(bh,this._tooltip,o,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(o){if(!(!o&&this._tooltipHandlersAdded)){var c=o?"off":"on",f={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?f.add=this._openTooltip:(f.mouseover=this._openTooltip,f.mouseout=this.closeTooltip,f.click=this._openTooltip,this._map?this._addFocusListeners():f.add=this._addFocusListeners),this._tooltip.options.sticky&&(f.mousemove=this._moveTooltip),this[c](f),this._tooltipHandlersAdded=!o}},openTooltip:function(o){return this._tooltip&&(this instanceof he||(this._tooltip._source=this),this._tooltip._prepareOpen(o)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(o){return this._tooltip&&this._tooltip.setContent(o),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(o){var c=typeof o.getElement=="function"&&o.getElement();c&&(ht(c,"focus",function(){this._tooltip._source=o,this.openTooltip()},this),ht(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(o){var c=typeof o.getElement=="function"&&o.getElement();c&&c.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(o){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var c=this;this._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(o)});return}this._tooltip._source=o.layer||o.target,this.openTooltip(this._tooltip.options.sticky?o.latlng:void 0)}},_moveTooltip:function(o){var c=o.latlng,f,g;this._tooltip.options.sticky&&o.originalEvent&&(f=this._map.mouseEventToContainerPoint(o.originalEvent),g=this._map.containerPointToLayerPoint(f),c=this._map.layerPointToLatLng(g)),this._tooltip.setLatLng(c)}});var vv=pi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(o){var c=o&&o.tagName==="DIV"?o:document.createElement("div"),f=this.options;if(f.html instanceof Element?(Rr(c),c.appendChild(f.html)):c.innerHTML=f.html!==!1?f.html:"",f.bgPos){var g=Y(f.bgPos);c.style.backgroundPosition=-g.x+"px "+-g.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}});function HP(o){return new vv(o)}pi.Default=Fl;var zl=$t.extend({options:{tileSize:256,opacity:1,updateWhenIdle:rt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(o){S(this,o)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(o){o._addZoomLimit(this)},onRemove:function(o){this._removeAllTiles(),qt(this._container),o._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Vi(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(bs(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(o){return this.options.opacity=o,this._updateOpacity(),this},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var o=this._clampZoom(this._map.getZoom());o!==this._tileZoom&&(this._tileZoom=o,this._updateLevels()),this._update()}return this},getEvents:function(){var o={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=h(this._onMoveEnd,this.options.updateInterval,this)),o.move=this._onMove),this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},createTile:function(){return document.createElement("div")},getTileSize:function(){var o=this.options.tileSize;return o instanceof K?o:new K(o,o)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(o){for(var c=this.getPane().children,f=-o(-1/0,1/0),g=0,x=c.length,C;g<x;g++)C=c[g].style.zIndex,c[g]!==this._container&&C&&(f=o(f,+C));isFinite(f)&&(this.options.zIndex=f+o(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!rt.ielt9){ae(this._container,this.options.opacity);var o=+new Date,c=!1,f=!1;for(var g in this._tiles){var x=this._tiles[g];if(!(!x.current||!x.loaded)){var C=Math.min(1,(o-x.loaded)/200);ae(x.el,C),C<1?c=!0:(x.active?f=!0:this._onOpaqueTile(x),x.active=!0)}}f&&!this._noPrune&&this._pruneTiles(),c&&(z(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this))}},_onOpaqueTile:_,_initContainer:function(){this._container||(this._container=Ct("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var o=this._tileZoom,c=this.options.maxZoom;if(o!==void 0){for(var f in this._levels)f=Number(f),this._levels[f].el.children.length||f===o?(this._levels[f].el.style.zIndex=c-Math.abs(o-f),this._onUpdateLevel(f)):(qt(this._levels[f].el),this._removeTilesAtZoom(f),this._onRemoveLevel(f),delete this._levels[f]);var g=this._levels[o],x=this._map;return g||(g=this._levels[o]={},g.el=Ct("div","leaflet-tile-container leaflet-zoom-animated",this._container),g.el.style.zIndex=c,g.origin=x.project(x.unproject(x.getPixelOrigin()),o).round(),g.zoom=o,this._setZoomTransform(g,x.getCenter(),x.getZoom()),_(g.el.offsetWidth),this._onCreateLevel(g)),this._level=g,g}},_onUpdateLevel:_,_onRemoveLevel:_,_onCreateLevel:_,_pruneTiles:function(){if(this._map){var o,c,f=this._map.getZoom();if(f>this.options.maxZoom||f<this.options.minZoom){this._removeAllTiles();return}for(o in this._tiles)c=this._tiles[o],c.retain=c.current;for(o in this._tiles)if(c=this._tiles[o],c.current&&!c.active){var g=c.coords;this._retainParent(g.x,g.y,g.z,g.z-5)||this._retainChildren(g.x,g.y,g.z,g.z+2)}for(o in this._tiles)this._tiles[o].retain||this._removeTile(o)}},_removeTilesAtZoom:function(o){for(var c in this._tiles)this._tiles[c].coords.z===o&&this._removeTile(c)},_removeAllTiles:function(){for(var o in this._tiles)this._removeTile(o)},_invalidateAll:function(){for(var o in this._levels)qt(this._levels[o].el),this._onRemoveLevel(Number(o)),delete this._levels[o];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(o,c,f,g){var x=Math.floor(o/2),C=Math.floor(c/2),F=f-1,W=new K(+x,+C);W.z=+F;var q=this._tileCoordsToKey(W),Z=this._tiles[q];return Z&&Z.active?(Z.retain=!0,!0):(Z&&Z.loaded&&(Z.retain=!0),F>g?this._retainParent(x,C,F,g):!1)},_retainChildren:function(o,c,f,g){for(var x=2*o;x<2*o+2;x++)for(var C=2*c;C<2*c+2;C++){var F=new K(x,C);F.z=f+1;var W=this._tileCoordsToKey(F),q=this._tiles[W];if(q&&q.active){q.retain=!0;continue}else q&&q.loaded&&(q.retain=!0);f+1<g&&this._retainChildren(x,C,f+1,g)}},_resetView:function(o){var c=o&&(o.pinch||o.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),c,c)},_animateZoom:function(o){this._setView(o.center,o.zoom,!0,o.noUpdate)},_clampZoom:function(o){var c=this.options;return c.minNativeZoom!==void 0&&o<c.minNativeZoom?c.minNativeZoom:c.maxNativeZoom!==void 0&&c.maxNativeZoom<o?c.maxNativeZoom:o},_setView:function(o,c,f,g){var x=Math.round(c);this.options.maxZoom!==void 0&&x>this.options.maxZoom||this.options.minZoom!==void 0&&x<this.options.minZoom?x=void 0:x=this._clampZoom(x);var C=this.options.updateWhenZooming&&x!==this._tileZoom;(!g||C)&&(this._tileZoom=x,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),x!==void 0&&this._update(o),f||this._pruneTiles(),this._noPrune=!!f),this._setZoomTransforms(o,c)},_setZoomTransforms:function(o,c){for(var f in this._levels)this._setZoomTransform(this._levels[f],o,c)},_setZoomTransform:function(o,c,f){var g=this._map.getZoomScale(f,o.zoom),x=o.origin.multiplyBy(g).subtract(this._map._getNewPixelOrigin(c,f)).round();rt.any3d?di(o.el,x,g):mt(o.el,x)},_resetGrid:function(){var o=this._map,c=o.options.crs,f=this._tileSize=this.getTileSize(),g=this._tileZoom,x=this._map.getPixelWorldBounds(this._tileZoom);x&&(this._globalTileRange=this._pxBoundsToTileRange(x)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(o.project([0,c.wrapLng[0]],g).x/f.x),Math.ceil(o.project([0,c.wrapLng[1]],g).x/f.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(o.project([c.wrapLat[0],0],g).y/f.x),Math.ceil(o.project([c.wrapLat[1],0],g).y/f.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(o){var c=this._map,f=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),g=c.getZoomScale(f,this._tileZoom),x=c.project(o,this._tileZoom).floor(),C=c.getSize().divideBy(g*2);return new ot(x.subtract(C),x.add(C))},_update:function(o){var c=this._map;if(c){var f=this._clampZoom(c.getZoom());if(o===void 0&&(o=c.getCenter()),this._tileZoom!==void 0){var g=this._getTiledPixelBounds(o),x=this._pxBoundsToTileRange(g),C=x.getCenter(),F=[],W=this.options.keepBuffer,q=new ot(x.getBottomLeft().subtract([W,-W]),x.getTopRight().add([W,-W]));if(!(isFinite(x.min.x)&&isFinite(x.min.y)&&isFinite(x.max.x)&&isFinite(x.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Z in this._tiles){var et=this._tiles[Z].coords;(et.z!==this._tileZoom||!q.contains(new K(et.x,et.y)))&&(this._tiles[Z].current=!1)}if(Math.abs(f-this._tileZoom)>1){this._setView(o,f);return}for(var dt=x.min.y;dt<=x.max.y;dt++)for(var kt=x.min.x;kt<=x.max.x;kt++){var tn=new K(kt,dt);if(tn.z=this._tileZoom,!!this._isValidTile(tn)){var Ce=this._tiles[this._tileCoordsToKey(tn)];Ce?Ce.current=!0:F.push(tn)}}if(F.sort(function(ln,Jo){return ln.distanceTo(C)-Jo.distanceTo(C)}),F.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Nn=document.createDocumentFragment();for(kt=0;kt<F.length;kt++)this._addTile(F[kt],Nn);this._level.el.appendChild(Nn)}}}},_isValidTile:function(o){var c=this._map.options.crs;if(!c.infinite){var f=this._globalTileRange;if(!c.wrapLng&&(o.x<f.min.x||o.x>f.max.x)||!c.wrapLat&&(o.y<f.min.y||o.y>f.max.y))return!1}if(!this.options.bounds)return!0;var g=this._tileCoordsToBounds(o);return St(this.options.bounds).overlaps(g)},_keyToBounds:function(o){return this._tileCoordsToBounds(this._keyToTileCoords(o))},_tileCoordsToNwSe:function(o){var c=this._map,f=this.getTileSize(),g=o.scaleBy(f),x=g.add(f),C=c.unproject(g,o.z),F=c.unproject(x,o.z);return[C,F]},_tileCoordsToBounds:function(o){var c=this._tileCoordsToNwSe(o),f=new wt(c[0],c[1]);return this.options.noWrap||(f=this._map.wrapLatLngBounds(f)),f},_tileCoordsToKey:function(o){return o.x+":"+o.y+":"+o.z},_keyToTileCoords:function(o){var c=o.split(":"),f=new K(+c[0],+c[1]);return f.z=+c[2],f},_removeTile:function(o){var c=this._tiles[o];c&&(qt(c.el),delete this._tiles[o],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(o)}))},_initTile:function(o){xt(o,"leaflet-tile");var c=this.getTileSize();o.style.width=c.x+"px",o.style.height=c.y+"px",o.onselectstart=_,o.onmousemove=_,rt.ielt9&&this.options.opacity<1&&ae(o,this.options.opacity)},_addTile:function(o,c){var f=this._getTilePos(o),g=this._tileCoordsToKey(o),x=this.createTile(this._wrapCoords(o),a(this._tileReady,this,o));this._initTile(x),this.createTile.length<2&&D(a(this._tileReady,this,o,null,x)),mt(x,f),this._tiles[g]={el:x,coords:o,current:!0},c.appendChild(x),this.fire("tileloadstart",{tile:x,coords:o})},_tileReady:function(o,c,f){c&&this.fire("tileerror",{error:c,tile:f,coords:o});var g=this._tileCoordsToKey(o);f=this._tiles[g],f&&(f.loaded=+new Date,this._map._fadeAnimated?(ae(f.el,0),z(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this)):(f.active=!0,this._pruneTiles()),c||(xt(f.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:f.el,coords:o})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),rt.ielt9||!this._map._fadeAnimated?D(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(o){return o.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(o){var c=new K(this._wrapX?p(o.x,this._wrapX):o.x,this._wrapY?p(o.y,this._wrapY):o.y);return c.z=o.z,c},_pxBoundsToTileRange:function(o){var c=this.getTileSize();return new ot(o.min.unscaleBy(c).floor(),o.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var o in this._tiles)if(!this._tiles[o].loaded)return!1;return!0}});function WP(o){return new zl(o)}var Xo=zl.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(o,c){this._url=o,c=S(this,c),c.detectRetina&&rt.retina&&c.maxZoom>0?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),typeof c.subdomains=="string"&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(o,c){return this._url===o&&c===void 0&&(c=!0),this._url=o,c||this.redraw(),this},createTile:function(o,c){var f=document.createElement("img");return ht(f,"load",a(this._tileOnLoad,this,c,f)),ht(f,"error",a(this._tileOnError,this,c,f)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(f.referrerPolicy=this.options.referrerPolicy),f.alt="",f.src=this.getTileUrl(o),f},getTileUrl:function(o){var c={r:rt.retina?"@2x":"",s:this._getSubdomain(o),x:o.x,y:o.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var f=this._globalTileRange.max.y-o.y;this.options.tms&&(c.y=f),c["-y"]=f}return I(this._url,s(c,this.options))},_tileOnLoad:function(o,c){rt.ielt9?setTimeout(a(o,this,null,c),0):o(null,c)},_tileOnError:function(o,c,f){var g=this.options.errorTileUrl;g&&c.getAttribute("src")!==g&&(c.src=g),o(f,c)},_onTileRemove:function(o){o.tile.onload=null},_getZoomForUrl:function(){var o=this._tileZoom,c=this.options.maxZoom,f=this.options.zoomReverse,g=this.options.zoomOffset;return f&&(o=c-o),o+g},_getSubdomain:function(o){var c=Math.abs(o.x+o.y)%this.options.subdomains.length;return this.options.subdomains[c]},_abortLoading:function(){var o,c;for(o in this._tiles)if(this._tiles[o].coords.z!==this._tileZoom&&(c=this._tiles[o].el,c.onload=_,c.onerror=_,!c.complete)){c.src=B;var f=this._tiles[o].coords;qt(c),delete this._tiles[o],this.fire("tileabort",{tile:c,coords:f})}},_removeTile:function(o){var c=this._tiles[o];if(c)return c.el.setAttribute("src",B),zl.prototype._removeTile.call(this,o)},_tileReady:function(o,c,f){if(!(!this._map||f&&f.getAttribute("src")===B))return zl.prototype._tileReady.call(this,o,c,f)}});function xv(o,c){return new Xo(o,c)}var wv=Xo.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(o,c){this._url=o;var f=s({},this.defaultWmsParams);for(var g in c)g in this.options||(f[g]=c[g]);c=S(this,c);var x=c.detectRetina&&rt.retina?2:1,C=this.getTileSize();f.width=C.x*x,f.height=C.y*x,this.wmsParams=f},onAdd:function(o){this._crs=this.options.crs||o.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[c]=this._crs.code,Xo.prototype.onAdd.call(this,o)},getTileUrl:function(o){var c=this._tileCoordsToNwSe(o),f=this._crs,g=ut(f.project(c[0]),f.project(c[1])),x=g.min,C=g.max,F=(this._wmsVersion>=1.3&&this._crs===ge?[x.y,x.x,C.y,C.x]:[x.x,x.y,C.x,C.y]).join(","),W=Xo.prototype.getTileUrl.call(this,o);return W+k(this.wmsParams,W,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+F},setParams:function(o,c){return s(this.wmsParams,o),c||this.redraw(),this}});function $P(o,c){return new wv(o,c)}Xo.WMS=wv,xv.wms=$P;var $i=$t.extend({options:{padding:.1},initialize:function(o){S(this,o),u(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),xt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var o={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(o.zoomanim=this._onAnimZoom),o},_onAnimZoom:function(o){this._updateTransform(o.center,o.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(o,c){var f=this._map.getZoomScale(c,this._zoom),g=this._map.getSize().multiplyBy(.5+this.options.padding),x=this._map.project(this._center,c),C=g.multiplyBy(-f).add(x).subtract(this._map._getNewPixelOrigin(o,c));rt.any3d?di(this._container,C,f):mt(this._container,C)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var o in this._layers)this._layers[o]._reset()},_onZoomEnd:function(){for(var o in this._layers)this._layers[o]._project()},_updatePaths:function(){for(var o in this._layers)this._layers[o]._update()},_update:function(){var o=this.options.padding,c=this._map.getSize(),f=this._map.containerPointToLayerPoint(c.multiplyBy(-o)).round();this._bounds=new ot(f,f.add(c.multiplyBy(1+o*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),bv=$i.extend({options:{tolerance:0},getEvents:function(){var o=$i.prototype.getEvents.call(this);return o.viewprereset=this._onViewPreReset,o},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){$i.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var o=this._container=document.createElement("canvas");ht(o,"mousemove",this._onMouseMove,this),ht(o,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ht(o,"mouseout",this._handleMouseOut,this),o._leaflet_disable_events=!0,this._ctx=o.getContext("2d")},_destroyContainer:function(){z(this._redrawRequest),delete this._ctx,qt(this._container),Wt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var o;this._redrawBounds=null;for(var c in this._layers)o=this._layers[c],o._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){$i.prototype._update.call(this);var o=this._bounds,c=this._container,f=o.getSize(),g=rt.retina?2:1;mt(c,o.min),c.width=g*f.x,c.height=g*f.y,c.style.width=f.x+"px",c.style.height=f.y+"px",rt.retina&&this._ctx.scale(2,2),this._ctx.translate(-o.min.x,-o.min.y),this.fire("update")}},_reset:function(){$i.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(o){this._updateDashArray(o),this._layers[u(o)]=o;var c=o._order={layer:o,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=c),this._drawLast=c,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(o){this._requestRedraw(o)},_removePath:function(o){var c=o._order,f=c.next,g=c.prev;f?f.prev=g:this._drawLast=g,g?g.next=f:this._drawFirst=f,delete o._order,delete this._layers[u(o)],this._requestRedraw(o)},_updatePath:function(o){this._extendRedrawBounds(o),o._project(),o._update(),this._requestRedraw(o)},_updateStyle:function(o){this._updateDashArray(o),this._requestRedraw(o)},_updateDashArray:function(o){if(typeof o.options.dashArray=="string"){var c=o.options.dashArray.split(/[, ]+/),f=[],g,x;for(x=0;x<c.length;x++){if(g=Number(c[x]),isNaN(g))return;f.push(g)}o.options._dashArray=f}else o.options._dashArray=o.options.dashArray},_requestRedraw:function(o){this._map&&(this._extendRedrawBounds(o),this._redrawRequest=this._redrawRequest||D(this._redraw,this))},_extendRedrawBounds:function(o){if(o._pxBounds){var c=(o.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ot,this._redrawBounds.extend(o._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(o._pxBounds.max.add([c,c]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var o=this._redrawBounds;if(o){var c=o.getSize();this._ctx.clearRect(o.min.x,o.min.y,c.x,c.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var o,c=this._redrawBounds;if(this._ctx.save(),c){var f=c.getSize();this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,f.x,f.y),this._ctx.clip()}this._drawing=!0;for(var g=this._drawFirst;g;g=g.next)o=g.layer,(!c||o._pxBounds&&o._pxBounds.intersects(c))&&o._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(o,c){if(this._drawing){var f,g,x,C,F=o._parts,W=F.length,q=this._ctx;if(W){for(q.beginPath(),f=0;f<W;f++){for(g=0,x=F[f].length;g<x;g++)C=F[f][g],q[g?"lineTo":"moveTo"](C.x,C.y);c&&q.closePath()}this._fillStroke(q,o)}}},_updateCircle:function(o){if(!(!this._drawing||o._empty())){var c=o._point,f=this._ctx,g=Math.max(Math.round(o._radius),1),x=(Math.max(Math.round(o._radiusY),1)||g)/g;x!==1&&(f.save(),f.scale(1,x)),f.beginPath(),f.arc(c.x,c.y/x,g,0,Math.PI*2,!1),x!==1&&f.restore(),this._fillStroke(f,o)}},_fillStroke:function(o,c){var f=c.options;f.fill&&(o.globalAlpha=f.fillOpacity,o.fillStyle=f.fillColor||f.color,o.fill(f.fillRule||"evenodd")),f.stroke&&f.weight!==0&&(o.setLineDash&&o.setLineDash(c.options&&c.options._dashArray||[]),o.globalAlpha=f.opacity,o.lineWidth=f.weight,o.strokeStyle=f.color,o.lineCap=f.lineCap,o.lineJoin=f.lineJoin,o.stroke())},_onClick:function(o){for(var c=this._map.mouseEventToLayerPoint(o),f,g,x=this._drawFirst;x;x=x.next)f=x.layer,f.options.interactive&&f._containsPoint(c)&&(!(o.type==="click"||o.type==="preclick")||!this._map._draggableMoved(f))&&(g=f);this._fireEvent(g?[g]:!1,o)},_onMouseMove:function(o){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var c=this._map.mouseEventToLayerPoint(o);this._handleMouseHover(o,c)}},_handleMouseOut:function(o){var c=this._hoveredLayer;c&&(Xt(this._container,"leaflet-interactive"),this._fireEvent([c],o,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(o,c){if(!this._mouseHoverThrottled){for(var f,g,x=this._drawFirst;x;x=x.next)f=x.layer,f.options.interactive&&f._containsPoint(c)&&(g=f);g!==this._hoveredLayer&&(this._handleMouseOut(o),g&&(xt(this._container,"leaflet-interactive"),this._fireEvent([g],o,"mouseover"),this._hoveredLayer=g)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,o),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(o,c,f){this._map._fireDOMEvent(c,f||c.type,o)},_bringToFront:function(o){var c=o._order;if(c){var f=c.next,g=c.prev;if(f)f.prev=g;else return;g?g.next=f:f&&(this._drawFirst=f),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(o)}},_bringToBack:function(o){var c=o._order;if(c){var f=c.next,g=c.prev;if(g)g.next=f;else return;f?f.prev=g:g&&(this._drawLast=g),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(o)}}});function Tv(o){return rt.canvas?new bv(o):null}var Bl=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(o){return document.createElement("<lvml:"+o+' class="lvml">')}}catch{}return function(o){return document.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),qP={_initContainer:function(){this._container=Ct("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||($i.prototype._update.call(this),this.fire("update"))},_initPath:function(o){var c=o._container=Bl("shape");xt(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",o._path=Bl("path"),c.appendChild(o._path),this._updateStyle(o),this._layers[u(o)]=o},_addPath:function(o){var c=o._container;this._container.appendChild(c),o.options.interactive&&o.addInteractiveTarget(c)},_removePath:function(o){var c=o._container;qt(c),o.removeInteractiveTarget(c),delete this._layers[u(o)]},_updateStyle:function(o){var c=o._stroke,f=o._fill,g=o.options,x=o._container;x.stroked=!!g.stroke,x.filled=!!g.fill,g.stroke?(c||(c=o._stroke=Bl("stroke")),x.appendChild(c),c.weight=g.weight+"px",c.color=g.color,c.opacity=g.opacity,g.dashArray?c.dashStyle=R(g.dashArray)?g.dashArray.join(" "):g.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=g.lineCap.replace("butt","flat"),c.joinstyle=g.lineJoin):c&&(x.removeChild(c),o._stroke=null),g.fill?(f||(f=o._fill=Bl("fill")),x.appendChild(f),f.color=g.fillColor||g.color,f.opacity=g.fillOpacity):f&&(x.removeChild(f),o._fill=null)},_updateCircle:function(o){var c=o._point.round(),f=Math.round(o._radius),g=Math.round(o._radiusY||f);this._setPath(o,o._empty()?"M0 0":"AL "+c.x+","+c.y+" "+f+","+g+" 0,"+65535*360)},_setPath:function(o,c){o._path.v=c},_bringToFront:function(o){Vi(o._container)},_bringToBack:function(o){bs(o._container)}},Th=rt.vml?Bl:To,Ul=$i.extend({_initContainer:function(){this._container=Th("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Th("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){qt(this._container),Wt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){$i.prototype._update.call(this);var o=this._bounds,c=o.getSize(),f=this._container;(!this._svgSize||!this._svgSize.equals(c))&&(this._svgSize=c,f.setAttribute("width",c.x),f.setAttribute("height",c.y)),mt(f,o.min),f.setAttribute("viewBox",[o.min.x,o.min.y,c.x,c.y].join(" ")),this.fire("update")}},_initPath:function(o){var c=o._path=Th("path");o.options.className&&xt(c,o.options.className),o.options.interactive&&xt(c,"leaflet-interactive"),this._updateStyle(o),this._layers[u(o)]=o},_addPath:function(o){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(o._path),o.addInteractiveTarget(o._path)},_removePath:function(o){qt(o._path),o.removeInteractiveTarget(o._path),delete this._layers[u(o)]},_updatePath:function(o){o._project(),o._update()},_updateStyle:function(o){var c=o._path,f=o.options;c&&(f.stroke?(c.setAttribute("stroke",f.color),c.setAttribute("stroke-opacity",f.opacity),c.setAttribute("stroke-width",f.weight),c.setAttribute("stroke-linecap",f.lineCap),c.setAttribute("stroke-linejoin",f.lineJoin),f.dashArray?c.setAttribute("stroke-dasharray",f.dashArray):c.removeAttribute("stroke-dasharray"),f.dashOffset?c.setAttribute("stroke-dashoffset",f.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),f.fill?(c.setAttribute("fill",f.fillColor||f.color),c.setAttribute("fill-opacity",f.fillOpacity),c.setAttribute("fill-rule",f.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(o,c){this._setPath(o,ll(o._parts,c))},_updateCircle:function(o){var c=o._point,f=Math.max(Math.round(o._radius),1),g=Math.max(Math.round(o._radiusY),1)||f,x="a"+f+","+g+" 0 1,0 ",C=o._empty()?"M0 0":"M"+(c.x-f)+","+c.y+x+f*2+",0 "+x+-f*2+",0 ";this._setPath(o,C)},_setPath:function(o,c){o._path.setAttribute("d",c)},_bringToFront:function(o){Vi(o._path)},_bringToBack:function(o){bs(o._path)}});rt.vml&&Ul.include(qP);function Ev(o){return rt.svg||rt.vml?new Ul(o):null}Pt.include({getRenderer:function(o){var c=o.options.renderer||this._getPaneRenderer(o.options.pane)||this.options.renderer||this._renderer;return c||(c=this._renderer=this._createRenderer()),this.hasLayer(c)||this.addLayer(c),c},_getPaneRenderer:function(o){if(o==="overlayPane"||o===void 0)return!1;var c=this._paneRenderers[o];return c===void 0&&(c=this._createRenderer({pane:o}),this._paneRenderers[o]=c),c},_createRenderer:function(o){return this.options.preferCanvas&&Tv(o)||Ev(o)}});var Sv=Qo.extend({initialize:function(o,c){Qo.prototype.initialize.call(this,this._boundsToLatLngs(o),c)},setBounds:function(o){return this.setLatLngs(this._boundsToLatLngs(o))},_boundsToLatLngs:function(o){return o=St(o),[o.getSouthWest(),o.getNorthWest(),o.getNorthEast(),o.getSouthEast()]}});function GP(o,c){return new Sv(o,c)}Ul.create=Th,Ul.pointsToPath=ll,Wi.geometryToLayer=gh,Wi.coordsToLatLng=Ip,Wi.coordsToLatLngs=_h,Wi.latLngToCoords=Cp,Wi.latLngsToCoords=yh,Wi.getFeature=Yo,Wi.asFeature=vh,Pt.mergeOptions({boxZoom:!0});var kv=yn.extend({initialize:function(o){this._map=o,this._container=o._container,this._pane=o._panes.overlayPane,this._resetStateTimeout=0,o.on("unload",this._destroy,this)},addHooks:function(){ht(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Wt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){qt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(o){if(!o.shiftKey||o.which!==1&&o.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Zn(),Sl(),this._startPoint=this._map.mouseEventToContainerPoint(o),ht(document,{contextmenu:_n,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(o){this._moved||(this._moved=!0,this._box=Ct("div","leaflet-zoom-box",this._container),xt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(o);var c=new ot(this._point,this._startPoint),f=c.getSize();mt(this._box,c.min),this._box.style.width=f.x+"px",this._box.style.height=f.y+"px"},_finish:function(){this._moved&&(qt(this._box),Xt(this._container,"leaflet-crosshair")),Qn(),kl(),Wt(document,{contextmenu:_n,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(o){if(!(o.which!==1&&o.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var c=new wt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(c).fire("boxzoomend",{boxZoomBounds:c})}},_onKeyDown:function(o){o.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Pt.addInitHook("addHandler","boxZoom",kv),Pt.mergeOptions({doubleClickZoom:!0});var Pv=yn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(o){var c=this._map,f=c.getZoom(),g=c.options.zoomDelta,x=o.originalEvent.shiftKey?f-g:f+g;c.options.doubleClickZoom==="center"?c.setZoom(x):c.setZoomAround(o.containerPoint,x)}});Pt.addInitHook("addHandler","doubleClickZoom",Pv),Pt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Iv=yn.extend({addHooks:function(){if(!this._draggable){var o=this._map;this._draggable=new Yn(o._mapPane,o._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),o.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),o.on("zoomend",this._onZoomEnd,this),o.whenReady(this._onZoomEnd,this))}xt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Xt(this._map._container,"leaflet-grab"),Xt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var o=this._map;if(o._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=St(this._map.options.maxBounds);this._offsetLimit=ut(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;o.fire("movestart").fire("dragstart"),o.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(o){if(this._map.options.inertia){var c=this._lastTime=+new Date,f=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(f),this._times.push(c),this._prunePositions(c)}this._map.fire("move",o).fire("drag",o)},_prunePositions:function(o){for(;this._positions.length>1&&o-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var o=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(o).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(o,c){return o-(o-c)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var o=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;o.x<c.min.x&&(o.x=this._viscousLimit(o.x,c.min.x)),o.y<c.min.y&&(o.y=this._viscousLimit(o.y,c.min.y)),o.x>c.max.x&&(o.x=this._viscousLimit(o.x,c.max.x)),o.y>c.max.y&&(o.y=this._viscousLimit(o.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(o)}},_onPreDragWrap:function(){var o=this._worldWidth,c=Math.round(o/2),f=this._initialWorldOffset,g=this._draggable._newPos.x,x=(g-c+f)%o+c-f,C=(g+c+f)%o-c-f,F=Math.abs(x+f)<Math.abs(C+f)?x:C;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=F},_onDragEnd:function(o){var c=this._map,f=c.options,g=!f.inertia||o.noInertia||this._times.length<2;if(c.fire("dragend",o),g)c.fire("moveend");else{this._prunePositions(+new Date);var x=this._lastPos.subtract(this._positions[0]),C=(this._lastTime-this._times[0])/1e3,F=f.easeLinearity,W=x.multiplyBy(F/C),q=W.distanceTo([0,0]),Z=Math.min(f.inertiaMaxSpeed,q),et=W.multiplyBy(Z/q),dt=Z/(f.inertiaDeceleration*F),kt=et.multiplyBy(-dt/2).round();!kt.x&&!kt.y?c.fire("moveend"):(kt=c._limitOffset(kt,c.options.maxBounds),D(function(){c.panBy(kt,{duration:dt,easeLinearity:F,noMoveStart:!0,animate:!0})}))}}});Pt.addInitHook("addHandler","dragging",Iv),Pt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Cv=yn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(o){this._map=o,this._setPanDelta(o.options.keyboardPanDelta),this._setZoomDelta(o.options.zoomDelta)},addHooks:function(){var o=this._map._container;o.tabIndex<=0&&(o.tabIndex="0"),ht(o,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Wt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var o=document.body,c=document.documentElement,f=o.scrollTop||c.scrollTop,g=o.scrollLeft||c.scrollLeft;this._map._container.focus(),window.scrollTo(g,f)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(o){var c=this._panKeys={},f=this.keyCodes,g,x;for(g=0,x=f.left.length;g<x;g++)c[f.left[g]]=[-1*o,0];for(g=0,x=f.right.length;g<x;g++)c[f.right[g]]=[o,0];for(g=0,x=f.down.length;g<x;g++)c[f.down[g]]=[0,o];for(g=0,x=f.up.length;g<x;g++)c[f.up[g]]=[0,-1*o]},_setZoomDelta:function(o){var c=this._zoomKeys={},f=this.keyCodes,g,x;for(g=0,x=f.zoomIn.length;g<x;g++)c[f.zoomIn[g]]=o;for(g=0,x=f.zoomOut.length;g<x;g++)c[f.zoomOut[g]]=-o},_addHooks:function(){ht(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Wt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(o){if(!(o.altKey||o.ctrlKey||o.metaKey)){var c=o.keyCode,f=this._map,g;if(c in this._panKeys){if(!f._panAnim||!f._panAnim._inProgress)if(g=this._panKeys[c],o.shiftKey&&(g=Y(g).multiplyBy(3)),f.options.maxBounds&&(g=f._limitOffset(Y(g),f.options.maxBounds)),f.options.worldCopyJump){var x=f.wrapLatLng(f.unproject(f.project(f.getCenter()).add(g)));f.panTo(x)}else f.panBy(g)}else if(c in this._zoomKeys)f.setZoom(f.getZoom()+(o.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&f._popup&&f._popup.options.closeOnEscapeKey)f.closePopup();else return;_n(o)}}});Pt.addInitHook("addHandler","keyboard",Cv),Pt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Av=yn.extend({addHooks:function(){ht(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Wt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(o){var c=ah(o),f=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(o),this._startTime||(this._startTime=+new Date);var g=Math.max(f-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),g),_n(o)},_performZoom:function(){var o=this._map,c=o.getZoom(),f=this._map.options.zoomSnap||0;o._stop();var g=this._delta/(this._map.options.wheelPxPerZoomLevel*4),x=4*Math.log(2/(1+Math.exp(-Math.abs(g))))/Math.LN2,C=f?Math.ceil(x/f)*f:x,F=o._limitZoom(c+(this._delta>0?C:-C))-c;this._delta=0,this._startTime=null,F&&(o.options.scrollWheelZoom==="center"?o.setZoom(c+F):o.setZoomAround(this._lastMousePos,c+F))}});Pt.addInitHook("addHandler","scrollWheelZoom",Av);var KP=600;Pt.mergeOptions({tapHold:rt.touchNative&&rt.safari&&rt.mobile,tapTolerance:15});var Rv=yn.extend({addHooks:function(){ht(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Wt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(o){if(clearTimeout(this._holdTimeout),o.touches.length===1){var c=o.touches[0];this._startPos=this._newPos=new K(c.clientX,c.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(ht(document,"touchend",ee),ht(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),KP),ht(document,"touchend touchcancel contextmenu",this._cancel,this),ht(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function o(){Wt(document,"touchend",ee),Wt(document,"touchend touchcancel",o)},_cancel:function(){clearTimeout(this._holdTimeout),Wt(document,"touchend touchcancel contextmenu",this._cancel,this),Wt(document,"touchmove",this._onMove,this)},_onMove:function(o){var c=o.touches[0];this._newPos=new K(c.clientX,c.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(o,c){var f=new MouseEvent(o,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY});f._simulated=!0,c.target.dispatchEvent(f)}});Pt.addInitHook("addHandler","tapHold",Rv),Pt.mergeOptions({touchZoom:rt.touch,bounceAtZoomLimits:!0});var Nv=yn.extend({addHooks:function(){xt(this._map._container,"leaflet-touch-zoom"),ht(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Xt(this._map._container,"leaflet-touch-zoom"),Wt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(o){var c=this._map;if(!(!o.touches||o.touches.length!==2||c._animatingZoom||this._zooming)){var f=c.mouseEventToContainerPoint(o.touches[0]),g=c.mouseEventToContainerPoint(o.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),c.options.touchZoom!=="center"&&(this._pinchStartLatLng=c.containerPointToLatLng(f.add(g)._divideBy(2))),this._startDist=f.distanceTo(g),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),ht(document,"touchmove",this._onTouchMove,this),ht(document,"touchend touchcancel",this._onTouchEnd,this),ee(o)}},_onTouchMove:function(o){if(!(!o.touches||o.touches.length!==2||!this._zooming)){var c=this._map,f=c.mouseEventToContainerPoint(o.touches[0]),g=c.mouseEventToContainerPoint(o.touches[1]),x=f.distanceTo(g)/this._startDist;if(this._zoom=c.getScaleZoom(x,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&x<1||this._zoom>c.getMaxZoom()&&x>1)&&(this._zoom=c._limitZoom(this._zoom)),c.options.touchZoom==="center"){if(this._center=this._startLatLng,x===1)return}else{var C=f._add(g)._divideBy(2)._subtract(this._centerPoint);if(x===1&&C.x===0&&C.y===0)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(C),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),z(this._animRequest);var F=a(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=D(F,this,!0),ee(o)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,z(this._animRequest),Wt(document,"touchmove",this._onTouchMove,this),Wt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Pt.addInitHook("addHandler","touchZoom",Nv),Pt.BoxZoom=kv,Pt.DoubleClickZoom=Pv,Pt.Drag=Iv,Pt.Keyboard=Cv,Pt.ScrollWheelZoom=Av,Pt.TapHold=Rv,Pt.TouchZoom=Nv,n.Bounds=ot,n.Browser=rt,n.CRS=we,n.Canvas=bv,n.Circle=Pp,n.CircleMarker=mh,n.Class=Rt,n.Control=an,n.DivIcon=vv,n.DivOverlay=mi,n.DomEvent=lh,n.DomUtil=rh,n.Draggable=Yn,n.Evented=bt,n.FeatureGroup=he,n.GeoJSON=Wi,n.GridLayer=zl,n.Handler=yn,n.Icon=pi,n.ImageOverlay=xh,n.LatLng=_t,n.LatLngBounds=wt,n.Layer=$t,n.LayerGroup=ne,n.LineUtil=M,n.Map=Pt,n.Marker=ph,n.Mixin=Nr,n.Path=Is,n.Point=K,n.PolyUtil=Go,n.Polygon=Qo,n.Polyline=Hi,n.Popup=wh,n.PosAnimation=Ll,n.Projection=tt,n.Rectangle=Sv,n.Renderer=$i,n.SVG=Ul,n.SVGOverlay=yv,n.TileLayer=Xo,n.Tooltip=bh,n.Transformation=vs,n.Util=j,n.VideoOverlay=_v,n.bind=a,n.bounds=ut,n.canvas=Tv,n.circle=MP,n.circleMarker=LP,n.control=Je,n.divIcon=HP,n.extend=s,n.featureGroup=Zo,n.geoJSON=gv,n.geoJson=jP,n.gridLayer=WP,n.icon=RP,n.imageOverlay=VP,n.latLng=at,n.latLngBounds=St,n.layerGroup=Ps,n.map=Bo,n.marker=NP,n.point=Y,n.polygon=DP,n.polyline=OP,n.popup=BP,n.rectangle=GP,n.setOptions=S,n.stamp=u,n.svg=Ev,n.svgOverlay=zP,n.tileLayer=xv,n.tooltip=UP,n.transformation=Mi,n.version=i,n.videoOverlay=FP;var ZP=window.L;n.noConflict=function(){return window.L=ZP,this},window.L=n})})(Kg,Kg.exports);var oF=Kg.exports;const Mn=o_(oF),aF=({route:e,interactive:t=!1})=>{const n=$.useRef(null),i=$.useRef(null);return $.useEffect(()=>{if(!n.current)return;const s=Mn.map(n.current,{attributionControl:t,zoomControl:t,dragging:t,scrollWheelZoom:t,doubleClickZoom:t,boxZoom:t,keyboard:t,touchZoom:t});Mn.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:t?'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors':"",maxZoom:t?19:17}).addTo(s),e.segments.forEach(a=>{const l=a.points.map(u=>[u.position.lat,u.position.lon]);Mn.polyline(l,{color:"#0F7BFF",weight:t?4:3,opacity:.8}).addTo(s)});const r=Mn.latLngBounds([e.bounds.minLat,e.bounds.minLon],[e.bounds.maxLat,e.bounds.maxLon]);return s.fitBounds(r,{padding:[10,10]}),i.current=s,()=>{i.current&&(i.current.remove(),i.current=null)}},[e,t]),$.useEffect(()=>{const s=()=>{i.current&&i.current.invalidateSize()};return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),m.jsx("div",{ref:n,className:"w-full h-full",style:{backgroundColor:"#f2f4f8"}})},lF=({route:e})=>m.jsxs("div",{className:"card overflow-hidden group hover:shadow-lg transition-all duration-300",children:[m.jsxs("div",{className:"h-36 w-full relative",children:[m.jsx(aF,{route:e}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"}),m.jsxs("div",{className:"absolute bottom-3 left-3 flex items-center gap-1.5 text-white",children:[m.jsx(ny,{size:14}),m.jsx("span",{className:"text-sm font-medium",children:Jy(new Date(e.date))})]})]}),m.jsxs("div",{className:"p-4",children:[m.jsx("h3",{className:"font-bold text-lg mb-1 truncate group-hover:text-primary transition-colors",children:e.name}),m.jsx("p",{className:"text-text-light text-sm mb-3 line-clamp-2 h-10",children:e.description||"No description provided"}),m.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[m.jsxs("div",{className:"flex flex-col items-center text-center p-1",children:[m.jsx("div",{className:"flex items-center gap-1 text-text-light mb-1",children:m.jsx(cE,{size:14})}),m.jsxs("span",{className:"font-semibold text-sm",children:[e.totalElevationGain.toFixed(0),"m"]}),m.jsx("span",{className:"text-xs text-text-light",children:"Elevation"})]}),m.jsxs("div",{className:"flex flex-col items-center text-center p-1 border-x border-border",children:[m.jsx("div",{className:"flex items-center gap-1 text-text-light mb-1",children:m.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{d:"M12 2L4 9H11L3 22H21L13 9H20L12 2Z",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round"})})}),m.jsx("span",{className:"font-semibold text-sm",children:Ga(e.totalDistance)}),m.jsx("span",{className:"text-xs text-text-light",children:"Distance"})]}),m.jsxs("div",{className:"flex flex-col items-center text-center p-1",children:[m.jsx("div",{className:"flex items-center gap-1 text-text-light mb-1",children:m.jsx(mE,{size:14})}),m.jsx("span",{className:"font-semibold text-sm",children:Pf(e.totalDuration).split(" ")[0]}),m.jsx("span",{className:"text-xs text-text-light",children:"Duration"})]})]})]})]}),cF=()=>m.jsx("div",{className:"h-[calc(100vh-12rem)] flex flex-col items-center justify-center p-4",children:m.jsxs("div",{className:"text-center max-w-md mx-auto",children:[m.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center mx-auto mb-6",children:m.jsx(Vs,{size:32,className:"text-primary"})}),m.jsx("h2",{className:"text-2xl font-bold mb-3",children:"No routes yet"}),m.jsx("p",{className:"text-text-light mb-8",children:"Upload your first GPX file to start tracking and visualizing your routes"}),m.jsxs(ve,{to:"/upload",className:"btn btn-primary flex items-center justify-center gap-2 w-full max-w-xs mx-auto",children:[m.jsx(ku,{size:18}),m.jsx("span",{children:"Upload GPX File"})]}),m.jsxs("div",{className:"mt-8 p-4 bg-background rounded-lg",children:[m.jsx("h3",{className:"font-semibold mb-2",children:"What is a GPX file?"}),m.jsx("p",{className:"text-text-light text-sm",children:"GPX (GPS Exchange Format) files contain GPS data such as waypoints, tracks, and routes. These are commonly exported from fitness apps, GPS devices, and mapping software."})]})]})}),uF=()=>{const{routes:e}=vp(),[t,n]=$.useState(""),[i,s]=$.useState("date"),[r,a]=$.useState("desc"),[l,u]=$.useState("grid"),[h,p]=$.useState("all"),[_,y]=$.useState(!1),[w,E]=$.useState(""),[S,k]=$.useState("#0F7BFF"),[P,I]=$.useState(()=>{const b=localStorage.getItem("routeGroups");return b?JSON.parse(b):[{id:"recent",name:"Recent Routes",color:"#0F7BFF",routeIds:[]},{id:"favorites",name:"Favorites",color:"#F59E0B",routeIds:[]}]});xu.useEffect(()=>{localStorage.setItem("routeGroups",JSON.stringify(P))},[P]);const R=$.useMemo(()=>{let b=e;if(h!=="all"){const A=P.find(O=>O.id===h);A&&(b=b.filter(O=>A.routeIds.includes(O.id)))}if(t){const A=t.toLowerCase();b=b.filter(O=>O.name.toLowerCase().includes(A)||O.description.toLowerCase().includes(A))}return[...b].sort((A,O)=>{let D=0;switch(i){case"date":D=new Date(A.date).getTime()-new Date(O.date).getTime();break;case"distance":D=A.totalDistance-O.totalDistance;break;case"duration":D=A.totalDuration-O.totalDuration;break}return r==="asc"?D:-D})},[e,t,i,r,h,P]),V=$.useMemo(()=>e.reduce((b,A)=>(b.distance+=A.totalDistance,b.duration+=A.totalDuration,b.elevationGain+=A.totalElevationGain,b),{distance:0,duration:0,elevationGain:0}),[e]),B=b=>{i===b?a(r==="asc"?"desc":"asc"):(s(b),a("desc"))},H=()=>{if(w.trim()){const b={id:Date.now().toString(),name:w.trim(),color:S,routeIds:[]};I([...P,b]),E(""),k("#0F7BFF"),y(!1)}},N=["#0F7BFF","#F59E0B","#10B981","#EF4444","#8B5CF6","#F97316","#06B6D4","#84CC16","#EC4899","#6366F1"];return e.length===0?m.jsx(cF,{}):m.jsxs("div",{className:"fade-in",children:[m.jsxs("div",{className:"mb-6",children:[m.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Your Routes"}),m.jsx("p",{className:"text-text-light",children:"View and manage your GPS route activities"})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[m.jsxs("div",{className:"card p-4",children:[m.jsx("p",{className:"text-text-light text-sm mb-1",children:"Total Distance"}),m.jsx("p",{className:"text-2xl font-bold",children:Ga(V.distance)})]}),m.jsxs("div",{className:"card p-4",children:[m.jsx("p",{className:"text-text-light text-sm mb-1",children:"Total Duration"}),m.jsx("p",{className:"text-2xl font-bold",children:Pf(V.duration)})]}),m.jsxs("div",{className:"card p-4",children:[m.jsx("p",{className:"text-text-light text-sm mb-1",children:"Total Elevation Gain"}),m.jsxs("p",{className:"text-2xl font-bold",children:[V.elevationGain.toFixed(0),"m"]})]})]}),m.jsxs("div",{className:"card p-4 mb-6",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsx("h2",{className:"font-semibold",children:"Route Groups"}),m.jsxs("button",{onClick:()=>y(!0),className:"btn btn-outline text-sm",children:[m.jsx(qA,{size:16,className:"mr-2"}),"New Group"]})]}),m.jsxs("div",{className:"flex flex-wrap gap-2",children:[m.jsxs("button",{onClick:()=>p("all"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${h==="all"?"bg-primary text-white":"bg-background text-text-light hover:text-text"}`,children:["All Routes (",e.length,")"]}),P.map(b=>m.jsxs("button",{onClick:()=>p(b.id),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors flex items-center gap-2 ${h===b.id?"text-white":"bg-background text-text-light hover:text-text"}`,style:{backgroundColor:h===b.id?b.color:void 0},children:[m.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:b.color}}),b.name," (",b.routeIds.length,")"]},b.id))]})]}),m.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[m.jsxs("div",{className:"relative flex-grow",children:[m.jsx(eR,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-text-light",size:18}),m.jsx("input",{type:"text",placeholder:"Search routes...",value:t,onChange:b=>n(b.target.value),className:"input-field pl-10"})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsxs("div",{className:"flex border border-border rounded-lg",children:[m.jsx("button",{className:`p-2 rounded-l-lg transition-colors ${l==="grid"?"bg-primary text-white":"hover:bg-background"}`,onClick:()=>u("grid"),children:m.jsx(KA,{size:16})}),m.jsx("button",{className:`p-2 rounded-r-lg transition-colors ${l==="list"?"bg-primary text-white":"hover:bg-background"}`,onClick:()=>u("list"),children:m.jsx(ZA,{size:16})})]}),m.jsx("button",{className:`btn ${i==="date"?"btn-primary":"btn-outline"}`,onClick:()=>B("date"),children:m.jsxs("span",{className:"flex items-center gap-1",children:[m.jsx(ny,{size:16}),"Date ",i==="date"&&(r==="asc"?"":"")]})}),m.jsx("button",{className:`btn ${i==="distance"?"btn-primary":"btn-outline"}`,onClick:()=>B("distance"),children:m.jsxs("span",{className:"flex items-center gap-1",children:[m.jsx($A,{size:16}),"Distance ",i==="distance"&&(r==="asc"?"":"")]})})]})]}),l==="grid"?m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:R.map(b=>m.jsx(ve,{to:`/routes/${b.id}`,children:m.jsx(lF,{route:b})},b.id))}):m.jsx("div",{className:"space-y-4",children:R.map(b=>m.jsx(ve,{to:`/routes/${b.id}`,children:m.jsx("div",{className:"card p-4 hover:shadow-lg transition-all duration-300 group",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("h3",{className:"font-bold text-lg mb-1 group-hover:text-primary transition-colors",children:b.name}),m.jsx("p",{className:"text-text-light text-sm mb-2",children:Jy(new Date(b.date))}),m.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[m.jsx("span",{children:Ga(b.totalDistance)}),m.jsx("span",{children:Pf(b.totalDuration)}),m.jsxs("span",{children:[b.totalElevationGain.toFixed(0),"m elevation"]})]})]}),m.jsx(FA,{size:20,className:"text-text-light group-hover:text-primary transition-colors"})]})})},b.id))}),R.length===0&&m.jsxs("div",{className:"text-center py-12",children:[m.jsx(GA,{size:48,className:"mx-auto text-text-light mb-4"}),m.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No routes found"}),m.jsx("p",{className:"text-text-light",children:h==="all"?"Try adjusting your search terms":"This group is empty. Add some routes to get started."})]}),_&&m.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:m.jsxs("div",{className:"card max-w-md w-full p-6 fade-in slide-up",children:[m.jsx("h3",{className:"text-xl font-bold mb-4",children:"Create New Group"}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"Group Name"}),m.jsx("input",{type:"text",value:w,onChange:b=>E(b.target.value),placeholder:"e.g., Mountain Hikes",className:"input-field"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"Color"}),m.jsx("div",{className:"flex gap-2 flex-wrap",children:N.map(b=>m.jsx("button",{onClick:()=>k(b),className:`w-8 h-8 rounded-full border-2 transition-all ${S===b?"border-text scale-110":"border-border"}`,style:{backgroundColor:b}},b))})]})]}),m.jsxs("div",{className:"flex gap-3 justify-end mt-6",children:[m.jsx("button",{className:"btn text-text-light hover:bg-background",onClick:()=>y(!1),children:"Cancel"}),m.jsx("button",{className:"btn btn-primary",onClick:H,disabled:!w.trim(),children:"Create Group"})]})]})})]})},hF=({route:e,showMarkers:t=!0})=>{const n=$.useRef(null),i=$.useRef(null);return $.useEffect(()=>{if(!n.current)return;const s=Mn.map(n.current);if(Mn.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:19}).addTo(s),e.segments.forEach(a=>{const l=a.points.map(y=>[y.position.lat,y.position.lon]),u=a.points.map(y=>y.position.ele),h=Math.min(...u),_=Math.max(...u)-h;for(let y=1;y<l.length;y++){const w=a.points[y-1].position.ele,E=a.points[y].position.ele,S=(w+E)/2;let k=_?(S-h)/_:0;k=Math.max(0,Math.min(1,k));const P=Math.round(k*255),I=Math.round(Math.abs(k-.5)*255),R=Math.round((1-k)*255);Mn.polyline([l[y-1],l[y]],{color:`rgb(${P}, ${I}, ${R})`,weight:4,opacity:.8}).addTo(s)}}),t){const a=Mn.divIcon({html:'<div class="bg-green-500 w-4 h-4 rounded-full border-2 border-white"></div>',className:"custom-div-icon",iconSize:[10,10],iconAnchor:[5,5]}),l=Mn.divIcon({html:'<div class="bg-red-500 w-4 h-4 rounded-full border-2 border-white"></div>',className:"custom-div-icon",iconSize:[10,10],iconAnchor:[5,5]});Mn.marker([e.startPoint.lat,e.startPoint.lon],{icon:a}).addTo(s).bindTooltip("Start",{permanent:!1,direction:"right"}),Mn.marker([e.endPoint.lat,e.endPoint.lon],{icon:l}).addTo(s).bindTooltip("End",{permanent:!1,direction:"right"})}const r=Mn.latLngBounds([e.bounds.minLat,e.bounds.minLon],[e.bounds.maxLat,e.bounds.maxLon]);return s.fitBounds(r,{padding:[30,30]}),i.current=s,()=>{i.current&&(i.current.remove(),i.current=null)}},[e,t]),$.useEffect(()=>{const s=()=>{i.current&&i.current.invalidateSize()};window.addEventListener("resize",s);const r=setTimeout(()=>{s()},300);return()=>{window.removeEventListener("resize",s),clearTimeout(r)}},[]),m.jsx("div",{ref:n,className:"w-full h-full",style:{backgroundColor:"#f2f4f8"}})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function zu(e){return e+.5|0}const qs=(e,t,n)=>Math.max(Math.min(e,n),t);function fc(e){return qs(zu(e*2.55),0,255)}function rr(e){return qs(zu(e*255),0,255)}function Yi(e){return qs(zu(e/2.55)/100,0,1)}function vw(e){return qs(zu(e*100),0,100)}const Ln={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Zg=[..."0123456789ABCDEF"],dF=e=>Zg[e&15],fF=e=>Zg[(e&240)>>4]+Zg[e&15],Zh=e=>(e&240)>>4===(e&15),pF=e=>Zh(e.r)&&Zh(e.g)&&Zh(e.b)&&Zh(e.a);function mF(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&Ln[e[1]]*17,g:255&Ln[e[2]]*17,b:255&Ln[e[3]]*17,a:t===5?Ln[e[4]]*17:255}:(t===7||t===9)&&(n={r:Ln[e[1]]<<4|Ln[e[2]],g:Ln[e[3]]<<4|Ln[e[4]],b:Ln[e[5]]<<4|Ln[e[6]],a:t===9?Ln[e[7]]<<4|Ln[e[8]]:255})),n}const gF=(e,t)=>e<255?t(e):"";function _F(e){var t=pF(e)?dF:fF;return e?"#"+t(e.r)+t(e.g)+t(e.b)+gF(e.a,t):void 0}const yF=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Ok(e,t,n){const i=t*Math.min(n,1-n),s=(r,a=(r+e/30)%12)=>n-i*Math.max(Math.min(a-3,9-a,1),-1);return[s(0),s(8),s(4)]}function vF(e,t,n){const i=(s,r=(s+e/60)%6)=>n-n*t*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function xF(e,t,n){const i=Ok(e,1,.5);let s;for(t+n>1&&(s=1/(t+n),t*=s,n*=s),s=0;s<3;s++)i[s]*=1-t-n,i[s]+=t;return i}function wF(e,t,n,i,s){return e===s?(t-n)/i+(t<n?6:0):t===s?(n-e)/i+2:(e-t)/i+4}function tv(e){const n=e.r/255,i=e.g/255,s=e.b/255,r=Math.max(n,i,s),a=Math.min(n,i,s),l=(r+a)/2;let u,h,p;return r!==a&&(p=r-a,h=l>.5?p/(2-r-a):p/(r+a),u=wF(n,i,s,p,r),u=u*60+.5),[u|0,h||0,l]}function ev(e,t,n,i){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,i)).map(rr)}function nv(e,t,n){return ev(Ok,e,t,n)}function bF(e,t,n){return ev(xF,e,t,n)}function TF(e,t,n){return ev(vF,e,t,n)}function Dk(e){return(e%360+360)%360}function EF(e){const t=yF.exec(e);let n=255,i;if(!t)return;t[5]!==i&&(n=t[6]?fc(+t[5]):rr(+t[5]));const s=Dk(+t[2]),r=+t[3]/100,a=+t[4]/100;return t[1]==="hwb"?i=bF(s,r,a):t[1]==="hsv"?i=TF(s,r,a):i=nv(s,r,a),{r:i[0],g:i[1],b:i[2],a:n}}function SF(e,t){var n=tv(e);n[0]=Dk(n[0]+t),n=nv(n),e.r=n[0],e.g=n[1],e.b=n[2]}function kF(e){if(!e)return;const t=tv(e),n=t[0],i=vw(t[1]),s=vw(t[2]);return e.a<255?`hsla(${n}, ${i}%, ${s}%, ${Yi(e.a)})`:`hsl(${n}, ${i}%, ${s}%)`}const xw={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},ww={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function PF(){const e={},t=Object.keys(ww),n=Object.keys(xw);let i,s,r,a,l;for(i=0;i<t.length;i++){for(a=l=t[i],s=0;s<n.length;s++)r=n[s],l=l.replace(r,xw[r]);r=parseInt(ww[a],16),e[l]=[r>>16&255,r>>8&255,r&255]}return e}let Qh;function IF(e){Qh||(Qh=PF(),Qh.transparent=[0,0,0,0]);const t=Qh[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const CF=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function AF(e){const t=CF.exec(e);let n=255,i,s,r;if(t){if(t[7]!==i){const a=+t[7];n=t[8]?fc(a):qs(a*255,0,255)}return i=+t[1],s=+t[3],r=+t[5],i=255&(t[2]?fc(i):qs(i,0,255)),s=255&(t[4]?fc(s):qs(s,0,255)),r=255&(t[6]?fc(r):qs(r,0,255)),{r:i,g:s,b:r,a:n}}}function RF(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${Yi(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const vm=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,ia=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function NF(e,t,n){const i=ia(Yi(e.r)),s=ia(Yi(e.g)),r=ia(Yi(e.b));return{r:rr(vm(i+n*(ia(Yi(t.r))-i))),g:rr(vm(s+n*(ia(Yi(t.g))-s))),b:rr(vm(r+n*(ia(Yi(t.b))-r))),a:e.a+n*(t.a-e.a)}}function Yh(e,t,n){if(e){let i=tv(e);i[t]=Math.max(0,Math.min(i[t]+i[t]*n,t===0?360:1)),i=nv(i),e.r=i[0],e.g=i[1],e.b=i[2]}}function jk(e,t){return e&&Object.assign(t||{},e)}function bw(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=rr(e[3]))):(t=jk(e,{r:0,g:0,b:0,a:1}),t.a=rr(t.a)),t}function LF(e){return e.charAt(0)==="r"?AF(e):EF(e)}class fu{constructor(t){if(t instanceof fu)return t;const n=typeof t;let i;n==="object"?i=bw(t):n==="string"&&(i=mF(t)||IF(t)||LF(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=jk(this._rgb);return t&&(t.a=Yi(t.a)),t}set rgb(t){this._rgb=bw(t)}rgbString(){return this._valid?RF(this._rgb):void 0}hexString(){return this._valid?_F(this._rgb):void 0}hslString(){return this._valid?kF(this._rgb):void 0}mix(t,n){if(t){const i=this.rgb,s=t.rgb;let r;const a=n===r?.5:n,l=2*a-1,u=i.a-s.a,h=((l*u===-1?l:(l+u)/(1+l*u))+1)/2;r=1-h,i.r=255&h*i.r+r*s.r+.5,i.g=255&h*i.g+r*s.g+.5,i.b=255&h*i.b+r*s.b+.5,i.a=a*i.a+(1-a)*s.a,this.rgb=i}return this}interpolate(t,n){return t&&(this._rgb=NF(this._rgb,t._rgb,n)),this}clone(){return new fu(this.rgb)}alpha(t){return this._rgb.a=rr(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=zu(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Yh(this._rgb,2,t),this}darken(t){return Yh(this._rgb,2,-t),this}saturate(t){return Yh(this._rgb,1,t),this}desaturate(t){return Yh(this._rgb,1,-t),this}rotate(t){return SF(this._rgb,t),this}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function qi(){}const MF=(()=>{let e=0;return()=>e++})();function Kt(e){return e==null}function Ee(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Dt(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function Xe(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function _i(e,t){return Xe(e)?e:t}function Lt(e,t){return typeof e>"u"?t:e}const OF=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Qt(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function Bt(e,t,n,i){let s,r,a;if(Ee(e))for(r=e.length,s=0;s<r;s++)t.call(n,e[s],s);else if(Dt(e))for(a=Object.keys(e),r=a.length,s=0;s<r;s++)t.call(n,e[a[s]],a[s])}function If(e,t){let n,i,s,r;if(!e||!t||e.length!==t.length)return!1;for(n=0,i=e.length;n<i;++n)if(s=e[n],r=t[n],s.datasetIndex!==r.datasetIndex||s.index!==r.index)return!1;return!0}function Cf(e){if(Ee(e))return e.map(Cf);if(Dt(e)){const t=Object.create(null),n=Object.keys(e),i=n.length;let s=0;for(;s<i;++s)t[n[s]]=Cf(e[n[s]]);return t}return e}function Vk(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function DF(e,t,n,i){if(!Vk(e))return;const s=t[e],r=n[e];Dt(s)&&Dt(r)?pu(s,r,i):t[e]=Cf(r)}function pu(e,t,n){const i=Ee(t)?t:[t],s=i.length;if(!Dt(e))return e;n=n||{};const r=n.merger||DF;let a;for(let l=0;l<s;++l){if(a=i[l],!Dt(a))continue;const u=Object.keys(a);for(let h=0,p=u.length;h<p;++h)r(u[h],e,a,n)}return e}function Rc(e,t){return pu(e,t,{merger:jF})}function jF(e,t,n){if(!Vk(e))return;const i=t[e],s=n[e];Dt(i)&&Dt(s)?Rc(i,s):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Cf(s))}const Tw={"":e=>e,x:e=>e.x,y:e=>e.y};function VF(e){const t=e.split("."),n=[];let i="";for(const s of t)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function FF(e){const t=VF(e);return n=>{for(const i of t){if(i==="")break;n=n&&n[i]}return n}}function Af(e,t){return(Tw[t]||(Tw[t]=FF(t)))(e)}function iv(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Rf=e=>typeof e<"u",dr=e=>typeof e=="function",Ew=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function zF(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Le=Math.PI,ci=2*Le,BF=ci+Le,Nf=Number.POSITIVE_INFINITY,UF=Le/180,ri=Le/2,Or=Le/4,Sw=Le*2/3,Qg=Math.log10,Ka=Math.sign;function Nc(e,t,n){return Math.abs(e-t)<n}function kw(e){const t=Math.round(e);e=Nc(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(Qg(e))),i=e/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function HF(e){const t=[],n=Math.sqrt(e);let i;for(i=1;i<n;i++)e%i===0&&(t.push(i),t.push(e/i));return n===(n|0)&&t.push(n),t.sort((s,r)=>s-r).pop(),t}function WF(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function mu(e){return!WF(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function $F(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function qF(e,t,n){let i,s,r;for(i=0,s=e.length;i<s;i++)r=e[i][n],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function Zr(e){return e*(Le/180)}function GF(e){return e*(180/Le)}function Pw(e){if(!Xe(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function KF(e,t){const n=t.x-e.x,i=t.y-e.y,s=Math.sqrt(n*n+i*i);let r=Math.atan2(i,n);return r<-.5*Le&&(r+=ci),{angle:r,distance:s}}function Yg(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function ZF(e,t){return(e-t+BF)%ci-Le}function wi(e){return(e%ci+ci)%ci}function Fk(e,t,n,i){const s=wi(e),r=wi(t),a=wi(n),l=wi(r-s),u=wi(a-s),h=wi(s-r),p=wi(s-a);return s===r||s===a||i&&r===a||l>u&&h<p}function Fn(e,t,n){return Math.max(t,Math.min(n,e))}function QF(e){return Fn(e,-32768,32767)}function va(e,t,n,i=1e-6){return e>=Math.min(t,n)-i&&e<=Math.max(t,n)+i}function sv(e,t,n){n=n||(a=>e[a]<t);let i=e.length-1,s=0,r;for(;i-s>1;)r=s+i>>1,n(r)?s=r:i=r;return{lo:s,hi:i}}const Qr=(e,t,n,i)=>sv(e,n,i?s=>{const r=e[s][t];return r<n||r===n&&e[s+1][t]===n}:s=>e[s][t]<n),YF=(e,t,n)=>sv(e,n,i=>e[i][t]>=n);function XF(e,t,n){let i=0,s=e.length;for(;i<s&&e[i]<t;)i++;for(;s>i&&e[s-1]>n;)s--;return i>0||s<e.length?e.slice(i,s):e}const zk=["push","pop","shift","splice","unshift"];function JF(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),zk.forEach(n=>{const i="_onData"+iv(n),s=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...r){const a=s.apply(this,r);return e._chartjs.listeners.forEach(l=>{typeof l[i]=="function"&&l[i](...r)}),a}})})}function Iw(e,t){const n=e._chartjs;if(!n)return;const i=n.listeners,s=i.indexOf(t);s!==-1&&i.splice(s,1),!(i.length>0)&&(zk.forEach(r=>{delete e[r]}),delete e._chartjs)}function t4(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const Bk=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function Uk(e,t){let n=[],i=!1;return function(...s){n=s,i||(i=!0,Bk.call(window,()=>{i=!1,e.apply(t,n)}))}}function e4(e,t){let n;return function(...i){return t?(clearTimeout(n),n=setTimeout(e,t,i)):e.apply(this,i),t}}const rv=e=>e==="start"?"left":e==="end"?"right":"center",$e=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,n4=(e,t,n,i)=>e===(i?"left":"right")?n:e==="center"?(t+n)/2:t;function i4(e,t,n){const i=t.length;let s=0,r=i;if(e._sorted){const{iScale:a,vScale:l,_parsed:u}=e,h=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,p=a.axis,{min:_,max:y,minDefined:w,maxDefined:E}=a.getUserBounds();if(w){if(s=Math.min(Qr(u,p,_).lo,n?i:Qr(t,p,a.getPixelForValue(_)).lo),h){const S=u.slice(0,s+1).reverse().findIndex(k=>!Kt(k[l.axis]));s-=Math.max(0,S)}s=Fn(s,0,i-1)}if(E){let S=Math.max(Qr(u,a.axis,y,!0).hi+1,n?0:Qr(t,p,a.getPixelForValue(y),!0).hi+1);if(h){const k=u.slice(S-1).findIndex(P=>!Kt(P[l.axis]));S+=Math.max(0,k)}r=Fn(S,s,i)-s}else r=i-s}return{start:s,count:r}}function s4(e){const{xScale:t,yScale:n,_scaleRanges:i}=e,s={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!i)return e._scaleRanges=s,!0;const r=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,s),r}const Xh=e=>e===0||e===1,Cw=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*ci/n)),Aw=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*ci/n)+1,Lc={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*ri)+1,easeOutSine:e=>Math.sin(e*ri),easeInOutSine:e=>-.5*(Math.cos(Le*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>Xh(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Xh(e)?e:Cw(e,.075,.3),easeOutElastic:e=>Xh(e)?e:Aw(e,.075,.3),easeInOutElastic(e){return Xh(e)?e:e<.5?.5*Cw(e*2,.1125,.45):.5+.5*Aw(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-Lc.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?Lc.easeInBounce(e*2)*.5:Lc.easeOutBounce(e*2-1)*.5+.5};function ov(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Rw(e){return ov(e)?e:new fu(e)}function xm(e){return ov(e)?e:new fu(e).saturate(.5).darken(.1).hexString()}const r4=["x","y","borderWidth","radius","tension"],o4=["color","borderColor","backgroundColor"];function a4(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:o4},numbers:{type:"number",properties:r4}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function l4(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Nw=new Map;function c4(e,t){t=t||{};const n=e+JSON.stringify(t);let i=Nw.get(n);return i||(i=new Intl.NumberFormat(e,t),Nw.set(n,i)),i}function Hk(e,t,n){return c4(t,n).format(e)}const Wk={values(e){return Ee(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const i=this.chart.options.locale;let s,r=e;if(n.length>1){const h=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(h<1e-4||h>1e15)&&(s="scientific"),r=u4(e,n)}const a=Qg(Math.abs(r)),l=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),u={notation:s,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(u,this.options.ticks.format),Hk(e,i,u)},logarithmic(e,t,n){if(e===0)return"0";const i=n[t].significand||e/Math.pow(10,Math.floor(Qg(e)));return[1,2,3,5,10,15].includes(i)||t>.8*n.length?Wk.numeric.call(this,e,t,n):""}};function u4(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var $k={formatters:Wk};function h4(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:$k.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const fo=Object.create(null),Xg=Object.create(null);function Mc(e,t){if(!t)return e;const n=t.split(".");for(let i=0,s=n.length;i<s;++i){const r=n[i];e=e[r]||(e[r]=Object.create(null))}return e}function wm(e,t,n){return typeof t=="string"?pu(Mc(e,t),n):pu(Mc(e,""),t)}class d4{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>xm(s.backgroundColor),this.hoverBorderColor=(i,s)=>xm(s.borderColor),this.hoverColor=(i,s)=>xm(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return wm(this,t,n)}get(t){return Mc(this,t)}describe(t,n){return wm(Xg,t,n)}override(t,n){return wm(fo,t,n)}route(t,n,i,s){const r=Mc(this,t),a=Mc(this,i),l="_"+n;Object.defineProperties(r,{[l]:{value:r[n],writable:!0},[n]:{enumerable:!0,get(){const u=this[l],h=a[s];return Dt(u)?Object.assign({},h,u):Lt(u,h)},set(u){this[l]=u}}})}apply(t){t.forEach(n=>n(this))}}var pe=new d4({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[a4,l4,h4]);function f4(e){return!e||Kt(e.size)||Kt(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function Lw(e,t,n,i,s){let r=t[s];return r||(r=t[s]=e.measureText(s).width,n.push(s)),r>i&&(i=r),i}function Dr(e,t,n){const i=e.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((t-s)*i)/i+s}function Mw(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Jg(e,t,n,i){qk(e,t,n,i,null)}function qk(e,t,n,i,s){let r,a,l,u,h,p,_,y;const w=t.pointStyle,E=t.rotation,S=t.radius;let k=(E||0)*UF;if(w&&typeof w=="object"&&(r=w.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){e.save(),e.translate(n,i),e.rotate(k),e.drawImage(w,-w.width/2,-w.height/2,w.width,w.height),e.restore();return}if(!(isNaN(S)||S<=0)){switch(e.beginPath(),w){default:s?e.ellipse(n,i,s/2,S,0,0,ci):e.arc(n,i,S,0,ci),e.closePath();break;case"triangle":p=s?s/2:S,e.moveTo(n+Math.sin(k)*p,i-Math.cos(k)*S),k+=Sw,e.lineTo(n+Math.sin(k)*p,i-Math.cos(k)*S),k+=Sw,e.lineTo(n+Math.sin(k)*p,i-Math.cos(k)*S),e.closePath();break;case"rectRounded":h=S*.516,u=S-h,a=Math.cos(k+Or)*u,_=Math.cos(k+Or)*(s?s/2-h:u),l=Math.sin(k+Or)*u,y=Math.sin(k+Or)*(s?s/2-h:u),e.arc(n-_,i-l,h,k-Le,k-ri),e.arc(n+y,i-a,h,k-ri,k),e.arc(n+_,i+l,h,k,k+ri),e.arc(n-y,i+a,h,k+ri,k+Le),e.closePath();break;case"rect":if(!E){u=Math.SQRT1_2*S,p=s?s/2:u,e.rect(n-p,i-u,2*p,2*u);break}k+=Or;case"rectRot":_=Math.cos(k)*(s?s/2:S),a=Math.cos(k)*S,l=Math.sin(k)*S,y=Math.sin(k)*(s?s/2:S),e.moveTo(n-_,i-l),e.lineTo(n+y,i-a),e.lineTo(n+_,i+l),e.lineTo(n-y,i+a),e.closePath();break;case"crossRot":k+=Or;case"cross":_=Math.cos(k)*(s?s/2:S),a=Math.cos(k)*S,l=Math.sin(k)*S,y=Math.sin(k)*(s?s/2:S),e.moveTo(n-_,i-l),e.lineTo(n+_,i+l),e.moveTo(n+y,i-a),e.lineTo(n-y,i+a);break;case"star":_=Math.cos(k)*(s?s/2:S),a=Math.cos(k)*S,l=Math.sin(k)*S,y=Math.sin(k)*(s?s/2:S),e.moveTo(n-_,i-l),e.lineTo(n+_,i+l),e.moveTo(n+y,i-a),e.lineTo(n-y,i+a),k+=Or,_=Math.cos(k)*(s?s/2:S),a=Math.cos(k)*S,l=Math.sin(k)*S,y=Math.sin(k)*(s?s/2:S),e.moveTo(n-_,i-l),e.lineTo(n+_,i+l),e.moveTo(n+y,i-a),e.lineTo(n-y,i+a);break;case"line":a=s?s/2:Math.cos(k)*S,l=Math.sin(k)*S,e.moveTo(n-a,i-l),e.lineTo(n+a,i+l);break;case"dash":e.moveTo(n,i),e.lineTo(n+Math.cos(k)*(s?s/2:S),i+Math.sin(k)*S);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function gu(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function xp(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function wp(e){e.restore()}function p4(e,t,n,i,s){if(!t)return e.lineTo(n.x,n.y);if(s==="middle"){const r=(t.x+n.x)/2;e.lineTo(r,t.y),e.lineTo(r,n.y)}else s==="after"!=!!i?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function m4(e,t,n,i){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function g4(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),Kt(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function _4(e,t,n,i,s){if(s.strikethrough||s.underline){const r=e.measureText(i),a=t-r.actualBoundingBoxLeft,l=t+r.actualBoundingBoxRight,u=n-r.actualBoundingBoxAscent,h=n+r.actualBoundingBoxDescent,p=s.strikethrough?(u+h)/2:h;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=s.decorationWidth||2,e.moveTo(a,p),e.lineTo(l,p),e.stroke()}}function y4(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function _u(e,t,n,i,s,r={}){const a=Ee(t)?t:[t],l=r.strokeWidth>0&&r.strokeColor!=="";let u,h;for(e.save(),e.font=s.string,g4(e,r),u=0;u<a.length;++u)h=a[u],r.backdrop&&y4(e,r.backdrop),l&&(r.strokeColor&&(e.strokeStyle=r.strokeColor),Kt(r.strokeWidth)||(e.lineWidth=r.strokeWidth),e.strokeText(h,n,i,r.maxWidth)),e.fillText(h,n,i,r.maxWidth),_4(e,n,i,h,r),i+=Number(s.lineHeight);e.restore()}function t_(e,t){const{x:n,y:i,w:s,h:r,radius:a}=t;e.arc(n+a.topLeft,i+a.topLeft,a.topLeft,1.5*Le,Le,!0),e.lineTo(n,i+r-a.bottomLeft),e.arc(n+a.bottomLeft,i+r-a.bottomLeft,a.bottomLeft,Le,ri,!0),e.lineTo(n+s-a.bottomRight,i+r),e.arc(n+s-a.bottomRight,i+r-a.bottomRight,a.bottomRight,ri,0,!0),e.lineTo(n+s,i+a.topRight),e.arc(n+s-a.topRight,i+a.topRight,a.topRight,0,-ri,!0),e.lineTo(n+a.topLeft,i)}const v4=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,x4=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function w4(e,t){const n=(""+e).match(v4);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const b4=e=>+e||0;function Gk(e,t){const n={},i=Dt(t),s=i?Object.keys(t):t,r=Dt(e)?i?a=>Lt(e[a],e[t[a]]):a=>e[a]:()=>e;for(const a of s)n[a]=b4(r(a));return n}function T4(e){return Gk(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Oc(e){return Gk(e,["topLeft","topRight","bottomLeft","bottomRight"])}function qn(e){const t=T4(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Ze(e,t){e=e||{},t=t||pe.font;let n=Lt(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let i=Lt(e.style,t.style);i&&!(""+i).match(x4)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:Lt(e.family,t.family),lineHeight:w4(Lt(e.lineHeight,t.lineHeight),n),size:n,style:i,weight:Lt(e.weight,t.weight),string:""};return s.string=f4(s),s}function Jh(e,t,n,i){let s,r,a;for(s=0,r=e.length;s<r;++s)if(a=e[s],a!==void 0&&a!==void 0)return a}function E4(e,t,n){const{min:i,max:s}=e,r=OF(t,(s-i)/2),a=(l,u)=>n&&l===0?0:l+u;return{min:a(i,-Math.abs(r)),max:a(s,r)}}function wo(e,t){return Object.assign(Object.create(e),t)}function av(e,t=[""],n,i,s=()=>e[0]){const r=n||e;typeof i>"u"&&(i=Yk("_fallback",e));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:r,_fallback:i,_getTarget:s,override:l=>av([l,...e],t,r,i)};return new Proxy(a,{deleteProperty(l,u){return delete l[u],delete l._keys,delete e[0][u],!0},get(l,u){return Zk(l,u,()=>N4(u,t,e,l))},getOwnPropertyDescriptor(l,u){return Reflect.getOwnPropertyDescriptor(l._scopes[0],u)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(l,u){return Dw(l).includes(u)},ownKeys(l){return Dw(l)},set(l,u,h){const p=l._storage||(l._storage=s());return l[u]=p[u]=h,delete l._keys,!0}})}function Za(e,t,n,i){const s={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:Kk(e,i),setContext:r=>Za(e,r,n,i),override:r=>Za(e.override(r),t,n,i)};return new Proxy(s,{deleteProperty(r,a){return delete r[a],delete e[a],!0},get(r,a,l){return Zk(r,a,()=>k4(r,a,l))},getOwnPropertyDescriptor(r,a){return r._descriptors.allKeys?Reflect.has(e,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,a)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(r,a){return Reflect.has(e,a)},ownKeys(){return Reflect.ownKeys(e)},set(r,a,l){return e[a]=l,delete r[a],!0}})}function Kk(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:i=t.indexable,_allKeys:s=t.allKeys}=e;return{allKeys:s,scriptable:n,indexable:i,isScriptable:dr(n)?n:()=>n,isIndexable:dr(i)?i:()=>i}}const S4=(e,t)=>e?e+iv(t):t,lv=(e,t)=>Dt(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function Zk(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const i=n();return e[t]=i,i}function k4(e,t,n){const{_proxy:i,_context:s,_subProxy:r,_descriptors:a}=e;let l=i[t];return dr(l)&&a.isScriptable(t)&&(l=P4(t,l,e,n)),Ee(l)&&l.length&&(l=I4(t,l,e,a.isIndexable)),lv(t,l)&&(l=Za(l,s,r&&r[t],a)),l}function P4(e,t,n,i){const{_proxy:s,_context:r,_subProxy:a,_stack:l}=n;if(l.has(e))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+e);l.add(e);let u=t(r,a||i);return l.delete(e),lv(e,u)&&(u=cv(s._scopes,s,e,u)),u}function I4(e,t,n,i){const{_proxy:s,_context:r,_subProxy:a,_descriptors:l}=n;if(typeof r.index<"u"&&i(e))return t[r.index%t.length];if(Dt(t[0])){const u=t,h=s._scopes.filter(p=>p!==u);t=[];for(const p of u){const _=cv(h,s,e,p);t.push(Za(_,r,a&&a[e],l))}}return t}function Qk(e,t,n){return dr(e)?e(t,n):e}const C4=(e,t)=>e===!0?t:typeof e=="string"?Af(t,e):void 0;function A4(e,t,n,i,s){for(const r of t){const a=C4(n,r);if(a){e.add(a);const l=Qk(a._fallback,n,s);if(typeof l<"u"&&l!==n&&l!==i)return l}else if(a===!1&&typeof i<"u"&&n!==i)return null}return!1}function cv(e,t,n,i){const s=t._rootScopes,r=Qk(t._fallback,n,i),a=[...e,...s],l=new Set;l.add(i);let u=Ow(l,a,n,r||n,i);return u===null||typeof r<"u"&&r!==n&&(u=Ow(l,a,r,u,i),u===null)?!1:av(Array.from(l),[""],s,r,()=>R4(t,n,i))}function Ow(e,t,n,i,s){for(;n;)n=A4(e,t,n,i,s);return n}function R4(e,t,n){const i=e._getTarget();t in i||(i[t]={});const s=i[t];return Ee(s)&&Dt(n)?n:s||{}}function N4(e,t,n,i){let s;for(const r of t)if(s=Yk(S4(r,e),n),typeof s<"u")return lv(e,s)?cv(n,i,e,s):s}function Yk(e,t){for(const n of t){if(!n)continue;const i=n[e];if(typeof i<"u")return i}}function Dw(e){let t=e._keys;return t||(t=e._keys=L4(e._scopes)),t}function L4(e){const t=new Set;for(const n of e)for(const i of Object.keys(n).filter(s=>!s.startsWith("_")))t.add(i);return Array.from(t)}const M4=Number.EPSILON||1e-14,Qa=(e,t)=>t<e.length&&!e[t].skip&&e[t],Xk=e=>e==="x"?"y":"x";function O4(e,t,n,i){const s=e.skip?t:e,r=t,a=n.skip?t:n,l=Yg(r,s),u=Yg(a,r);let h=l/(l+u),p=u/(l+u);h=isNaN(h)?0:h,p=isNaN(p)?0:p;const _=i*h,y=i*p;return{previous:{x:r.x-_*(a.x-s.x),y:r.y-_*(a.y-s.y)},next:{x:r.x+y*(a.x-s.x),y:r.y+y*(a.y-s.y)}}}function D4(e,t,n){const i=e.length;let s,r,a,l,u,h=Qa(e,0);for(let p=0;p<i-1;++p)if(u=h,h=Qa(e,p+1),!(!u||!h)){if(Nc(t[p],0,M4)){n[p]=n[p+1]=0;continue}s=n[p]/t[p],r=n[p+1]/t[p],l=Math.pow(s,2)+Math.pow(r,2),!(l<=9)&&(a=3/Math.sqrt(l),n[p]=s*a*t[p],n[p+1]=r*a*t[p])}}function j4(e,t,n="x"){const i=Xk(n),s=e.length;let r,a,l,u=Qa(e,0);for(let h=0;h<s;++h){if(a=l,l=u,u=Qa(e,h+1),!l)continue;const p=l[n],_=l[i];a&&(r=(p-a[n])/3,l[`cp1${n}`]=p-r,l[`cp1${i}`]=_-r*t[h]),u&&(r=(u[n]-p)/3,l[`cp2${n}`]=p+r,l[`cp2${i}`]=_+r*t[h])}}function V4(e,t="x"){const n=Xk(t),i=e.length,s=Array(i).fill(0),r=Array(i);let a,l,u,h=Qa(e,0);for(a=0;a<i;++a)if(l=u,u=h,h=Qa(e,a+1),!!u){if(h){const p=h[t]-u[t];s[a]=p!==0?(h[n]-u[n])/p:0}r[a]=l?h?Ka(s[a-1])!==Ka(s[a])?0:(s[a-1]+s[a])/2:s[a-1]:s[a]}D4(e,s,r),j4(e,r,t)}function td(e,t,n){return Math.max(Math.min(e,n),t)}function F4(e,t){let n,i,s,r,a,l=gu(e[0],t);for(n=0,i=e.length;n<i;++n)a=r,r=l,l=n<i-1&&gu(e[n+1],t),r&&(s=e[n],a&&(s.cp1x=td(s.cp1x,t.left,t.right),s.cp1y=td(s.cp1y,t.top,t.bottom)),l&&(s.cp2x=td(s.cp2x,t.left,t.right),s.cp2y=td(s.cp2y,t.top,t.bottom)))}function z4(e,t,n,i,s){let r,a,l,u;if(t.spanGaps&&(e=e.filter(h=>!h.skip)),t.cubicInterpolationMode==="monotone")V4(e,s);else{let h=i?e[e.length-1]:e[0];for(r=0,a=e.length;r<a;++r)l=e[r],u=O4(h,l,e[Math.min(r+1,a-(i?0:1))%a],t.tension),l.cp1x=u.previous.x,l.cp1y=u.previous.y,l.cp2x=u.next.x,l.cp2y=u.next.y,h=l}t.capBezierPoints&&F4(e,n)}function uv(){return typeof window<"u"&&typeof document<"u"}function hv(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Lf(e,t,n){let i;return typeof e=="string"?(i=parseInt(e,10),e.indexOf("%")!==-1&&(i=i/100*t.parentNode[n])):i=e,i}const bp=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function B4(e,t){return bp(e).getPropertyValue(t)}const U4=["top","right","bottom","left"];function to(e,t,n){const i={};n=n?"-"+n:"";for(let s=0;s<4;s++){const r=U4[s];i[r]=parseFloat(e[t+"-"+r+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const H4=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function W4(e,t){const n=e.touches,i=n&&n.length?n[0]:e,{offsetX:s,offsetY:r}=i;let a=!1,l,u;if(H4(s,r,e.target))l=s,u=r;else{const h=t.getBoundingClientRect();l=i.clientX-h.left,u=i.clientY-h.top,a=!0}return{x:l,y:u,box:a}}function Ur(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:i}=t,s=bp(n),r=s.boxSizing==="border-box",a=to(s,"padding"),l=to(s,"border","width"),{x:u,y:h,box:p}=W4(e,n),_=a.left+(p&&l.left),y=a.top+(p&&l.top);let{width:w,height:E}=t;return r&&(w-=a.width+l.width,E-=a.height+l.height),{x:Math.round((u-_)/w*n.width/i),y:Math.round((h-y)/E*n.height/i)}}function $4(e,t,n){let i,s;if(t===void 0||n===void 0){const r=e&&hv(e);if(!r)t=e.clientWidth,n=e.clientHeight;else{const a=r.getBoundingClientRect(),l=bp(r),u=to(l,"border","width"),h=to(l,"padding");t=a.width-h.width-u.width,n=a.height-h.height-u.height,i=Lf(l.maxWidth,r,"clientWidth"),s=Lf(l.maxHeight,r,"clientHeight")}}return{width:t,height:n,maxWidth:i||Nf,maxHeight:s||Nf}}const ed=e=>Math.round(e*10)/10;function q4(e,t,n,i){const s=bp(e),r=to(s,"margin"),a=Lf(s.maxWidth,e,"clientWidth")||Nf,l=Lf(s.maxHeight,e,"clientHeight")||Nf,u=$4(e,t,n);let{width:h,height:p}=u;if(s.boxSizing==="content-box"){const y=to(s,"border","width"),w=to(s,"padding");h-=w.width+y.width,p-=w.height+y.height}return h=Math.max(0,h-r.width),p=Math.max(0,i?h/i:p-r.height),h=ed(Math.min(h,a,u.maxWidth)),p=ed(Math.min(p,l,u.maxHeight)),h&&!p&&(p=ed(h/2)),(t!==void 0||n!==void 0)&&i&&u.height&&p>u.height&&(p=u.height,h=ed(Math.floor(p*i))),{width:h,height:p}}function jw(e,t,n){const i=t||1,s=Math.floor(e.height*i),r=Math.floor(e.width*i);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const a=e.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height=`${e.height}px`,a.style.width=`${e.width}px`),e.currentDevicePixelRatio!==i||a.height!==s||a.width!==r?(e.currentDevicePixelRatio=i,a.height=s,a.width=r,e.ctx.setTransform(i,0,0,i,0,0),!0):!1}const G4=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};uv()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function Vw(e,t){const n=B4(e,t),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Hr(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function K4(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:i==="middle"?n<.5?e.y:t.y:i==="after"?n<1?e.y:t.y:n>0?t.y:e.y}}function Z4(e,t,n,i){const s={x:e.cp2x,y:e.cp2y},r={x:t.cp1x,y:t.cp1y},a=Hr(e,s,n),l=Hr(s,r,n),u=Hr(r,t,n),h=Hr(a,l,n),p=Hr(l,u,n);return Hr(h,p,n)}const Q4=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},Y4=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function Aa(e,t,n){return e?Q4(t,n):Y4()}function Jk(e,t){let n,i;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=i)}function tP(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function eP(e){return e==="angle"?{between:Fk,compare:ZF,normalize:wi}:{between:va,compare:(t,n)=>t-n,normalize:t=>t}}function Fw({start:e,end:t,count:n,loop:i,style:s}){return{start:e%n,end:t%n,loop:i&&(t-e+1)%n===0,style:s}}function X4(e,t,n){const{property:i,start:s,end:r}=n,{between:a,normalize:l}=eP(i),u=t.length;let{start:h,end:p,loop:_}=e,y,w;if(_){for(h+=u,p+=u,y=0,w=u;y<w&&a(l(t[h%u][i]),s,r);++y)h--,p--;h%=u,p%=u}return p<h&&(p+=u),{start:h,end:p,loop:_,style:e.style}}function nP(e,t,n){if(!n)return[e];const{property:i,start:s,end:r}=n,a=t.length,{compare:l,between:u,normalize:h}=eP(i),{start:p,end:_,loop:y,style:w}=X4(e,t,n),E=[];let S=!1,k=null,P,I,R;const V=()=>u(s,R,P)&&l(s,R)!==0,B=()=>l(r,P)===0||u(r,R,P),H=()=>S||V(),N=()=>!S||B();for(let b=p,A=p;b<=_;++b)I=t[b%a],!I.skip&&(P=h(I[i]),P!==R&&(S=u(P,s,r),k===null&&H()&&(k=l(P,s)===0?b:A),k!==null&&N()&&(E.push(Fw({start:k,end:b,loop:y,count:a,style:w})),k=null),A=b,R=P));return k!==null&&E.push(Fw({start:k,end:_,loop:y,count:a,style:w})),E}function iP(e,t){const n=[],i=e.segments;for(let s=0;s<i.length;s++){const r=nP(i[s],e.points,t);r.length&&n.push(...r)}return n}function J4(e,t,n,i){let s=0,r=t-1;if(n&&!i)for(;s<t&&!e[s].skip;)s++;for(;s<t&&e[s].skip;)s++;for(s%=t,n&&(r+=s);r>s&&e[r%t].skip;)r--;return r%=t,{start:s,end:r}}function tz(e,t,n,i){const s=e.length,r=[];let a=t,l=e[t],u;for(u=t+1;u<=n;++u){const h=e[u%s];h.skip||h.stop?l.skip||(i=!1,r.push({start:t%s,end:(u-1)%s,loop:i}),t=a=h.stop?u:null):(a=u,l.skip&&(t=u)),l=h}return a!==null&&r.push({start:t%s,end:a%s,loop:i}),r}function ez(e,t){const n=e.points,i=e.options.spanGaps,s=n.length;if(!s)return[];const r=!!e._loop,{start:a,end:l}=J4(n,s,r,i);if(i===!0)return zw(e,[{start:a,end:l,loop:r}],n,t);const u=l<a?l+s:l,h=!!e._fullLoop&&a===0&&l===s-1;return zw(e,tz(n,a,u,h),n,t)}function zw(e,t,n,i){return!i||!i.setContext||!n?t:nz(e,t,n,i)}function nz(e,t,n,i){const s=e._chart.getContext(),r=Bw(e.options),{_datasetIndex:a,options:{spanGaps:l}}=e,u=n.length,h=[];let p=r,_=t[0].start,y=_;function w(E,S,k,P){const I=l?-1:1;if(E!==S){for(E+=u;n[E%u].skip;)E-=I;for(;n[S%u].skip;)S+=I;E%u!==S%u&&(h.push({start:E%u,end:S%u,loop:k,style:P}),p=P,_=S%u)}}for(const E of t){_=l?_:E.start;let S=n[_%u],k;for(y=_+1;y<=E.end;y++){const P=n[y%u];k=Bw(i.setContext(wo(s,{type:"segment",p0:S,p1:P,p0DataIndex:(y-1)%u,p1DataIndex:y%u,datasetIndex:a}))),iz(k,p)&&w(_,y-1,E.loop,p),S=P,p=k}_<y-1&&w(_,y-1,E.loop,p)}return h}function Bw(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function iz(e,t){if(!t)return!1;const n=[],i=function(s,r){return ov(r)?(n.includes(r)||n.push(r),n.indexOf(r)):r};return JSON.stringify(e,i)!==JSON.stringify(t,i)}function nd(e,t,n){return e.options.clip?e[n]:t[n]}function sz(e,t){const{xScale:n,yScale:i}=e;return n&&i?{left:nd(n,t,"left"),right:nd(n,t,"right"),top:nd(i,t,"top"),bottom:nd(i,t,"bottom")}:t}function sP(e,t){const n=t._clip;if(n.disabled)return!1;const i=sz(t,e.chartArea);return{left:n.left===!1?0:i.left-(n.left===!0?0:n.left),right:n.right===!1?e.width:i.right+(n.right===!0?0:n.right),top:n.top===!1?0:i.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?e.height:i.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class rz{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,i,s){const r=n.listeners[s],a=n.duration;r.forEach(l=>l({chart:t,initial:n.initial,numSteps:a,currentStep:Math.min(i-n.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=Bk.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const r=i.items;let a=r.length-1,l=!1,u;for(;a>=0;--a)u=r[a],u._active?(u._total>i.duration&&(i.duration=u._total),u.tick(t),l=!0):(r[a]=r[r.length-1],r.pop());l&&(s.draw(),this._notify(s,i,t,"progress")),r.length||(i.running=!1,this._notify(s,i,t,"complete"),i.initial=!1),n+=r.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let i=n.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,i)),i}listen(t,n,i){this._getAnims(t).listeners[n].push(i)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const i=n.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Gi=new rz;const Uw="transparent",oz={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const i=Rw(e||Uw),s=i.valid&&Rw(t||Uw);return s&&s.valid?s.mix(i,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class az{constructor(t,n,i,s){const r=n[i];s=Jh([t.to,s,r,t.from]);const a=Jh([t.from,r,s]);this._active=!0,this._fn=t.fn||oz[t.type||typeof a],this._easing=Lc[t.easing]||Lc.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=i,this._from=a,this._to=s,this._promises=void 0}active(){return this._active}update(t,n,i){if(this._active){this._notify(!1);const s=this._target[this._prop],r=i-this._start,a=this._duration-r;this._start=i,this._duration=Math.floor(Math.max(a,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=Jh([t.to,n,s,t.from]),this._from=Jh([t.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,i=this._duration,s=this._prop,r=this._from,a=this._loop,l=this._to;let u;if(this._active=r!==l&&(a||n<i),!this._active){this._target[s]=l,this._notify(!0);return}if(n<0){this._target[s]=r;return}u=n/i%2,u=a&&u>1?2-u:u,u=this._easing(Math.min(1,Math.max(0,u))),this._target[s]=this._fn(r,l,u)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,i)=>{t.push({res:n,rej:i})})}_notify(t){const n=t?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][n]()}}class rP{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!Dt(t))return;const n=Object.keys(pe.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{const r=t[s];if(!Dt(r))return;const a={};for(const l of n)a[l]=r[l];(Ee(r.properties)&&r.properties||[s]).forEach(l=>{(l===s||!i.has(l))&&i.set(l,a)})})}_animateOptions(t,n){const i=n.options,s=cz(t,i);if(!s)return[];const r=this._createAnimations(s,i);return i.$shared&&lz(t.options.$animations,i).then(()=>{t.options=i},()=>{}),r}_createAnimations(t,n){const i=this._properties,s=[],r=t.$animations||(t.$animations={}),a=Object.keys(n),l=Date.now();let u;for(u=a.length-1;u>=0;--u){const h=a[u];if(h.charAt(0)==="$")continue;if(h==="options"){s.push(...this._animateOptions(t,n));continue}const p=n[h];let _=r[h];const y=i.get(h);if(_)if(y&&_.active()){_.update(y,p,l);continue}else _.cancel();if(!y||!y.duration){t[h]=p;continue}r[h]=_=new az(y,t,h,p),s.push(_)}return s}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const i=this._createAnimations(t,n);if(i.length)return Gi.add(this._chart,i),!0}}function lz(e,t){const n=[],i=Object.keys(t);for(let s=0;s<i.length;s++){const r=e[i[s]];r&&r.active()&&n.push(r.wait())}return Promise.all(n)}function cz(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Hw(e,t){const n=e&&e.options||{},i=n.reverse,s=n.min===void 0?t:0,r=n.max===void 0?t:0;return{start:i?r:s,end:i?s:r}}function uz(e,t,n){if(n===!1)return!1;const i=Hw(e,n),s=Hw(t,n);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function hz(e){let t,n,i,s;return Dt(e)?(t=e.top,n=e.right,i=e.bottom,s=e.left):t=n=i=s=e,{top:t,right:n,bottom:i,left:s,disabled:e===!1}}function oP(e,t){const n=[],i=e._getSortedDatasetMetas(t);let s,r;for(s=0,r=i.length;s<r;++s)n.push(i[s].index);return n}function Ww(e,t,n,i={}){const s=e.keys,r=i.mode==="single";let a,l,u,h;if(t===null)return;let p=!1;for(a=0,l=s.length;a<l;++a){if(u=+s[a],u===n){if(p=!0,i.all)continue;break}h=e.values[u],Xe(h)&&(r||t===0||Ka(t)===Ka(h))&&(t+=h)}return!p&&!i.all?0:t}function dz(e,t){const{iScale:n,vScale:i}=t,s=n.axis==="x"?"x":"y",r=i.axis==="x"?"x":"y",a=Object.keys(e),l=new Array(a.length);let u,h,p;for(u=0,h=a.length;u<h;++u)p=a[u],l[u]={[s]:p,[r]:e[p]};return l}function bm(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function fz(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function pz(e){const{min:t,max:n,minDefined:i,maxDefined:s}=e.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function mz(e,t,n){const i=e[t]||(e[t]={});return i[n]||(i[n]={})}function $w(e,t,n,i){for(const s of t.getMatchingVisibleMetas(i).reverse()){const r=e[s.index];if(n&&r>0||!n&&r<0)return s.index}return null}function qw(e,t){const{chart:n,_cachedMeta:i}=e,s=n._stacks||(n._stacks={}),{iScale:r,vScale:a,index:l}=i,u=r.axis,h=a.axis,p=fz(r,a,i),_=t.length;let y;for(let w=0;w<_;++w){const E=t[w],{[u]:S,[h]:k}=E,P=E._stacks||(E._stacks={});y=P[h]=mz(s,p,S),y[l]=k,y._top=$w(y,a,!0,i.type),y._bottom=$w(y,a,!1,i.type);const I=y._visualValues||(y._visualValues={});I[l]=k}}function Tm(e,t){const n=e.scales;return Object.keys(n).filter(i=>n[i].axis===t).shift()}function gz(e,t){return wo(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function _z(e,t,n){return wo(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function Xl(e,t){const n=e.controller.index,i=e.vScale&&e.vScale.axis;if(i){t=t||e._parsed;for(const s of t){const r=s._stacks;if(!r||r[i]===void 0||r[i][n]===void 0)return;delete r[i][n],r[i]._visualValues!==void 0&&r[i]._visualValues[n]!==void 0&&delete r[i]._visualValues[n]}}}const Em=e=>e==="reset"||e==="none",Gw=(e,t)=>t?e:Object.assign({},e),yz=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:oP(n,!0),values:null};class Dc{constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=bm(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Xl(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,i=this.getDataset(),s=(_,y,w,E)=>_==="x"?y:_==="r"?E:w,r=n.xAxisID=Lt(i.xAxisID,Tm(t,"x")),a=n.yAxisID=Lt(i.yAxisID,Tm(t,"y")),l=n.rAxisID=Lt(i.rAxisID,Tm(t,"r")),u=n.indexAxis,h=n.iAxisID=s(u,r,a,l),p=n.vAxisID=s(u,a,r,l);n.xScale=this.getScaleForId(r),n.yScale=this.getScaleForId(a),n.rScale=this.getScaleForId(l),n.iScale=this.getScaleForId(h),n.vScale=this.getScaleForId(p)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Iw(this._data,this),t._stacked&&Xl(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),i=this._data;if(Dt(n)){const s=this._cachedMeta;this._data=dz(n,s)}else if(i!==n){if(i){Iw(i,this);const s=this._cachedMeta;Xl(s),s._parsed=[]}n&&Object.isExtensible(n)&&JF(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const r=n._stacked;n._stacked=bm(n.vScale,n),n.stack!==i.stack&&(s=!0,Xl(n),n.stack=i.stack),this._resyncElements(t),(s||r!==n._stacked)&&(qw(this,n._parsed),n._stacked=bm(n.vScale,n))}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:i,_data:s}=this,{iScale:r,_stacked:a}=i,l=r.axis;let u=t===0&&n===s.length?!0:i._sorted,h=t>0&&i._parsed[t-1],p,_,y;if(this._parsing===!1)i._parsed=s,i._sorted=!0,y=s;else{Ee(s[t])?y=this.parseArrayData(i,s,t,n):Dt(s[t])?y=this.parseObjectData(i,s,t,n):y=this.parsePrimitiveData(i,s,t,n);const w=()=>_[l]===null||h&&_[l]<h[l];for(p=0;p<n;++p)i._parsed[p+t]=_=y[p],u&&(w()&&(u=!1),h=_);i._sorted=u}a&&qw(this,y)}parsePrimitiveData(t,n,i,s){const{iScale:r,vScale:a}=t,l=r.axis,u=a.axis,h=r.getLabels(),p=r===a,_=new Array(s);let y,w,E;for(y=0,w=s;y<w;++y)E=y+i,_[y]={[l]:p||r.parse(h[E],E),[u]:a.parse(n[E],E)};return _}parseArrayData(t,n,i,s){const{xScale:r,yScale:a}=t,l=new Array(s);let u,h,p,_;for(u=0,h=s;u<h;++u)p=u+i,_=n[p],l[u]={x:r.parse(_[0],p),y:a.parse(_[1],p)};return l}parseObjectData(t,n,i,s){const{xScale:r,yScale:a}=t,{xAxisKey:l="x",yAxisKey:u="y"}=this._parsing,h=new Array(s);let p,_,y,w;for(p=0,_=s;p<_;++p)y=p+i,w=n[y],h[p]={x:r.parse(Af(w,l),y),y:a.parse(Af(w,u),y)};return h}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,i){const s=this.chart,r=this._cachedMeta,a=n[t.axis],l={keys:oP(s,!0),values:n._stacks[t.axis]._visualValues};return Ww(l,a,r.index,{mode:i})}updateRangeFromParsed(t,n,i,s){const r=i[n.axis];let a=r===null?NaN:r;const l=s&&i._stacks[n.axis];s&&l&&(s.values=l,a=Ww(s,r,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,n){const i=this._cachedMeta,s=i._parsed,r=i._sorted&&t===i.iScale,a=s.length,l=this._getOtherScale(t),u=yz(n,i,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:p,max:_}=pz(l);let y,w;function E(){w=s[y];const S=w[l.axis];return!Xe(w[t.axis])||p>S||_<S}for(y=0;y<a&&!(!E()&&(this.updateRangeFromParsed(h,t,w,u),r));++y);if(r){for(y=a-1;y>=0;--y)if(!E()){this.updateRangeFromParsed(h,t,w,u);break}}return h}getAllParsedValues(t){const n=this._cachedMeta._parsed,i=[];let s,r,a;for(s=0,r=n.length;s<r;++s)a=n[s][t.axis],Xe(a)&&i.push(a);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,i=n.iScale,s=n.vScale,r=this.getParsed(t);return{label:i?""+i.getLabelForValue(r[i.axis]):"",value:s?""+s.getLabelForValue(r[s.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=hz(Lt(this.options.clip,uz(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,i=this._cachedMeta,s=i.data||[],r=n.chartArea,a=[],l=this._drawStart||0,u=this._drawCount||s.length-l,h=this.options.drawActiveElementsOnTop;let p;for(i.dataset&&i.dataset.draw(t,r,l,u),p=l;p<l+u;++p){const _=s[p];_.hidden||(_.active&&h?a.push(_):_.draw(t,r))}for(p=0;p<a.length;++p)a[p].draw(t,r)}getStyle(t,n){const i=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,n,i){const s=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const a=this._cachedMeta.data[t];r=a.$context||(a.$context=_z(this.getContext(),t,a)),r.parsed=this.getParsed(t),r.raw=s.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=gz(this.chart.getContext(),this.index)),r.dataset=s,r.index=r.datasetIndex=this.index;return r.active=!!n,r.mode=i,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",i){const s=n==="active",r=this._cachedDataOpts,a=t+"-"+n,l=r[a],u=this.enableOptionSharing&&Rf(i);if(l)return Gw(l,u);const h=this.chart.config,p=h.datasetElementScopeKeys(this._type,t),_=s?[`${t}Hover`,"hover",t,""]:[t,""],y=h.getOptionScopes(this.getDataset(),p),w=Object.keys(pe.elements[t]),E=()=>this.getContext(i,s,n),S=h.resolveNamedOptions(y,w,E,_);return S.$shared&&(S.$shared=u,r[a]=Object.freeze(Gw(S,u))),S}_resolveAnimations(t,n,i){const s=this.chart,r=this._cachedDataOpts,a=`animation-${n}`,l=r[a];if(l)return l;let u;if(s.options.animation!==!1){const p=this.chart.config,_=p.datasetAnimationScopeKeys(this._type,n),y=p.getOptionScopes(this.getDataset(),_);u=p.createResolver(y,this.getContext(t,i,n))}const h=new rP(s,u&&u.animations);return u&&u._cacheable&&(r[a]=Object.freeze(h)),h}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||Em(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const i=this.resolveDataElementOptions(t,n),s=this._sharedOptions,r=this.getSharedOptions(i),a=this.includeOptions(n,r)||r!==s;return this.updateSharedOptions(r,n,i),{sharedOptions:r,includeOptions:a}}updateElement(t,n,i,s){Em(s)?Object.assign(t,i):this._resolveAnimations(n,s).update(t,i)}updateSharedOptions(t,n,i){t&&!Em(n)&&this._resolveAnimations(void 0,n).update(t,i)}_setStyle(t,n,i,s){t.active=s;const r=this.getStyle(n,s);this._resolveAnimations(n,i,s).update(t,{options:!s&&this.getSharedOptions(r)||r})}removeHoverStyle(t,n,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,n,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,i=this._cachedMeta.data;for(const[l,u,h]of this._syncList)this[l](u,h);this._syncList=[];const s=i.length,r=n.length,a=Math.min(r,s);a&&this.parse(0,a),r>s?this._insertElements(s,r-s,t):r<s&&this._removeElements(r,s-r)}_insertElements(t,n,i=!0){const s=this._cachedMeta,r=s.data,a=t+n;let l;const u=h=>{for(h.length+=n,l=h.length-1;l>=a;l--)h[l]=h[l-n]};for(u(r),l=t;l<a;++l)r[l]=new this.dataElementType;this._parsing&&u(s._parsed),this.parse(t,n),i&&this.updateElements(r,t,n,"reset")}updateElements(t,n,i,s){}_removeElements(t,n){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(t,n);i._stacked&&Xl(i,s)}i.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,i,s]=t;this[n](i,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Tt(Dc,"defaults",{}),Tt(Dc,"datasetElementType",null),Tt(Dc,"dataElementType",null);class Ad extends Dc{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const n=this._cachedMeta,{dataset:i,data:s=[],_dataset:r}=n,a=this.chart._animationsDisabled;let{start:l,count:u}=i4(n,s,a);this._drawStart=l,this._drawCount=u,s4(n)&&(l=0,u=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!r._decimated,i.points=s;const h=this.resolveDatasetElementOptions(t);this.options.showLine||(h.borderWidth=0),h.segment=this.options.segment,this.updateElement(i,void 0,{animated:!a,options:h},t),this.updateElements(s,l,u,t)}updateElements(t,n,i,s){const r=s==="reset",{iScale:a,vScale:l,_stacked:u,_dataset:h}=this._cachedMeta,{sharedOptions:p,includeOptions:_}=this._getSharedOptions(n,s),y=a.axis,w=l.axis,{spanGaps:E,segment:S}=this.options,k=mu(E)?E:Number.POSITIVE_INFINITY,P=this.chart._animationsDisabled||r||s==="none",I=n+i,R=t.length;let V=n>0&&this.getParsed(n-1);for(let B=0;B<R;++B){const H=t[B],N=P?H:{};if(B<n||B>=I){N.skip=!0;continue}const b=this.getParsed(B),A=Kt(b[w]),O=N[y]=a.getPixelForValue(b[y],B),D=N[w]=r||A?l.getBasePixel():l.getPixelForValue(u?this.applyStack(l,b,u):b[w],B);N.skip=isNaN(O)||isNaN(D)||A,N.stop=B>0&&Math.abs(b[y]-V[y])>k,S&&(N.parsed=b,N.raw=h.data[B]),_&&(N.options=p||this.resolveDataElementOptions(B,H.active?"active":s)),P||this.updateElement(H,B,N,s),V=b}}getMaxOverflow(){const t=this._cachedMeta,n=t.dataset,i=n.options&&n.options.borderWidth||0,s=t.data||[];if(!s.length)return i;const r=s[0].size(this.resolveDataElementOptions(0)),a=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,r,a)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}Tt(Ad,"id","line"),Tt(Ad,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Tt(Ad,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function jr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class dv{constructor(t){Tt(this,"options");this.options=t||{}}static override(t){Object.assign(dv.prototype,t)}init(){}formats(){return jr()}parse(){return jr()}format(){return jr()}add(){return jr()}diff(){return jr()}startOf(){return jr()}endOf(){return jr()}}var vz={_date:dv};function xz(e,t,n,i){const{controller:s,data:r,_sorted:a}=e,l=s._cachedMeta.iScale,u=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(l&&t===l.axis&&t!=="r"&&a&&r.length){const h=l._reversePixels?YF:Qr;if(i){if(s._sharedOptions){const p=r[0],_=typeof p.getRange=="function"&&p.getRange(t);if(_){const y=h(r,t,n-_),w=h(r,t,n+_);return{lo:y.lo,hi:w.hi}}}}else{const p=h(r,t,n);if(u){const{vScale:_}=s._cachedMeta,{_parsed:y}=e,w=y.slice(0,p.lo+1).reverse().findIndex(S=>!Kt(S[_.axis]));p.lo-=Math.max(0,w);const E=y.slice(p.hi).findIndex(S=>!Kt(S[_.axis]));p.hi+=Math.max(0,E)}return p}}return{lo:0,hi:r.length-1}}function Bu(e,t,n,i,s){const r=e.getSortedVisibleDatasetMetas(),a=n[t];for(let l=0,u=r.length;l<u;++l){const{index:h,data:p}=r[l],{lo:_,hi:y}=xz(r[l],t,a,s);for(let w=_;w<=y;++w){const E=p[w];E.skip||i(E,h,w)}}}function wz(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(i,s){const r=t?Math.abs(i.x-s.x):0,a=n?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(a,2))}}function Sm(e,t,n,i,s){const r=[];return!s&&!e.isPointInArea(t)||Bu(e,n,t,function(l,u,h){!s&&!gu(l,e.chartArea,0)||l.inRange(t.x,t.y,i)&&r.push({element:l,datasetIndex:u,index:h})},!0),r}function bz(e,t,n,i){let s=[];function r(a,l,u){const{startAngle:h,endAngle:p}=a.getProps(["startAngle","endAngle"],i),{angle:_}=KF(a,{x:t.x,y:t.y});Fk(_,h,p)&&s.push({element:a,datasetIndex:l,index:u})}return Bu(e,n,t,r),s}function Tz(e,t,n,i,s,r){let a=[];const l=wz(n);let u=Number.POSITIVE_INFINITY;function h(p,_,y){const w=p.inRange(t.x,t.y,s);if(i&&!w)return;const E=p.getCenterPoint(s);if(!(!!r||e.isPointInArea(E))&&!w)return;const k=l(t,E);k<u?(a=[{element:p,datasetIndex:_,index:y}],u=k):k===u&&a.push({element:p,datasetIndex:_,index:y})}return Bu(e,n,t,h),a}function km(e,t,n,i,s,r){return!r&&!e.isPointInArea(t)?[]:n==="r"&&!i?bz(e,t,n,s):Tz(e,t,n,i,s,r)}function Kw(e,t,n,i,s){const r=[],a=n==="x"?"inXRange":"inYRange";let l=!1;return Bu(e,n,t,(u,h,p)=>{u[a]&&u[a](t[n],s)&&(r.push({element:u,datasetIndex:h,index:p}),l=l||u.inRange(t.x,t.y,s))}),i&&!l?[]:r}var Ez={evaluateInteractionItems:Bu,modes:{index(e,t,n,i){const s=Ur(t,e),r=n.axis||"x",a=n.includeInvisible||!1,l=n.intersect?Sm(e,s,r,i,a):km(e,s,r,!1,i,a),u=[];return l.length?(e.getSortedVisibleDatasetMetas().forEach(h=>{const p=l[0].index,_=h.data[p];_&&!_.skip&&u.push({element:_,datasetIndex:h.index,index:p})}),u):[]},dataset(e,t,n,i){const s=Ur(t,e),r=n.axis||"xy",a=n.includeInvisible||!1;let l=n.intersect?Sm(e,s,r,i,a):km(e,s,r,!1,i,a);if(l.length>0){const u=l[0].datasetIndex,h=e.getDatasetMeta(u).data;l=[];for(let p=0;p<h.length;++p)l.push({element:h[p],datasetIndex:u,index:p})}return l},point(e,t,n,i){const s=Ur(t,e),r=n.axis||"xy",a=n.includeInvisible||!1;return Sm(e,s,r,i,a)},nearest(e,t,n,i){const s=Ur(t,e),r=n.axis||"xy",a=n.includeInvisible||!1;return km(e,s,r,n.intersect,i,a)},x(e,t,n,i){const s=Ur(t,e);return Kw(e,s,"x",n.intersect,i)},y(e,t,n,i){const s=Ur(t,e);return Kw(e,s,"y",n.intersect,i)}}};const aP=["left","top","right","bottom"];function Jl(e,t){return e.filter(n=>n.pos===t)}function Zw(e,t){return e.filter(n=>aP.indexOf(n.pos)===-1&&n.box.axis===t)}function tc(e,t){return e.sort((n,i)=>{const s=t?i:n,r=t?n:i;return s.weight===r.weight?s.index-r.index:s.weight-r.weight})}function Sz(e){const t=[];let n,i,s,r,a,l;for(n=0,i=(e||[]).length;n<i;++n)s=e[n],{position:r,options:{stack:a,stackWeight:l=1}}=s,t.push({index:n,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:a&&r+a,stackWeight:l});return t}function kz(e){const t={};for(const n of e){const{stack:i,pos:s,stackWeight:r}=n;if(!i||!aP.includes(s))continue;const a=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=r}return t}function Pz(e,t){const n=kz(e),{vBoxMaxWidth:i,hBoxMaxHeight:s}=t;let r,a,l;for(r=0,a=e.length;r<a;++r){l=e[r];const{fullSize:u}=l.box,h=n[l.stack],p=h&&l.stackWeight/h.weight;l.horizontal?(l.width=p?p*i:u&&t.availableWidth,l.height=s):(l.width=i,l.height=p?p*s:u&&t.availableHeight)}return n}function Iz(e){const t=Sz(e),n=tc(t.filter(h=>h.box.fullSize),!0),i=tc(Jl(t,"left"),!0),s=tc(Jl(t,"right")),r=tc(Jl(t,"top"),!0),a=tc(Jl(t,"bottom")),l=Zw(t,"x"),u=Zw(t,"y");return{fullSize:n,leftAndTop:i.concat(r),rightAndBottom:s.concat(u).concat(a).concat(l),chartArea:Jl(t,"chartArea"),vertical:i.concat(s).concat(u),horizontal:r.concat(a).concat(l)}}function Qw(e,t,n,i){return Math.max(e[n],t[n])+Math.max(e[i],t[i])}function lP(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function Cz(e,t,n,i){const{pos:s,box:r}=n,a=e.maxPadding;if(!Dt(s)){n.size&&(e[s]-=n.size);const _=i[n.stack]||{size:0,count:1};_.size=Math.max(_.size,n.horizontal?r.height:r.width),n.size=_.size/_.count,e[s]+=n.size}r.getPadding&&lP(a,r.getPadding());const l=Math.max(0,t.outerWidth-Qw(a,e,"left","right")),u=Math.max(0,t.outerHeight-Qw(a,e,"top","bottom")),h=l!==e.w,p=u!==e.h;return e.w=l,e.h=u,n.horizontal?{same:h,other:p}:{same:p,other:h}}function Az(e){const t=e.maxPadding;function n(i){const s=Math.max(t[i]-e[i],0);return e[i]+=s,s}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function Rz(e,t){const n=t.maxPadding;function i(s){const r={left:0,top:0,right:0,bottom:0};return s.forEach(a=>{r[a]=Math.max(t[a],n[a])}),r}return i(e?["left","right"]:["top","bottom"])}function pc(e,t,n,i){const s=[];let r,a,l,u,h,p;for(r=0,a=e.length,h=0;r<a;++r){l=e[r],u=l.box,u.update(l.width||t.w,l.height||t.h,Rz(l.horizontal,t));const{same:_,other:y}=Cz(t,n,l,i);h|=_&&s.length,p=p||y,u.fullSize||s.push(l)}return h&&pc(s,t,n,i)||p}function id(e,t,n,i,s){e.top=n,e.left=t,e.right=t+i,e.bottom=n+s,e.width=i,e.height=s}function Yw(e,t,n,i){const s=n.padding;let{x:r,y:a}=t;for(const l of e){const u=l.box,h=i[l.stack]||{count:1,placed:0,weight:1},p=l.stackWeight/h.weight||1;if(l.horizontal){const _=t.w*p,y=h.size||u.height;Rf(h.start)&&(a=h.start),u.fullSize?id(u,s.left,a,n.outerWidth-s.right-s.left,y):id(u,t.left+h.placed,a,_,y),h.start=a,h.placed+=_,a=u.bottom}else{const _=t.h*p,y=h.size||u.width;Rf(h.start)&&(r=h.start),u.fullSize?id(u,r,s.top,y,n.outerHeight-s.bottom-s.top):id(u,r,t.top+h.placed,y,_),h.start=r,h.placed+=_,r=u.right}}t.x=r,t.y=a}var zn={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,i){if(!e)return;const s=qn(e.options.layout.padding),r=Math.max(t-s.width,0),a=Math.max(n-s.height,0),l=Iz(e.boxes),u=l.vertical,h=l.horizontal;Bt(e.boxes,S=>{typeof S.beforeLayout=="function"&&S.beforeLayout()});const p=u.reduce((S,k)=>k.box.options&&k.box.options.display===!1?S:S+1,0)||1,_=Object.freeze({outerWidth:t,outerHeight:n,padding:s,availableWidth:r,availableHeight:a,vBoxMaxWidth:r/2/p,hBoxMaxHeight:a/2}),y=Object.assign({},s);lP(y,qn(i));const w=Object.assign({maxPadding:y,w:r,h:a,x:s.left,y:s.top},s),E=Pz(u.concat(h),_);pc(l.fullSize,w,_,E),pc(u,w,_,E),pc(h,w,_,E)&&pc(u,w,_,E),Az(w),Yw(l.leftAndTop,w,_,E),w.x+=w.w,w.y+=w.h,Yw(l.rightAndBottom,w,_,E),e.chartArea={left:w.left,top:w.top,right:w.left+w.w,bottom:w.top+w.h,height:w.h,width:w.w},Bt(l.chartArea,S=>{const k=S.box;Object.assign(k,e.chartArea),k.update(w.w,w.h,{left:0,top:0,right:0,bottom:0})})}};class cP{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,i){}removeEventListener(t,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,i,s){return n=Math.max(0,n||t.width),i=i||t.height,{width:n,height:Math.max(0,s?Math.floor(n/s):i)}}isAttached(t){return!0}updateConfig(t){}}class Nz extends cP{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Rd="$chartjs",Lz={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Xw=e=>e===null||e==="";function Mz(e,t){const n=e.style,i=e.getAttribute("height"),s=e.getAttribute("width");if(e[Rd]={initial:{height:i,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Xw(s)){const r=Vw(e,"width");r!==void 0&&(e.width=r)}if(Xw(i))if(e.style.height==="")e.height=e.width/(t||2);else{const r=Vw(e,"height");r!==void 0&&(e.height=r)}return e}const uP=G4?{passive:!0}:!1;function Oz(e,t,n){e&&e.addEventListener(t,n,uP)}function Dz(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,uP)}function jz(e,t){const n=Lz[e.type]||e.type,{x:i,y:s}=Ur(e,t);return{type:n,chart:t,native:e,x:i!==void 0?i:null,y:s!==void 0?s:null}}function Mf(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function Vz(e,t,n){const i=e.canvas,s=new MutationObserver(r=>{let a=!1;for(const l of r)a=a||Mf(l.addedNodes,i),a=a&&!Mf(l.removedNodes,i);a&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function Fz(e,t,n){const i=e.canvas,s=new MutationObserver(r=>{let a=!1;for(const l of r)a=a||Mf(l.removedNodes,i),a=a&&!Mf(l.addedNodes,i);a&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const yu=new Map;let Jw=0;function hP(){const e=window.devicePixelRatio;e!==Jw&&(Jw=e,yu.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function zz(e,t){yu.size||window.addEventListener("resize",hP),yu.set(e,t)}function Bz(e){yu.delete(e),yu.size||window.removeEventListener("resize",hP)}function Uz(e,t,n){const i=e.canvas,s=i&&hv(i);if(!s)return;const r=Uk((l,u)=>{const h=s.clientWidth;n(l,u),h<s.clientWidth&&n()},window),a=new ResizeObserver(l=>{const u=l[0],h=u.contentRect.width,p=u.contentRect.height;h===0&&p===0||r(h,p)});return a.observe(s),zz(e,r),a}function Pm(e,t,n){n&&n.disconnect(),t==="resize"&&Bz(e)}function Hz(e,t,n){const i=e.canvas,s=Uk(r=>{e.ctx!==null&&n(jz(r,e))},e);return Oz(i,t,s),s}class Wz extends cP{acquireContext(t,n){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(Mz(t,n),i):null}releaseContext(t){const n=t.canvas;if(!n[Rd])return!1;const i=n[Rd].initial;["height","width"].forEach(r=>{const a=i[r];Kt(a)?n.removeAttribute(r):n.setAttribute(r,a)});const s=i.style||{};return Object.keys(s).forEach(r=>{n.style[r]=s[r]}),n.width=n.width,delete n[Rd],!0}addEventListener(t,n,i){this.removeEventListener(t,n);const s=t.$proxies||(t.$proxies={}),a={attach:Vz,detach:Fz,resize:Uz}[n]||Hz;s[n]=a(t,n,i)}removeEventListener(t,n){const i=t.$proxies||(t.$proxies={}),s=i[n];if(!s)return;({attach:Pm,detach:Pm,resize:Pm}[n]||Dz)(t,n,s),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,i,s){return q4(t,n,i,s)}isAttached(t){const n=t&&hv(t);return!!(n&&n.isConnected)}}function $z(e){return!uv()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?Nz:Wz}var cd;let bo=(cd=class{constructor(){Tt(this,"x");Tt(this,"y");Tt(this,"active",!1);Tt(this,"options");Tt(this,"$animations")}tooltipPosition(t){const{x:n,y:i}=this.getProps(["x","y"],t);return{x:n,y:i}}hasValue(){return mu(this.x)&&mu(this.y)}getProps(t,n){const i=this.$animations;if(!n||!i)return this;const s={};return t.forEach(r=>{s[r]=i[r]&&i[r].active()?i[r]._to:this[r]}),s}},Tt(cd,"defaults",{}),Tt(cd,"defaultRoutes"),cd);function qz(e,t){const n=e.options.ticks,i=Gz(e),s=Math.min(n.maxTicksLimit||i,i),r=n.major.enabled?Zz(t):[],a=r.length,l=r[0],u=r[a-1],h=[];if(a>s)return Qz(t,h,r,a/s),h;const p=Kz(r,t,s);if(a>0){let _,y;const w=a>1?Math.round((u-l)/(a-1)):null;for(sd(t,h,p,Kt(w)?0:l-w,l),_=0,y=a-1;_<y;_++)sd(t,h,p,r[_],r[_+1]);return sd(t,h,p,u,Kt(w)?t.length:u+w),h}return sd(t,h,p),h}function Gz(e){const t=e.options.offset,n=e._tickSize(),i=e._length/n+(t?0:1),s=e._maxLength/n;return Math.floor(Math.min(i,s))}function Kz(e,t,n){const i=Yz(e),s=t.length/n;if(!i)return Math.max(s,1);const r=HF(i);for(let a=0,l=r.length-1;a<l;a++){const u=r[a];if(u>s)return u}return Math.max(s,1)}function Zz(e){const t=[];let n,i;for(n=0,i=e.length;n<i;n++)e[n].major&&t.push(n);return t}function Qz(e,t,n,i){let s=0,r=n[0],a;for(i=Math.ceil(i),a=0;a<e.length;a++)a===r&&(t.push(e[a]),s++,r=n[s*i])}function sd(e,t,n,i,s){const r=Lt(i,0),a=Math.min(Lt(s,e.length),e.length);let l=0,u,h,p;for(n=Math.ceil(n),s&&(u=s-i,n=u/Math.floor(u/n)),p=r;p<0;)l++,p=Math.round(r+l*n);for(h=Math.max(r,0);h<a;h++)h===p&&(t.push(e[h]),l++,p=Math.round(r+l*n))}function Yz(e){const t=e.length;let n,i;if(t<2)return!1;for(i=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==i)return!1;return i}const Xz=e=>e==="left"?"right":e==="right"?"left":e,t1=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,e1=(e,t)=>Math.min(t||e,e);function n1(e,t){const n=[],i=e.length/t,s=e.length;let r=0;for(;r<s;r+=i)n.push(e[Math.floor(r)]);return n}function Jz(e,t,n){const i=e.ticks.length,s=Math.min(t,i-1),r=e._startPixel,a=e._endPixel,l=1e-6;let u=e.getPixelForTick(s),h;if(!(n&&(i===1?h=Math.max(u-r,a-u):t===0?h=(e.getPixelForTick(1)-u)/2:h=(u-e.getPixelForTick(s-1))/2,u+=s<t?h:-h,u<r-l||u>a+l)))return u}function t3(e,t){Bt(e,n=>{const i=n.gc,s=i.length/2;let r;if(s>t){for(r=0;r<s;++r)delete n.data[i[r]];i.splice(0,s)}})}function ec(e){return e.drawTicks?e.tickLength:0}function i1(e,t){if(!e.display)return 0;const n=Ze(e.font,t),i=qn(e.padding);return(Ee(e.text)?e.text.length:1)*n.lineHeight+i.height}function e3(e,t){return wo(e,{scale:t,type:"scale"})}function n3(e,t,n){return wo(e,{tick:n,index:t,type:"tick"})}function i3(e,t,n){let i=rv(e);return(n&&t!=="right"||!n&&t==="right")&&(i=Xz(i)),i}function s3(e,t,n,i){const{top:s,left:r,bottom:a,right:l,chart:u}=e,{chartArea:h,scales:p}=u;let _=0,y,w,E;const S=a-s,k=l-r;if(e.isHorizontal()){if(w=$e(i,r,l),Dt(n)){const P=Object.keys(n)[0],I=n[P];E=p[P].getPixelForValue(I)+S-t}else n==="center"?E=(h.bottom+h.top)/2+S-t:E=t1(e,n,t);y=l-r}else{if(Dt(n)){const P=Object.keys(n)[0],I=n[P];w=p[P].getPixelForValue(I)-k+t}else n==="center"?w=(h.left+h.right)/2-k+t:w=t1(e,n,t);E=$e(i,a,s),_=n==="left"?-ri:ri}return{titleX:w,titleY:E,maxWidth:y,rotation:_}}class ol extends bo{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:i,_suggestedMax:s}=this;return t=_i(t,Number.POSITIVE_INFINITY),n=_i(n,Number.NEGATIVE_INFINITY),i=_i(i,Number.POSITIVE_INFINITY),s=_i(s,Number.NEGATIVE_INFINITY),{min:_i(t,i),max:_i(n,s),minDefined:Xe(t),maxDefined:Xe(n)}}getMinMax(t){let{min:n,max:i,minDefined:s,maxDefined:r}=this.getUserBounds(),a;if(s&&r)return{min:n,max:i};const l=this.getMatchingVisibleMetas();for(let u=0,h=l.length;u<h;++u)a=l[u].controller.getMinMax(this,t),s||(n=Math.min(n,a.min)),r||(i=Math.max(i,a.max));return n=r&&n>i?i:n,i=s&&n>i?n:i,{min:_i(n,_i(i,n)),max:_i(i,_i(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Qt(this.options.beforeUpdate,[this])}update(t,n,i){const{beginAtZero:s,grace:r,ticks:a}=this.options,l=a.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=E4(this,r,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const u=l<this.ticks.length;this._convertTicksToLabels(u?n1(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=qz(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),u&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,t=!t),this._startPixel=n,this._endPixel=i,this._reversePixels=t,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Qt(this.options.afterUpdate,[this])}beforeSetDimensions(){Qt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Qt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Qt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Qt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let i,s,r;for(i=0,s=t.length;i<s;i++)r=t[i],r.label=Qt(n.callback,[r.value,i,t],this)}afterTickToLabelConversion(){Qt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Qt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,i=e1(this.ticks.length,t.ticks.maxTicksLimit),s=n.minRotation||0,r=n.maxRotation;let a=s,l,u,h;if(!this._isVisible()||!n.display||s>=r||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const p=this._getLabelSizes(),_=p.widest.width,y=p.highest.height,w=Fn(this.chart.width-_,0,this.maxWidth);l=t.offset?this.maxWidth/i:w/(i-1),_+6>l&&(l=w/(i-(t.offset?.5:1)),u=this.maxHeight-ec(t.grid)-n.padding-i1(t.title,this.chart.options.font),h=Math.sqrt(_*_+y*y),a=GF(Math.min(Math.asin(Fn((p.highest.height+6)/l,-1,1)),Math.asin(Fn(u/h,-1,1))-Math.asin(Fn(y/h,-1,1)))),a=Math.max(s,Math.min(r,a))),this.labelRotation=a}afterCalculateLabelRotation(){Qt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Qt(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:i,title:s,grid:r}}=this,a=this._isVisible(),l=this.isHorizontal();if(a){const u=i1(s,n.options.font);if(l?(t.width=this.maxWidth,t.height=ec(r)+u):(t.height=this.maxHeight,t.width=ec(r)+u),i.display&&this.ticks.length){const{first:h,last:p,widest:_,highest:y}=this._getLabelSizes(),w=i.padding*2,E=Zr(this.labelRotation),S=Math.cos(E),k=Math.sin(E);if(l){const P=i.mirror?0:k*_.width+S*y.height;t.height=Math.min(this.maxHeight,t.height+P+w)}else{const P=i.mirror?0:S*_.width+k*y.height;t.width=Math.min(this.maxWidth,t.width+P+w)}this._calculatePadding(h,p,k,S)}}this._handleMargins(),l?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,i,s){const{ticks:{align:r,padding:a},position:l}=this.options,u=this.labelRotation!==0,h=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const p=this.getPixelForTick(0)-this.left,_=this.right-this.getPixelForTick(this.ticks.length-1);let y=0,w=0;u?h?(y=s*t.width,w=i*n.height):(y=i*t.height,w=s*n.width):r==="start"?w=n.width:r==="end"?y=t.width:r!=="inner"&&(y=t.width/2,w=n.width/2),this.paddingLeft=Math.max((y-p+a)*this.width/(this.width-p),0),this.paddingRight=Math.max((w-_+a)*this.width/(this.width-_),0)}else{let p=n.height/2,_=t.height/2;r==="start"?(p=0,_=t.height):r==="end"&&(p=n.height,_=0),this.paddingTop=p+a,this.paddingBottom=_+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Qt(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,i;for(n=0,i=t.length;n<i;n++)Kt(t[n].label)&&(t.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=n1(i,n)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,i){const{ctx:s,_longestTextCache:r}=this,a=[],l=[],u=Math.floor(n/e1(n,i));let h=0,p=0,_,y,w,E,S,k,P,I,R,V,B;for(_=0;_<n;_+=u){if(E=t[_].label,S=this._resolveTickFontOptions(_),s.font=k=S.string,P=r[k]=r[k]||{data:{},gc:[]},I=S.lineHeight,R=V=0,!Kt(E)&&!Ee(E))R=Lw(s,P.data,P.gc,R,E),V=I;else if(Ee(E))for(y=0,w=E.length;y<w;++y)B=E[y],!Kt(B)&&!Ee(B)&&(R=Lw(s,P.data,P.gc,R,B),V+=I);a.push(R),l.push(V),h=Math.max(R,h),p=Math.max(V,p)}t3(r,n);const H=a.indexOf(h),N=l.indexOf(p),b=A=>({width:a[A]||0,height:l[A]||0});return{first:b(0),last:b(n-1),widest:b(H),highest:b(N),widths:a,heights:l}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return QF(this._alignToPixels?Dr(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const i=n[t];return i.$context||(i.$context=n3(this.getContext(),t,i))}return this.$context||(this.$context=e3(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=Zr(this.labelRotation),i=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),r=this._getLabelSizes(),a=t.autoSkipPadding||0,l=r?r.widest.width+a:0,u=r?r.highest.height+a:0;return this.isHorizontal()?u*i>l*s?l/i:u/s:u*s<l*i?u/i:l/s}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,i=this.chart,s=this.options,{grid:r,position:a,border:l}=s,u=r.offset,h=this.isHorizontal(),_=this.ticks.length+(u?1:0),y=ec(r),w=[],E=l.setContext(this.getContext()),S=E.display?E.width:0,k=S/2,P=function(Et){return Dr(i,Et,S)};let I,R,V,B,H,N,b,A,O,D,z,j;if(a==="top")I=P(this.bottom),N=this.bottom-y,A=I-k,D=P(t.top)+k,j=t.bottom;else if(a==="bottom")I=P(this.top),D=t.top,j=P(t.bottom)-k,N=I+k,A=this.top+y;else if(a==="left")I=P(this.right),H=this.right-y,b=I-k,O=P(t.left)+k,z=t.right;else if(a==="right")I=P(this.left),O=t.left,z=P(t.right)-k,H=I+k,b=this.left+y;else if(n==="x"){if(a==="center")I=P((t.top+t.bottom)/2+.5);else if(Dt(a)){const Et=Object.keys(a)[0],bt=a[Et];I=P(this.chart.scales[Et].getPixelForValue(bt))}D=t.top,j=t.bottom,N=I+k,A=N+y}else if(n==="y"){if(a==="center")I=P((t.left+t.right)/2);else if(Dt(a)){const Et=Object.keys(a)[0],bt=a[Et];I=P(this.chart.scales[Et].getPixelForValue(bt))}H=I-k,b=H-y,O=t.left,z=t.right}const Rt=Lt(s.ticks.maxTicksLimit,_),Vt=Math.max(1,Math.ceil(_/Rt));for(R=0;R<_;R+=Vt){const Et=this.getContext(R),bt=r.setContext(Et),K=l.setContext(Et),st=bt.lineWidth,Y=bt.color,ot=K.dash||[],ut=K.dashOffset,wt=bt.tickWidth,St=bt.tickColor,_t=bt.tickBorderDash||[],at=bt.tickBorderDashOffset;V=Jz(this,R,u),V!==void 0&&(B=Dr(i,V,st),h?H=b=O=z=B:N=A=D=j=B,w.push({tx1:H,ty1:N,tx2:b,ty2:A,x1:O,y1:D,x2:z,y2:j,width:st,color:Y,borderDash:ot,borderDashOffset:ut,tickWidth:wt,tickColor:St,tickBorderDash:_t,tickBorderDashOffset:at}))}return this._ticksLength=_,this._borderValue=I,w}_computeLabelItems(t){const n=this.axis,i=this.options,{position:s,ticks:r}=i,a=this.isHorizontal(),l=this.ticks,{align:u,crossAlign:h,padding:p,mirror:_}=r,y=ec(i.grid),w=y+p,E=_?-p:w,S=-Zr(this.labelRotation),k=[];let P,I,R,V,B,H,N,b,A,O,D,z,j="middle";if(s==="top")H=this.bottom-E,N=this._getXAxisLabelAlignment();else if(s==="bottom")H=this.top+E,N=this._getXAxisLabelAlignment();else if(s==="left"){const Vt=this._getYAxisLabelAlignment(y);N=Vt.textAlign,B=Vt.x}else if(s==="right"){const Vt=this._getYAxisLabelAlignment(y);N=Vt.textAlign,B=Vt.x}else if(n==="x"){if(s==="center")H=(t.top+t.bottom)/2+w;else if(Dt(s)){const Vt=Object.keys(s)[0],Et=s[Vt];H=this.chart.scales[Vt].getPixelForValue(Et)+w}N=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")B=(t.left+t.right)/2-w;else if(Dt(s)){const Vt=Object.keys(s)[0],Et=s[Vt];B=this.chart.scales[Vt].getPixelForValue(Et)}N=this._getYAxisLabelAlignment(y).textAlign}n==="y"&&(u==="start"?j="top":u==="end"&&(j="bottom"));const Rt=this._getLabelSizes();for(P=0,I=l.length;P<I;++P){R=l[P],V=R.label;const Vt=r.setContext(this.getContext(P));b=this.getPixelForTick(P)+r.labelOffset,A=this._resolveTickFontOptions(P),O=A.lineHeight,D=Ee(V)?V.length:1;const Et=D/2,bt=Vt.color,K=Vt.textStrokeColor,st=Vt.textStrokeWidth;let Y=N;a?(B=b,N==="inner"&&(P===I-1?Y=this.options.reverse?"left":"right":P===0?Y=this.options.reverse?"right":"left":Y="center"),s==="top"?h==="near"||S!==0?z=-D*O+O/2:h==="center"?z=-Rt.highest.height/2-Et*O+O:z=-Rt.highest.height+O/2:h==="near"||S!==0?z=O/2:h==="center"?z=Rt.highest.height/2-Et*O:z=Rt.highest.height-D*O,_&&(z*=-1),S!==0&&!Vt.showLabelBackdrop&&(B+=O/2*Math.sin(S))):(H=b,z=(1-D)*O/2);let ot;if(Vt.showLabelBackdrop){const ut=qn(Vt.backdropPadding),wt=Rt.heights[P],St=Rt.widths[P];let _t=z-ut.top,at=0-ut.left;switch(j){case"middle":_t-=wt/2;break;case"bottom":_t-=wt;break}switch(N){case"center":at-=St/2;break;case"right":at-=St;break;case"inner":P===I-1?at-=St:P>0&&(at-=St/2);break}ot={left:at,top:_t,width:St+ut.width,height:wt+ut.height,color:Vt.backdropColor}}k.push({label:V,font:A,textOffset:z,options:{rotation:S,color:bt,strokeColor:K,strokeWidth:st,textAlign:Y,textBaseline:j,translation:[B,H],backdrop:ot}})}return k}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-Zr(this.labelRotation))return t==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:i,mirror:s,padding:r}}=this.options,a=this._getLabelSizes(),l=t+r,u=a.widest.width;let h,p;return n==="left"?s?(p=this.right+r,i==="near"?h="left":i==="center"?(h="center",p+=u/2):(h="right",p+=u)):(p=this.right-l,i==="near"?h="right":i==="center"?(h="center",p-=u/2):(h="left",p=this.left)):n==="right"?s?(p=this.left+r,i==="near"?h="right":i==="center"?(h="center",p-=u/2):(h="left",p-=u)):(p=this.left+l,i==="near"?h="left":i==="center"?(h="center",p+=u/2):(h="right",p=this.right)):h="right",{textAlign:h,x:p}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:i,top:s,width:r,height:a}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(i,s,r,a),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(r=>r.value===t);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){const n=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,a;const l=(u,h,p)=>{!p.width||!p.color||(i.save(),i.lineWidth=p.width,i.strokeStyle=p.color,i.setLineDash(p.borderDash||[]),i.lineDashOffset=p.borderDashOffset,i.beginPath(),i.moveTo(u.x,u.y),i.lineTo(h.x,h.y),i.stroke(),i.restore())};if(n.display)for(r=0,a=s.length;r<a;++r){const u=s[r];n.drawOnChartArea&&l({x:u.x1,y:u.y1},{x:u.x2,y:u.y2},u),n.drawTicks&&l({x:u.tx1,y:u.ty1},{x:u.tx2,y:u.ty2},{color:u.tickColor,width:u.tickWidth,borderDash:u.tickBorderDash,borderDashOffset:u.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:i,grid:s}}=this,r=i.setContext(this.getContext()),a=i.display?r.width:0;if(!a)return;const l=s.setContext(this.getContext(0)).lineWidth,u=this._borderValue;let h,p,_,y;this.isHorizontal()?(h=Dr(t,this.left,a)-a/2,p=Dr(t,this.right,l)+l/2,_=y=u):(_=Dr(t,this.top,a)-a/2,y=Dr(t,this.bottom,l)+l/2,h=p=u),n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.beginPath(),n.moveTo(h,_),n.lineTo(p,y),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&xp(i,s);const r=this.getLabelItems(t);for(const a of r){const l=a.options,u=a.font,h=a.label,p=a.textOffset;_u(i,h,0,p,u,l)}s&&wp(i)}drawTitle(){const{ctx:t,options:{position:n,title:i,reverse:s}}=this;if(!i.display)return;const r=Ze(i.font),a=qn(i.padding),l=i.align;let u=r.lineHeight/2;n==="bottom"||n==="center"||Dt(n)?(u+=a.bottom,Ee(i.text)&&(u+=r.lineHeight*(i.text.length-1))):u+=a.top;const{titleX:h,titleY:p,maxWidth:_,rotation:y}=s3(this,u,n,l);_u(t,i.text,0,0,r,{color:i.color,maxWidth:_,rotation:y,textAlign:i3(l,n,s),textBaseline:"middle",translation:[h,p]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,i=Lt(t.grid&&t.grid.z,-1),s=Lt(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==ol.prototype.draw?[{z:n,draw:r=>{this.draw(r)}}]:[{z:i,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let r,a;for(r=0,a=n.length;r<a;++r){const l=n[r];l[i]===this.id&&(!t||l.type===t)&&s.push(l)}return s}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return Ze(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class rd{constructor(t,n,i){this.type=t,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let i;a3(n)&&(i=this.register(n));const s=this.items,r=t.id,a=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in s||(s[r]=t,r3(t,a,i),this.override&&pe.override(t.id,t.overrides)),a}get(t){return this.items[t]}unregister(t){const n=this.items,i=t.id,s=this.scope;i in n&&delete n[i],s&&i in pe[s]&&(delete pe[s][i],this.override&&delete fo[i])}}function r3(e,t,n){const i=pu(Object.create(null),[n?pe.get(n):{},pe.get(t),e.defaults]);pe.set(t,i),e.defaultRoutes&&o3(t,e.defaultRoutes),e.descriptors&&pe.describe(t,e.descriptors)}function o3(e,t){Object.keys(t).forEach(n=>{const i=n.split("."),s=i.pop(),r=[e].concat(i).join("."),a=t[n].split("."),l=a.pop(),u=a.join(".");pe.route(r,s,u,l)})}function a3(e){return"id"in e&&"defaults"in e}class l3{constructor(){this.controllers=new rd(Dc,"datasets",!0),this.elements=new rd(bo,"elements"),this.plugins=new rd(Object,"plugins"),this.scales=new rd(ol,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,i){[...n].forEach(s=>{const r=i||this._getRegistryForType(s);i||r.isForType(s)||r===this.plugins&&s.id?this._exec(t,r,s):Bt(s,a=>{const l=i||this._getRegistryForType(a);this._exec(t,l,a)})})}_exec(t,n,i){const s=iv(t);Qt(i["before"+s],[],i),n[t](i),Qt(i["after"+s],[],i)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(t))return i}return this.plugins}_get(t,n,i){const s=n.get(t);if(s===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return s}}var xi=new l3;class c3{constructor(){this._init=[]}notify(t,n,i,s){n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const r=s?this._descriptors(t).filter(s):this._descriptors(t),a=this._notify(r,t,n,i);return n==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),a}_notify(t,n,i,s){s=s||{};for(const r of t){const a=r.plugin,l=a[i],u=[n,s,r.options];if(Qt(l,u,a)===!1&&s.cancelable)return!1}return!0}invalidate(){Kt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const i=t&&t.config,s=Lt(i.options&&i.options.plugins,{}),r=u3(i);return s===!1&&!n?[]:d3(t,r,s,n)}_notifyStateChanges(t){const n=this._oldCache||[],i=this._cache,s=(r,a)=>r.filter(l=>!a.some(u=>l.plugin.id===u.plugin.id));this._notify(s(n,i),t,"stop"),this._notify(s(i,n),t,"start")}}function u3(e){const t={},n=[],i=Object.keys(xi.plugins.items);for(let r=0;r<i.length;r++)n.push(xi.getPlugin(i[r]));const s=e.plugins||[];for(let r=0;r<s.length;r++){const a=s[r];n.indexOf(a)===-1&&(n.push(a),t[a.id]=!0)}return{plugins:n,localIds:t}}function h3(e,t){return!t&&e===!1?null:e===!0?{}:e}function d3(e,{plugins:t,localIds:n},i,s){const r=[],a=e.getContext();for(const l of t){const u=l.id,h=h3(i[u],s);h!==null&&r.push({plugin:l,options:f3(e.config,{plugin:l,local:n[u]},h,a)})}return r}function f3(e,{plugin:t,local:n},i,s){const r=e.pluginScopeKeys(t),a=e.getOptionScopes(i,r);return n&&t.defaults&&a.push(t.defaults),e.createResolver(a,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function e_(e,t){const n=pe.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function p3(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function m3(e,t){return e===t?"_index_":"_value_"}function s1(e){if(e==="x"||e==="y"||e==="r")return e}function g3(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function n_(e,...t){if(s1(e))return e;for(const n of t){const i=n.axis||g3(n.position)||e.length>1&&s1(e[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function r1(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function _3(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(i=>i.xAxisID===e||i.yAxisID===e);if(n.length)return r1(e,"x",n[0])||r1(e,"y",n[0])}return{}}function y3(e,t){const n=fo[e.type]||{scales:{}},i=t.scales||{},s=e_(e.type,t),r=Object.create(null);return Object.keys(i).forEach(a=>{const l=i[a];if(!Dt(l))return console.error(`Invalid scale configuration for scale: ${a}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const u=n_(a,l,_3(a,e),pe.scales[l.type]),h=m3(u,s),p=n.scales||{};r[a]=Rc(Object.create(null),[{axis:u},l,p[u],p[h]])}),e.data.datasets.forEach(a=>{const l=a.type||e.type,u=a.indexAxis||e_(l,t),p=(fo[l]||{}).scales||{};Object.keys(p).forEach(_=>{const y=p3(_,u),w=a[y+"AxisID"]||y;r[w]=r[w]||Object.create(null),Rc(r[w],[{axis:y},i[w],p[_]])})}),Object.keys(r).forEach(a=>{const l=r[a];Rc(l,[pe.scales[l.type],pe.scale])}),r}function dP(e){const t=e.options||(e.options={});t.plugins=Lt(t.plugins,{}),t.scales=y3(e,t)}function fP(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function v3(e){return e=e||{},e.data=fP(e.data),dP(e),e}const o1=new Map,pP=new Set;function od(e,t){let n=o1.get(e);return n||(n=t(),o1.set(e,n),pP.add(n)),n}const nc=(e,t,n)=>{const i=Af(t,n);i!==void 0&&e.add(i)};class x3{constructor(t){this._config=v3(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=fP(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),dP(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return od(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return od(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return od(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,i=this.type;return od(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const i=this._scopeCache;let s=i.get(t);return(!s||n)&&(s=new Map,i.set(t,s)),s}getOptionScopes(t,n,i){const{options:s,type:r}=this,a=this._cachedScopes(t,i),l=a.get(n);if(l)return l;const u=new Set;n.forEach(p=>{t&&(u.add(t),p.forEach(_=>nc(u,t,_))),p.forEach(_=>nc(u,s,_)),p.forEach(_=>nc(u,fo[r]||{},_)),p.forEach(_=>nc(u,pe,_)),p.forEach(_=>nc(u,Xg,_))});const h=Array.from(u);return h.length===0&&h.push(Object.create(null)),pP.has(n)&&a.set(n,h),h}chartOptionScopes(){const{options:t,type:n}=this;return[t,fo[n]||{},pe.datasets[n]||{},{type:n},pe,Xg]}resolveNamedOptions(t,n,i,s=[""]){const r={$shared:!0},{resolver:a,subPrefixes:l}=a1(this._resolverCache,t,s);let u=a;if(b3(a,n)){r.$shared=!1,i=dr(i)?i():i;const h=this.createResolver(t,i,l);u=Za(a,i,h)}for(const h of n)r[h]=u[h];return r}createResolver(t,n,i=[""],s){const{resolver:r}=a1(this._resolverCache,t,i);return Dt(n)?Za(r,n,void 0,s):r}}function a1(e,t,n){let i=e.get(t);i||(i=new Map,e.set(t,i));const s=n.join();let r=i.get(s);return r||(r={resolver:av(t,n),subPrefixes:n.filter(l=>!l.toLowerCase().includes("hover"))},i.set(s,r)),r}const w3=e=>Dt(e)&&Object.getOwnPropertyNames(e).some(t=>dr(e[t]));function b3(e,t){const{isScriptable:n,isIndexable:i}=Kk(e);for(const s of t){const r=n(s),a=i(s),l=(a||r)&&e[s];if(r&&(dr(l)||w3(l))||a&&Ee(l))return!0}return!1}var T3="4.4.9";const E3=["top","bottom","left","right","chartArea"];function l1(e,t){return e==="top"||e==="bottom"||E3.indexOf(e)===-1&&t==="x"}function c1(e,t){return function(n,i){return n[e]===i[e]?n[t]-i[t]:n[e]-i[e]}}function u1(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),Qt(n&&n.onComplete,[e],t)}function S3(e){const t=e.chart,n=t.options.animation;Qt(n&&n.onProgress,[e],t)}function mP(e){return uv()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Nd={},h1=e=>{const t=mP(e);return Object.values(Nd).filter(n=>n.canvas===t).pop()};function k3(e,t,n){const i=Object.keys(e);for(const s of i){const r=+s;if(r>=t){const a=e[s];delete e[s],(n>0||r>t)&&(e[r+n]=a)}}}function P3(e,t,n,i){return!n||e.type==="mouseout"?null:i?t:e}var Ns;let Uu=(Ns=class{static register(...t){xi.add(...t),d1()}static unregister(...t){xi.remove(...t),d1()}constructor(t,n){const i=this.config=new x3(n),s=mP(t),r=h1(s);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const a=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||$z(s)),this.platform.updateConfig(i);const l=this.platform.acquireContext(s,a.aspectRatio),u=l&&l.canvas,h=u&&u.height,p=u&&u.width;if(this.id=MF(),this.ctx=l,this.canvas=u,this.width=p,this.height=h,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new c3,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=e4(_=>this.update(_),a.resizeDelay||0),this._dataChanges=[],Nd[this.id]=this,!l||!u){console.error("Failed to create chart: can't acquire context from the given item");return}Gi.listen(this,"complete",u1),Gi.listen(this,"progress",S3),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:i,height:s,_aspectRatio:r}=this;return Kt(t)?n&&r?r:s?i/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return xi}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():jw(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Mw(this.canvas,this.ctx),this}stop(){return Gi.stop(this),this}resize(t,n){Gi.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const i=this.options,s=this.canvas,r=i.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(s,t,n,r),l=i.devicePixelRatio||this.platform.getDevicePixelRatio(),u=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,jw(this,l,!0)&&(this.notifyPlugins("resize",{size:a}),Qt(i.onResize,[this,a],this),this.attached&&this._doResize(u)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Bt(n,(i,s)=>{i.id=s})}buildOrUpdateScales(){const t=this.options,n=t.scales,i=this.scales,s=Object.keys(i).reduce((a,l)=>(a[l]=!1,a),{});let r=[];n&&(r=r.concat(Object.keys(n).map(a=>{const l=n[a],u=n_(a,l),h=u==="r",p=u==="x";return{options:l,dposition:h?"chartArea":p?"bottom":"left",dtype:h?"radialLinear":p?"category":"linear"}}))),Bt(r,a=>{const l=a.options,u=l.id,h=n_(u,l),p=Lt(l.type,a.dtype);(l.position===void 0||l1(l.position,h)!==l1(a.dposition))&&(l.position=a.dposition),s[u]=!0;let _=null;if(u in i&&i[u].type===p)_=i[u];else{const y=xi.getScale(p);_=new y({id:u,type:p,ctx:this.ctx,chart:this}),i[_.id]=_}_.init(l,t)}),Bt(s,(a,l)=>{a||delete i[l]}),Bt(i,a=>{zn.configure(this,a,a.options),zn.addBox(this,a)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,i=t.length;if(t.sort((s,r)=>s.index-r.index),i>n){for(let s=n;s<i;++s)this._destroyDatasetMeta(s);t.splice(n,i-n)}this._sortedMetasets=t.slice(0).sort(c1("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((i,s)=>{n.filter(r=>r===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=n.length;i<s;i++){const r=n[i];let a=this.getDatasetMeta(i);const l=r.type||this.config.type;if(a.type&&a.type!==l&&(this._destroyDatasetMeta(i),a=this.getDatasetMeta(i)),a.type=l,a.indexAxis=r.indexAxis||e_(l,this.options),a.order=r.order||0,a.index=i,a.label=""+r.label,a.visible=this.isDatasetVisible(i),a.controller)a.controller.updateIndex(i),a.controller.linkScales();else{const u=xi.getController(l),{datasetElementType:h,dataElementType:p}=pe.datasets[l];Object.assign(u,{dataElementType:xi.getElement(p),datasetElementType:h&&xi.getElement(h)}),a.controller=new u(this,i),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){Bt(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let h=0,p=this.data.datasets.length;h<p;h++){const{controller:_}=this.getDatasetMeta(h),y=!s&&r.indexOf(_)===-1;_.buildOrUpdateElements(y),a=Math.max(+_.getMaxOverflow(),a)}a=this._minPadding=i.layout.autoPadding?a:0,this._updateLayout(a),s||Bt(r,h=>{h.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(c1("z","_idx"));const{_active:l,_lastEvent:u}=this;u?this._eventHandler(u,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){Bt(this.scales,t=>{zn.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!Ew(n,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:r}of n){const a=i==="_removeElements"?-r:r;k3(t,s,a)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=r=>new Set(t.filter(a=>a[0]===r).map((a,l)=>l+","+a.splice(1).join(","))),s=i(0);for(let r=1;r<n;r++)if(!Ew(s,i(r)))return;return Array.from(s).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;zn.update(this,this.width,this.height,t);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],Bt(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,r)=>{s._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,dr(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const i=this.getDatasetMeta(t),s={meta:i,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Gi.has(this)?this.attached&&!Gi.running(this)&&Gi.start(this):(this.draw(),u1({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,i=[];let s,r;for(s=0,r=n.length;s<r;++s){const a=n[s];(!t||a.visible)&&i.push(a)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,i={meta:t,index:t.index,cancelable:!0},s=sP(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(s&&xp(n,s),t.controller.draw(),s&&wp(n),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return gu(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,i,s){const r=Ez.modes[n];return typeof r=="function"?r(this,t,i,s):[]}getDatasetMeta(t){const n=this.data.datasets[t],i=this._metasets;let s=i.filter(r=>r&&r._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=wo(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(t,n){const i=this.getDatasetMeta(t);i.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,i){const s=i?"show":"hide",r=this.getDatasetMeta(t),a=r.controller._resolveAnimations(void 0,s);Rf(n)?(r.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),a.update(r,{visible:i}),this.update(l=>l.datasetIndex===t?s:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),Gi.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Mw(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Nd[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,i=(r,a)=>{n.addEventListener(this,r,a),t[r]=a},s=(r,a,l)=>{r.offsetX=a,r.offsetY=l,this._eventHandler(r)};Bt(this.options.events,r=>i(r,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,i=(u,h)=>{n.addEventListener(this,u,h),t[u]=h},s=(u,h)=>{t[u]&&(n.removeEventListener(this,u,h),delete t[u])},r=(u,h)=>{this.canvas&&this.resize(u,h)};let a;const l=()=>{s("attach",l),this.attached=!0,this.resize(),i("resize",r),i("detach",a)};a=()=>{this.attached=!1,s("resize",r),this._stop(),this._resize(0,0),i("attach",l)},n.isAttached(this.canvas)?l():a()}unbindEvents(){Bt(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},Bt(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,i){const s=i?"set":"remove";let r,a,l,u;for(n==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+s+"DatasetHoverStyle"]()),l=0,u=t.length;l<u;++l){a=t[l];const h=a&&this.getDatasetMeta(a.datasetIndex).controller;h&&h[s+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],i=t.map(({datasetIndex:r,index:a})=>{const l=this.getDatasetMeta(r);if(!l)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:l.data[a],index:a}});!If(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(t,n,i){return this._plugins.notify(this,t,n,i)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,i){const s=this.options.hover,r=(u,h)=>u.filter(p=>!h.some(_=>p.datasetIndex===_.datasetIndex&&p.index===_.index)),a=r(n,t),l=i?t:r(t,n);a.length&&this.updateHoverStyle(a,s.mode,!1),l.length&&s.mode&&this.updateHoverStyle(l,s.mode,!0)}_eventHandler(t,n){const i={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},s=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const r=this._handleEvent(t,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(r||i.changed)&&this.render(),this}_handleEvent(t,n,i){const{_active:s=[],options:r}=this,a=n,l=this._getActiveElements(t,s,i,a),u=zF(t),h=P3(t,this._lastEvent,i,u);i&&(this._lastEvent=null,Qt(r.onHover,[t,l,this],this),u&&Qt(r.onClick,[t,l,this],this));const p=!If(l,s);return(p||n)&&(this._active=l,this._updateHoverStyles(l,s,n)),this._lastEvent=h,p}_getActiveElements(t,n,i,s){if(t.type==="mouseout")return[];if(!i)return n;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,s)}},Tt(Ns,"defaults",pe),Tt(Ns,"instances",Nd),Tt(Ns,"overrides",fo),Tt(Ns,"registry",xi),Tt(Ns,"version",T3),Tt(Ns,"getChart",h1),Ns);function d1(){return Bt(Uu.instances,e=>e._plugins.invalidate())}function gP(e,t,n=t){e.lineCap=Lt(n.borderCapStyle,t.borderCapStyle),e.setLineDash(Lt(n.borderDash,t.borderDash)),e.lineDashOffset=Lt(n.borderDashOffset,t.borderDashOffset),e.lineJoin=Lt(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=Lt(n.borderWidth,t.borderWidth),e.strokeStyle=Lt(n.borderColor,t.borderColor)}function I3(e,t,n){e.lineTo(n.x,n.y)}function C3(e){return e.stepped?p4:e.tension||e.cubicInterpolationMode==="monotone"?m4:I3}function _P(e,t,n={}){const i=e.length,{start:s=0,end:r=i-1}=n,{start:a,end:l}=t,u=Math.max(s,a),h=Math.min(r,l),p=s<a&&r<a||s>l&&r>l;return{count:i,start:u,loop:t.loop,ilen:h<u&&!p?i+h-u:h-u}}function A3(e,t,n,i){const{points:s,options:r}=t,{count:a,start:l,loop:u,ilen:h}=_P(s,n,i),p=C3(r);let{move:_=!0,reverse:y}=i||{},w,E,S;for(w=0;w<=h;++w)E=s[(l+(y?h-w:w))%a],!E.skip&&(_?(e.moveTo(E.x,E.y),_=!1):p(e,S,E,y,r.stepped),S=E);return u&&(E=s[(l+(y?h:0))%a],p(e,S,E,y,r.stepped)),!!u}function R3(e,t,n,i){const s=t.points,{count:r,start:a,ilen:l}=_P(s,n,i),{move:u=!0,reverse:h}=i||{};let p=0,_=0,y,w,E,S,k,P;const I=V=>(a+(h?l-V:V))%r,R=()=>{S!==k&&(e.lineTo(p,k),e.lineTo(p,S),e.lineTo(p,P))};for(u&&(w=s[I(0)],e.moveTo(w.x,w.y)),y=0;y<=l;++y){if(w=s[I(y)],w.skip)continue;const V=w.x,B=w.y,H=V|0;H===E?(B<S?S=B:B>k&&(k=B),p=(_*p+V)/++_):(R(),e.lineTo(V,B),E=H,_=0,S=k=B),P=B}R()}function i_(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!n?R3:A3}function N3(e){return e.stepped?K4:e.tension||e.cubicInterpolationMode==="monotone"?Z4:Hr}function L3(e,t,n,i){let s=t._path;s||(s=t._path=new Path2D,t.path(s,n,i)&&s.closePath()),gP(e,t.options),e.stroke(s)}function M3(e,t,n,i){const{segments:s,options:r}=t,a=i_(t);for(const l of s)gP(e,r,l.style),e.beginPath(),a(e,t,l,{start:n,end:n+i-1})&&e.closePath(),e.stroke()}const O3=typeof Path2D=="function";function D3(e,t,n,i){O3&&!t.options.segment?L3(e,t,n,i):M3(e,t,n,i)}class ss extends bo{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const s=i.spanGaps?this._loop:this._fullLoop;z4(this._points,i,t,s,n),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=ez(this,this.options.segment))}first(){const t=this.segments,n=this.points;return t.length&&n[t[0].start]}last(){const t=this.segments,n=this.points,i=t.length;return i&&n[t[i-1].end]}interpolate(t,n){const i=this.options,s=t[n],r=this.points,a=iP(this,{property:n,start:s,end:s});if(!a.length)return;const l=[],u=N3(i);let h,p;for(h=0,p=a.length;h<p;++h){const{start:_,end:y}=a[h],w=r[_],E=r[y];if(w===E){l.push(w);continue}const S=Math.abs((s-w[n])/(E[n]-w[n])),k=u(w,E,S,i.stepped);k[n]=t[n],l.push(k)}return l.length===1?l[0]:l}pathSegment(t,n,i){return i_(this)(t,this,n,i)}path(t,n,i){const s=this.segments,r=i_(this);let a=this._loop;n=n||0,i=i||this.points.length-n;for(const l of s)a&=r(t,this,l,{start:n,end:n+i-1});return!!a}draw(t,n,i,s){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),D3(t,this,i,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Tt(ss,"id","line"),Tt(ss,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Tt(ss,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Tt(ss,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function f1(e,t,n,i){const s=e.options,{[n]:r}=e.getProps([n],i);return Math.abs(t-r)<s.radius+s.hitRadius}class jc extends bo{constructor(n){super();Tt(this,"parsed");Tt(this,"skip");Tt(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,i,s){const r=this.options,{x:a,y:l}=this.getProps(["x","y"],s);return Math.pow(n-a,2)+Math.pow(i-l,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(n,i){return f1(this,n,"x",i)}inYRange(n,i){return f1(this,n,"y",i)}getCenterPoint(n){const{x:i,y:s}=this.getProps(["x","y"],n);return{x:i,y:s}}size(n){n=n||this.options||{};let i=n.radius||0;i=Math.max(i,i&&n.hoverRadius||0);const s=i&&n.borderWidth||0;return(i+s)*2}draw(n,i){const s=this.options;this.skip||s.radius<.1||!gu(this,i,this.size(s)/2)||(n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.fillStyle=s.backgroundColor,Jg(n,s,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}Tt(jc,"id","point"),Tt(jc,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Tt(jc,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function j3(e,t,n){const i=e.segments,s=e.points,r=t.points,a=[];for(const l of i){let{start:u,end:h}=l;h=fv(u,h,s);const p=s_(n,s[u],s[h],l.loop);if(!t.segments){a.push({source:l,target:p,start:s[u],end:s[h]});continue}const _=iP(t,p);for(const y of _){const w=s_(n,r[y.start],r[y.end],y.loop),E=nP(l,s,w);for(const S of E)a.push({source:S,target:y,start:{[n]:p1(p,w,"start",Math.max)},end:{[n]:p1(p,w,"end",Math.min)}})}}return a}function s_(e,t,n,i){if(i)return;let s=t[e],r=n[e];return e==="angle"&&(s=wi(s),r=wi(r)),{property:e,start:s,end:r}}function V3(e,t){const{x:n=null,y:i=null}=e||{},s=t.points,r=[];return t.segments.forEach(({start:a,end:l})=>{l=fv(a,l,s);const u=s[a],h=s[l];i!==null?(r.push({x:u.x,y:i}),r.push({x:h.x,y:i})):n!==null&&(r.push({x:n,y:u.y}),r.push({x:n,y:h.y}))}),r}function fv(e,t,n){for(;t>e;t--){const i=n[t];if(!isNaN(i.x)&&!isNaN(i.y))break}return t}function p1(e,t,n,i){return e&&t?i(e[n],t[n]):e?e[n]:t?t[n]:0}function yP(e,t){let n=[],i=!1;return Ee(e)?(i=!0,n=e):n=V3(e,t),n.length?new ss({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function m1(e){return e&&e.fill!==!1}function F3(e,t,n){let s=e[t].fill;const r=[t];let a;if(!n)return s;for(;s!==!1&&r.indexOf(s)===-1;){if(!Xe(s))return s;if(a=e[s],!a)return!1;if(a.visible)return s;r.push(s),s=a.fill}return!1}function z3(e,t,n){const i=W3(e);if(Dt(i))return isNaN(i.value)?!1:i;let s=parseFloat(i);return Xe(s)&&Math.floor(s)===s?B3(i[0],t,s,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function B3(e,t,n,i){return(e==="-"||e==="+")&&(n=t+n),n===t||n<0||n>=i?!1:n}function U3(e,t){let n=null;return e==="start"?n=t.bottom:e==="end"?n=t.top:Dt(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}function H3(e,t,n){let i;return e==="start"?i=n:e==="end"?i=t.options.reverse?t.min:t.max:Dt(e)?i=e.value:i=t.getBaseValue(),i}function W3(e){const t=e.options,n=t.fill;let i=Lt(n&&n.target,n);return i===void 0&&(i=!!t.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function $3(e){const{scale:t,index:n,line:i}=e,s=[],r=i.segments,a=i.points,l=q3(t,n);l.push(yP({x:null,y:t.bottom},i));for(let u=0;u<r.length;u++){const h=r[u];for(let p=h.start;p<=h.end;p++)G3(s,a[p],l)}return new ss({points:s,options:{}})}function q3(e,t){const n=[],i=e.getMatchingVisibleMetas("line");for(let s=0;s<i.length;s++){const r=i[s];if(r.index===t)break;r.hidden||n.unshift(r.dataset)}return n}function G3(e,t,n){const i=[];for(let s=0;s<n.length;s++){const r=n[s],{first:a,last:l,point:u}=K3(r,t,"x");if(!(!u||a&&l)){if(a)i.unshift(u);else if(e.push(u),!l)break}}e.push(...i)}function K3(e,t,n){const i=e.interpolate(t,n);if(!i)return{};const s=i[n],r=e.segments,a=e.points;let l=!1,u=!1;for(let h=0;h<r.length;h++){const p=r[h],_=a[p.start][n],y=a[p.end][n];if(va(s,_,y)){l=s===_,u=s===y;break}}return{first:l,last:u,point:i}}class vP{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,n,i){const{x:s,y:r,radius:a}=this;return n=n||{start:0,end:ci},t.arc(s,r,a,n.end,n.start,!0),!i.bounds}interpolate(t){const{x:n,y:i,radius:s}=this,r=t.angle;return{x:n+Math.cos(r)*s,y:i+Math.sin(r)*s,angle:r}}}function Z3(e){const{chart:t,fill:n,line:i}=e;if(Xe(n))return Q3(t,n);if(n==="stack")return $3(e);if(n==="shape")return!0;const s=Y3(e);return s instanceof vP?s:yP(s,i)}function Q3(e,t){const n=e.getDatasetMeta(t);return n&&e.isDatasetVisible(t)?n.dataset:null}function Y3(e){return(e.scale||{}).getPointPositionForValue?J3(e):X3(e)}function X3(e){const{scale:t={},fill:n}=e,i=U3(n,t);if(Xe(i)){const s=t.isHorizontal();return{x:s?i:null,y:s?null:i}}return null}function J3(e){const{scale:t,fill:n}=e,i=t.options,s=t.getLabels().length,r=i.reverse?t.max:t.min,a=H3(n,t,r),l=[];if(i.grid.circular){const u=t.getPointPositionForValue(0,r);return new vP({x:u.x,y:u.y,radius:t.getDistanceFromCenterForValue(a)})}for(let u=0;u<s;++u)l.push(t.getPointPositionForValue(u,a));return l}function Im(e,t,n){const i=Z3(t),{chart:s,index:r,line:a,scale:l,axis:u}=t,h=a.options,p=h.fill,_=h.backgroundColor,{above:y=_,below:w=_}=p||{},E=s.getDatasetMeta(r),S=sP(s,E);i&&a.points.length&&(xp(e,n),tB(e,{line:a,target:i,above:y,below:w,area:n,scale:l,axis:u,clip:S}),wp(e))}function tB(e,t){const{line:n,target:i,above:s,below:r,area:a,scale:l,clip:u}=t,h=n._loop?"angle":t.axis;e.save(),h==="x"&&r!==s&&(g1(e,i,a.top),_1(e,{line:n,target:i,color:s,scale:l,property:h,clip:u}),e.restore(),e.save(),g1(e,i,a.bottom)),_1(e,{line:n,target:i,color:r,scale:l,property:h,clip:u}),e.restore()}function g1(e,t,n){const{segments:i,points:s}=t;let r=!0,a=!1;e.beginPath();for(const l of i){const{start:u,end:h}=l,p=s[u],_=s[fv(u,h,s)];r?(e.moveTo(p.x,p.y),r=!1):(e.lineTo(p.x,n),e.lineTo(p.x,p.y)),a=!!t.pathSegment(e,l,{move:a}),a?e.closePath():e.lineTo(_.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function _1(e,t){const{line:n,target:i,property:s,color:r,scale:a,clip:l}=t,u=j3(n,i,s);for(const{source:h,target:p,start:_,end:y}of u){const{style:{backgroundColor:w=r}={}}=h,E=i!==!0;e.save(),e.fillStyle=w,eB(e,a,l,E&&s_(s,_,y)),e.beginPath();const S=!!n.pathSegment(e,h);let k;if(E){S?e.closePath():y1(e,i,y,s);const P=!!i.pathSegment(e,p,{move:S,reverse:!0});k=S&&P,k||y1(e,i,_,s)}e.closePath(),e.fill(k?"evenodd":"nonzero"),e.restore()}}function eB(e,t,n,i){const s=t.chart.chartArea,{property:r,start:a,end:l}=i||{};if(r==="x"||r==="y"){let u,h,p,_;r==="x"?(u=a,h=s.top,p=l,_=s.bottom):(u=s.left,h=a,p=s.right,_=l),e.beginPath(),n&&(u=Math.max(u,n.left),p=Math.min(p,n.right),h=Math.max(h,n.top),_=Math.min(_,n.bottom)),e.rect(u,h,p-u,_-h),e.clip()}}function y1(e,t,n,i){const s=t.interpolate(n,i);s&&e.lineTo(s.x,s.y)}var nB={id:"filler",afterDatasetsUpdate(e,t,n){const i=(e.data.datasets||[]).length,s=[];let r,a,l,u;for(a=0;a<i;++a)r=e.getDatasetMeta(a),l=r.dataset,u=null,l&&l.options&&l instanceof ss&&(u={visible:e.isDatasetVisible(a),index:a,fill:z3(l,a,i),chart:e,axis:r.controller.options.indexAxis,scale:r.vScale,line:l}),r.$filler=u,s.push(u);for(a=0;a<i;++a)u=s[a],!(!u||u.fill===!1)&&(u.fill=F3(s,a,n.propagate))},beforeDraw(e,t,n){const i=n.drawTime==="beforeDraw",s=e.getSortedVisibleDatasetMetas(),r=e.chartArea;for(let a=s.length-1;a>=0;--a){const l=s[a].$filler;l&&(l.line.updateControlPoints(r,l.axis),i&&l.fill&&Im(e.ctx,l,r))}},beforeDatasetsDraw(e,t,n){if(n.drawTime!=="beforeDatasetsDraw")return;const i=e.getSortedVisibleDatasetMetas();for(let s=i.length-1;s>=0;--s){const r=i[s].$filler;m1(r)&&Im(e.ctx,r,e.chartArea)}},beforeDatasetDraw(e,t,n){const i=t.meta.$filler;!m1(i)||n.drawTime!=="beforeDatasetDraw"||Im(e.ctx,i,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const v1=(e,t)=>{let{boxHeight:n=t,boxWidth:i=t}=e;return e.usePointStyle&&(n=Math.min(n,t),i=e.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(t,n)}},iB=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class x1 extends bo{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,i){this.maxWidth=t,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=Qt(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(i=>t.filter(i,this.chart.data))),t.sort&&(n=n.sort((i,s)=>t.sort(i,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,s=Ze(i.font),r=s.size,a=this._computeTitleHeight(),{boxWidth:l,itemHeight:u}=v1(i,r);let h,p;n.font=s.string,this.isHorizontal()?(h=this.maxWidth,p=this._fitRows(a,r,l,u)+10):(p=this.maxHeight,h=this._fitCols(a,s,l,u)+10),this.width=Math.min(h,t.maxWidth||this.maxWidth),this.height=Math.min(p,t.maxHeight||this.maxHeight)}_fitRows(t,n,i,s){const{ctx:r,maxWidth:a,options:{labels:{padding:l}}}=this,u=this.legendHitBoxes=[],h=this.lineWidths=[0],p=s+l;let _=t;r.textAlign="left",r.textBaseline="middle";let y=-1,w=-p;return this.legendItems.forEach((E,S)=>{const k=i+n/2+r.measureText(E.text).width;(S===0||h[h.length-1]+k+2*l>a)&&(_+=p,h[h.length-(S>0?0:1)]=0,w+=p,y++),u[S]={left:0,top:w,row:y,width:k,height:s},h[h.length-1]+=k+l}),_}_fitCols(t,n,i,s){const{ctx:r,maxHeight:a,options:{labels:{padding:l}}}=this,u=this.legendHitBoxes=[],h=this.columnSizes=[],p=a-t;let _=l,y=0,w=0,E=0,S=0;return this.legendItems.forEach((k,P)=>{const{itemWidth:I,itemHeight:R}=sB(i,n,r,k,s);P>0&&w+R+2*l>p&&(_+=y+l,h.push({width:y,height:w}),E+=y+l,S++,y=w=0),u[P]={left:E,top:w,col:S,width:I,height:R},y=Math.max(y,I),w+=R+l}),_+=y,h.push({width:y,height:w}),_}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:s},rtl:r}}=this,a=Aa(r,this.left,this.width);if(this.isHorizontal()){let l=0,u=$e(i,this.left+s,this.right-this.lineWidths[l]);for(const h of n)l!==h.row&&(l=h.row,u=$e(i,this.left+s,this.right-this.lineWidths[l])),h.top+=this.top+t+s,h.left=a.leftForLtr(a.x(u),h.width),u+=h.width+s}else{let l=0,u=$e(i,this.top+t+s,this.bottom-this.columnSizes[l].height);for(const h of n)h.col!==l&&(l=h.col,u=$e(i,this.top+t+s,this.bottom-this.columnSizes[l].height)),h.top=u,h.left+=this.left+s,h.left=a.leftForLtr(a.x(h.left),h.width),u+=h.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;xp(t,this),this._draw(),wp(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:i,ctx:s}=this,{align:r,labels:a}=t,l=pe.color,u=Aa(t.rtl,this.left,this.width),h=Ze(a.font),{padding:p}=a,_=h.size,y=_/2;let w;this.drawTitle(),s.textAlign=u.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=h.string;const{boxWidth:E,boxHeight:S,itemHeight:k}=v1(a,_),P=function(H,N,b){if(isNaN(E)||E<=0||isNaN(S)||S<0)return;s.save();const A=Lt(b.lineWidth,1);if(s.fillStyle=Lt(b.fillStyle,l),s.lineCap=Lt(b.lineCap,"butt"),s.lineDashOffset=Lt(b.lineDashOffset,0),s.lineJoin=Lt(b.lineJoin,"miter"),s.lineWidth=A,s.strokeStyle=Lt(b.strokeStyle,l),s.setLineDash(Lt(b.lineDash,[])),a.usePointStyle){const O={radius:S*Math.SQRT2/2,pointStyle:b.pointStyle,rotation:b.rotation,borderWidth:A},D=u.xPlus(H,E/2),z=N+y;qk(s,O,D,z,a.pointStyleWidth&&E)}else{const O=N+Math.max((_-S)/2,0),D=u.leftForLtr(H,E),z=Oc(b.borderRadius);s.beginPath(),Object.values(z).some(j=>j!==0)?t_(s,{x:D,y:O,w:E,h:S,radius:z}):s.rect(D,O,E,S),s.fill(),A!==0&&s.stroke()}s.restore()},I=function(H,N,b){_u(s,b.text,H,N+k/2,h,{strikethrough:b.hidden,textAlign:u.textAlign(b.textAlign)})},R=this.isHorizontal(),V=this._computeTitleHeight();R?w={x:$e(r,this.left+p,this.right-i[0]),y:this.top+p+V,line:0}:w={x:this.left+p,y:$e(r,this.top+V+p,this.bottom-n[0].height),line:0},Jk(this.ctx,t.textDirection);const B=k+p;this.legendItems.forEach((H,N)=>{s.strokeStyle=H.fontColor,s.fillStyle=H.fontColor;const b=s.measureText(H.text).width,A=u.textAlign(H.textAlign||(H.textAlign=a.textAlign)),O=E+y+b;let D=w.x,z=w.y;u.setWidth(this.width),R?N>0&&D+O+p>this.right&&(z=w.y+=B,w.line++,D=w.x=$e(r,this.left+p,this.right-i[w.line])):N>0&&z+B>this.bottom&&(D=w.x=D+n[w.line].width+p,w.line++,z=w.y=$e(r,this.top+V+p,this.bottom-n[w.line].height));const j=u.x(D);if(P(j,z,H),D=n4(A,D+E+y,R?D+O:this.right,t.rtl),I(u.x(D),z,H),R)w.x+=O+p;else if(typeof H.text!="string"){const Rt=h.lineHeight;w.y+=xP(H,Rt)+p}else w.y+=B}),tP(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,i=Ze(n.font),s=qn(n.padding);if(!n.display)return;const r=Aa(t.rtl,this.left,this.width),a=this.ctx,l=n.position,u=i.size/2,h=s.top+u;let p,_=this.left,y=this.width;if(this.isHorizontal())y=Math.max(...this.lineWidths),p=this.top+h,_=$e(t.align,_,this.right-y);else{const E=this.columnSizes.reduce((S,k)=>Math.max(S,k.height),0);p=h+$e(t.align,this.top,this.bottom-E-t.labels.padding-this._computeTitleHeight())}const w=$e(l,_,_+y);a.textAlign=r.textAlign(rv(l)),a.textBaseline="middle",a.strokeStyle=n.color,a.fillStyle=n.color,a.font=i.string,_u(a,n.text,w,p,i)}_computeTitleHeight(){const t=this.options.title,n=Ze(t.font),i=qn(t.padding);return t.display?n.lineHeight+i.height:0}_getLegendItemAt(t,n){let i,s,r;if(va(t,this.left,this.right)&&va(n,this.top,this.bottom)){for(r=this.legendHitBoxes,i=0;i<r.length;++i)if(s=r[i],va(t,s.left,s.left+s.width)&&va(n,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(t){const n=this.options;if(!aB(t.type,n))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const s=this._hoveredItem,r=iB(s,i);s&&!r&&Qt(n.onLeave,[t,s,this],this),this._hoveredItem=i,i&&!r&&Qt(n.onHover,[t,i,this],this)}else i&&Qt(n.onClick,[t,i,this],this)}}function sB(e,t,n,i,s){const r=rB(i,e,t,n),a=oB(s,i,t.lineHeight);return{itemWidth:r,itemHeight:a}}function rB(e,t,n,i){let s=e.text;return s&&typeof s!="string"&&(s=s.reduce((r,a)=>r.length>a.length?r:a)),t+n.size/2+i.measureText(s).width}function oB(e,t,n){let i=e;return typeof t.text!="string"&&(i=xP(t,n)),i}function xP(e,t){const n=e.text?e.text.length:0;return t*n}function aB(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var wP={id:"legend",_element:x1,start(e,t,n){const i=e.legend=new x1({ctx:e.ctx,options:n,chart:e});zn.configure(e,i,n),zn.addBox(e,i)},stop(e){zn.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const i=e.legend;zn.configure(e,i,n),i.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const i=t.datasetIndex,s=n.chart;s.isDatasetVisible(i)?(s.hide(i),t.hidden=!0):(s.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:s,color:r,useBorderRadius:a,borderRadius:l}}=e.legend.options;return e._getSortedDatasetMetas().map(u=>{const h=u.controller.getStyle(n?0:void 0),p=qn(h.borderWidth);return{text:t[u.index].label,fillStyle:h.backgroundColor,fontColor:r,hidden:!u.visible,lineCap:h.borderCapStyle,lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:(p.width+p.height)/4,strokeStyle:h.borderColor,pointStyle:i||h.pointStyle,rotation:h.rotation,textAlign:s||h.textAlign,borderRadius:a&&(l||h.borderRadius),datasetIndex:u.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class bP extends bo{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const s=Ee(i.text)?i.text.length:1;this._padding=qn(i.padding);const r=s*Ze(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:i,bottom:s,right:r,options:a}=this,l=a.align;let u=0,h,p,_;return this.isHorizontal()?(p=$e(l,i,r),_=n+t,h=r-i):(a.position==="left"?(p=i+t,_=$e(l,s,n),u=Le*-.5):(p=r-t,_=$e(l,n,s),u=Le*.5),h=s-n),{titleX:p,titleY:_,maxWidth:h,rotation:u}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const i=Ze(n.font),r=i.lineHeight/2+this._padding.top,{titleX:a,titleY:l,maxWidth:u,rotation:h}=this._drawArgs(r);_u(t,n.text,0,0,i,{color:n.color,maxWidth:u,rotation:h,textAlign:rv(n.align),textBaseline:"middle",translation:[a,l]})}}function lB(e,t){const n=new bP({ctx:e.ctx,options:t,chart:e});zn.configure(e,n,t),zn.addBox(e,n),e.titleBlock=n}var TP={id:"title",_element:bP,start(e,t,n){lB(e,n)},stop(e){const t=e.titleBlock;zn.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const i=e.titleBlock;zn.configure(e,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const mc={average(e){if(!e.length)return!1;let t,n,i=new Set,s=0,r=0;for(t=0,n=e.length;t<n;++t){const l=e[t].element;if(l&&l.hasValue()){const u=l.tooltipPosition();i.add(u.x),s+=u.y,++r}}return r===0||i.size===0?!1:{x:[...i].reduce((l,u)=>l+u)/i.size,y:s/r}},nearest(e,t){if(!e.length)return!1;let n=t.x,i=t.y,s=Number.POSITIVE_INFINITY,r,a,l;for(r=0,a=e.length;r<a;++r){const u=e[r].element;if(u&&u.hasValue()){const h=u.getCenterPoint(),p=Yg(t,h);p<s&&(s=p,l=u)}}if(l){const u=l.tooltipPosition();n=u.x,i=u.y}return{x:n,y:i}}};function yi(e,t){return t&&(Ee(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Ki(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function cB(e,t){const{element:n,datasetIndex:i,index:s}=t,r=e.getDatasetMeta(i).controller,{label:a,value:l}=r.getLabelAndValue(s);return{chart:e,label:a,parsed:r.getParsed(s),raw:e.data.datasets[i].data[s],formattedValue:l,dataset:r.getDataset(),dataIndex:s,datasetIndex:i,element:n}}function w1(e,t){const n=e.chart.ctx,{body:i,footer:s,title:r}=e,{boxWidth:a,boxHeight:l}=t,u=Ze(t.bodyFont),h=Ze(t.titleFont),p=Ze(t.footerFont),_=r.length,y=s.length,w=i.length,E=qn(t.padding);let S=E.height,k=0,P=i.reduce((V,B)=>V+B.before.length+B.lines.length+B.after.length,0);if(P+=e.beforeBody.length+e.afterBody.length,_&&(S+=_*h.lineHeight+(_-1)*t.titleSpacing+t.titleMarginBottom),P){const V=t.displayColors?Math.max(l,u.lineHeight):u.lineHeight;S+=w*V+(P-w)*u.lineHeight+(P-1)*t.bodySpacing}y&&(S+=t.footerMarginTop+y*p.lineHeight+(y-1)*t.footerSpacing);let I=0;const R=function(V){k=Math.max(k,n.measureText(V).width+I)};return n.save(),n.font=h.string,Bt(e.title,R),n.font=u.string,Bt(e.beforeBody.concat(e.afterBody),R),I=t.displayColors?a+2+t.boxPadding:0,Bt(i,V=>{Bt(V.before,R),Bt(V.lines,R),Bt(V.after,R)}),I=0,n.font=p.string,Bt(e.footer,R),n.restore(),k+=E.width,{width:k,height:S}}function uB(e,t){const{y:n,height:i}=t;return n<i/2?"top":n>e.height-i/2?"bottom":"center"}function hB(e,t,n,i){const{x:s,width:r}=i,a=n.caretSize+n.caretPadding;if(e==="left"&&s+r+a>t.width||e==="right"&&s-r-a<0)return!0}function dB(e,t,n,i){const{x:s,width:r}=n,{width:a,chartArea:{left:l,right:u}}=e;let h="center";return i==="center"?h=s<=(l+u)/2?"left":"right":s<=r/2?h="left":s>=a-r/2&&(h="right"),hB(h,e,t,n)&&(h="center"),h}function b1(e,t,n){const i=n.yAlign||t.yAlign||uB(e,n);return{xAlign:n.xAlign||t.xAlign||dB(e,t,n,i),yAlign:i}}function fB(e,t){let{x:n,width:i}=e;return t==="right"?n-=i:t==="center"&&(n-=i/2),n}function pB(e,t,n){let{y:i,height:s}=e;return t==="top"?i+=n:t==="bottom"?i-=s+n:i-=s/2,i}function T1(e,t,n,i){const{caretSize:s,caretPadding:r,cornerRadius:a}=e,{xAlign:l,yAlign:u}=n,h=s+r,{topLeft:p,topRight:_,bottomLeft:y,bottomRight:w}=Oc(a);let E=fB(t,l);const S=pB(t,u,h);return u==="center"?l==="left"?E+=h:l==="right"&&(E-=h):l==="left"?E-=Math.max(p,y)+s:l==="right"&&(E+=Math.max(_,w)+s),{x:Fn(E,0,i.width-t.width),y:Fn(S,0,i.height-t.height)}}function ad(e,t,n){const i=qn(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-i.right:e.x+i.left}function E1(e){return yi([],Ki(e))}function mB(e,t,n){return wo(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function S1(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const EP={beforeTitle:qi,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return n[t.dataIndex]}return""},afterTitle:qi,beforeBody:qi,beforeLabel:qi,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return Kt(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:qi,afterBody:qi,beforeFooter:qi,footer:qi,afterFooter:qi};function cn(e,t,n,i){const s=e[t].call(n,i);return typeof s>"u"?EP[t].call(n,i):s}class r_ extends bo{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&n.options.animation&&i.animations,r=new rP(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=mB(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:i}=n,s=cn(i,"beforeTitle",this,t),r=cn(i,"title",this,t),a=cn(i,"afterTitle",this,t);let l=[];return l=yi(l,Ki(s)),l=yi(l,Ki(r)),l=yi(l,Ki(a)),l}getBeforeBody(t,n){return E1(cn(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:i}=n,s=[];return Bt(t,r=>{const a={before:[],lines:[],after:[]},l=S1(i,r);yi(a.before,Ki(cn(l,"beforeLabel",this,r))),yi(a.lines,cn(l,"label",this,r)),yi(a.after,Ki(cn(l,"afterLabel",this,r))),s.push(a)}),s}getAfterBody(t,n){return E1(cn(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:i}=n,s=cn(i,"beforeFooter",this,t),r=cn(i,"footer",this,t),a=cn(i,"afterFooter",this,t);let l=[];return l=yi(l,Ki(s)),l=yi(l,Ki(r)),l=yi(l,Ki(a)),l}_createItems(t){const n=this._active,i=this.chart.data,s=[],r=[],a=[];let l=[],u,h;for(u=0,h=n.length;u<h;++u)l.push(cB(this.chart,n[u]));return t.filter&&(l=l.filter((p,_,y)=>t.filter(p,_,y,i))),t.itemSort&&(l=l.sort((p,_)=>t.itemSort(p,_,i))),Bt(l,p=>{const _=S1(t.callbacks,p);s.push(cn(_,"labelColor",this,p)),r.push(cn(_,"labelPointStyle",this,p)),a.push(cn(_,"labelTextColor",this,p))}),this.labelColors=s,this.labelPointStyles=r,this.labelTextColors=a,this.dataPoints=l,l}update(t,n){const i=this.options.setContext(this.getContext()),s=this._active;let r,a=[];if(!s.length)this.opacity!==0&&(r={opacity:0});else{const l=mc[i.position].call(this,s,this._eventPosition);a=this._createItems(i),this.title=this.getTitle(a,i),this.beforeBody=this.getBeforeBody(a,i),this.body=this.getBody(a,i),this.afterBody=this.getAfterBody(a,i),this.footer=this.getFooter(a,i);const u=this._size=w1(this,i),h=Object.assign({},l,u),p=b1(this.chart,i,h),_=T1(i,h,p,this.chart);this.xAlign=p.xAlign,this.yAlign=p.yAlign,r={opacity:1,x:_.x,y:_.y,width:u.width,height:u.height,caretX:l.x,caretY:l.y}}this._tooltipItems=a,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,i,s){const r=this.getCaretPosition(t,i,s);n.lineTo(r.x1,r.y1),n.lineTo(r.x2,r.y2),n.lineTo(r.x3,r.y3)}getCaretPosition(t,n,i){const{xAlign:s,yAlign:r}=this,{caretSize:a,cornerRadius:l}=i,{topLeft:u,topRight:h,bottomLeft:p,bottomRight:_}=Oc(l),{x:y,y:w}=t,{width:E,height:S}=n;let k,P,I,R,V,B;return r==="center"?(V=w+S/2,s==="left"?(k=y,P=k-a,R=V+a,B=V-a):(k=y+E,P=k+a,R=V-a,B=V+a),I=k):(s==="left"?P=y+Math.max(u,p)+a:s==="right"?P=y+E-Math.max(h,_)-a:P=this.caretX,r==="top"?(R=w,V=R-a,k=P-a,I=P+a):(R=w+S,V=R+a,k=P+a,I=P-a),B=R),{x1:k,x2:P,x3:I,y1:R,y2:V,y3:B}}drawTitle(t,n,i){const s=this.title,r=s.length;let a,l,u;if(r){const h=Aa(i.rtl,this.x,this.width);for(t.x=ad(this,i.titleAlign,i),n.textAlign=h.textAlign(i.titleAlign),n.textBaseline="middle",a=Ze(i.titleFont),l=i.titleSpacing,n.fillStyle=i.titleColor,n.font=a.string,u=0;u<r;++u)n.fillText(s[u],h.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+l,u+1===r&&(t.y+=i.titleMarginBottom-l)}}_drawColorBox(t,n,i,s,r){const a=this.labelColors[i],l=this.labelPointStyles[i],{boxHeight:u,boxWidth:h}=r,p=Ze(r.bodyFont),_=ad(this,"left",r),y=s.x(_),w=u<p.lineHeight?(p.lineHeight-u)/2:0,E=n.y+w;if(r.usePointStyle){const S={radius:Math.min(h,u)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},k=s.leftForLtr(y,h)+h/2,P=E+u/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,Jg(t,S,k,P),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,Jg(t,S,k,P)}else{t.lineWidth=Dt(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;const S=s.leftForLtr(y,h),k=s.leftForLtr(s.xPlus(y,1),h-2),P=Oc(a.borderRadius);Object.values(P).some(I=>I!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,t_(t,{x:S,y:E,w:h,h:u,radius:P}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),t_(t,{x:k,y:E+1,w:h-2,h:u-2,radius:P}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(S,E,h,u),t.strokeRect(S,E,h,u),t.fillStyle=a.backgroundColor,t.fillRect(k,E+1,h-2,u-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,n,i){const{body:s}=this,{bodySpacing:r,bodyAlign:a,displayColors:l,boxHeight:u,boxWidth:h,boxPadding:p}=i,_=Ze(i.bodyFont);let y=_.lineHeight,w=0;const E=Aa(i.rtl,this.x,this.width),S=function(b){n.fillText(b,E.x(t.x+w),t.y+y/2),t.y+=y+r},k=E.textAlign(a);let P,I,R,V,B,H,N;for(n.textAlign=a,n.textBaseline="middle",n.font=_.string,t.x=ad(this,k,i),n.fillStyle=i.bodyColor,Bt(this.beforeBody,S),w=l&&k!=="right"?a==="center"?h/2+p:h+2+p:0,V=0,H=s.length;V<H;++V){for(P=s[V],I=this.labelTextColors[V],n.fillStyle=I,Bt(P.before,S),R=P.lines,l&&R.length&&(this._drawColorBox(n,t,V,E,i),y=Math.max(_.lineHeight,u)),B=0,N=R.length;B<N;++B)S(R[B]),y=_.lineHeight;Bt(P.after,S)}w=0,y=_.lineHeight,Bt(this.afterBody,S),t.y-=r}drawFooter(t,n,i){const s=this.footer,r=s.length;let a,l;if(r){const u=Aa(i.rtl,this.x,this.width);for(t.x=ad(this,i.footerAlign,i),t.y+=i.footerMarginTop,n.textAlign=u.textAlign(i.footerAlign),n.textBaseline="middle",a=Ze(i.footerFont),n.fillStyle=i.footerColor,n.font=a.string,l=0;l<r;++l)n.fillText(s[l],u.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+i.footerSpacing}}drawBackground(t,n,i,s){const{xAlign:r,yAlign:a}=this,{x:l,y:u}=t,{width:h,height:p}=i,{topLeft:_,topRight:y,bottomLeft:w,bottomRight:E}=Oc(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(l+_,u),a==="top"&&this.drawCaret(t,n,i,s),n.lineTo(l+h-y,u),n.quadraticCurveTo(l+h,u,l+h,u+y),a==="center"&&r==="right"&&this.drawCaret(t,n,i,s),n.lineTo(l+h,u+p-E),n.quadraticCurveTo(l+h,u+p,l+h-E,u+p),a==="bottom"&&this.drawCaret(t,n,i,s),n.lineTo(l+w,u+p),n.quadraticCurveTo(l,u+p,l,u+p-w),a==="center"&&r==="left"&&this.drawCaret(t,n,i,s),n.lineTo(l,u+_),n.quadraticCurveTo(l,u,l+_,u),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,i=this.$animations,s=i&&i.x,r=i&&i.y;if(s||r){const a=mc[t.position].call(this,this._active,this._eventPosition);if(!a)return;const l=this._size=w1(this,t),u=Object.assign({},a,this._size),h=b1(n,t,u),p=T1(t,u,h,n);(s._to!==p.x||r._to!==p.y)&&(this.xAlign=h.xAlign,this.yAlign=h.yAlign,this.width=l.width,this.height=l.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,p))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},r={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const a=qn(n.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&l&&(t.save(),t.globalAlpha=i,this.drawBackground(r,t,s,n),Jk(t,n.textDirection),r.y+=a.top,this.drawTitle(r,t,n),this.drawBody(r,t,n),this.drawFooter(r,t,n),tP(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const i=this._active,s=t.map(({datasetIndex:l,index:u})=>{const h=this.chart.getDatasetMeta(l);if(!h)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:h.data[u],index:u}}),r=!If(i,s),a=this._positionChanged(s,n);(r||a)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,r=this._active||[],a=this._getActiveElements(t,r,n,i),l=this._positionChanged(a,t),u=n||!If(a,r)||l;return u&&(this._active=a,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),u}_getActiveElements(t,n,i,s){const r=this.options;if(t.type==="mouseout")return[];if(!s)return n.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const a=this.chart.getElementsAtEventForMode(t,r.mode,r,i);return r.reverse&&a.reverse(),a}_positionChanged(t,n){const{caretX:i,caretY:s,options:r}=this,a=mc[r.position].call(this,t,n);return a!==!1&&(i!==a.x||s!==a.y)}}Tt(r_,"positioners",mc);var SP={id:"tooltip",_element:r_,positioners:mc,afterInit(e,t,n){n&&(e.tooltip=new r_({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:EP},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const gB=(e,t,n,i)=>(typeof t=="string"?(n=e.push(t)-1,i.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function _B(e,t,n,i){const s=e.indexOf(t);if(s===-1)return gB(e,t,n,i);const r=e.lastIndexOf(t);return s!==r?n:s}const yB=(e,t)=>e===null?null:Fn(Math.round(e),0,t);function k1(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class Of extends ol{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:s,label:r}of n)i[s]===r&&i.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(Kt(t))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===t?n:_B(i,t,Lt(n,t),this._addedLabels),yB(n,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),n||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const t=this.min,n=this.max,i=this.options.offset,s=[];let r=this.getLabels();r=t===0&&n===r.length-1?r:r.slice(t,n+1),this._valueRange=Math.max(r.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let a=t;a<=n;a++)s.push({value:a});return s}getLabelForValue(t){return k1.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}Tt(Of,"id","category"),Tt(Of,"defaults",{ticks:{callback:k1}});function vB(e,t){const n=[],{bounds:s,step:r,min:a,max:l,precision:u,count:h,maxTicks:p,maxDigits:_,includeBounds:y}=e,w=r||1,E=p-1,{min:S,max:k}=t,P=!Kt(a),I=!Kt(l),R=!Kt(h),V=(k-S)/(_+1);let B=kw((k-S)/E/w)*w,H,N,b,A;if(B<1e-14&&!P&&!I)return[{value:S},{value:k}];A=Math.ceil(k/B)-Math.floor(S/B),A>E&&(B=kw(A*B/E/w)*w),Kt(u)||(H=Math.pow(10,u),B=Math.ceil(B*H)/H),s==="ticks"?(N=Math.floor(S/B)*B,b=Math.ceil(k/B)*B):(N=S,b=k),P&&I&&r&&$F((l-a)/r,B/1e3)?(A=Math.round(Math.min((l-a)/B,p)),B=(l-a)/A,N=a,b=l):R?(N=P?a:N,b=I?l:b,A=h-1,B=(b-N)/A):(A=(b-N)/B,Nc(A,Math.round(A),B/1e3)?A=Math.round(A):A=Math.ceil(A));const O=Math.max(Pw(B),Pw(N));H=Math.pow(10,Kt(u)?O:u),N=Math.round(N*H)/H,b=Math.round(b*H)/H;let D=0;for(P&&(y&&N!==a?(n.push({value:a}),N<a&&D++,Nc(Math.round((N+D*B)*H)/H,a,P1(a,V,e))&&D++):N<a&&D++);D<A;++D){const z=Math.round((N+D*B)*H)/H;if(I&&z>l)break;n.push({value:z})}return I&&y&&b!==l?n.length&&Nc(n[n.length-1].value,l,P1(l,V,e))?n[n.length-1].value=l:n.push({value:l}):(!I||b===l)&&n.push({value:b}),n}function P1(e,t,{horizontal:n,minRotation:i}){const s=Zr(i),r=(n?Math.sin(s):Math.cos(s))||.001,a=.75*t*(""+e).length;return Math.min(t/r,a)}class xB extends ol{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return Kt(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:s,max:r}=this;const a=u=>s=n?s:u,l=u=>r=i?r:u;if(t){const u=Ka(s),h=Ka(r);u<0&&h<0?l(0):u>0&&h>0&&a(0)}if(s===r){let u=r===0?1:Math.abs(r*.05);l(r+u),t||a(s-u)}this.min=s,this.max=r}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=t,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},r=this._range||this,a=vB(s,r);return t.bounds==="ticks"&&qF(a,this,"value"),t.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const t=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const s=(i-n)/Math.max(t.length-1,1)/2;n-=s,i+=s}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(t){return Hk(t,this.chart.options.locale,this.options.ticks.format)}}class Df extends xB{determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=Xe(t)?t:0,this.max=Xe(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,i=Zr(this.options.ticks.minRotation),s=(t?Math.sin(i):Math.cos(i))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,r.lineHeight/s))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}Tt(Df,"id","linear"),Tt(Df,"defaults",{ticks:{callback:$k.formatters.numeric}});const Tp={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},hn=Object.keys(Tp);function I1(e,t){return e-t}function C1(e,t){if(Kt(t))return null;const n=e._adapter,{parser:i,round:s,isoWeekday:r}=e._parseOpts;let a=t;return typeof i=="function"&&(a=i(a)),Xe(a)||(a=typeof i=="string"?n.parse(a,i):n.parse(a)),a===null?null:(s&&(a=s==="week"&&(mu(r)||r===!0)?n.startOf(a,"isoWeek",r):n.startOf(a,s)),+a)}function A1(e,t,n,i){const s=hn.length;for(let r=hn.indexOf(e);r<s-1;++r){const a=Tp[hn[r]],l=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((n-t)/(l*a.size))<=i)return hn[r]}return hn[s-1]}function wB(e,t,n,i,s){for(let r=hn.length-1;r>=hn.indexOf(n);r--){const a=hn[r];if(Tp[a].common&&e._adapter.diff(s,i,a)>=t-1)return a}return hn[n?hn.indexOf(n):0]}function bB(e){for(let t=hn.indexOf(e)+1,n=hn.length;t<n;++t)if(Tp[hn[t]].common)return hn[t]}function R1(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:i,hi:s}=sv(n,t),r=n[i]>=t?n[i]:n[s];e[r]=!0}}function TB(e,t,n,i){const s=e._adapter,r=+s.startOf(t[0].value,i),a=t[t.length-1].value;let l,u;for(l=r;l<=a;l=+s.add(l,1,i))u=n[l],u>=0&&(t[u].major=!0);return t}function N1(e,t,n){const i=[],s={},r=t.length;let a,l;for(a=0;a<r;++a)l=t[a],s[l]=a,i.push({value:l,major:!1});return r===0||!n?i:TB(e,i,s,n)}class jf extends ol{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const i=t.time||(t.time={}),s=this._adapter=new vz._date(t.adapters.date);s.init(n),Rc(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:C1(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,i=t.time.unit||"day";let{min:s,max:r,minDefined:a,maxDefined:l}=this.getUserBounds();function u(h){!a&&!isNaN(h.min)&&(s=Math.min(s,h.min)),!l&&!isNaN(h.max)&&(r=Math.max(r,h.max))}(!a||!l)&&(u(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&u(this.getMinMax(!1))),s=Xe(s)&&!isNaN(s)?s:+n.startOf(Date.now(),i),r=Xe(r)&&!isNaN(r)?r:+n.endOf(Date.now(),i)+1,this.min=Math.min(s,r-1),this.max=Math.max(s+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],i=t[t.length-1]),{min:n,max:i}}buildTicks(){const t=this.options,n=t.time,i=t.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const r=this.min,a=this.max,l=XF(s,r,a);return this._unit=n.unit||(i.autoSkip?A1(n.minUnit,this.min,this.max,this._getLabelCapacity(r)):wB(this,l.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:bB(this._unit),this.initOffsets(s),t.reverse&&l.reverse(),N1(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,i=0,s,r;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?n=1-s:n=(this.getDecimalForValue(t[1])-s)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?i=r:i=(r-this.getDecimalForValue(t[t.length-2]))/2);const a=t.length<3?.5:.25;n=Fn(n,0,a),i=Fn(i,0,a),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const t=this._adapter,n=this.min,i=this.max,s=this.options,r=s.time,a=r.unit||A1(r.minUnit,n,i,this._getLabelCapacity(n)),l=Lt(s.ticks.stepSize,1),u=a==="week"?r.isoWeekday:!1,h=mu(u)||u===!0,p={};let _=n,y,w;if(h&&(_=+t.startOf(_,"isoWeek",u)),_=+t.startOf(_,h?"day":a),t.diff(i,n,a)>1e5*l)throw new Error(n+" and "+i+" are too far apart with stepSize of "+l+" "+a);const E=s.ticks.source==="data"&&this.getDataTimestamps();for(y=_,w=0;y<i;y=+t.add(y,l,a),w++)R1(p,y,E);return(y===i||s.bounds==="ticks"||w===1)&&R1(p,y,E),Object.keys(p).sort(I1).map(S=>+S)}getLabelForValue(t){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(t,i.tooltipFormat):n.format(t,i.displayFormats.datetime)}format(t,n){const s=this.options.time.displayFormats,r=this._unit,a=n||s[r];return this._adapter.format(t,a)}_tickFormatFunction(t,n,i,s){const r=this.options,a=r.ticks.callback;if(a)return Qt(a,[t,n,i],this);const l=r.time.displayFormats,u=this._unit,h=this._majorUnit,p=u&&l[u],_=h&&l[h],y=i[n],w=h&&_&&y&&y.major;return this._adapter.format(t,s||(w?_:p))}generateTickLabels(t){let n,i,s;for(n=0,i=t.length;n<i;++n)s=t[n],s.label=this._tickFormatFunction(s.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(t){const n=this._offsets,i=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,i=this.ctx.measureText(t).width,s=Zr(this.isHorizontal()?n.maxRotation:n.minRotation),r=Math.cos(s),a=Math.sin(s),l=this._resolveTickFontOptions(0).size;return{w:i*r+l*a,h:i*a+l*r}}_getLabelCapacity(t){const n=this.options.time,i=n.displayFormats,s=i[n.unit]||i.millisecond,r=this._tickFormatFunction(t,0,N1(this,[t],this._majorUnit),s),a=this._getLabelSize(r),l=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return l>0?l:1}getDataTimestamps(){let t=this._cache.data||[],n,i;if(t.length)return t;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,i=s.length;n<i;++n)t=t.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,i;if(t.length)return t;const s=this.getLabels();for(n=0,i=s.length;n<i;++n)t.push(C1(this,s[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return t4(t.sort(I1))}}Tt(jf,"id","time"),Tt(jf,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function ld(e,t,n){let i=0,s=e.length-1,r,a,l,u;n?(t>=e[i].pos&&t<=e[s].pos&&({lo:i,hi:s}=Qr(e,"pos",t)),{pos:r,time:l}=e[i],{pos:a,time:u}=e[s]):(t>=e[i].time&&t<=e[s].time&&({lo:i,hi:s}=Qr(e,"time",t)),{time:r,pos:l}=e[i],{time:a,pos:u}=e[s]);const h=a-r;return h?l+(u-l)*(t-r)/h:l}class L1 extends jf{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=ld(n,this.min),this._tableRange=ld(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:i}=this,s=[],r=[];let a,l,u,h,p;for(a=0,l=t.length;a<l;++a)h=t[a],h>=n&&h<=i&&s.push(h);if(s.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(a=0,l=s.length;a<l;++a)p=s[a+1],u=s[a-1],h=s[a],Math.round((p+u)/2)!==h&&r.push({time:h,pos:a/(l-1)});return r}_generate(){const t=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((s,r)=>s-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?t=this.normalize(n.concat(i)):t=n.length?n:i,t=this._cache.all=t,t}getDecimalForValue(t){return(ld(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,i=this.getDecimalForPixel(t)/n.factor-n.end;return ld(this._table,i*this._tableRange+this._minPos,!0)}}Tt(L1,"id","timeseries"),Tt(L1,"defaults",jf.defaults);const kP="label";function M1(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function EB(e,t){const n=e.options;n&&t&&Object.assign(n,t)}function PP(e,t){e.labels=t}function IP(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:kP;const i=[];e.datasets=t.map(s=>{const r=e.datasets.find(a=>a[n]===s[n]);return!r||!s.data||i.includes(r)?{...s}:(i.push(r),Object.assign(r,s),r)})}function SB(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:kP;const n={labels:[],datasets:[]};return PP(n,e.labels),IP(n,e.datasets,t),n}function kB(e,t){const{height:n=150,width:i=300,redraw:s=!1,datasetIdKey:r,type:a,data:l,options:u,plugins:h=[],fallbackContent:p,updateMode:_,...y}=e,w=$.useRef(null),E=$.useRef(null),S=()=>{w.current&&(E.current=new Uu(w.current,{type:a,data:SB(l,r),options:u&&{...u},plugins:h}),M1(t,E.current))},k=()=>{M1(t,null),E.current&&(E.current.destroy(),E.current=null)};return $.useEffect(()=>{!s&&E.current&&u&&EB(E.current,u)},[s,u]),$.useEffect(()=>{!s&&E.current&&PP(E.current.config.data,l.labels)},[s,l.labels]),$.useEffect(()=>{!s&&E.current&&l.datasets&&IP(E.current.config.data,l.datasets,r)},[s,l.datasets]),$.useEffect(()=>{E.current&&(s?(k(),setTimeout(S)):E.current.update(_))},[s,u,l.labels,l.datasets,_]),$.useEffect(()=>{E.current&&(k(),setTimeout(S))},[a]),$.useEffect(()=>(S(),()=>k()),[]),xu.createElement("canvas",{ref:w,role:"img",height:n,width:i,...y},p)}const PB=$.forwardRef(kB);function IB(e,t){return Uu.register(t),$.forwardRef((n,i)=>xu.createElement(PB,{...n,ref:i,type:e}))}const CP=IB("line",Ad);Uu.register(Of,Df,jc,ss,TP,SP,wP,nB);const CB=({route:e})=>{const{theme:t}=ip(),n=t==="dark",i=e.segments.flatMap(_=>_.points),s=Math.max(1,Math.floor(i.length/100)),r=i.filter((_,y)=>y%s===0);let a=0;const l=[],u=[];r.forEach((_,y)=>{if(y>0){const w=r[y-1],E=w.position.lat,S=w.position.lon,k=_.position.lat,P=_.position.lon,I=6371e3,R=E*Math.PI/180,V=k*Math.PI/180,B=(k-E)*Math.PI/180,H=(P-S)*Math.PI/180,N=Math.sin(B/2)*Math.sin(B/2)+Math.cos(R)*Math.cos(V)*Math.sin(H/2)*Math.sin(H/2),b=2*Math.atan2(Math.sqrt(N),Math.sqrt(1-N)),A=I*b;a+=A}l.push(a),u.push(_.position.ele)});const h={labels:l.map(_=>Ga(_)),datasets:[{label:"Elevation (m)",data:u,borderColor:"#0F7BFF",backgroundColor:"rgba(15, 123, 255, 0.2)",borderWidth:2,fill:!0,tension:.4,pointRadius:0,pointHoverRadius:5}]},p={responsive:!0,maintainAspectRatio:!1,scales:{x:{display:!0,title:{display:!0,text:"Distance",color:n?"#9CA3AF":"#6B7280"},ticks:{maxTicksLimit:8,color:n?"#9CA3AF":"#6B7280"},grid:{display:!1}},y:{display:!0,title:{display:!0,text:"Elevation (m)",color:n?"#9CA3AF":"#6B7280"},ticks:{color:n?"#9CA3AF":"#6B7280"},grid:{color:n?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.05)"}}},plugins:{legend:{display:!1},tooltip:{backgroundColor:n?"#1E293B":"#FFFFFF",titleColor:n?"#F9FAFB":"#1A1A1A",bodyColor:n?"#F9FAFB":"#1A1A1A",borderColor:n?"#334155":"#E5E7EB",borderWidth:1,callbacks:{label:function(_){return`Elevation: ${_.raw}m`}}}},interaction:{mode:"nearest",axis:"x",intersect:!1}};return m.jsx(CP,{data:h,options:p})};Uu.register(Of,Df,jc,ss,TP,SP,wP);const AB=({route:e})=>{const{theme:t}=ip(),n=t==="dark",i=$.useMemo(()=>{const r=e.segments.flatMap(y=>y.points),a=Math.max(1,Math.floor(r.length/100)),l=r.filter((y,w)=>w%a===0);let u=0;const h=[],p=[],_=[];return l.forEach((y,w)=>{if(w>0){const E=l[w-1],S=E.position.lat,k=E.position.lon,P=y.position.lat,I=y.position.lon,R=6371e3,V=S*Math.PI/180,B=P*Math.PI/180,H=(P-S)*Math.PI/180,N=(I-k)*Math.PI/180,b=Math.sin(H/2)*Math.sin(H/2)+Math.cos(V)*Math.cos(B)*Math.sin(N/2)*Math.sin(N/2),A=2*Math.atan2(Math.sqrt(b),Math.sqrt(1-b)),O=R*A;u+=O}h.push(u),p.push(y.speed?y.speed*3.6:0),_.push(y.heartRate||0)}),{labels:h.map(y=>Ga(y)),datasets:[{label:"Speed (km/h)",data:p,borderColor:"#0F7BFF",backgroundColor:"#0F7BFF",borderWidth:2,yAxisID:"y",tension:.3,pointRadius:0},{label:"Heart Rate (bpm)",data:_.some(y=>y>0)?_:[],borderColor:"#F97316",backgroundColor:"#F97316",borderWidth:2,yAxisID:"y1",tension:.3,pointRadius:0,hidden:!_.some(y=>y>0)}]}},[e]),s={responsive:!0,maintainAspectRatio:!1,scales:{x:{display:!0,title:{display:!0,text:"Distance",color:n?"#9CA3AF":"#6B7280"},ticks:{maxTicksLimit:8,color:n?"#9CA3AF":"#6B7280"},grid:{display:!1}},y:{type:"linear",display:!0,position:"left",title:{display:!0,text:"Speed (km/h)",color:"#0F7BFF"},ticks:{color:n?"#9CA3AF":"#6B7280"},grid:{color:n?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.05)"}},y1:{type:"linear",display:i.datasets[1].data.some(r=>r>0),position:"right",title:{display:!0,text:"Heart Rate (bpm)",color:"#F97316"},ticks:{color:n?"#9CA3AF":"#6B7280"},grid:{drawOnChartArea:!1}}},plugins:{legend:{position:"top",labels:{color:n?"#F9FAFB":"#1A1A1A",usePointStyle:!0,pointStyle:"circle"}},tooltip:{backgroundColor:n?"#1E293B":"#FFFFFF",titleColor:n?"#F9FAFB":"#1A1A1A",bodyColor:n?"#F9FAFB":"#1A1A1A",borderColor:n?"#334155":"#E5E7EB",borderWidth:1}},interaction:{mode:"nearest",axis:"x",intersect:!1}};return m.jsx(CP,{data:i,options:s})},RB=()=>{const{id:e}=lA(),t=tl(),{getRoute:n,deleteRoute:i}=vp(),[s,r]=$.useState(e?n(e):void 0),[a,l]=$.useState(!1);if($.useEffect(()=>{if(e){const p=n(e);p?r(p):t("/")}},[e,n,t]),!s)return m.jsx("div",{className:"p-6",children:"Loading route..."});const u=()=>{e&&(i(e),t("/dashboard"))},h=async()=>{if(navigator.share)try{await navigator.share({title:s.name,text:`Check out my route: ${s.name}`,url:window.location.href})}catch(p){console.log("Error sharing:",p)}else navigator.clipboard.writeText(window.location.href),alert("Link copied to clipboard!")};return m.jsxs("div",{className:"fade-in pb-16 md:pb-8",children:[m.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{onClick:()=>t(-1),className:"p-2 rounded-full hover:bg-background",children:m.jsx(VA,{size:20})}),m.jsx("h1",{className:"text-2xl font-bold",children:s.name})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{onClick:h,className:"btn btn-outline",children:m.jsx(fE,{size:18})}),m.jsx("button",{onClick:()=>l(!0),className:"btn text-text-light hover:text-white hover:bg-red-500 transition-colors",children:m.jsx(sy,{size:18})})]})]}),m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[m.jsxs("div",{className:"card p-4 flex items-center gap-4",children:[m.jsx("div",{className:"p-3 rounded-full bg-blue-100 dark:bg-blue-900/30",children:m.jsx(ny,{className:"text-primary",size:20})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-text-light text-sm",children:"Date"}),m.jsx("p",{className:"font-semibold",children:Jy(new Date(s.date))})]})]}),m.jsxs("div",{className:"card p-4 flex items-center gap-4",children:[m.jsx("div",{className:"p-3 rounded-full bg-green-100 dark:bg-green-900/30",children:m.jsx("svg",{className:"text-accent",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:m.jsx("path",{d:"M12 2L4 9H11L3 22H21L13 9H20L12 2Z",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round"})})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-text-light text-sm",children:"Distance"}),m.jsx("p",{className:"font-semibold",children:Ga(s.totalDistance)})]})]}),m.jsxs("div",{className:"card p-4 flex items-center gap-4",children:[m.jsx("div",{className:"p-3 rounded-full bg-purple-100 dark:bg-purple-900/30",children:m.jsx(mE,{className:"text-purple-500",size:20})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-text-light text-sm",children:"Duration"}),m.jsx("p",{className:"font-semibold",children:Pf(s.totalDuration)})]})]}),m.jsxs("div",{className:"card p-4 flex items-center gap-4",children:[m.jsx("div",{className:"p-3 rounded-full bg-orange-100 dark:bg-orange-900/30",children:m.jsx(cE,{className:"text-orange-500",size:20})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-text-light text-sm",children:"Elevation"}),m.jsx("p",{className:"font-semibold",children:sF(s.totalElevationGain)})]})]})]}),m.jsx("div",{className:"card mb-6 overflow-hidden",children:m.jsx("div",{className:"h-72 sm:h-96 w-full",children:m.jsx(hF,{route:s})})}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[m.jsxs("div",{className:"card p-4",children:[m.jsx("h3",{className:"font-bold mb-3",children:"Elevation Profile"}),m.jsx("div",{className:"h-48 md:h-64",children:m.jsx(CB,{route:s})})]}),m.jsxs("div",{className:"card p-4",children:[m.jsx("h3",{className:"font-bold mb-3",children:"Speed & Heart Rate"}),m.jsx("div",{className:"h-48 md:h-64",children:m.jsx(AB,{route:s})})]})]}),a&&m.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black/50 p-4",children:m.jsxs("div",{className:"card max-w-md w-full p-6 fade-in slide-up",children:[m.jsx("h3",{className:"text-xl font-bold mb-3",children:"Delete Route?"}),m.jsxs("p",{className:"text-text-light mb-6",children:["Are you sure you want to delete ",m.jsx("span",{className:"font-medium",children:s.name}),"? This action cannot be undone."]}),m.jsxs("div",{className:"flex gap-3 justify-end",children:[m.jsx("button",{className:"btn text-text-light hover:bg-background",onClick:()=>l(!1),children:"Cancel"}),m.jsx("button",{className:"btn bg-red-500 text-white hover:bg-red-600",onClick:u,children:"Delete"})]})]})})]})},NB=()=>{const e=tl(),{addRoute:t,loading:n}=vp(),[i,s]=$.useState(!1),[r,a]=$.useState(null),[l,u]=$.useState(null),h=$.useRef(null),p=k=>{k.preventDefault(),k.stopPropagation(),k.type==="dragenter"||k.type==="dragover"?s(!0):k.type==="dragleave"&&s(!1)},_=k=>k.name.toLowerCase().endsWith(".gpx")?k.size>10*1024*1024?(u("File size exceeds 10MB limit"),!1):!0:(u("Only GPX files are supported"),!1),y=async k=>{if(k.preventDefault(),k.stopPropagation(),s(!1),u(null),k.dataTransfer.files&&k.dataTransfer.files.length>0){const P=k.dataTransfer.files[0];_(P)&&a(P)}},w=k=>{if(k.preventDefault(),u(null),k.target.files&&k.target.files.length>0){const P=k.target.files[0];_(P)&&a(P)}},E=async()=>{if(r)try{await t(r)?e("/dashboard"):u("Failed to parse GPX file")}catch(k){u("An error occurred while processing the file"),console.error(k)}},S=()=>{h.current&&h.current.click()};return m.jsxs("div",{className:"fade-in max-w-2xl mx-auto",children:[m.jsxs("div",{className:"mb-6",children:[m.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Upload Route"}),m.jsx("p",{className:"text-text-light",children:"Upload a GPX file to add a new route"})]}),m.jsx("div",{className:"card mb-6",children:m.jsx("div",{className:`
            p-8 border-2 border-dashed rounded-xl flex flex-col items-center justify-center text-center
            ${i?"border-primary bg-primary/5":"border-border"}
            ${l?"border-red-500 bg-red-50 dark:bg-red-900/10":""}
            transition-all duration-200
          `,onDragEnter:p,onDragOver:p,onDragLeave:p,onDrop:y,style:{minHeight:"16rem"},children:r?m.jsxs("div",{className:"fade-in",children:[m.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:m.jsx(WA,{size:28,className:"text-primary"})}),m.jsx("h3",{className:"text-lg font-semibold mb-1",children:r.name}),m.jsxs("p",{className:"text-text-light mb-4",children:[(r.size/1024).toFixed(1)," KB"]}),m.jsx("button",{className:"btn btn-primary",onClick:E,disabled:n,children:n?m.jsxs(m.Fragment,{children:[m.jsx(QA,{size:18,className:"animate-spin mr-2"}),"Processing..."]}):"Upload Route"})]}):m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:m.jsx(ku,{size:28,className:"text-primary"})}),l?m.jsxs("div",{className:"mb-4 text-red-500 flex items-center gap-2 font-medium",children:[m.jsx(oE,{size:18}),m.jsx("span",{children:l})]}):m.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Drag & Drop your GPX file here"}),m.jsx("p",{className:"text-text-light mb-6",children:"or click to browse your files"}),m.jsx("button",{className:"btn btn-primary",onClick:S,children:"Browse Files"}),m.jsx("input",{ref:h,type:"file",accept:".gpx",className:"hidden",onChange:w})]})})}),m.jsxs("div",{className:"card p-6",children:[m.jsx("h3",{className:"text-lg font-semibold mb-4",children:"About GPX Files"}),m.jsx("p",{className:"text-text-light mb-4",children:"GPX (GPS Exchange Format) is a common file format for GPS data. You can export GPX files from popular fitness apps and GPS devices such as:"}),m.jsxs("ul",{className:"list-disc pl-6 text-text-light space-y-2",children:[m.jsx("li",{children:"Garmin Connect"}),m.jsx("li",{children:"Strava"}),m.jsx("li",{children:"Komoot"}),m.jsx("li",{children:"MapMyRun"}),m.jsx("li",{children:"RunKeeper"}),m.jsx("li",{children:"Most GPS watches and bike computers"})]})]})]})},LB=()=>{const{theme:e,toggleTheme:t}=ip(),{routes:n}=vp(),{syncStatus:i,isOnline:s,isSyncing:r,performSync:a,markForSync:l}=Xy();tl();const[u,h]=$.useState(!1),[p,_]=$.useState(!1),[y,w]=$.useState(""),[E,S]=$.useState(""),[k,P]=$.useState(()=>{const b=localStorage.getItem("trackers");return b?JSON.parse(b):[]});$.useState(null),xu.useEffect(()=>{localStorage.setItem("trackers",JSON.stringify(k))},[k]);const I=()=>{if(y.length!==4||!/^\d+$/.test(y)){alert("Please enter a valid 4-digit code");return}const b={id:Date.now().toString(),code:y,label:E||`Tracker ${y}`,lastSync:new Date,settings:{updateInterval:60,powerSaveMode:!1,geofenceRadius:100}};P([...k,b]),w(""),S(""),_(!1),l("tracker",b.id)},R=(b,A)=>{P(k.map(O=>O.id===b?{...O,settings:{...O.settings,...A}}:O)),l("tracker",b)},V=b=>{confirm("Are you sure you want to delete this tracker?")&&P(k.filter(A=>A.id!==b))},B=()=>{try{const b=localStorage.getItem("gpxRoutes");if(!b)return"0 KB";const A=new Blob([b]).size;return A<1024?`${A} B`:A<1048576?`${(A/1024).toFixed(1)} KB`:`${(A/1048576).toFixed(1)} MB`}catch{return"Unknown"}},H=()=>{localStorage.removeItem("gpxRoutes"),localStorage.removeItem("trackers"),localStorage.removeItem("pendingSync"),window.location.href="/dashboard"},N=b=>{const O=new Date().getTime()-b.getTime(),D=Math.floor(O/6e4);if(D<1)return"Just now";if(D<60)return`${D}m ago`;const z=Math.floor(D/60);return z<24?`${z}h ago`:`${Math.floor(z/24)}d ago`};return m.jsxs("div",{className:"max-w-2xl mx-auto fade-in",children:[m.jsxs("div",{className:"mb-6",children:[m.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Settings"}),m.jsx("p",{className:"text-text-light",children:"Customize your GPS Route Tracker experience"})]}),m.jsxs("div",{className:"card mb-6",children:[m.jsxs("div",{className:"p-6 border-b border-border",children:[m.jsx("h2",{className:"text-lg font-semibold",children:"Sync Status"}),m.jsx("p",{className:"text-text-light text-sm",children:"Data synchronization with cloud services"})]}),m.jsxs("div",{className:"p-6",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[s?m.jsx(_E,{size:20,className:"text-green-500"}):m.jsx(gE,{size:20,className:"text-red-500"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:s?"Online":"Offline"}),m.jsxs("p",{className:"text-sm text-text-light",children:["Last sync: ",N(i.lastSync)]})]})]}),m.jsxs("button",{onClick:a,disabled:!s||r,className:"btn btn-outline disabled:opacity-50",children:[m.jsx(hE,{size:18,className:r?"animate-spin":""}),r?"Syncing...":"Sync Now"]})]}),i.pending>0&&m.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-3",children:m.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[i.pending," items pending sync"]})}),i.failed>0&&m.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3",children:m.jsxs("p",{className:"text-sm text-red-800 dark:text-red-200",children:[i.failed," items failed to sync"]})})]})]}),m.jsxs("div",{className:"card mb-6",children:[m.jsx("div",{className:"p-6 border-b border-border",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-lg font-semibold",children:"GPS Trackers"}),m.jsx("p",{className:"text-text-light text-sm",children:"Manage your connected tracking devices"})]}),m.jsxs("button",{onClick:()=>_(!0),className:"btn btn-primary",children:[m.jsx(uE,{size:18,className:"mr-2"}),"Add Tracker"]})]})}),m.jsxs("div",{className:"divide-y divide-border",children:[k.map(b=>m.jsxs("div",{className:"p-6",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:m.jsx(sR,{size:20,className:"text-primary"})}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-medium",children:b.label}),m.jsxs("p",{className:"text-sm text-text-light",children:["Code: ",b.code]}),m.jsxs("p",{className:"text-xs text-text-light",children:["Last sync: ",new Date(b.lastSync).toLocaleString()]})]})]}),m.jsx("button",{onClick:()=>V(b.id),className:"p-2 text-text-light hover:text-red-500 transition-colors","aria-label":"Delete tracker",children:m.jsx(rR,{size:18})})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Update Interval (seconds)"}),m.jsx("input",{type:"number",value:b.settings.updateInterval,onChange:A=>R(b.id,{updateInterval:parseInt(A.target.value)}),className:"input-field",min:"30",max:"3600"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Geofence Radius (meters)"}),m.jsx("input",{type:"number",value:b.settings.geofenceRadius,onChange:A=>R(b.id,{geofenceRadius:parseInt(A.target.value)}),className:"input-field",min:"50",max:"1000"})]}),m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("label",{className:"text-sm font-medium",children:"Power Save Mode"}),m.jsx("p",{className:"text-xs text-text-light",children:"Extends battery life by reducing update frequency"})]}),m.jsx("button",{onClick:()=>R(b.id,{powerSaveMode:!b.settings.powerSaveMode}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${b.settings.powerSaveMode?"bg-primary":"bg-gray-200 dark:bg-gray-700"}`,children:m.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${b.settings.powerSaveMode?"translate-x-6":"translate-x-1"}`})})]})]})]},b.id)),k.length===0&&m.jsxs("div",{className:"p-6 text-center text-text-light",children:[m.jsx(Vs,{size:24,className:"mx-auto mb-2"}),m.jsx("p",{children:"No trackers added yet"})]})]})]}),m.jsxs("div",{className:"card mb-6",children:[m.jsxs("div",{className:"p-6 border-b border-border",children:[m.jsx("h2",{className:"text-lg font-semibold",children:"Appearance"}),m.jsx("p",{className:"text-text-light text-sm",children:"Customize the app appearance"})]}),m.jsx("div",{className:"p-6",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[e==="dark"?m.jsx(lE,{size:20,className:"text-text-light"}):m.jsx(pE,{size:20,className:"text-text-light"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:"Theme"}),m.jsxs("p",{className:"text-sm text-text-light",children:["Current: ",e==="dark"?"Dark Mode":"Light Mode"]})]})]}),m.jsx("button",{onClick:t,className:"btn btn-outline","aria-label":"Toggle theme",children:e==="dark"?"Light Mode":"Dark Mode"})]})})]}),m.jsxs("div",{className:"card mb-6",children:[m.jsxs("div",{className:"p-6 border-b border-border",children:[m.jsx("h2",{className:"text-lg font-semibold",children:"Data Management"}),m.jsx("p",{className:"text-text-light text-sm",children:"Manage your route data"})]}),m.jsx("div",{className:"p-6 border-b border-border",children:m.jsx("div",{className:"flex items-center justify-between",children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(BA,{size:20,className:"text-text-light"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:"Storage Usage"}),m.jsxs("p",{className:"text-sm text-text-light",children:[B(),"  ",n.length," routes  ",k.length," trackers"]})]})]})})}),m.jsx("div",{className:"p-6",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(sy,{size:20,className:"text-red-500"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:"Clear All Data"}),m.jsx("p",{className:"text-sm text-text-light",children:"Delete all saved routes, trackers, and reset app"})]})]}),m.jsx("button",{onClick:()=>h(!0),className:"btn bg-red-500 text-white hover:bg-red-600",disabled:n.length===0&&k.length===0,"aria-label":"Clear all data",children:"Clear Data"})]})})]}),m.jsxs("div",{className:"card mb-6",children:[m.jsxs("div",{className:"p-6 border-b border-border",children:[m.jsx("h2",{className:"text-lg font-semibold",children:"About"}),m.jsx("p",{className:"text-text-light text-sm",children:"Application information"})]}),m.jsxs("div",{className:"p-6 flex items-start gap-4",children:[m.jsx("div",{className:"bg-primary text-white p-2.5 rounded-lg mt-1",children:m.jsx(iy,{size:24})}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold text-lg mb-1",children:"GPS Route Tracker"}),m.jsx("p",{className:"text-text-light mb-4",children:"A Progressive Web App for visualizing and analyzing your GPS routes from GPX files with cloud synchronization."}),m.jsxs("div",{className:"text-sm text-text-light",children:[m.jsx("p",{children:"Version 0.1.0"}),m.jsx("p",{children:"Created with React, TypeScript, and Vite"}),m.jsx("p",{children:"Maps powered by Leaflet and OpenStreetMap"}),m.jsx("p",{children:"Cloud sync with REST API integration"})]})]})]})]}),p&&m.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black/50 p-4",children:m.jsxs("div",{className:"card max-w-md w-full p-6 fade-in slide-up",children:[m.jsx("h3",{className:"text-xl font-bold mb-4",children:"Add New Tracker"}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tracker Code"}),m.jsx("input",{type:"text",maxLength:4,value:y,onChange:b=>w(b.target.value.replace(/\D/g,"")),placeholder:"Enter 4-digit code",className:"input-field"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"Label (Optional)"}),m.jsx("input",{type:"text",value:E,onChange:b=>S(b.target.value),placeholder:"e.g., Car Tracker",className:"input-field"})]})]}),m.jsxs("div",{className:"flex gap-3 justify-end mt-6",children:[m.jsx("button",{className:"btn text-text-light hover:bg-background",onClick:()=>_(!1),children:"Cancel"}),m.jsx("button",{className:"btn btn-primary",onClick:I,children:"Add Tracker"})]})]})}),u&&m.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black/50 p-4",children:m.jsxs("div",{className:"card max-w-md w-full p-6 fade-in slide-up",children:[m.jsx("div",{className:"text-red-500 mb-4",children:m.jsx(MB,{size:32})}),m.jsx("h3",{className:"text-xl font-bold mb-2",children:"Clear All Data?"}),m.jsx("p",{className:"text-text-light mb-6",children:"This will permanently delete all your routes, trackers, and reset the app. This action cannot be undone."}),m.jsxs("div",{className:"flex gap-3 justify-end",children:[m.jsx("button",{className:"btn text-text-light hover:bg-background",onClick:()=>h(!1),children:"Cancel"}),m.jsx("button",{className:"btn bg-red-500 text-white hover:bg-red-600",onClick:H,children:"Yes, Clear All Data"})]})]})})]})},MB=({size:e})=>m.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 dark:bg-red-900/20 flex items-center justify-center",children:m.jsx(sy,{size:e*.5,className:"text-red-500"})}),OB=()=>{const[e,t]=$.useState("monthly"),{user:n,userProfile:i}=Fu(),s=[{name:"Free",description:"Perfect for casual users and getting started",price:{monthly:0,yearly:0},popular:!1,features:["Up to 10 GPX routes","100MB storage","Basic route visualization","Export to common formats","Mobile app access","Community support"],limitations:["No advanced analytics","No hardware tracker support","No route sharing","No API access"],cta:"Get Started Free",current:(i==null?void 0:i.plan)==="free"},{name:"Pro",description:"For serious adventurers and professionals",price:{monthly:9.99,yearly:99.99},popular:!0,features:["Unlimited GPX routes","10GB storage","Advanced analytics & insights","Hardware tracker support","Route sharing & collaboration","Priority support","API access","Custom route planning","Offline map downloads","Export to all formats"],limitations:[],cta:"Upgrade to Pro",current:(i==null?void 0:i.plan)==="pro"},{name:"Enterprise",description:"For teams and organizations",price:{monthly:49.99,yearly:499.99},popular:!1,features:["Everything in Pro","Unlimited storage","Team management","Advanced security","Custom integrations","Dedicated support","SLA guarantee","White-label options","Bulk hardware discounts","Custom analytics"],limitations:[],cta:"Contact Sales",current:!1}],r=l=>l===0?"Free":`$${l.toFixed(2)}`,a=(l,u)=>{if(l===0)return 0;const h=l*12;return Math.round((h-u)/h*100)};return m.jsxs("div",{className:"min-h-screen bg-background",children:[m.jsx("nav",{className:"sticky top-0 z-50 bg-card/80 backdrop-blur-md border-b border-border",children:m.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:m.jsxs("div",{className:"flex justify-between items-center h-16",children:[m.jsxs(ve,{to:"/",className:"flex items-center gap-2",children:[m.jsx("div",{className:"bg-primary text-white p-2 rounded-lg",children:m.jsx(Vs,{size:20})}),m.jsx("span",{className:"text-xl font-bold",children:"TracSync"})]}),m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx(ve,{to:"/",className:"text-text-light hover:text-text transition-colors",children:"Home"}),m.jsx(ve,{to:"/dashboard",className:"text-text-light hover:text-text transition-colors",children:"Dashboard"}),n?m.jsx(ve,{to:"/dashboard",className:"btn btn-primary",children:"Go to App"}):m.jsx(ve,{to:"/",className:"btn btn-primary",children:"Sign In"})]})]})})}),m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20",children:[m.jsxs("div",{className:"text-center mb-16",children:[m.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-6",children:"Choose Your Adventure Plan"}),m.jsx("p",{className:"text-xl text-text-light max-w-3xl mx-auto mb-8",children:"Start free and upgrade as your tracking needs grow. All plans include our core features with no hidden fees or long-term commitments."}),m.jsxs("div",{className:"flex items-center justify-center gap-4 mb-8",children:[m.jsx("span",{className:`text-sm ${e==="monthly"?"text-text":"text-text-light"}`,children:"Monthly"}),m.jsx("button",{onClick:()=>t(e==="monthly"?"yearly":"monthly"),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${e==="yearly"?"bg-primary":"bg-gray-200 dark:bg-gray-700"}`,children:m.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${e==="yearly"?"translate-x-6":"translate-x-1"}`})}),m.jsx("span",{className:`text-sm ${e==="yearly"?"text-text":"text-text-light"}`,children:"Yearly"}),e==="yearly"&&m.jsx("span",{className:"bg-accent text-white text-xs px-2 py-1 rounded-full font-medium",children:"Save up to 17%"})]})]}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-16",children:s.map((l,u)=>m.jsxs("div",{className:`card relative overflow-hidden ${l.popular?"ring-2 ring-primary shadow-xl scale-105":""}`,children:[l.popular&&m.jsx("div",{className:"absolute top-0 left-0 right-0 bg-primary text-white text-center py-2 text-sm font-medium",children:"Most Popular"}),m.jsxs("div",{className:`p-6 ${l.popular?"pt-12":""}`,children:[m.jsxs("div",{className:"text-center mb-6",children:[m.jsx("h3",{className:"text-2xl font-bold mb-2",children:l.name}),m.jsx("p",{className:"text-text-light text-sm mb-4",children:l.description}),m.jsxs("div",{className:"mb-4",children:[m.jsx("span",{className:"text-4xl font-bold",children:r(l.price[e])}),l.price[e]>0&&m.jsxs("span",{className:"text-text-light",children:["/",e==="monthly"?"month":"year"]})]}),e==="yearly"&&l.price.monthly>0&&m.jsxs("div",{className:"text-sm text-accent font-medium",children:["Save ",a(l.price.monthly,l.price.yearly),"% annually"]})]}),m.jsxs("div",{className:"space-y-3 mb-6",children:[l.features.map((h,p)=>m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(As,{size:16,className:"text-green-500 mt-0.5 flex-shrink-0"}),m.jsx("span",{className:"text-sm",children:h})]},p)),l.limitations.map((h,p)=>m.jsxs("div",{className:"flex items-start gap-3 opacity-60",children:[m.jsx(Os,{size:16,className:"text-red-500 mt-0.5 flex-shrink-0"}),m.jsx("span",{className:"text-sm",children:h})]},p))]}),m.jsxs("button",{className:`btn w-full ${l.current?"bg-gray-200 dark:bg-gray-700 text-text-light cursor-not-allowed":l.popular?"btn-primary":"btn-outline"}`,disabled:l.current,children:[l.current?"Current Plan":l.cta,!l.current&&m.jsx(Eg,{size:18,className:"ml-2"})]})]})]},l.name))}),m.jsxs("div",{className:"card p-8 mb-16",children:[m.jsx("h2",{className:"text-2xl font-bold text-center mb-8",children:"Feature Comparison"}),m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"w-full",children:[m.jsx("thead",{children:m.jsxs("tr",{className:"border-b border-border",children:[m.jsx("th",{className:"text-left py-4 px-4",children:"Features"}),m.jsx("th",{className:"text-center py-4 px-4",children:"Free"}),m.jsx("th",{className:"text-center py-4 px-4",children:"Pro"}),m.jsx("th",{className:"text-center py-4 px-4",children:"Enterprise"})]})}),m.jsxs("tbody",{className:"divide-y divide-border",children:[m.jsxs("tr",{children:[m.jsx("td",{className:"py-4 px-4 font-medium",children:"GPX Routes"}),m.jsx("td",{className:"text-center py-4 px-4",children:"10"}),m.jsx("td",{className:"text-center py-4 px-4",children:"Unlimited"}),m.jsx("td",{className:"text-center py-4 px-4",children:"Unlimited"})]}),m.jsxs("tr",{children:[m.jsx("td",{className:"py-4 px-4 font-medium",children:"Storage"}),m.jsx("td",{className:"text-center py-4 px-4",children:"100MB"}),m.jsx("td",{className:"text-center py-4 px-4",children:"10GB"}),m.jsx("td",{className:"text-center py-4 px-4",children:"Unlimited"})]}),m.jsxs("tr",{children:[m.jsx("td",{className:"py-4 px-4 font-medium",children:"Hardware Trackers"}),m.jsx("td",{className:"text-center py-4 px-4",children:m.jsx(Os,{size:16,className:"text-red-500 mx-auto"})}),m.jsx("td",{className:"text-center py-4 px-4",children:m.jsx(As,{size:16,className:"text-green-500 mx-auto"})}),m.jsx("td",{className:"text-center py-4 px-4",children:m.jsx(As,{size:16,className:"text-green-500 mx-auto"})})]}),m.jsxs("tr",{children:[m.jsx("td",{className:"py-4 px-4 font-medium",children:"Advanced Analytics"}),m.jsx("td",{className:"text-center py-4 px-4",children:m.jsx(Os,{size:16,className:"text-red-500 mx-auto"})}),m.jsx("td",{className:"text-center py-4 px-4",children:m.jsx(As,{size:16,className:"text-green-500 mx-auto"})}),m.jsx("td",{className:"text-center py-4 px-4",children:m.jsx(As,{size:16,className:"text-green-500 mx-auto"})})]}),m.jsxs("tr",{children:[m.jsx("td",{className:"py-4 px-4 font-medium",children:"API Access"}),m.jsx("td",{className:"text-center py-4 px-4",children:m.jsx(Os,{size:16,className:"text-red-500 mx-auto"})}),m.jsx("td",{className:"text-center py-4 px-4",children:m.jsx(As,{size:16,className:"text-green-500 mx-auto"})}),m.jsx("td",{className:"text-center py-4 px-4",children:m.jsx(As,{size:16,className:"text-green-500 mx-auto"})})]}),m.jsxs("tr",{children:[m.jsx("td",{className:"py-4 px-4 font-medium",children:"Team Management"}),m.jsx("td",{className:"text-center py-4 px-4",children:m.jsx(Os,{size:16,className:"text-red-500 mx-auto"})}),m.jsx("td",{className:"text-center py-4 px-4",children:m.jsx(Os,{size:16,className:"text-red-500 mx-auto"})}),m.jsx("td",{className:"text-center py-4 px-4",children:m.jsx(As,{size:16,className:"text-green-500 mx-auto"})})]})]})]})})]}),m.jsxs("div",{className:"text-center mb-16",children:[m.jsx("h2",{className:"text-3xl font-bold mb-8",children:"Frequently Asked Questions"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 text-left",children:[m.jsxs("div",{className:"card p-6",children:[m.jsx("h3",{className:"font-semibold mb-3",children:"Can I change plans anytime?"}),m.jsx("p",{className:"text-text-light text-sm",children:"Yes! You can upgrade or downgrade your plan at any time. Changes take effect immediately, and we'll prorate any billing differences."})]}),m.jsxs("div",{className:"card p-6",children:[m.jsx("h3",{className:"font-semibold mb-3",children:"What happens to my data if I downgrade?"}),m.jsx("p",{className:"text-text-light text-sm",children:"Your data is never deleted. If you exceed the new plan's limits, you'll have read-only access until you upgrade or remove some routes."})]}),m.jsxs("div",{className:"card p-6",children:[m.jsx("h3",{className:"font-semibold mb-3",children:"Do you offer refunds?"}),m.jsx("p",{className:"text-text-light text-sm",children:"We offer a 30-day money-back guarantee for all paid plans. No questions asked."})]}),m.jsxs("div",{className:"card p-6",children:[m.jsx("h3",{className:"font-semibold mb-3",children:"Is my data secure?"}),m.jsx("p",{className:"text-text-light text-sm",children:"Absolutely. We use enterprise-grade encryption and security measures to protect your data. Your routes are private by default."})]})]})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Ready to Start Tracking?"}),m.jsx("p",{className:"text-xl text-text-light mb-8",children:"Join thousands of adventurers who trust TracSync for their journey analytics."}),m.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[m.jsxs(ve,{to:"/",className:"btn btn-primary text-lg px-8 py-3",children:["Start Free Trial",m.jsx(Eg,{size:20,className:"ml-2"})]}),m.jsx(ve,{to:"/",className:"btn btn-outline text-lg px-8 py-3",children:"Contact Sales"})]})]})]})]})},DB=()=>{const e=[{title:"Dashboard",path:"/",icon:m.jsx(aE,{size:20})},{title:"Upload",path:"/upload",icon:m.jsx(ku,{size:20})},{title:"Settings",path:"/settings",icon:m.jsx(dE,{size:20})}];return m.jsx("footer",{className:"fixed bottom-0 left-0 right-0 h-16 bg-card border-t border-border md:hidden z-10",children:m.jsx("div",{className:"grid grid-cols-3 h-full",children:e.map(t=>m.jsxs(rE,{to:t.path,className:({isActive:n})=>`
              flex flex-col items-center justify-center transition-colors
              ${n?"text-primary":"text-text-light hover:text-text"}
            `,end:t.path==="/",children:[t.icon,m.jsx("span",{className:"text-xs mt-1",children:t.title})]},t.path))})})};function jB(){const[e,t]=$.useState(!1),n=_o(),i=["/","/pricing"].includes(n.pathname);return $.useEffect(()=>{t(!1)},[n.pathname]),m.jsx(oR,{children:m.jsx(BV,{children:i?m.jsxs(Z0,{children:[m.jsx(zr,{path:"/",element:m.jsx(QV,{})}),m.jsx(zr,{path:"/pricing",element:m.jsx(OB,{})})]}):m.jsx(WV,{children:m.jsx(rF,{children:m.jsxs("div",{className:"flex h-screen overflow-hidden",children:[m.jsx(GV,{isOpen:e,setIsOpen:t}),m.jsxs("div",{className:"flex flex-col flex-1 h-screen overflow-y-auto",children:[m.jsx(qV,{onMenuClick:()=>t(!e)}),m.jsx("main",{className:"flex-1 p-4 md:p-6 pb-24 bg-background transition-colors duration-300",children:m.jsxs(Z0,{children:[m.jsx(zr,{path:"/dashboard",element:m.jsx(uF,{})}),m.jsx(zr,{path:"/routes/:id",element:m.jsx(RB,{})}),m.jsx(zr,{path:"/upload",element:m.jsx(NB,{})}),m.jsx(zr,{path:"/settings",element:m.jsx(LB,{})})]})}),m.jsx(DB,{})]})]})})})})})}const AP=()=>{"serviceWorker"in navigator&&window.addEventListener("load",()=>{AP()})};GT(document.getElementById("root")).render(m.jsx($.StrictMode,{children:m.jsx(AA,{children:m.jsx(jB,{})})}));AP();
